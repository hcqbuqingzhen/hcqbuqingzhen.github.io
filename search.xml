<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>git原理和常用操作</title>
      <link href="/2022/10/30/git-yuan-li-he-chang-yong-cao-zuo/"/>
      <url>/2022/10/30/git-yuan-li-he-chang-yong-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="git原理"><a href="#git原理" class="headerlink" title="git原理"></a>git原理</h1><h3 id="使用github实操"><a href="#使用github实操" class="headerlink" title="使用github实操"></a>使用github实操</h3><p>git的使用方法日常工作中已经很熟练了 但是git的原理一直没有认真思考过，结合网上资料学习一下。</p><h3 id="1-暂存区-Stage-和索引-index"><a href="#1-暂存区-Stage-和索引-index" class="headerlink" title="1.暂存区(Stage)和索引(index)"></a>1.暂存区(Stage)和索引(index)</h3><p>所谓的暂存区<code>Stage</code>只是一个简单的索引文件而已。指的是是 <code>.git/index</code>文件，理解了索引更加有助于理解git的内部原理。</p><p>索引文件里面包含的是文件的目录树，像一个虚拟的工作区，在这个虚拟工作区的目录树中，记录了文件名、文件的最后修改时间、文件长度、文件类型以及最重要的SHA-1值，文件的内容并没有存储在其中。而这个SHA-1值就是某个文件的当前版本号。而文件的具体内容是在.git/objects目录下，你会发现这个目录占用空间比较大，因为它存储着当前项目文件各个版本的内容。</p><p>进入objects目录，会看到一些文件夹，先不管info和pack，其他目录名称都是两个英文字母的。每一个文件的每一个版本号都是SHA-1值(40位)，取前2位作为目录名，取后38位作为文件名，所以你会看到这个目录没有具体意义，只是做一个归纳而已，目录下面的文件之间也没什么关系。</p><p>在这个目录下，git将其下文件分为四种类型，其中有两种是 tree 类型和 blob 类型，blob类型文件存储的就是我们运行命令增加的文件加上一个特定的文件头，而 tree 类型文件就相当于我们系统下的目录了，里面存储的是多条记录，每一条记录含有一个指向 blob 或子 tree 对象的 SHA-1 指针，并附有该对象的权限模式 (mode)、类型和文件名信息，它和blob类型对象不一样，存储的并非文件的内容。</p><p>那么，这个SHA-1是在什么时候生成的呢？这就要明白git add命令做了什么工作。</p><p>git add 命令是由两条底层命令实现的：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> hash-object <span class="token operator">&lt;</span>filename<span class="token operator">></span><span class="token function">git</span> update-index <span class="token operator">&lt;</span>filename<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>运行第一条命令，git将会根据新生成的文件产生一个长度为40的SHA-1哈希字符串，并在.git/objects目录下生成一个以该SHA-1的前两个字符命名的子目录，然后在该子目录下，存储刚刚生成的一个新文件，新文件名称是SHA-1的剩下的38个字符。</p><p>第二条命令将会更新.git/index索引，使它指向 objects 目录下新生成的文件。</p><p>新建的文件在index中没有记录，如果也不在.gitignore中，那么git status就能检测到；如果修改了文件，那么文件的最后修改时间和index中的不一样，那么git status就能检测到。。。</p><p>git add不仅更新索引还生成快照文件，减少git add次数可以减小.git占用的空间。</p><p>有时候不想跟踪某些文件，可以将其从index删除掉 git rm –cached filename；当然如果它从未加入到index，那么只需要加入到.gitignore即可。</p><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a><strong>初始化</strong></h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">git</span> init<span class="token comment">#此时 .git 下没有index文件；.git/objects 下只有info和pack。</span><span class="token comment">#创建a.txt，写入一点内容。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101225314087.png"></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">22</span>:40:57<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> status位于分支 master尚无提交未跟踪的文件:  （使用 <span class="token string">"git add &lt;文件>..."</span> 以包含要提交的内容）        a.txt提交为空，但是存在尚未跟踪的文件（使用 <span class="token string">"git add"</span> 建立跟踪）hcq@likepeigen <span class="token punctuation">[</span><span class="token number">22</span>:45:29<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> hcq@likepeigen <span class="token punctuation">[</span><span class="token number">22</span>:45:52<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> status位于分支 master尚无提交要提交的变更：  （使用 <span class="token string">"git rm --cached &lt;文件>..."</span> 以取消暂存）        新文件：   a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101225743708.png"></p><p>此时可以看到 .git/index 文件，并且 objects 目录下多出了文件夹</p><h5 id="再次修改文件"><a href="#再次修改文件" class="headerlink" title="再次修改文件"></a><strong>再次修改文件</strong></h5><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101225648743.png"></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">22</span>:54:40<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> status位于分支 master尚无提交要提交的变更：  （使用 <span class="token string">"git rm --cached &lt;文件>..."</span> 以取消暂存）        新文件：   a.txt尚未暂存以备提交的变更：  （使用 <span class="token string">"git add &lt;文件>..."</span> 更新要提交的内容）  （使用 <span class="token string">"git restore &lt;文件>..."</span> 丢弃工作区的改动）        修改：     a.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">22</span>:57:08<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101225743708.png"></p><p>再次查看 objects 目录，发现又多出了一个目录。到目前为止我们一次都没有提交。</p><h5 id="提交"><a href="#提交" class="headerlink" title="提交"></a><strong>提交</strong></h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">22</span>:57:53<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> commit -m <span class="token string">'first commit'</span><span class="token punctuation">[</span>master（根提交） f40fd50<span class="token punctuation">]</span> first commit <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">2</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span> create mode <span class="token number">100644</span> a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101230110136.png" alt="image-20221101230110136"></p><h5 id="查看"><a href="#查看" class="headerlink" title="查看"></a><strong>查看</strong></h5><p>commit对象</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p f40fd50     tree b11b51d45da18e3a4321083bbeb80710efe104aaauthor 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span> <span class="token number">1667314842</span> +0800committer 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span> <span class="token number">1667314842</span> +0800first commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看到 commit对象指向的是tree对象，没有父级parent即代表第一次提交；</p><p>查看tree对象的存储内容：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:08:45<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p b11b51d       <span class="token number">100644</span> blob 747d212e5e1f72b974452c0b00359eb444109896    a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>查看tree对象指向的文件的内容</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:10:20<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 747d212        <span class="token assign-left variable">aaaaa</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">bbbb</span><span class="token operator">=</span><span class="token number">7</span>%  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101231531563.png" alt="image-20221101231531563"></p><p>可以发现有如下关系</p><p>至此我们看到了 objects 下的三种文件类型，他们的文件名都是 SHA-1：</p><p> blob对象：文件，存储了具体的文件内容。</p><p> tree对象：目录，存储的是目录下的文件和目录的SHA-1值和其他相关信息。 </p><p>commit对象：存储着此次commit的信息。</p><h5 id="再次修改a-txt"><a href="#再次修改a-txt" class="headerlink" title="再次修改a.txt"></a>再次修改<strong>a.txt</strong></h5><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101232159344.png" alt="image-20221101232159344"></p><p>执行git流程</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:19:21<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>                 hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:20:06<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> commit -m <span class="token string">'two commit'</span><span class="token punctuation">[</span>master 51af4b1<span class="token punctuation">]</span> two commit <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">2</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">1</span> deletion<span class="token punctuation">(</span>-<span class="token punctuation">)</span>hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:20:17<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 51af4b1       tree 2d8aca883ac3af54b2d47f447dc32db7223727beparent f40fd509ac732dd5b509796fa8bc9d7eefd32784author 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span> <span class="token number">1667316017</span> +0800committer 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span> <span class="token number">1667316017</span> +0800two commithcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:20:43<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 2d8aca88       <span class="token number">100644</span> blob 9ff67cc14b4bcde3e9b360a61f3fe7979731ba84    a.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:20:54<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 9ff67cc14b         <span class="token assign-left variable">aaaaa</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">bbbb</span><span class="token operator">=</span><span class="token number">7</span> <span class="token assign-left variable">cccc</span><span class="token operator">=</span><span class="token number">9</span>%   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101232501580.png" alt="image-20221101232501580"></p><p>如上所示关系</p><p>比较第一次提交多了字段</p><p>parent f40fd509ac732dd5b509796fa8bc9d7eefd32784</p><p>看到 parent 字段，指向的是上一次的commit对象，于是我们知道commit对象之间是通过parent找到上一次的提交。</p><h5 id="如何理解tree对象"><a href="#如何理解tree对象" class="headerlink" title="如何理解tree对象"></a>如何理解<strong>tree</strong>对象</h5><p>创建 src/java/bb.txt 文件，并编辑。</p><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101232818428.png" alt="image-20221101232818428"></p><p>执行一系列git指令</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:21:13<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>                 hcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:46:02<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> commit -m <span class="token string">'3 commit add b.txt'</span><span class="token punctuation">[</span>master 2ef1dab<span class="token punctuation">]</span> <span class="token number">3</span> commit <span class="token function">add</span> b.txt <span class="token number">1</span> <span class="token function">file</span> changed, <span class="token number">1</span> insertion<span class="token punctuation">(</span>+<span class="token punctuation">)</span> create mode <span class="token number">100644</span> src/java/bb.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:46:38<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 2ef1dab           tree 3bd3eec80ec49c41765a0f8fdb912d858828aa92parent 51af4b163fb369a216c3fb088581a0a3a3152e06author 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span> <span class="token number">1667317598</span> +0800committer 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span> <span class="token number">1667317598</span> +0800<span class="token number">3</span> commit <span class="token function">add</span> b.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:47:21<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 3bd3eec       <span class="token number">100644</span> blob 9ff67cc14b4bcde3e9b360a61f3fe7979731ba84    a.txt040000 tree 0ea1a0c41a51de6336527c8ed9c1db2b25ecff8e    srchcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:47:42<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 0ea1a0c41       040000 tree 6e63a612185ec0f6903041a3947fc93a231110cd    javahcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:48:20<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p 6e63a61218         <span class="token number">100644</span> blob b34916336199bfbdee38687d03dad7efb9b3a51b    bb.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">23</span>:48:41<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> cat-file -p b349163          <span class="token assign-left variable">bbbb</span><span class="token operator">=</span><span class="token number">90</span>%   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221101235056415.png" alt="image-20221101235056415"></p><p>此时发现 tree 就是目录的意思，blob就是文件的意思。当前目录下有多个目录就有多个tree字段。</p><p>至此我们大致可以理解为什么commit之后会多出多个文件，一个是commit对象，一个是当前commit时项目的根目录tree对象，如果有新建目录，还会产生tree对象（而在 git add 的时候则只会产生blob对象），这些tree和blob展示了当前version下的文件目录结构全量信息。</p><pre class="line-numbers language-tips" data-language="tips"><code class="language-tips">比如你修改了一个文件，那么它所处的当前目录以及上面的所有目录都会改变，所以会生成多个 tree 对象原先是 treeA -&gt; treeB -&gt; treeC -&gt; treeD你把 treeD 目录下删了一个文件，就变成了treeA2 -&gt; treeB2 -&gt; treeC2 -&gt; treeD2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>git正是拷贝index的这些目录树和文件的SHA-1等信息到commit对象而生成git的一个提交，即commit对象，commit对象保存的提交完整的记录了当前所有已跟踪文件的快照。所以你所提交的项目来自于index。</p><p><strong>简而言之，文件索引即暂存区，建立了文件和.git/objects目录下的对象实体之间的映射关系。</strong></p><p>通过前面的介绍，我们对 工作区 –&gt; 暂存区的过程已经很清楚了，要知道index只有一个，我们在切换分支，版本，tag等操作的时候，随着HEAD的变化，会对应到不同的commit对象，此时会有一个逆向的过程，那就是从commit对象来恢复index，因为commit对象保存着全量的tree对象，所以这个过程是很明确的，于是index被改写，最后再从index将目录结构和文件检出到工作区，于是我们才能看到指定的commit时的代码。</p><p>下面一张图可以很好的说明关系</p><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221102113038077.png" alt="image-20221102113038077"></p><h3 id="2-HEAD是什么"><a href="#2-HEAD是什么" class="headerlink" title="2.HEAD是什么"></a>2.HEAD是什么</h3><p>HEAD指的就是 <code>.git/HEAD</code> 文件，它存储着当前working directory所处的某次<a href="https://so.csdn.net/so/search?q=commit&spm=1001.2101.3001.7020">commit</a>，打开文件内容为</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ref: refs/heads/master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>refs目录下存储的是仓库和tags，每个仓库下又有分支，每个tags下又有tag，一个tag对应的某次commit。</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">存储 <span class="token builtin class-name">local</span> master 分支的最新commit对象的SHA-1refs/heads/master存储远程仓库 master 分支的最新commit对象的SHA-1refs/remotes/origin/master存储tag的SHA-1tags/xxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/hcqbuqingzhen/picGoimg/main/picGoimg/faceimgimage-20221102114055945.png" alt="image-20221102114055945"></p><p><strong>HEAD 是当前分支引用的指针，</strong>它总是指向某次commit，默认是上一次的commit。 这表示 HEAD 将是下一次提交的父结点。 通常，可以把 HEAD 看做你的上一次提交的快照。当然HEAD的指向是可以改变的，比如你提交了commit，切换了仓库，分支，或者回滚了版本，切换了tag等。</p><h3 id="3-git-diff详解"><a href="#3-git-diff详解" class="headerlink" title="3.git diff详解"></a>3.git diff详解</h3><h4 id="比较工作区和暂存区的差别"><a href="#比较工作区和暂存区的差别" class="headerlink" title="比较工作区和暂存区的差别"></a>比较工作区和暂存区的差别</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> 或者<span class="token function">git</span> <span class="token function">diff</span> filename<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="比较暂存区和本库的差别"><a href="#比较暂存区和本库的差别" class="headerlink" title="比较暂存区和本库的差别"></a>比较暂存区和本库的差别</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> --cached 或者<span class="token function">git</span> <span class="token function">diff</span> --cached  filename<span class="token punctuation">(</span>Git <span class="token number">1.6</span>.1 及更高版本还允许使用 <span class="token function">git</span> <span class="token function">diff</span> --staged，效果是相同的<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="比较工作区和版本库的差别"><a href="#比较工作区和版本库的差别" class="headerlink" title="比较工作区和版本库的差别"></a>比较工作区和版本库的差别</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> HEAD <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="比较两个分支上最新的提交"><a href="#比较两个分支上最新的提交" class="headerlink" title="比较两个分支上最新的提交"></a>比较两个分支上最新的提交</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> topic master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="比较上次commit和上上次commit"><a href="#比较上次commit和上上次commit" class="headerlink" title="比较上次commit和上上次commit"></a>比较上次commit和上上次commit</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> HEAD^ HEAD<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="比较两个具体commit之间的差异"><a href="#比较两个具体commit之间的差异" class="headerlink" title="比较两个具体commit之间的差异"></a>比较两个具体commit之间的差异</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> 818c5faf28d0a0e5c8133dbd77dd24e6e70db9bf 2e1b4bced0f0ce2c20362789be2878b36c6910f7<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="自从某个版本之后都改的了什么"><a href="#自从某个版本之后都改的了什么" class="headerlink" title="自从某个版本之后都改的了什么"></a>自从某个版本之后都改的了什么</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> <span class="token punctuation">[</span>version tag<span class="token punctuation">]</span><span class="token function">git</span> <span class="token function">diff</span> f2b85bf7f7516a6a6a0768e44266d09414b03a2e<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="比较两个分支"><a href="#比较两个分支" class="headerlink" title="比较两个分支"></a>比较两个分支</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> <span class="token function">diff</span> <span class="token punctuation">[</span>branchA<span class="token punctuation">]</span>…<span class="token punctuation">[</span>branchB<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>git-diff在idea中常用来比较不同。</p><h3 id="4-git-log指令"><a href="#4-git-log指令" class="headerlink" title="4.git log指令"></a>4.git log指令</h3><p>测试</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">commit 18331acae3fe86fa64d9722731381b197e4f9cb7 <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span>Author: 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span>Date:   Tue Nov <span class="token number">1</span> <span class="token number">23</span>:58:51 <span class="token number">2022</span> +0800    <span class="token number">4</span> commit inster  a.txtcommit 2ef1dab35250997cba7c360b85e54c17e13f3cc3Author: 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span>Date:   Tue Nov <span class="token number">1</span> <span class="token number">23</span>:46:38 <span class="token number">2022</span> +0800    <span class="token number">3</span> commit <span class="token function">add</span> b.txtcommit 51af4b163fb369a216c3fb088581a0a3a3152e06Author: 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span>Date:   Tue Nov <span class="token number">1</span> <span class="token number">23</span>:20:17 <span class="token number">2022</span> +0800    two commitcommit f40fd509ac732dd5b509796fa8bc9d7eefd32784Author: 韩长庆 <span class="token operator">&lt;</span><span class="token number">1316662395</span>@qq.com<span class="token operator">></span>Date:   Tue Nov <span class="token number">1</span> <span class="token number">23</span>:00:42 <span class="token number">2022</span> +0800    first commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="git-log-–oneline-简化输出"><a href="#git-log-–oneline-简化输出" class="headerlink" title="git log –oneline 简化输出"></a>git log –oneline 简化输出</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">18331ac <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> <span class="token number">4</span> commit inster  a.txt2ef1dab <span class="token number">3</span> commit <span class="token function">add</span> b.txt51af4b1 two commitf40fd50 first commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="指定输出行数"><a href="#指定输出行数" class="headerlink" title="指定输出行数"></a>指定输出行数</h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">git</span> log --pretty<span class="token operator">=</span>oneline -3818c5faf28d0a0e5c8133dbd77dd24e6e70db9bf <span class="token punctuation">(</span>HEAD -<span class="token operator">></span> master<span class="token punctuation">)</span> aaaaaaa2e1b4bced0f0ce2c20362789be2878b36c6910f7 <span class="token function">add</span> t48262ea4e39ea80dc56056a667e9dbdcd235efc08 <span class="token function">add</span> t3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="限定指定日期范围的log"><a href="#限定指定日期范围的log" class="headerlink" title="限定指定日期范围的log"></a>限定指定日期范围的log</h5><pre class="line-numbers language-none"><code class="language-none">$ git log --pretty&#x3D;oneline --after&#x3D;&#39;12-8-2020 00:00:00&#39;818c5faf28d0a0e5c8133dbd77dd24e6e70db9bf (HEAD -&gt; master) aaaaaaa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="查看某次提交的改动"><a href="#查看某次提交的改动" class="headerlink" title="查看某次提交的改动"></a>查看某次提交的改动</h5><p><code>git show</code>命令同<code>git log -p</code>输出类似，只不过它只显示一个commit的内容，如果不指定commit hash, 它默认输出HEAD指向commit的内容.</p><p>指定某个提交</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">git</span> show 6f43203cf463dc5320916f96abef0f1ad63428fd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>大部分情况下，idea上的git log更加直观和好用。</strong></p><h3 id="5-git-reset详解"><a href="#5-git-reset详解" class="headerlink" title="5.git reset详解"></a>5.git reset详解</h3><p>HEAD是指向某个<a href="https://so.csdn.net/so/search?q=commit&spm=1001.2101.3001.7020">commit</a>的指针，既然如此，那么我们就可以操作HEAD来使其指向特定的commit。</p><p>要知道每个commit对象保存着全量的tree结构，从这个tree可以恢复与之对应的index，而从index可以检出此时的文件到working directory。所以我们操作HEAD之后会有附加的功能，那就是恢复index，恢复working directory。所以 git reset 也就伴随有“回滚”，“撤销”的能力。</p><p>主要参数</p><pre class="line-numbers language-none"><code class="language-none">--soft                reset only HEAD 设置HEAD--mixed               reset HEAD and index 设置HEAD，重置index--hard                reset HEAD, index and working tree 设置HEAD，重置index，检出working directory<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="从暂存区取消刚才add的文件"><a href="#从暂存区取消刚才add的文件" class="headerlink" title="从暂存区取消刚才add的文件"></a>从暂存区取消刚才add的文件</h4><pre class="line-numbers language-none"><code class="language-none">git reset HEAD &lt;file&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> git ls-files</p><p>git 处于clean状态，查看暂存区种有那些文件</p><h5 id="场景1"><a href="#场景1" class="headerlink" title="场景1"></a>场景1</h5><p>修改 a.txt 文件，并 add，此时为带提交的状态，如果想 t1.txt 恢复到 Unstage 状态，可以使用如下命令撤销此次 add 。</p><pre class="line-numbers language-none"><code class="language-none">git reset HEAD a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="场景2"><a href="#场景2" class="headerlink" title="场景2"></a>场景2</h5><p>在一个新项目的时候，我们往往会先将不需要跟踪的文件加入到 .gitignore 中，但是它的弊端在于只要是存在于 Index 中的文件，即使你将它加入到 .gitignore 中，它还是会被跟踪的，所以这个 .gitignore 只适合用在初始化项目的时候。</p><p>假设你第一次将某个文件add，还没有commit，此时你发现这个文件应该被 ignore ，此时可以使用 git reset HEAD filename 来将其移出index。然后在 .gitignore 中标记。可见这个命令依然比较鸡肋。</p><p>先不管它有没有价值，来思考一下它的原理是什么？</p><p>还是回到上面的解释，git reset HEAD filename 虽然没有移动HEAD，但是git还是会取执行后续的操作，因为默认模式是 –mixed ，也就是需要恢复 index，所以 index 就被恢复到上一次commit时的状态了。</p><p>从 index 中删除某个文件的命令应该是 git rm –cached filename</p><h4 id="版本回滚"><a href="#版本回滚" class="headerlink" title="版本回滚"></a>版本回滚</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">HEAD表示当前版本HEAD^上一个版本HEAD^^上上一个版本HEAD~100上100个版本，通用的版本号  指定版本<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>结合 git log 和 git reflog 指令 可任意在不同版本之间切换</p><h3 id="6-git-checkout"><a href="#6-git-checkout" class="headerlink" title="6.git checkout"></a>6.git checkout</h3><p>checkout 本意是检出的意思，也就是将某次commit的状态检出到工作区；</p><p>所以它的过程是先将<code>HEAD</code>指向某个分支的最近一次commit，然后从commit恢复index，最后从index恢复工作区。</p><h4 id="切换分支"><a href="#切换分支" class="headerlink" title="切换分支"></a>切换分支</h4><p>git checkout branchname</p><p><code>git checkout -b branchname</code> 创建并切换到新的分支.<br>这个命令是将<code>git branch newbranch</code>和<code>git checkout newbranch</code>合在一起的结果。</p><h4 id="放弃修改"><a href="#放弃修改" class="headerlink" title="放弃修改"></a>放弃修改</h4><p>如果不指定切换到哪个分支，那就是<strong>切换到当前分支</strong>，虽然HEAD的指向没有变化，但是后面的两个恢复过程依然会执行，于是就可以理解为放弃index和工作区的变动。</p><p><strong>但是出于安全考虑 git 会保持 index 的变动不被覆盖。</strong></p><h5 id="只放弃工作区的改动，index-保持不变，"><a href="#只放弃工作区的改动，index-保持不变，" class="headerlink" title="只放弃工作区的改动，index 保持不变，"></a>只放弃工作区的改动，index 保持不变，</h5><p>其实就是从当前 index 恢复 工作区：</p><p>放弃工作区中全部的修改<br><code>git checkout .</code></p><p>放弃工作区中某个文件的修改：<br><code>git checkout -- filename</code></p><p><strong>相当于从最后一次add处覆盖。</strong></p><h5 id="强制放弃-index-和-工作区-的改动："><a href="#强制放弃-index-和-工作区-的改动：" class="headerlink" title="强制放弃 index 和 工作区 的改动："></a>强制放弃 index 和 工作区 的改动：</h5><p>git checkout -f</p><p>这是不可逆的操作，会直接覆盖。<strong>相当于从commit处覆盖。</strong></p><h3 id="7-git-rm"><a href="#7-git-rm" class="headerlink" title="7. git rm"></a>7. git rm</h3><p>git rm 命令可以删除文件，那么它删除的是 index 还是 工作区呢，和手动删除文件有什么区别呢？</p><p>Remove files from the working tree and from the index</p><p>说明 git rm 既能删除 Index 也能删除工作区的文件。</p><p>只要某个文件在 index 或者 工作区 有变动都是不能删除的，必须加上 -f 参数。</p><p>对于没有变动的文件</p><p>使用git rm 可直接删除，指的是index中和文件本身都会删除。</p><p>另外，–cached 参数会将文件从 index 删除，变成 Untracked 状态，依然是没有提交，接着上面的场景。</p><p>实验见下</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:42:47<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">rm</span> a.txt错误：如下文件有本地修改：    a.txt（使用 --cached 保留本地文件，或用 -f 强制删除）hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:43:30<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>   hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:44:13<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">rm</span> a.txt错误：下列文件索引中有变更    a.txt（使用 --cached 保留本地文件，或用 -f 强制删除）hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:44:18<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> checkout -fhcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:45:08<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">rm</span> a.txt   <span class="token function">rm</span> <span class="token string">'a.txt'</span>hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:45:15<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> status  位于分支 master要提交的变更：  （使用 <span class="token string">"git restore --staged &lt;文件>..."</span> 以取消暂存）        删除：     a.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:45:24<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> log          hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:45:32<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:45:32<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % git-loghcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:46:35<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> checkout -fhcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:46:39<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> <span class="token function">rm</span> --cached a.txt<span class="token function">rm</span> <span class="token string">'a.txt'</span>hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:47:11<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> status           位于分支 master要提交的变更：  （使用 <span class="token string">"git restore --staged &lt;文件>..."</span> 以取消暂存）        删除：     a.txt未跟踪的文件:  （使用 <span class="token string">"git add &lt;文件>..."</span> 以包含要提交的内容）        a.txthcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:47:22<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master *<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> checkout -f      hcq@likepeigen <span class="token punctuation">[</span><span class="token number">15</span>:47:45<span class="token punctuation">]</span> <span class="token punctuation">[</span>~/code/myself/gittest/test<span class="token punctuation">]</span> <span class="token punctuation">[</span>master<span class="token punctuation">]</span>-<span class="token operator">></span> % <span class="token function">git</span> status位于分支 master无文件要提交，干净的工作区<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="8-一般指令"><a href="#8-一般指令" class="headerlink" title="8. 一般指令"></a>8. 一般指令</h3><p>git库所在的文件夹中的文件大致有4种状态<br><strong>Untracked</strong><br>未跟踪，此文件在文件夹中，但并没有加入到git库，不参与版本控制。通过 git add 将状态变为 Staged。</p><p><strong>Modified</strong><br>文件已修改，仅仅是修改，并没有进行其他的操作。这个文件也有两个去处，通过<br>git add filename 可进入暂存 Staged 状态，<br>git checkout – filename 则丢弃修改，返回到 Unmodify 状态，也就是从库中取出文件，覆盖当前修改。</p><p><strong>Staged</strong><br>暂存状态。<br>可以执行 git reset HEAD filename 取消暂存，文件状态为 Untracked 状态。<br>可以执行 git commit 将修改同步到库中，这时库中的文件和本地文件又变为一致，文件为 Unmodify 状态。</p><p><strong>Unmodify</strong><br>文件已经入库，未修改，即版本库中的文件快照内容与文件夹中完全一致，这种类型的文件有两种去处。<br>如果它被修改而变为 Modified；<br>可以使用 git rm filename 移出版本库，并删除文件，但是还没提交！！<br>可以使用 git rm –cached filename 移出版本库，成为 Untracked，但是还没提交！！</p><h4 id="其他指令"><a href="#其他指令" class="headerlink" title="其他指令"></a>其他指令</h4><h6 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h6><blockquote><p>查看仓库的操作历史</p></blockquote><h6 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h6><blockquote><p>为本地仓库创建tag</p></blockquote><h6 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h6><blockquote><p>git remote add [alias] [url]<br>添加一个新的remote repo，一般一个本地仓库对应一个远程仓库，并且使用 origin 作为名称，即<br>git remote add origin url</p><p>如果别名alias已经存在了则会报错，可以先删除再来加，也可以直接修改url。<br>远程仓库是存储在 .git/refs/remotes 目录下。</p><p>git remote rm [alias]<br>删除一个存在的remote alias。</p><p>git remote rename [old-alias] [new-alias]<br>重命名</p><p>git remote set-url [alias] [url]<br>更新url. 可以加上—push和fetch参数,为同一个别名set不同的存取地址</p></blockquote><h6 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h6><blockquote><p>download new branches and data from a remote repository.</p><p>拉取指定远程仓库上的指定分支的代码，比如 origin master。</p><p>首先会对比本地的 .git/refs/remotes/origin/master 文件中保存的 commitID 和线上的 master 分支的最新的 commitID 对比，如果不一致，则将这些文件下载下来。下载下来的文件依然放在 .git/objects 下面，然后更新 .git/refs/remotes/origin/master 文件到最新的 commitID。</p><p>可以git fetch [alias]取某一个远程repo,也可以git fetch –all取到全部repo。<br>它们和本地分支一样(可以看diff,log等,也可以merge到其他分支),但是Git不允许你checkout到它们</p></blockquote><h6 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h6><blockquote><p>push your new branches and data to a remote repository.</p><p>git push [alias] [branch]<br>将会把当前分支merge到alias上的[branch]分支.如果分支已经存在,将会更新,如果不存在,将会添加这个分支.<br>如果有多个人向同一个remote repo push代码, Git会首先在你试图push的分支上运行git log,检查它的历史中是否能看到server上的branch现在的tip,如果本地历史中不能看到server的tip,说明本地的代码不是最新的,Git会拒绝你的push,让你先fetch,merge,之后再push,这样就保证了所有人的改动都会被考虑进来。</p><p>第一次push的时候一般加上 -u 参数，这样push成功后，Git会在你本地将当前提交的分支和 [alias] [branch] 做一个绑定，这样以后的 push, pull, status 操作就默认指向了 [alias] [branch]，而不用每次都去指定</p></blockquote><h6 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h6><blockquote><p>git branch可以用来列出分支,创建分支和删除分支.<br>git branch -v可以看见每一个分支的最后一次提交.<br>git branch: 列出本地所有分支,当前分支会被星号标示出.<br>git branch (branchname): 创建一个新的分支(当你用这种方式创建分支的时候,分支是基于你的上一次提交建立的).<br>git branch -d (branchname): 删除一个分支.<br>删除remote的分支:<br>git push (remote-name) :(branch-name): delete a remote branch.<br>这个是因为完整的命令形式是:<br>git push remote-name local-branch:remote-branch<br>而这里local-branch的部分为空,就意味着删除了remote-branch</p></blockquote><h6 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h6><blockquote><p>把一个分支merge进当前的分支.<br>git merge [alias] [branch]</p><p>如果出现冲突,需要手动修改,可以用git mergetool.<br>解决冲突的时候可以用到git diff,解决完之后用git add添加,即表示冲突已经被resolved</p></blockquote><h6 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h6><p>把本地未push的分叉提交历史整理成直线。<br>rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。</p><h3 id="9-分支管理"><a href="#9-分支管理" class="headerlink" title="9 分支管理"></a>9 分支管理</h3><h6 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h6><p>查看分支的情况，前面带*号的就是当前分支<br>git branch</p><p>创建分支<br>git branch 分支名</p><p>删除分支<br>git branch -d 分支名</p><p>checkout<br>切换当前分支到指定分支<br>git checkout 分支名</p><p>创建分支并切换到创建的分支<br>git checkout -b 分支名</p><h6 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h6><p>合并某分支的内容到当前分支<br>git merge 分支名</p><p>如果两个分支同时进行了同一个文件的修改和提交，在merge时就会产生冲突，首先要手动打开文件解决冲突，再提交。</p><p>查看分支合并图<br>git log –graph</p><p>红色和绿色的虚线分别代表两个分支。</p><h6 id="git-merge-的原理："><a href="#git-merge-的原理：" class="headerlink" title="git merge 的原理："></a>git merge 的原理：</h6><p>我们知道分支文件中存储的是当前分支的最新一次提交的commitID，也就是版本号，而每一个版本号对应的 objects 文件中都存储着 parent 版本号（首次提交没有 parent），以此将版本串起来，每一个分支都有自己的串。</p><p>比如将分支A合并到分支B，其实就意味着使分支B和分支A的内容完全一致，那么要达到这个目的最快的方式就是将分支A中的最新的commitID复制到分支B的文件中，这样分支B也就拥有了分支A的串，就达到了合并的效果。</p><p>我们发现只要修改了同一个文件的同一行就会产生冲突，此时需要手动解决冲突。</p><h3 id="10-git-stash"><a href="#10-git-stash" class="headerlink" title="10 git stash"></a>10 git stash</h3><p>git stash 会保存工作区和暂存区的内容。</p><p>git stash 依然会在object中保存对象文件，类似commit。</p><p>无论在工作区还是暂存区，调用git stash 命令都会使当前工作目录的文件回到head。</p><p>调用git stash pop会使暂存的文件返回<strong>工作区</strong>，需要重新add.</p><h4 id="查看-1"><a href="#查看-1" class="headerlink" title="查看"></a>查看</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">列出栈中的所有内容$ <span class="token function">git</span> stash liststash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>: On master: cache master显示某个隐藏的具体内容$ <span class="token function">git</span> stash show stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>q/w/t4.txt <span class="token operator">|</span> <span class="token number">1</span> +t1.txt     <span class="token operator">|</span> <span class="token number">3</span> ++-<span class="token number">2</span> files changed, <span class="token number">3</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span>, <span class="token number">1</span> deletion<span class="token punctuation">(</span>-<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">调用任意一个隐藏内容，但是并没有删除栈中的记录$ <span class="token function">git</span> stash apply stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>取出栈中的第一个内容（栈是先进后出），且删除栈中的记录$ <span class="token function">git</span> stash pop从最新的stash创建分支$ <span class="token function">git</span> stash branch应用场景：当储藏了部分工作，暂时不去理会，继续在当前分支进行开发，后续想将stash中的内容恢复到当前工作目录时，如果是针对同一个文件的修改（即便不是同行数据），那么可能会发生冲突，恢复失败，这里通过创建新的分支来解决。可以用于解决stash中的内容和当前目录的内容发生冲突的情景。删除某一个记录$ <span class="token function">git</span> stash drop stash@<span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span>清除全部记录$ <span class="token function">git</span> stash <span class="token function">clear</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果从stash中恢复的内容和当前目录中的内容发生了冲突，也就是说，恢复的内容和当前目录修改了同一行的数据，那么会提示报错，需要解决冲突，可以通过创建新的分支来解决冲突。</p>]]></content>
      
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日志处理之ELK</title>
      <link href="/2022/06/23/elk-filebeat-da-jian/"/>
      <url>/2022/06/23/elk-filebeat-da-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="日志处理之ELK"><a href="#日志处理之ELK" class="headerlink" title="日志处理之ELK"></a>日志处理之ELK</h1><p>之前的项目中日志,开发环境下暂时还是在linux服务器上查看文件,但由于也是采用了微服务的方式，即使是一个服务背后也是一个集群的机器在运行，如果逐台机器去查看日志显然是很费力的，也不现实。我想项目上线之后可能会重新处理一下日志.依然要放到es中,所以这部分也要有所准备.</p><p>elk是什么<br>ELK其实是Elasticsearch，Logstash 和 Kibana三个产品的首字母缩写，这三款都是开源产品。<br><a href="https://imgtu.com/i/jPV4PI"><img src="https://s1.ax1x.com/2022/06/23/jPV4PI.png" alt="jPV4PI.png"></a><br>用这三个组件可以搭建日志系统.</p><h2 id="1-搭建es"><a href="#1-搭建es" class="headerlink" title="1. 搭建es"></a>1. 搭建es</h2><p>实体机</p><p>首先，到<a href="https://www.elastic.co/cn/downloads/elasticsearch">官网</a>下载安装包，然后使用tar -zxvf命令解压。</p><p><a href="https://imgtu.com/i/jPZgS0"><img src="https://s1.ax1x.com/2022/06/23/jPZgS0.png" alt="jPZgS0.png"></a></p><p>如果本身没有用root账户,也不用修改配置文件的.<br>./bin/elasticsearch -d</p><p>如果用了root账户,需要修改配置文件</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">#cluster.name: es-application#node.name: node-1#对所有IP开放network.host: 0.0.0.0#HTTP端口号http.port: 9200#elasticsearch数据文件存放目录path.data: &#x2F;path&#x2F;elasticsearch-7.15.2&#x2F;data#elasticsearch日志文件存放目录path.logs: &#x2F;path&#x2F;elasticsearch-7.15.2&#x2F;logs# path 修改成es所在目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>还需要创建一个账户用于启动es</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 创建用户useradd es# 设置密码passwd es# 赋予用户权限chown -R es:es &#x2F;path&#x2F;elasticsearch-7.15.2&#x2F;# 切换用户su yehongzhi# 启动 -d表示后台启动.&#x2F;bin&#x2F;elasticsearch -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>访问9200端口 看到如下即为成功<br><a href="https://imgtu.com/i/jPeyHe"><img src="https://s1.ax1x.com/2022/06/23/jPeyHe.png" alt="jPeyHe.png"></a></p><p>上述没有密码<br>若要为es加入密码<br>配置文件加入</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">xpack.security.enabled: truexpack.license.self_generated.type: basicxpack.security.transport.ssl.enabled: true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>启动es后执行</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">elasticsearch-setup-passwords interactive <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>按照提示为几个用户设置密码,分别为es,logstash,beats,kibana.</p><h2 id="2-搭建Kibana"><a href="#2-搭建Kibana" class="headerlink" title="2. 搭建Kibana"></a>2. 搭建Kibana</h2><p>下载<br><a href="https://www.elastic.co/cn/downloads/past-releases/kibana-7-15-2">kibana-7-15-2</a></p><p>解压</p><p><a href="https://imgtu.com/i/jPuWC9"><img src="https://s1.ax1x.com/2022/06/23/jPuWC9.png" alt="jPuWC9.png"></a></p><p>修改配置文件</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server.port: 5601server.host: &quot;localhost&quot;elasticsearch.hosts: [&quot;http:&#x2F;&#x2F;localhost:9200&quot;]# 这两项如es设置了密码配置elasticsearch.username: &quot;kibana_system&quot;elasticsearch.password: &quot;elas123&quot;i18n.locale: &quot;zh_CN&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>增加用户</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 创建用户useradd kibana# 设置密码passwd kibana# 赋予用户权限chown -R kibana:kibana &#x2F;path&#x2F;kibana&#x2F;#切换用户su kibana#非后台启动，关闭shell窗口即退出.&#x2F;bin&#x2F;kibana#后台启动nohup .&#x2F;bin&#x2F;kibana &amp;#实际上如果本身就不是root用户上面两步都不用做,直接nohup .&#x2F;bin&#x2F;kibana &amp; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>启动后在浏览器打开<a href="http://localhost:5601，可以看到kibana的web交互界面：">http://localhost:5601，可以看到kibana的web交互界面：</a></p><h2 id="3-搭建logstash"><a href="#3-搭建logstash" class="headerlink" title="3. 搭建logstash"></a>3. 搭建logstash</h2><p><a href="https://www.elastic.co/cn/downloads/past-releases/logstash-7-15-2">logstash 下载</a></p><p>自定义配置文件</p><p>logstash-sample.conf</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">input &#123;  file&#123;    path &#x3D;&gt; [&#39;&#x2F;usr&#x2F;local&#x2F;user&#x2F;*.log&#39;]    type &#x3D;&gt; &#39;user_log&#39;    start_position &#x3D;&gt; &quot;beginning&quot;  &#125;&#125;output &#123;  elasticsearch &#123;    hosts &#x3D;&gt; [&quot;http:&#x2F;&#x2F;localhost:9200&quot;]    index &#x3D;&gt; &quot;user-%&#123;+YYYY.MM.dd&#125;&quot;  &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>input表示输入源，output表示输出，还可以配置filter过滤，架构如下：</p><p><a href="https://imgtu.com/i/jP3ruR"><img src="https://s1.ax1x.com/2022/06/23/jP3ruR.png" alt="jP3ruR.png"></a></p><p>配置好之后就能在es中查看.</p><p>上述配置文件是通过文件输入,有时我们希望通过网络直接传输到logstash</p><p>配置文件可以如下.</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">input &#123;    tcp &#123;    mode &#x3D;&gt; &quot;server&quot;    #这个需要配置成本机IP，不然logstash无法启动    host &#x3D;&gt; &quot;127.0.0.1&quot;    #端口号    port &#x3D;&gt; 4567    codec &#x3D;&gt; json_lines  &#125;&#125;filter &#123;      json &#123;          source &#x3D;&gt; &quot;message&quot;          remove_field &#x3D;&gt; [&quot;message&quot;]      &#125;  &#125;  output &#123;    elasticsearch &#123;          hosts &#x3D;&gt; [&quot;localhost:9200&quot;]        action&#x3D;&gt;&quot;index&quot;        #ES索引名称（自己定义的）        #index &#x3D;&gt; &quot;%&#123;[appname]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;         index &#x3D;&gt; &quot;log&quot;        user &#x3D;&gt; &quot;elastic&quot;        password &#x3D;&gt; &quot;elas123&quot;    &#125;     stdout&#123;       codec &#x3D;&gt; json_lines     &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>同时服务中也要加入依赖</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>net.logstash.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>logstash-logback-encoder<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>logback-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>logback.xml文件<br>增加如下文件</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--发布到logstash的日志--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stash<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>net.logstash.logback.appender.LogstashTcpSocketAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--  这是是logstash服务器地址 端口--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>destination</span><span class="token punctuation">></span></span>127.0.0.1:4567<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>destination</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--输出的格式，推荐使用这个--></span>        <span class="token comment">&lt;!-- 日志输出编码 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>providers</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>                        &#123;                        "severity": "%level",                        "service": "$&#123;springAppName:-&#125;",                        "trace": "%X&#123;X-B3-TraceId:-&#125;",                        "span": "%X&#123;X-B3-SpanId:-&#125;",                        "exportable": "%X&#123;X-Span-Export:-&#125;",                        "pid": "$&#123;PID:-&#125;",                        "thread": "%thread",                        "class": "%logger&#123;40&#125;",                        "msg": "%message"                        &#125;                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>providers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对应的java服务</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token class-name">RedisDistributedLockFactory</span> factory<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/demo"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBeanInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"测试干阿嘎嘎嘎嘎"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"测试干阿嘎嘎嘎嘎"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"测试干阿嘎嘎嘎嘎"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"测试干阿嘎嘎嘎嘎"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"测试干阿嘎嘎嘎嘎"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//bean 的名字由方法名确定</span>        <span class="token class-name">BeanList</span> beanList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BeanList</span><span class="token punctuation">)</span>applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"getBeanList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Mybean</span> mybean <span class="token operator">:</span> beanList<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mybean<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://imgtu.com/i/jPDWwD"><img src="https://s1.ax1x.com/2022/06/23/jPDWwD.png" alt="jPDWwD.png"></a><br>调用文件 会发现es中有数据了.es会自动的根据传入的文档创建索引.</p><h2 id="4-还有一个组件filebeat"><a href="#4-还有一个组件filebeat" class="headerlink" title="4. 还有一个组件filebeat"></a>4. 还有一个组件filebeat</h2><blockquote><p>如果Logstash需要添加插件，那就全部服务器的Logstash都要添加插件，扩展性差。所以就有了FileBeat，占用资源少，只负责采集日志，不做其他的事情，这样就轻量级，把Logstash抽出来，做一些滤处理之类的工作。</p></blockquote><p><a href="https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.9.3-linux-x86_64.tar.gz">filebeat下载</a></p><p>修改filebeat.yml</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">#输入源filebeat.inputs:- type: log  enabled: true  paths:    - &#x2F;path&#x2F;*.log#输出，Logstash的服务器地址output.logstash:  hosts: [&quot;localhost:5044&quot;]#输出，如果直接输出到ElasticSearch则填写这个#output.elasticsearch:  #hosts: [&quot;localhost:9200&quot;]  #protocol: &quot;https&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Logstash的配置文件logstash-sample.conf</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">#输入源改成beatsinput &#123;  beats &#123;    port &#x3D;&gt; 5044    codec &#x3D;&gt; &quot;json&quot;  &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后启动FileBeat：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#后台启动命令nohup .&#x2F;filebeat -e -c filebeat.yml &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1 &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>再启动Logstash：</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#后台启动命令nohup .&#x2F;bin&#x2F;logstash -f &#x2F;usr&#x2F;logstash-7.15.2&#x2F;config&#x2F;logstash-sample.conf &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>判断启动成功呢，看Logstash应用的/logs目录下的logstash-plain.log日志文件.</p><p>小结:<br>es和Logstash，Kibana可做日志收集,但也不仅仅这样.</p><ol><li>可以采用logback直接发送到Logstash.</li><li>也可以吧日志都发送到redis,然后在在Logstash采集,到es.</li><li>也可以卡夫卡生产日志,直接消费到es.</li><li>卡夫卡消费到Logstash,然后到es.</li></ol><p>总之不同场景下有不同考量,一种方式达到了瓶颈可以采用另一种.</p>]]></content>
      
      
      
        <tags>
            
            <tag> log </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux下navicat破解</title>
      <link href="/2022/06/20/linux-xia-navicat-po-jie/"/>
      <url>/2022/06/20/linux-xia-navicat-po-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="linux下navicat破解"><a href="#linux下navicat破解" class="headerlink" title="linux下navicat破解"></a>linux下navicat破解</h1><blockquote><p>linux下的数据库管理软件我一直使用着datagrip将就着,可这玩意太耗费内存了,开一个相当于多开一个idea实例,而且用起来也不舒服.查阅了一些资料,总结了在linux的安装方法.</p></blockquote><h2 id="所需工具navicat-keygen"><a href="#所需工具navicat-keygen" class="headerlink" title="所需工具navicat-keygen"></a>所需工具navicat-keygen</h2><p>原始工具在此,此项目介绍了破解的原理,暂时支持到15版本.</p><p><a href="https://github.com/JohnHubcr/navicat-keygen">JohnHubcr/navicat-keygen</a></p><p>中文使用方式在此</p><p><a href="https://github.com/lzscxb/navicat-keygen">lzscxb/navicat-keygen</a></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir ~&#x2F;navicatcd ~&#x2F;navicatgit clone https:&#x2F;&#x2F;github.com&#x2F;lzscxb&#x2F;navicat-keygen.gitcd navicat-keygen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用此工具之前需要安装相关依赖</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#  capstone keystone  rapidjson opensslsudo pacman -S capstone keystone  rapidjson openssl# 若有的项安装失败yay -S capstone keystone  rapidjson openssl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="找到15或以下版本的navicat"><a href="#找到15或以下版本的navicat" class="headerlink" title="找到15或以下版本的navicat"></a>找到15或以下版本的navicat</h2><p>如果使用的是navicat的appimage还需要重新解包后再打包.</p><ol><li>对于archlinux,较为简单.</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yay -S navicat15-premium-csyay -Ql navicat15-premium-cs## 查看安装的目录## 输出 &#x2F;opt&#x2F;navicat15-premium-cs&#x2F; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可知安装到了 /opt/navicat15-premium-cs/ 目录下.</p><ol start="2"><li>对于其他没有用户打包的发行版</li></ol><p><a href="https://pan.baidu.com/share/init?surl=2U6UaPVypjlVGpIoZqJzvA">百度网盘</a>  密码: rt1t</p><p>下载此15版本完毕后</p><p>接着下载appimage打包工具 </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 下载cd ~&#x2F;navicatwget &#39;https:&#x2F;&#x2F;github.com&#x2F;AppImage&#x2F;AppImageKit&#x2F;releases&#x2F;download&#x2F;continuous&#x2F;appimagetool-x86_64.AppImage&#39;# 授权sudo chmod a+x appimagetool-x86_64.AppImage<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>解压包操作,得到原始的navicat15文件</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 将navicat15-premium-cs.AppImage 移动到 &#x2F;home&#x2F;目录下,进入AppImage目录下，打开终端并执行mkdir navicat15-premium-cssudo mount -o loop navicat15-premium-cs.AppImage navicat15-premium-cssudo cp -r navicat15-premium-cs navicat15sudo umount navicat15-premium-csrm -rf navicat15-premium-cs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上述准备工作做好之后进行下一步工作.</p><h2 id="使用navicat-keygen破解"><a href="#使用navicat-keygen破解" class="headerlink" title="使用navicat-keygen破解"></a>使用navicat-keygen破解</h2><p>经过上述操作好,已经知道了原始的navicat原始文件的目录</p><ol><li>navicat-patcher 替换官方公钥</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 进入navicat-keygen&#x2F;bin&#x2F;目录cd ~&#x2F;navicat&#x2F;navicat-keygen&#x2F;bin&#x2F;# 执行sudo .&#x2F;navicat-patcher ~&#x2F;navicat&#x2F;navicat15 # 或者&#x2F;opt&#x2F;navicat15-premium-cs&#x2F;  请替换成自己的navicat15原始文件目录.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>对于appimage需要重新打包.</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~&#x2F;navicat&#x2F;.&#x2F;appimagetool-x86_64.AppImage navicat15 navicat15.AppImage<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="3"><li>运行navicat软件</li></ol><p>同时新开一个窗口,运行破解工具</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd ~&#x2F;navicat&#x2F;navicat-keygen&#x2F;bin&#x2F;.&#x2F;navicat-keygen --text .&#x2F;RegPrivateKey.pem<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><a href="https://imgtu.com/i/XzFPUS"><img src="https://s1.ax1x.com/2022/06/20/XzFPUS.png" alt="XzFPUS.png"></a><br>记得要断网运行</p><p>输入密钥到navicat后点击手动激活,<br><a href="https://imgtu.com/i/XzFA3j"><img src="https://s1.ax1x.com/2022/06/20/XzFA3j.png" alt="XzFA3j.png"></a></p><p>然后将navicat中的代码复制到命令窗口</p><p><a href="https://imgtu.com/i/XzFMUU"><img src="https://s1.ax1x.com/2022/06/20/XzFMUU.png" alt="XzFMUU.png"></a><br>双击回车键生成激活码,粘贴进navicat下面的窗口.</p><p><a href="https://imgtu.com/i/XzFsxA"><img src="https://s1.ax1x.com/2022/06/20/XzFsxA.png" alt="XzFsxA.png"></a></p><p>破解即可完成.</p><p>余下工作可以自己创建navicat的快捷方式等.现在就可以享用了.</p>]]></content>
      
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmq集群和架构相关</title>
      <link href="/2022/06/09/rabbitmq-ji-qun-he-jia-gou-xiang-guan/"/>
      <url>/2022/06/09/rabbitmq-ji-qun-he-jia-gou-xiang-guan/</url>
      
        <content type="html"><![CDATA[<h1 id="rabbitmq集群和架构相关"><a href="#rabbitmq集群和架构相关" class="headerlink" title="rabbitmq集群和架构相关"></a>rabbitmq集群和架构相关</h1><h2 id="1-mq日志与监控"><a href="#1-mq日志与监控" class="headerlink" title="1. mq日志与监控"></a>1. mq日志与监控</h2><ul><li>rabbitmq的日志默认放在 - /var/log/rabbitmq/<a href="mailto:&#x72;&#x61;&#x62;&#x62;&#105;&#116;&#x40;&#x78;&#x78;&#x78;&#46;&#x6c;&#111;&#x67;">&#x72;&#x61;&#x62;&#x62;&#105;&#116;&#x40;&#x78;&#x78;&#x78;&#46;&#x6c;&#111;&#x67;</a></li></ul><p><a href="https://imgtu.com/i/Xy0Ads"><img src="https://s1.ax1x.com/2022/06/09/Xy0Ads.png" alt="Xy0Ads.png"></a></p><ul><li>web控制台监控</li></ul><p><a href="https://imgtu.com/i/Xy0MyF"><img src="https://s1.ax1x.com/2022/06/09/Xy0MyF.png" alt="Xy0MyF.png"></a></p><ul><li>控制台命令</li></ul><p><a href="https://imgtu.com/i/Xy0YJx"><img src="https://s1.ax1x.com/2022/06/09/Xy0YJx.png" alt="Xy0YJx.png"></a></p><h2 id="2-消息追踪"><a href="#2-消息追踪" class="headerlink" title="2. 消息追踪"></a>2. 消息追踪</h2><p>微服务调用有链路追踪,mq当然也有类似的叫做消息追踪.</p><ol><li>firehose</li></ol><p><a href="https://imgtu.com/i/Xy0cfP"><img src="https://s1.ax1x.com/2022/06/09/Xy0cfP.png" alt="Xy0cfP.png"></a></p><ul><li>增加一个队列绑定到amq.rabbitmq.trace交换机,然后开启这个功能 rabbitmqctl trace_on .</li></ul><p><a href="https://imgtu.com/i/XyB9t1"><img src="https://s1.ax1x.com/2022/06/09/XyB9t1.png" alt="XyB9t1.png"></a></p><p>任意交换机增加消息,都可以被test_trace队列接受到.<br><a href="https://imgtu.com/i/XyBf9x"><img src="https://s1.ax1x.com/2022/06/09/XyBf9x.png" alt="XyBf9x.png"></a></p><p>消息追踪中包含了更多的信息,更加详细.</p><ol start="2"><li>rabbitmq_tracing插件 </li></ol><p><a href="https://imgtu.com/i/XyBbEd"><img src="https://s1.ax1x.com/2022/06/09/XyBbEd.png" alt="XyBbEd.png"></a></p><p>查看开启的插件,然后开启这个插件.</p><p><a href="https://imgtu.com/i/XyDQa9"><img src="https://s1.ax1x.com/2022/06/09/XyDQa9.png" alt="XyDQa9.png"></a></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo rabbitmq-plugins enable rabbitmq_tracing<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>控制台会多出以下.</p><p><a href="https://imgtu.com/i/XyrtWq"><img src="https://s1.ax1x.com/2022/06/09/XyrtWq.png" alt="XyrtWq.png"></a></p><p>可以增加trace文件<br>点击log可以在新页面中查看文本形式的日志.</p><h2 id="3-集群方案"><a href="#3-集群方案" class="headerlink" title="3. 集群方案"></a>3. 集群方案</h2><p>一般采用镜像模式</p><p>如果我们自己实验,可以选择的有三台虚拟机搭建,也可以一个mq搭建三个实例,也可以使用docker来搭建,如果使用docker还可以使用docker-compose来搭建.</p><h3 id="3-1-三台虚拟机实现"><a href="#3-1-三台虚拟机实现" class="headerlink" title="3.1 三台虚拟机实现"></a>3.1 三台虚拟机实现</h3><ol><li>修改host文件</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">1</span>、修改HOST文件方便输入命令行<span class="token function">vim</span> /etc/hosts<span class="token number">2</span>、对HOST文件添加内容<span class="token number">192.168</span>.226.148 node1<span class="token number">192.168</span>.226.149 node2<span class="token number">192.168</span>.226.150 node3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>复制erlange cookie</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">scp</span> /var/lib/rabbitmq/.erlang.cookie root@node2:/var/lib/rabbitmq/.erlang.cookie<span class="token function">scp</span> /var/lib/rabbitmq/.erlang.cookie root@node3:/var/lib/rabbitmq/.erlang.cookie<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li>在所有节点上执行组成集群命令</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rabbitmq-server -detached<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>此那个节点加入集群</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>、停止MQ服务rabbitmqctl stop_app<span class="token number">1</span>、重置MQrabbitmqctl reset<span class="token number">3</span>、加入主节点rabbitmqctl join_cluster rabbit@node1<span class="token number">4</span>、重启服务rabbitmqctl start_app<span class="token punctuation">(</span>只启动应用服务<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这是可以查看集群状态</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rabbitmqctl cluster_status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>现在可以在主节点上创建超级管理员和其他用户,</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>、添加账号rabbitmqctl add_user admin <span class="token number">123</span><span class="token number">2</span>、设置用户角色rabbitmqctl set_user_tags admin administrator  <span class="token number">3</span>、设置用户权限rabbitmqctl set_permissions -p <span class="token string">"/"</span> admin <span class="token string">".*"</span> <span class="token string">".*"</span> <span class="token string">".*"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>镜像队列配置</li></ol><p><a href="https://imgtu.com/i/Xyy5id"><img src="https://s1.ax1x.com/2022/06/09/Xyy5id.png" alt="Xyy5id.png"></a></p><p>参数解释</p><blockquote><p>Name:  policy的名称<br>Pattern:  queue的匹配模式（正则表达式）<br>Definition:  镜像定义，包括三个部分 ha-mode，ha-params，ha-sync-mode,ha-mode:  指明镜像队列的模式，有效值为 all/exactly/nodesall表示在集群所有的节点上进行镜像exactly表示在指定个数的节点上进行镜像，节点的个数由ha-params指定，个数包含主机nodes表示在指定的节点上进行镜像，节点名称通过ha-params指定ha-params: ha-mode模式需要用到的参数ha-sync-mode: 镜像队列中消息的同步方式，有效值为 automatic、manually<br>Priority:  可选参数， policy的优先级</p></blockquote><ol start="7"><li>创建一个镜像队列</li></ol><p><a href="https://imgtu.com/i/Xy68Te"><img src="https://s1.ax1x.com/2022/06/09/Xy68Te.png" alt="Xy68Te.png"></a></p><p>创建一个名为 backup-node1 的队列,刷新后可以看到控制页上多出 +1 提示,意为当前已有一个备份，点击查看详情可看到备份队列具体存在的节点</p><h3 id="3-2-docker实现"><a href="#3-2-docker实现" class="headerlink" title="3.2 docker实现"></a>3.2 docker实现</h3><p>docker的安装和docker-compose安装这里不再细讲.</p><h4 id="1-docker直接实现"><a href="#1-docker直接实现" class="headerlink" title="1. docker直接实现"></a>1. docker直接实现</h4><ol><li>创建容器</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker run -d --hostname rabbit1 --name myrabbit1 -p <span class="token number">15672</span>:15672 -p <span class="token number">5672</span>:5672 -e <span class="token assign-left variable">RABBITMQ_ERLANG_COOKIE</span><span class="token operator">=</span><span class="token string">'dmbjzcookies'</span> rabbitmq:3-managementdocker run -d --hostname rabbit2 --name myrabbit2 -p <span class="token number">15673</span>:15672 -p <span class="token number">5673</span>:5672 --link myrabbit1:rabbit1 -e <span class="token assign-left variable">RABBITMQ_ERLANG_COOKIE</span><span class="token operator">=</span><span class="token string">'dmbjzcookies'</span> rabbitmq:3-managementdocker run -d --hostname rabbit3 --name myrabbit3 -p <span class="token number">15674</span>:15672 -p <span class="token number">5674</span>:5672 --link myrabbit1:rabbit1 --link myrabbit2:rabbit2 -e <span class="token assign-left variable">RABBITMQ_ERLANG_COOKIE</span><span class="token operator">=</span><span class="token string">'dmbjzcookies'</span> rabbitmq:3-management<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="2"><li>加入集群</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker <span class="token builtin class-name">exec</span> -it myrabbit1 <span class="token function">bash</span>rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl start_app<span class="token builtin class-name">exit</span>docker <span class="token builtin class-name">exec</span> -it myrabbit2 <span class="token function">bash</span>rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl join_cluster  rabbit@rabbit1rabbitmqctl start_app<span class="token builtin class-name">exit</span>docker <span class="token builtin class-name">exec</span> -it myrabbit3 <span class="token function">bash</span>rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl join_cluster  rabbit@rabbit1rabbitmqctl start_app<span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-docker-compose实现"><a href="#2-docker-compose实现" class="headerlink" title="2 docker-compose实现"></a>2 docker-compose实现</h4><ol><li>compose文件</li></ol><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">version: &quot;2.0&quot;services:  rabbit1:    image: rabbitmq:3-management    hostname: rabbit1    ports:      - 5672:5672      - 15672:15672    environment:      - RABBITMQ_DEFAULT_USER&#x3D;guest      - RABBITMQ_DEFAULT_PASS&#x3D;guest      - RABBITMQ_ERLANG_COOKIE&#x3D;&#39;dmbjzrabbitmq&#39;  rabbit2:    image: rabbitmq:3-management    hostname: rabbit2    ports:      - 5673:5672    environment:      - RABBITMQ_ERLANG_COOKIE&#x3D;&#39;dmbjzrabbitmq&#39;    links:      - rabbit1  rabbit3:    image: rabbitmq:3-management    hostname: rabbit3    ports:      - 5674:5672    environment:      - RABBITMQ_ERLANG_COOKIE&#x3D;&#39;dmbjzrabbitmq&#39;    links:      - rabbit1      - rabbit2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">docker-compose up -d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>在节点2,3中配置加入到集群(进入到容器中执行)</li></ol><ul><li>节点2</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl join_cluster rabbit@rabbit1rabbitmqctl start_app<span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>节点3</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl join_cluster rabbit@rabbit1rabbitmqctl join_cluster rabbit@rabbit2rabbitmqctl start_app<span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-集群方案之上的高可用"><a href="#4-集群方案之上的高可用" class="headerlink" title="4. 集群方案之上的高可用"></a>4. 集群方案之上的高可用</h2><p>采用haproxy负载均衡mq<br>用keepalive保证haproxy的统一入口和高可用.</p><h3 id="1-haproxy安装和配置"><a href="#1-haproxy安装和配置" class="headerlink" title="1. haproxy安装和配置"></a>1. haproxy安装和配置</h3><ol><li>安装<br>centos安装</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>、安装依赖yum <span class="token function">install</span> -y gcc <span class="token function">wget</span><span class="token number">2</span>、下载HaProxy<span class="token function">wget</span> http://www.haproxy.org/download/1.6/src/haproxy-1.6.5.tar.gz    <span class="token number">3</span>、解压HaProxy<span class="token function">tar</span> -zxvf haproxy-1.6.5.tar.gz -C /usr/local    <span class="token number">4</span>、安装HaProxy<span class="token builtin class-name">cd</span> /usr/local/haproxy-1.6.5<span class="token function">make</span> <span class="token assign-left variable">TARGET</span><span class="token operator">=</span>linux31 <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/haproxy<span class="token function">make</span> <span class="token function">install</span> <span class="token assign-left variable">PREFIX</span><span class="token operator">=</span>/usr/local/haproxy<span class="token function">mkdir</span> /etc/haproxy  <span class="token number">5</span>、赋权<span class="token function">groupadd</span> -r -g <span class="token number">149</span> haproxy  <span class="token function">useradd</span> -g haproxy -r -s /sbin/nologin -u <span class="token number">149</span> haproxy    <span class="token number">6</span>、创建配置文件<span class="token function">touch</span> /etc/haproxy/haproxy.cfg<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>至于我的archinux</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> pacman -S haproxy即可<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>配置</li></ol><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#logging options</span>global<span class="token attr-name">log</span> <span class="token attr-value">127.0.0.1 local0 info</span><span class="token attr-name">maxconn</span> <span class="token attr-value">5120</span><span class="token attr-name">chroot</span> <span class="token attr-value">/usr/local/haproxy</span><span class="token attr-name">uid</span> <span class="token attr-value">99</span><span class="token attr-name">gid</span> <span class="token attr-value">99</span>daemonquiet<span class="token attr-name">nbproc</span> <span class="token attr-value">20</span><span class="token attr-name">pidfile</span> <span class="token attr-value">/var/run/haproxy.pid</span>defaults<span class="token attr-name">log</span> <span class="token attr-value">global</span><span class="token comment">#使用4层代理模式，”mode http”为7层代理模式</span><span class="token attr-name">mode</span> <span class="token attr-value">tcp</span><span class="token comment">#if you set mode to tcp,then you nust change tcplog into httplog</span><span class="token attr-name">option</span> <span class="token attr-value">tcplog</span><span class="token attr-name">option</span> <span class="token attr-value">dontlognull</span><span class="token attr-name">retries</span> <span class="token attr-value">3</span><span class="token attr-name">option</span> <span class="token attr-value">redispatch</span><span class="token attr-name">maxconn</span> <span class="token attr-value">2000</span><span class="token attr-name">contimeout</span> <span class="token attr-value">5s</span><span class="token comment">     ##客户端空闲超时时间为 60秒 则HA 发起重连机制</span><span class="token attr-name">     clitimeout</span> <span class="token attr-value">60s</span><span class="token comment">     ##服务器端链接超时时间为 15秒 则HA 发起重连机制</span><span class="token attr-name">     srvtimeout</span> <span class="token attr-value">15s</span><span class="token comment">#front-end IP for consumers and producters</span><span class="token attr-name">listen</span> <span class="token attr-value">rabbitmq_cluster</span><span class="token attr-name">bind</span> <span class="token attr-value">0.0.0.0:5672</span><span class="token comment">#配置TCP模式</span><span class="token attr-name">mode</span> <span class="token attr-value">tcp</span><span class="token comment">#balance url_param userid</span><span class="token comment">#balance url_param session_id check_post 64</span><span class="token comment">#balance hdr(User-Agent)</span><span class="token comment">#balance hdr(host)</span><span class="token comment">#balance hdr(Host) use_domain_only</span><span class="token comment">#balance rdp-cookie</span><span class="token comment">#balance leastconn</span><span class="token comment">#balance source //ip</span><span class="token comment">#简单的轮询</span><span class="token attr-name">balance</span> <span class="token attr-value">roundrobin</span><span class="token comment">#rabbitmq集群节点配置 #inter 每隔五秒对mq集群做健康检查， 2次正确证明服务器可用，2次失败证明服务器不可用，并且配置主备机制</span><span class="token attr-name">        server</span> <span class="token attr-value">bhz76 192.168.226.148:5672 check inter 5000 rise 2 fall 2</span><span class="token attr-name">        server</span> <span class="token attr-value">bhz77 192.168.226.149:5672 check inter 5000 rise 2 fall 2</span><span class="token attr-name">        server</span> <span class="token attr-value">bhz78 192.168.226.150:5672 check inter 5000 rise 2 fall 2</span><span class="token comment">#配置haproxy web监控，查看统计信息，152机器bind的就是192.168.226.152:8100</span><span class="token attr-name">listen</span> <span class="token attr-value">stats</span><span class="token attr-name">bind</span> <span class="token attr-value">192.168.226.151:8100</span><span class="token attr-name">mode</span> <span class="token attr-value">http</span><span class="token attr-name">option</span> <span class="token attr-value">httplog</span><span class="token attr-name">stats</span> <span class="token attr-value">enable</span><span class="token comment">#设置haproxy监控地址为http://localhost:8100/rabbitmq-stats</span><span class="token attr-name">stats</span> <span class="token attr-value">uri /rabbitmq-stats</span><span class="token attr-name">stats</span> <span class="token attr-value">refresh 5s</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>启动和访问</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>、启动HaProxy  /usr/local/haproxy/sbin/haproxy -f /etc/haproxy/haproxy.cfg<span class="token number">2</span>、查看HaProxy状态<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> haproxy    <span class="token number">3</span>、访问Web控制台http://192.168.226.151:8100/rabbitmq-statshttp://192.168.226.152:8100/rabbitmq-stats<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-keepalive"><a href="#2-keepalive" class="headerlink" title="2. keepalive"></a>2. keepalive</h3><ol><li>安装</li></ol><p>centos(通用)</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>、下载依赖和资源包yum <span class="token function">install</span> -y openssl openssl-devel<span class="token function">wget</span> http://www.keepalived.org/software/keepalived-1.2.18.tar.gz<span class="token number">2</span>、解压<span class="token operator">&amp;</span>编译<span class="token operator">&amp;</span>安装<span class="token function">tar</span> -zxvf keepalived-1.2.18.tar.gz -C /usr/local/  <span class="token builtin class-name">cd</span> /usr/local/<span class="token builtin class-name">cd</span> keepalived-1.2.18/ <span class="token operator">&amp;&amp;</span> ./configure --prefix<span class="token operator">=</span>/usr/local/keepalived<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>    <span class="token number">3</span>、将keepalived安装成Linux系统服务<span class="token function">mkdir</span> /etc/keepalived<span class="token function">cp</span> /usr/local/keepalived/etc/keepalived/keepalived.conf /etc/keepalived/  <span class="token function">ln</span> -s /usr/local/sbin/keepalived /usr/sbin/<span class="token function">ln</span> -s /usr/local/keepalived/sbin/keepalived /sbin/    如果又遇到软连接不能生成的问题，需要先删除    <span class="token function">rm</span> -f /usr/sbin/keepalived    <span class="token function">rm</span> -f /sbin/keepalived        <span class="token number">4</span>、设置KeepAlive开启自启动<span class="token function">chkconfig</span> keepalived on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>至于archlinux</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">sudo</span> pacman -S keepalived<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>修改配置文件 </li></ol><p>etc/keepalived/keepalived.conf ,主从节点中 vrrp_instance VI_1 中的部分参数不</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">! Configuration File for keepalivedglobal_defs &#123;   router_id node4  ##标识节点的字符串，通常为hostname&#125;vrrp_script chk_haproxy &#123;    script &quot;&#x2F;etc&#x2F;keepalived&#x2F;haproxy_check.sh&quot;  ##执行脚本位置    interval 2  ##检测时间间隔    weight -20  ##如果条件成立则权重减20&#125;vrrp_instance VI_1 &#123;    state MASTER  ## 主节点为MASTER，备份节点为BACKUP    interface ens33 ## 绑定虚拟IP的网络接口（网卡）,与本机IP地址所在的网络接口相同    virtual_router_id 79  ## 虚拟路由ID号（主备节点一定要相同）    mcast_src_ip 192.168.226.151 ## 本机ip地址    priority 100  ##节点优先级配置,主节点优先级要大于从节点（0-254的值）    nopreempt    advert_int 1  ## 组播信息发送间隔，俩个节点必须配置一致，默认1sauthentication &#123;  ## 使用密码认证匹配        auth_type PASS        auth_pass bhz    &#125;    track_script &#123;        chk_haproxy    &#125;    virtual_ipaddress &#123;        192.168.11.70  ## 虚拟ip，可以指定多个，给外部访问    &#125;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>增加一个挂掉后自启动的脚本</p><p>/etc/keepalived/haproxy_check.sh</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token shebang important">#!/bin/bash</span><span class="token assign-left variable">COUNT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -C haproxy --no-header <span class="token operator">|</span><span class="token function">wc</span> -l<span class="token variable">`</span></span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$COUNT</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    /usr/local/haproxy/sbin/haproxy -f /etc/haproxy/haproxy.cfg    <span class="token function">sleep</span> <span class="token number">2</span>    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ps</span> -C haproxy --no-header <span class="token operator">|</span><span class="token function">wc</span> -l<span class="token variable">`</span></span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>        <span class="token function">killall</span> keepalived    <span class="token keyword">fi</span><span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token function">chmod</span> +x /etc/keepalived/haproxy_check.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>启动查看</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">1</span>、启动KeepAlived<span class="token function">service</span> keepalived start<span class="token number">2</span>、查看状态<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> haproxy  <span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> keepalived<span class="token number">3</span>、查看虚拟IP创建情况<span class="token function">ip</span> a<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当我们应用中mq的地址改为192.168.11.70会自动路由到某一个mq的节点上.</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol><li>mq的日志和控制台其他功能</li><li>消息追踪即trace的两种实现.控制台和插件.</li><li>搭建集群的几种方式,使用docker比较简便.</li><li>使用可ha和keepalive,ha保证mq的高可用和负载均衡.  keepalive保证ha的主从高可用,在不同机器之间提供了统一的虚拟ip.<br>这种架构图如下<br><a href="https://imgtu.com/i/Xyg0Ig"><img src="https://s1.ax1x.com/2022/06/10/Xyg0Ig.png" alt="Xyg0Ig.png"></a></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> mq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmq常见问题</title>
      <link href="/2022/06/08/rabbitmq-chang-jian-wen-ti/"/>
      <url>/2022/06/08/rabbitmq-chang-jian-wen-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="rabbitmq常见问题"><a href="#rabbitmq常见问题" class="headerlink" title="rabbitmq常见问题"></a>rabbitmq常见问题</h1><h2 id="1-不可路由消息"><a href="#1-不可路由消息" class="headerlink" title="1. 不可路由消息"></a>1. 不可路由消息</h2><p>这一部分主要是发送时交换机写错或者(网络堵塞发送不到交换机),交换机写对了,但路由不到对应的队列.</p><h3 id="1-1-发送不到交换机"><a href="#1-1-发送不到交换机" class="headerlink" title="1.1 发送不到交换机"></a>1.1 发送不到交换机</h3><p>我们新建一个工程来实际操作一下.</p><ul><li>application.yml<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  port: 5001spring:  rabbitmq:    host: 127.0.0.1    port: 5672    username: hcq    password: 121056    virtual-host: &#x2F;hcq    #这个配置是保证提供者确保消息推送到交换机中，不管成不成功，都会回调    publisher-confirm-type: correlated    #保证交换机能把消息推送到队列中    publisher-returns: true    #这个配置是保证消费者会消费消息，手动确认    listener:      simple:        acknowledge-mode: manual    template:      mandatory: true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>RabbitConfig</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*配置类*/</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * MQ地址     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>    <span class="token comment">/**     * MQ端口     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.port&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>    <span class="token comment">/**     * 用户名     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.username&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token comment">/**     * 密码     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.password&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token comment">/**     * 虚拟主机     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.virtual-host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> virtualHost<span class="token punctuation">;</span>    <span class="token comment">// 定义一个或多个交换机</span>    <span class="token comment">// 用于开发之前测试</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_A <span class="token operator">=</span> <span class="token string">"wm.test.topic"</span><span class="token punctuation">;</span>    <span class="token comment">// 定义队列</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_A <span class="token operator">=</span> <span class="token string">"queue-wm.test"</span><span class="token punctuation">;</span>    <span class="token comment">// 定义routing-key</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_A <span class="token operator">=</span> <span class="token string">"routing.wm.test"</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 针对消费者配置     * 1. 设置交换机类型     * 2. 将队列绑定到交换机     FanoutExchange: 将消息分发到所有的绑定队列，无routingkey的概念     HeadersExchange ：通过添加属性key-value匹配     DirectExchange:按照routingkey分发到指定队列     TopicExchange:多关键字匹配     **/</span>    <span class="token comment">/*************test-start******************/</span>    <span class="token comment">//topic交换机</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">testExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TopicExchange</span><span class="token punctuation">(</span>EXCHANGE_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//test队列</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testQueue"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>QUEUE_A<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//队列持久</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//绑定</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span> <span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/*************test-end******************/</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">MessageConverter</span> <span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>RabbitSend</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitSend</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>    <span class="token comment">/**     * Confirm模式     * 没找到交换机     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testConfirm</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">CorrelationData</span> correlationData<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">CorrelationData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        correlationData<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//重写没发送到交换机回调的方法,设置进去.</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> data<span class="token punctuation">,</span><span class="token keyword">boolean</span> ack<span class="token punctuation">,</span><span class="token class-name">String</span> cause<span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//数据库执行状态更改</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cause:"</span><span class="token operator">+</span>cause<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">,</span>s<span class="token punctuation">,</span>correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"sasasa"</span><span class="token punctuation">,</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">,</span>s<span class="token punctuation">,</span>correlationData<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>TestRabbitController</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Slf4j</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRabbitController</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RabbitSend</span> msgProducer<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/testConfirm/&#123;msg&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"xxxxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        msgProducer<span class="token punctuation">.</span><span class="token function">testConfirm</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/testReturn/&#123;msg&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"xxxxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        msgProducer<span class="token punctuation">.</span><span class="token function">testConfirm</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://imgtu.com/i/XBB0tf"><img src="https://s1.ax1x.com/2022/06/07/XBB0tf.png" alt="XBB0tf.png"></a></p><p>启动服务,当调用不含有1的参数时,会调用ConfirmCallback方法,我们可以在这里记录日志,不过写错交换机这种错误一般很少出现吧,如果网络堵塞还比较有用.</p><h3 id="1-2-路由不到队列"><a href="#1-2-路由不到队列" class="headerlink" title="1.2 路由不到队列"></a>1.2 路由不到队列</h3><p>yml配置文件不变</p><ul><li>RabbitSend</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testReturn</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">/**         * 回退模式         * 没找到queue         *  1.丢弃         *  2.返回给发送方         */</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setMandatory</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setReturnCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ReturnCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">returnedMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"return 执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span><span class="token string">"sasasa"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>TestRabbitController</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/testReturn/&#123;msg&#125;"</span><span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessage2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"xxxxx"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       msgProducer<span class="token punctuation">.</span><span class="token function">testReturn</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://imgtu.com/i/XBrSI0"><img src="https://s1.ax1x.com/2022/06/07/XBrSI0.png" alt="XBrSI0.png"></a></p><p>写错路由后,会调用失败的回调函数.</p><p>实际上这两种情况比较少见吧,开发中谁会吧路由和队列写错呢?</p><h3 id="备份交换机"><a href="#备份交换机" class="headerlink" title="备份交换机"></a>备份交换机</h3><blockquote><p>ReturnCallBack获取到的消息没有机会进入到队列,因此无法使用死信队列来保存消息.我们可以创建备份交换机.<br>当交换机接收到一条不可路由消息时，将会把这条消息转发到备份交换机中，由备份交换机来进行转发和处理，通常备份交换机的类型为 fanout，这样就能把所有消息都投递到与其绑定的队列中（使用其他类型交换机需要指定路由key，不指定时）然后我们在备份交换机下绑定一个队列，这样所有那些原交换机无法被路由的消息，就会都进入这个队列了。还可以建立一个报警队列，用独立的消费者来进行监测和报警.</p></blockquote><p>一个消息找到了交换机却没有找到对应的路由,因此会被发送到备用交换机.</p><p>yml不变</p><ul><li>RabbitConfig</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*配置类*/</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * MQ地址     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>    <span class="token comment">/**     * MQ端口     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.port&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>    <span class="token comment">/**     * 用户名     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.username&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token comment">/**     * 密码     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.password&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token comment">/**     * 虚拟主机     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.virtual-host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> virtualHost<span class="token punctuation">;</span>    <span class="token comment">// 定义一个或多个交换机</span>    <span class="token comment">// 用于开发之前测试</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_A <span class="token operator">=</span> <span class="token string">"wm.test.topic"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> BACKUP_EXCHANGE_NAME <span class="token operator">=</span> <span class="token string">"backup.exchange"</span><span class="token punctuation">;</span>    <span class="token comment">// 定义队列</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_A <span class="token operator">=</span> <span class="token string">"queue-wm.test"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> BACKUP_QUEUE_NAME <span class="token operator">=</span> <span class="token string">"backup.queue"</span><span class="token punctuation">;</span> <span class="token comment">//备份队列</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> WARNING_QUEUE_NAME <span class="token operator">=</span> <span class="token string">"warning.queue"</span><span class="token punctuation">;</span><span class="token comment">//警告队列</span>    <span class="token comment">// 定义routing-key</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_A <span class="token operator">=</span> <span class="token string">"routing.wm.test"</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 针对消费者配置     * 1. 设置交换机类型     * 2. 将队列绑定到交换机     FanoutExchange: 将消息分发到所有的绑定队列，无routingkey的概念     HeadersExchange ：通过添加属性key-value匹配     DirectExchange:按照routingkey分发到指定队列     TopicExchange:多关键字匹配     **/</span>    <span class="token comment">/*************test-start******************/</span>    <span class="token comment">//topic交换机</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">testExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//alternate-exchange 声明备用交换机</span>        <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">topicExchange</span><span class="token punctuation">(</span>EXCHANGE_A<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">withArgument</span><span class="token punctuation">(</span><span class="token string">"alternate-exchange"</span><span class="token punctuation">,</span>BACKUP_EXCHANGE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//备份交换机</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testBackExchange"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">testBackExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FanoutExchange</span><span class="token punctuation">(</span>BACKUP_EXCHANGE_NAME<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//test队列</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testQueue"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>QUEUE_A<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//队列持久</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testBackupQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>BACKUP_QUEUE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testWarnQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>WARNING_QUEUE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//绑定</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span> <span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//备份队列</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">backBinding</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testBackExchange"</span><span class="token punctuation">)</span> <span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testBackupQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//警告队列</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">warnBind</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testBackExchange"</span><span class="token punctuation">)</span> <span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testWarnQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/*************test-end******************/</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">MessageConverter</span> <span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>配置类增加了备份交换机和备份队列,警告队列.同时将备份交换机在testExchange声明,建立联系.</p><ul><li>RabbitSend</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBack</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       rabbitTemplate<span class="token punctuation">.</span><span class="token function">setMandatory</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setReturnCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ReturnCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">returnedMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"return 执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span><span class="token string">"sasasa"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当127.0.0.1:5001/testReturn/jjsas<br><a href="https://imgtu.com/i/XDIUe0"><img src="https://s1.ax1x.com/2022/06/07/XDIUe0.png" alt="XDIUe0.png"></a><br>mq控制台<br><a href="https://imgtu.com/i/XDI5fe"><img src="https://s1.ax1x.com/2022/06/07/XDI5fe.png" alt="XDI5fe.png"></a><br>消息被转发到备份队列中</p><p>以上三种情况是比较简单的,但是在开发中也比较少见,我们一般不会犯这种错误吧.</p><h2 id="2-消费端手动ack"><a href="#2-消费端手动ack" class="headerlink" title="2. 消费端手动ack"></a>2. 消费端手动ack</h2><h3 id="2-1-消费端"><a href="#2-1-消费端" class="headerlink" title="2.1 消费端"></a>2.1 消费端</h3><p>新建一个消费端项目,配置如下</p><ul><li>yml</li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 5002spring:  rabbitmq:    host: 127.0.0.1    port: 5672    username: hcq    password: 121056    virtual-host: &#x2F;hcq    #这个配置是保证消费者会消费消息，手动确认    listener:      simple:        acknowledge-mode: manual    template:      mandatory: true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>TestListener</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>wa<span class="token punctuation">.</span>consumer01<span class="token punctuation">.</span>listener</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Channel</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>wa<span class="token punctuation">.</span>consumer01<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">RabbitConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Message</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RabbitHandler</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RabbitListener</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>listener<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">ChannelAwareMessageListener</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>messaging<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Payload</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>QUEUE_A<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestListener</span> <span class="token keyword">implements</span> <span class="token class-name">ChannelAwareMessageListener</span> <span class="token punctuation">&#123;</span> <span class="token comment">//实现这个接口</span>        <span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>QUEUE_A<span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"处理业务逻辑"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">3</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>            <span class="token comment">//手动签收</span>            channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            channel<span class="token punctuation">.</span><span class="token function">basicNack</span><span class="token punctuation">(</span>deliveryTag<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-生产端修改"><a href="#2-2-生产端修改" class="headerlink" title="2.2 生产端修改"></a>2.2 生产端修改</h3><blockquote><p>多次调用中,生产端出现了错误如下.<br>RabbitTemplate只允许设置一个callback方法，你可以将RabbitTemplate的bean设为单例然后设置回调，但是这样有个缺点是使  用RabbitTemplate的地方都会执行这个回调，如果直接在别的地方设置，会报如下错误</p></blockquote><p>Only one ReturnCallback is supported by each RabbitTemplate] with root cause</p><p>解决办法有两种,一是配置RabbitTemplate为多例的每次使用重新创建.二是只设置一次ReturnCallback.于是修改config如下.</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*配置类*/</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * MQ地址     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>    <span class="token comment">/**     * MQ端口     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.port&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>    <span class="token comment">/**     * 用户名     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.username&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token comment">/**     * 密码     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.password&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token comment">/**     * 虚拟主机     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.virtual-host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> virtualHost<span class="token punctuation">;</span>    <span class="token comment">// 定义一个或多个交换机</span>    <span class="token comment">// 用于开发之前测试</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_A <span class="token operator">=</span> <span class="token string">"wm.test.topic"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> BACKUP_EXCHANGE_NAME <span class="token operator">=</span> <span class="token string">"backup.exchange"</span><span class="token punctuation">;</span>    <span class="token comment">// 定义队列</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_A <span class="token operator">=</span> <span class="token string">"queue-wm.test"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> BACKUP_QUEUE_NAME <span class="token operator">=</span> <span class="token string">"backup.queue"</span><span class="token punctuation">;</span> <span class="token comment">//备份队列</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> WARNING_QUEUE_NAME <span class="token operator">=</span> <span class="token string">"warning.queue"</span><span class="token punctuation">;</span><span class="token comment">//警告队列</span>    <span class="token comment">// 定义routing-key</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_A <span class="token operator">=</span> <span class="token string">"routing.wm.test"</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 针对消费者配置     * 1. 设置交换机类型     * 2. 将队列绑定到交换机     FanoutExchange: 将消息分发到所有的绑定队列，无routingkey的概念     HeadersExchange ：通过添加属性key-value匹配     DirectExchange:按照routingkey分发到指定队列     TopicExchange:多关键字匹配     **/</span>    <span class="token comment">/*************test-start******************/</span>    <span class="token comment">//备份交换机</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testBackExchange"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">testBackExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">fanoutExchange</span><span class="token punctuation">(</span>BACKUP_EXCHANGE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//topic交换机</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">testExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//alternate-exchange 声明备用交换机</span>        <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">topicExchange</span><span class="token punctuation">(</span>EXCHANGE_A<span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">withArgument</span><span class="token punctuation">(</span><span class="token string">"alternate-exchange"</span><span class="token punctuation">,</span>BACKUP_EXCHANGE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//test队列</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testQueue"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>QUEUE_A<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//队列持久</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testBackupQueue"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testBackupQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>BACKUP_QUEUE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testWarnQueue"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testWarnQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>WARNING_QUEUE_NAME<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//绑定</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span> <span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//备份队列</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">backBinding</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testBackExchange"</span><span class="token punctuation">)</span> <span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testBackupQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//警告队列</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">warnBind</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testBackExchange"</span><span class="token punctuation">)</span> <span class="token class-name">FanoutExchange</span> fanoutExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testWarnQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>fanoutExchange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/*************test-end******************/</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">MessageConverter</span> <span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 创建连接工厂,获取MQ的连接</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">ConnectionFactory</span> <span class="token function">connectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">CachingConnectionFactory</span> connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CachingConnectionFactory</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span>virtualHost<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPublisherConfirmType</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory<span class="token punctuation">.</span>ConfirmType</span><span class="token punctuation">.</span>CORRELATED<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPublisherReturns</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> connectionFactory<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 创建rabbitTemplate 主要是修改这个地方</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"rabbitTemplate"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">RabbitTemplate</span> <span class="token function">rabbitTemplate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"connectionFactory"</span><span class="token punctuation">)</span> <span class="token class-name">ConnectionFactory</span> connectionFactory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">RabbitTemplate</span> rabbitTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RabbitTemplate</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//默认使用simpleMessageConverter  在此处更改为json序列化方案</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span><span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setReturnCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RabbitTemplate<span class="token punctuation">.</span>ReturnCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">returnedMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> s1<span class="token punctuation">,</span> <span class="token class-name">String</span> s2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"return 执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setConfirmCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">CorrelationData</span> data<span class="token punctuation">,</span> <span class="token keyword">boolean</span> ack<span class="token punctuation">,</span> <span class="token class-name">String</span> cause<span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>ack<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//数据库执行状态更改</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cause:"</span><span class="token operator">+</span>cause<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> rabbitTemplate<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当消息投递后,客户端出异常,会一直要求重复消费.<br><a href="https://imgtu.com/i/XDH17q"><img src="https://s1.ax1x.com/2022/06/07/XDH17q.png" alt="XDH17q.png"></a></p><h3 id="2-3-消费端限流"><a href="#2-3-消费端限流" class="headerlink" title="2.3 消费端限流"></a>2.3 消费端限流</h3><p>其实就是配置了一下限流</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//测试限流</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>QUEUE_A<span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQos</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*1.单条          2.每次多少          3.channel还是consumer        * */</span>        channel<span class="token punctuation">.</span><span class="token function">basicQos</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//业务逻辑</span>        <span class="token comment">//签收</span>        channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>也可以在yml文件中配置</p><h2 id="3-ttl-死信队列-延迟队列"><a href="#3-ttl-死信队列-延迟队列" class="headerlink" title="3. ttl 死信队列 延迟队列"></a>3. ttl 死信队列 延迟队列</h2><h3 id="什么是ttl"><a href="#什么是ttl" class="headerlink" title="什么是ttl"></a>什么是ttl</h3><p>发送消息的时候可以制定消息多久没被消费就丢弃,或者增加队列的时候增加队列的ttl,当消息进入队列多久没被消费就丢弃.</p><p>如下图所示<br><a href="https://imgtu.com/i/XDL4b9"><img src="https://s1.ax1x.com/2022/06/07/XDL4b9.png" alt="XDL4b9.png"></a></p><p>我们可以在控制台新建队列设置ttl,如图新建对列如下,设置ttl为10000毫秒,即10秒<br><a href="https://imgtu.com/i/XDOsqH"><img src="https://s1.ax1x.com/2022/06/07/XDOsqH.png" alt="XDOsqH.png"></a></p><p>当发送消息到此队列,10秒后消息自动被丢弃了.<br><a href="https://imgtu.com/i/XDOtaR"><img src="https://s1.ax1x.com/2022/06/07/XDOtaR.png" alt="XDOtaR.png"></a></p><p>java中</p><ul><li>RabbitConfig 增加如下</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_B <span class="token operator">=</span> <span class="token string">"queue-wm.ttl"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_B <span class="token operator">=</span> <span class="token string">"routing.wm.ttl"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testTtlQueue"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testTtlQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>QUEUE_B<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ttl</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//ttl队列</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">warnBind</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testExchange"</span><span class="token punctuation">)</span> <span class="token class-name">TopicExchange</span> topicExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testTtlQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>topicExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>ROUTING_KEY_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>发送消息到队列</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**     * ttl队列     * @param s     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testTtl</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">setMandatory</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span>                <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_B<span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>测试 十秒后消息丢弃</p><p><a href="https://imgtu.com/i/XDXAW6"><img src="https://s1.ax1x.com/2022/06/07/XDXAW6.png" alt="XDXAW6.png"></a></p><p>如果设置了消息的过期时间,也设置了队列的过期时间,以时间短的为准.</p><h3 id="死信队列"><a href="#死信队列" class="headerlink" title="死信队列"></a>死信队列</h3><ul><li><p>死信队列:<br>又叫死信交换机.当一个队列中的消息成为死信后,队列会把这个消息发送到配置好的死信交换机和通过死信路由发送到死信队列.</p></li><li><p>什么是死信呢</p><ol><li>消息达到队列最大限制,后续加入的都是死信.</li><li>设置了过期后,消息过期没有被消费,就是死信.</li><li>消费者配置了不消费,返回的也是死信.</li></ol></li></ul><p><a href="https://imgtu.com/i/XDX4t1"><img src="https://s1.ax1x.com/2022/06/08/XDX4t1.png" alt="XDX4t1.png"></a></p><p>创建死信交换机和死信队列</p><ul><li>RabbitConfig</li></ul><p>增加如下选项</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_C <span class="token operator">=</span> <span class="token string">"wm.test.black"</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_C <span class="token operator">=</span> <span class="token string">"queue-wm.dead"</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_C <span class="token operator">=</span> <span class="token string">"routing.wm.dead"</span><span class="token punctuation">;</span><span class="token comment">//阻塞交换机</span><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testDeadExchange"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">testBlackExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//alternate-exchange 声明备用交换机</span>    <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">fanoutExchange</span><span class="token punctuation">(</span>EXCHANGE_C<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//死信交换机</span><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testDeadExchange"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">FanoutExchange</span> <span class="token function">testDeadExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//alternate-exchange 声明备用交换机</span>    <span class="token keyword">return</span> <span class="token class-name">ExchangeBuilder</span><span class="token punctuation">.</span><span class="token function">fanoutExchange</span><span class="token punctuation">(</span>EXCHANGE_C<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//死信交换机和死信队列绑定</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">deadBind</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testDeadExchange"</span><span class="token punctuation">)</span> <span class="token class-name">DirectExchange</span> directExchange<span class="token punctuation">,</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"testDeadQueue"</span><span class="token punctuation">)</span> <span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>directExchange<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>ROUTING_KEY_C<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>同时对原有的ttl队列配置</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//正常ttl队列配置</span><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"testTtlQueue"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">testTtlQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token class-name">QueueBuilder</span><span class="token punctuation">.</span><span class="token function">durable</span><span class="token punctuation">(</span>QUEUE_B<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deadLetterExchange</span><span class="token punctuation">(</span>EXCHANGE_C<span class="token punctuation">)</span><span class="token punctuation">.</span>            <span class="token function">deadLetterRoutingKey</span><span class="token punctuation">(</span>ROUTING_KEY_C<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ttl</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>测试 首先从控制台删掉之前ttl队列,因为会和之前设置的冲突.</p><p>不断添加请求</p><p><a href="https://imgtu.com/i/XDvmad"><img src="https://s1.ax1x.com/2022/06/08/XDvmad.png" alt="XDvmad.png"></a></p><p>因为没有为ttl配置消费者,消费过期后.消息会全部转发到死信队列</p><p><a href="https://imgtu.com/i/XDvnIA"><img src="https://s1.ax1x.com/2022/06/08/XDvnIA.png" alt="XDvnIA.png"></a></p><p>当超过设置的最大长度10,或者设置了消费端,却返回拒绝消费.都会加入到死信队列.</p><h3 id="延时队列"><a href="#延时队列" class="headerlink" title="延时队列"></a>延时队列</h3><p>在ttl之上和死信队列之上可以设置延时队列. 一些需求比如十分钟后订单未支付取消,就要使用这种队列,</p><p>实际上之前的操作已经实现了延时队列,当把消息发送到ttl队列时,因为ttl队列没有消费者,因此10秒中后转发到死信队列,如果我们对死信队列配置消费者,那么就实现了延迟10秒设置订单未支付取消的情况.</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//测试死信</span>    <span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>QUEUE_C<span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDead</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">long</span> deliveryTag <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//业务逻辑</span>        <span class="token comment">//签收</span>        channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>测试 消息被成功消费</p><p><a href="https://imgtu.com/i/XDv0zV"><img src="https://s1.ax1x.com/2022/06/08/XDv0zV.png" alt="XDv0zV.png"></a></p><h2 id="4-消息可靠性和幂等性"><a href="#4-消息可靠性和幂等性" class="headerlink" title="4. 消息可靠性和幂等性"></a>4. 消息可靠性和幂等性</h2><h3 id="4-1-消息可靠性"><a href="#4-1-消息可靠性" class="headerlink" title="4.1 消息可靠性"></a>4.1 消息可靠性</h3><p>办法都是人想出来的,把握住几个重点去思考.</p><ol><li>保障消息发送成功</li><li>保证mq成功捣消息</li><li>确认mq的应答</li><li>消息补偿</li></ol><p>这里有两种比较成熟的方案.介绍一下.</p><h4 id="4-1-1-消息发送两次-二次确认和回调检查"><a href="#4-1-1-消息发送两次-二次确认和回调检查" class="headerlink" title="4.1.1 消息发送两次,二次确认和回调检查."></a>4.1.1 消息发送两次,二次确认和回调检查.</h4><p>首先来看这张图,也可以根据这张图自己修改.<br><a href="https://imgtu.com/i/XDvHdH"><img src="https://s1.ax1x.com/2022/06/08/XDvHdH.png" alt="XDvHdH.png"></a></p><p>其实就是消费者消费完后,将确认消息发送到回调检查服务入库<br>生产者发送延迟二次消息,直接进入回调服务.检查如果没有消息从新发送.<br>定时检查任务兜底.检测失败的消息.</p><ol><li>生产端只有一个,但生产端要对接mq,回调检查,定时检查服务.</li><li>这个架构中共有三个队列,q1 生产者发送给消费者,q2 消费者发给回调,q3生产者二次调用发送回调服务.</li><li>消费者又作为生产者</li><li>mdb是用来确认使用的,这个确认一是消息和延迟消息确认,二是定时人物和主数据库确认.</li></ol><h4 id="4-1-2-消息落库，对消息状态进行打标"><a href="#4-1-2-消息落库，对消息状态进行打标" class="headerlink" title="4.1.2 消息落库，对消息状态进行打标"></a>4.1.2 消息落库，对消息状态进行打标</h4><p>可以参考下图<br><a href="https://imgtu.com/i/XDvXWt"><img src="https://s1.ax1x.com/2022/06/08/XDvXWt.png" alt="XDvXWt.png"></a></p><p>生产者会入两次库,一是biz业务,二是msg信息.发送消息时保证应答,应答失败会重复发送,发送三次以上就不再发送了,记录发送原因.<br>消费者及时相应应答,应答完毕后入另一个msg库.<br>定时任务兜底,检查发送失败的和消费失败的,进行重新发送.</p><ol><li>生产者和消费者都维护msgdb</li><li>都要及时手动相应ack,失败一定次数后不再(生产)消费,而是记录状态</li><li>不一致的地方使用手动发现,或者定时任务入库.</li></ol><h3 id="4-2-消息幂等性-不重复消费"><a href="#4-2-消息幂等性-不重复消费" class="headerlink" title="4.2 消息幂等性-不重复消费"></a>4.2 消息幂等性-不重复消费</h3><p>幂等性问题</p><ol><li>当生产端发送消息到broke了,broke也给了响应.但是confirm时出现了了闪断,导致发送了两条一样的消息.</li><li>消费端故障或者异常.</li></ol><h4 id="4-2-1-解决方案之唯一id-指纹码机制"><a href="#4-2-1-解决方案之唯一id-指纹码机制" class="headerlink" title="4.2.1 解决方案之唯一id + 指纹码机制"></a>4.2.1 解决方案之唯一id + 指纹码机制</h4><p>用唯一id来保证消费的唯一性,如果消费数据库中已经有了本id就不消费了.</p><p>但在分库分表的情况下还要做id的hash分库</p><p>以下是采用这种方式的架构图<br><a href="https://imgtu.com/i/XrxGxP"><img src="https://s1.ax1x.com/2022/06/08/XrxGxP.png" alt="XrxGxP.png"></a></p><h4 id="4-2-2-解决方案之乐观锁"><a href="#4-2-2-解决方案之乐观锁" class="headerlink" title="4.2.2 解决方案之乐观锁"></a>4.2.2 解决方案之乐观锁</h4><p>其实就是加一个字段version,如果消费了字段更改.</p><p>当第二次消费的时候字段已经更改,无法update.</p><p>如下图所示</p><p><a href="https://imgtu.com/i/XrxbqO"><img src="https://s1.ax1x.com/2022/06/08/XrxbqO.png" alt="XrxbqO.png"></a></p><h4 id="4-2-3-解决方案之redis原子性"><a href="#4-2-3-解决方案之redis原子性" class="headerlink" title="4.2.3 解决方案之redis原子性"></a>4.2.3 解决方案之redis原子性</h4><p>还是利用redis的setnx指令,利用唯一id先将相关数据存储到redis,如果set失败说明已经消费过了,就不需要再做其他操作了.<br>同时定时同步redis中的数据到数据库中.</p><h2 id="5-其他知识点"><a href="#5-其他知识点" class="headerlink" title="5. 其他知识点"></a>5. 其他知识点</h2><h3 id="5-1-惰性队列"><a href="#5-1-惰性队列" class="headerlink" title="5.1 惰性队列"></a>5.1 惰性队列</h3><p>RabbitMQ 从 3.6.0 版本开始引入了惰性队列的概念。正常消息是保存在内存中，惰性队列是将消息先保存在磁盘再加载在内存中进行消费，因此消费速度比队列的默认模式慢；</p><p>适用于以下场景</p><ol><li>当消费者由于各种各样的原因(比如消费者下线、宕机亦或者是由于维护而关闭等)而致使长时间内不能消费消息造成堆积</li><li>2、消息产生速度远大于消费端，导致消息大量积压</li></ol><p>设置方式</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">#设置惰性队列方式一<span class="token operator">:</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>args<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"x-queue-mode"</span><span class="token punctuation">,</span> <span class="token string">"lazy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"myqueue"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>#设置惰性队列方式二<span class="token punctuation">(</span>命令行版本<span class="token punctuation">)</span><span class="token operator">:</span>rabbitmqctl set_policy <span class="token class-name">Lazy</span> <span class="token string">"队列名"</span> <span class="token string">'&#123;"queue-mode":"lazy"&#125;'</span> <span class="token operator">--</span>apply<span class="token operator">-</span><span class="token keyword">to</span> <span class="token namespace">queues</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-消息优先级"><a href="#5-2-消息优先级" class="headerlink" title="5.2 消息优先级"></a>5.2 消息优先级</h3><p>juc包下的阻塞队列有个优先级队列,mq也可以设置消息的优先级.</p><p>正常情况下，消费者将会按照消息进入队列顺序对消息进行消费，如果需要使排在后面的某些特定消息先进行消费，需要对队列和消息设置优先级，没有设置优先级的消息依旧按照进入队列的顺序消费，消费者需要在消息进入队列排序完成后消费才能体现优先级</p><p>优先级范围为 0~255，值越高优先级越高，且消息优先级不能超过队列优先级</p><p>新建队列在此处配置</p><p><a href="https://imgtu.com/i/XseWPP"><img src="https://s1.ax1x.com/2022/06/08/XseWPP.png" alt="XseWPP.png"></a></p><ul><li>消息发送</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>one</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">RabbitUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span>AMQP<span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">BuiltinExchangeType</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Channel</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token comment">/* 生产者代码 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PriorityProvider</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_NAME <span class="token operator">=</span> <span class="token string">"FanoutExchange"</span><span class="token punctuation">;</span>          <span class="token comment">//交换机名称</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">RabbitUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span>EXCHANGE_NAME<span class="token punctuation">,</span> <span class="token class-name">BuiltinExchangeType</span><span class="token punctuation">.</span>FANOUT<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//声明交换机</span>        <span class="token comment">/* 对队列设置优先级为10,值应该为 0~255 之间 */</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"x-max-priority"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"KeFuQueue"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"KeFuQueue"</span><span class="token punctuation">,</span>EXCHANGE_NAME<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/* 消息发送 */</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">"第"</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">"条消息"</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span> i<span class="token operator">%</span><span class="token number">5</span><span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">&#123;</span>               <span class="token comment">//主要是在这一步设置优先级</span>                <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">priority</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置消息优先级为5</span>                channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span>EXCHANGE_NAME<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span>properties<span class="token punctuation">,</span>message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>                channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span>EXCHANGE_NAME<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"消息全部发送"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注意: 只有消息在队列中排序完成之后再被消费者消费才能体现优先级，如果消费者消费时间小于排序时间不会生效</p></blockquote><h3 id="5-3-几个组件"><a href="#5-3-几个组件" class="headerlink" title="5.3 几个组件"></a>5.3 几个组件</h3><h4 id="1-AbstractMessageListenerContainer-消费监听容器"><a href="#1-AbstractMessageListenerContainer-消费监听容器" class="headerlink" title="1. AbstractMessageListenerContainer 消费监听容器"></a>1. AbstractMessageListenerContainer 消费监听容器</h4><p>是 spring 在 RabbitMQ 原生api基础上封装实现的一个消费工具类。<br>该类非常强大，可以实现：监听单个或多个队列、自动启动、自动声明，它还支持动态配置，如动态添加监听队列、动态调整并发数等等；基本上对RabbitMQ消费场景这个类都能满足。<br>在2.0之前只有一个实现 SimpleMessageListenerContainer<br>可进行动态设置，在程序运行过程中可以动态修改消费者数量、接收消息的模式等</p><p>可以通过配置类来配置.</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory</span> cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span>cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置连接池</span>    container<span class="token punctuation">.</span><span class="token function">setQueues</span><span class="token punctuation">(</span><span class="token function">topicQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置监听队列</span>    container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//消费者数量</span>    container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//最大消费者</span>    container<span class="token punctuation">.</span><span class="token function">setDefaultRequeueRejected</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//是否设置重回队列，一般都为false，相当于 channel.basicReject(message.getEnvelope().getDeliveryTag(),false);</span>    container<span class="token punctuation">.</span><span class="token function">setAcknowledgeMode</span><span class="token punctuation">(</span><span class="token class-name">AcknowledgeMode</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消息应答方式,自动/手动/拒绝</span>    container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token annotation punctuation">@Override</span>       <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createConsumerTag</span><span class="token punctuation">(</span><span class="token class-name">String</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> queue <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//消费端的标签策略，每个消费端都有独立的标签，可在控制台的 channel > consumer 中查看 对应tag</span>    <span class="token comment">/* 消息监听器方法一  实际用消息适配器 */</span>    container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ChannelAwareMessageListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">,</span> <span class="token class-name">Channel</span> channel<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"消费者的消息"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SimpleMessageListenerContainer可以监听多个队列，<br>container.setQueueNames的api接收的是一个字符串数组对象。<br>setQueues 也可以设置监听多个队列.</p><ol><li>开发中通过管理控制台,动态添加或者删除客户端监听容器.<br>比如说一台机器负载量过大,我们可以先暂时关掉不重要的队列监听,分配给其他机器.</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ComponentScan</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>       <span class="token class-name">AnnotationConfigApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">addQueueNames</span><span class="token punctuation">(</span><span class="token string">"zhihao.error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">addQueueNames</span><span class="token punctuation">(</span><span class="token string">"zhihao.debug"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>后置处理器</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>   <span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">ConnectionFactory</span> connectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setQueueNames</span><span class="token punctuation">(</span><span class="token string">"zhihao.miao.order"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//后置处理器，接收到的消息都添加了Header请求头</span>       container<span class="token punctuation">.</span><span class="token function">setAfterReceivePostProcessors</span><span class="token punctuation">(</span>message <span class="token operator">-></span> <span class="token punctuation">&#123;</span>           message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"desc"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">return</span> message<span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MessageListener</span><span class="token punctuation">)</span> message <span class="token operator">-></span> <span class="token punctuation">&#123;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"====接收到消息====="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> container<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>3.setConcurrentConsumers设置并发消费者</li></ul><p>setMaxConcurrentConsumers设置最多的并发消费者。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span> <span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">ConnectionFactory</span> connectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     container<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>     container<span class="token punctuation">.</span><span class="token function">setQueueNames</span><span class="token punctuation">(</span><span class="token string">"zhihao.miao.order"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MessageListener</span><span class="token punctuation">)</span> message <span class="token operator">-></span> <span class="token punctuation">&#123;</span>         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"====接收到消息====="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> container<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>设置成功后会有多个消费者,但每次也只有一个能消费到.<br><a href="https://imgtu.com/i/XsuJbQ"><img src="https://s1.ax1x.com/2022/06/09/XsuJbQ.png" alt="XsuJbQ.png"></a></p><ol start="4"><li>设置消费者的Consumer_tag和Arguments</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>   <span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">ConnectionFactory</span> connectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setQueueNames</span><span class="token punctuation">(</span><span class="token string">"zhihao.miao.order"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//设置消费者的consumerTag_tag</span>       container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span>queue <span class="token operator">-></span> <span class="token string">"order_queue_"</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//设置消费者的Arguments</span>       <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       args<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"module"</span><span class="token punctuation">,</span><span class="token string">"订单模块"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       args<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"fun"</span><span class="token punctuation">,</span><span class="token string">"发送消息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setConsumerArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>       container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MessageListener</span><span class="token punctuation">)</span> message <span class="token operator">-></span> <span class="token punctuation">&#123;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"====接收到消息====="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> container<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://imgtu.com/i/Xsuyb4"><img src="https://s1.ax1x.com/2022/06/09/Xsuyb4.png" alt="Xsuyb4.png"></a></p><h4 id="2-MessageListenerAdapter-消息监听适配器"><a href="#2-MessageListenerAdapter-消息监听适配器" class="headerlink" title="2. MessageListenerAdapter 消息监听适配器"></a>2. MessageListenerAdapter 消息监听适配器</h4><p>高级消息监听方法，用于自定义消息监听操作，可以设置处理消息的方法、消息转换等  </p><p>官网上的解释如下.  </p><p>消息监听适配器（adapter），通过反射将消息处理委托给目标监听器的处理方法，并进行灵活的消息类型转换。允许监听器方法对消息内容类型进行操作，完全独立于Rabbit API。</p><p>消息类型转换委托给MessageConverter接口的实现类。 默认情况下，将使用SimpleMessageConverter。 （如果您不希望进行这样的自动消息转换，<br>那么请自己通过#setMessageConverter MessageConverter设置为null）</p><pre><code>//测试限流@RabbitListener(queues = RabbitConfig.QUEUE_A)</code></pre><p>查看源码维护了四个对象</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> queueOrTagToMethodName<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ORIGINAL_DEFAULT_LISTENER_METHOD <span class="token operator">=</span> <span class="token string">"handleMessage"</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Object</span> delegate<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">String</span> defaultListenerMethod<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>使用方式</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">ConnectionFactory</span> connectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        container<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        container<span class="token punctuation">.</span><span class="token function">setQueueNames</span><span class="token punctuation">(</span><span class="token string">"order"</span><span class="token punctuation">,</span><span class="token string">"pay"</span><span class="token punctuation">,</span><span class="token string">"zhihao.miao.order"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MessageListenerAdapter</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置处理器的消费消息的默认方法,如果没有设置，那么默认的处理器中的默认方式是handleMessage方法</span>        adapter<span class="token punctuation">.</span><span class="token function">setDefaultListenerMethod</span><span class="token punctuation">(</span><span class="token string">"onMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> queueOrTagToMethodName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        queueOrTagToMethodName<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"order"</span><span class="token punctuation">,</span><span class="token string">"onorder"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        queueOrTagToMethodName<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"pay"</span><span class="token punctuation">,</span><span class="token string">"onpay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        queueOrTagToMethodName<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"zhihao.miao.order"</span><span class="token punctuation">,</span><span class="token string">"oninfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        adapter<span class="token punctuation">.</span><span class="token function">setQueueOrTagToMethodName</span><span class="token punctuation">(</span>queueOrTagToMethodName<span class="token punctuation">)</span><span class="token punctuation">;</span>        container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> container<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>MessageHandler</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageHandler</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//没有设置默认的处理方法的时候，方法名是handleMessage</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------handleMessage-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//通过设置setDefaultListenerMethod时候指定的方法名</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------onMessage-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//以下指定不同的队列不同的处理方法名</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onorder</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------onorder-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onpay</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------onpay-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">oninfo</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------oninfo-------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>使用MessageListenerAdapter处理器进行消息队列监听处理，如果容器没有设置setDefaultListenerMethod，则处理器中默认的处理方法名是handleMessage，如果设置了setDefaultListenerMethod，则处理器中处理消息的方法名就是setDefaultListenerMethod方法参数设置的值。也可以通过setQueueOrTagToMethodName方法为不同的队列设置不同的消息处理方法。</p></blockquote><p>总体上来看:MessageListenerAdapter<br>1.可以把一个没有实现MessageListener和ChannelAwareMessageListener接口的类适配成一个可以处理消息的处理器<br>2.默认的方法名称为：handleMessage，可以通过setDefaultListenerMethod设置新的消息处理方法<br>3.MessageListenerAdapter支持不同的队列交给不同的方法去执行。使用setQueueOrTagToMethodName方法设置，当根据queue名称没有找到匹配的方法的时候，就会交给默认的方法去处理。</p><h4 id="3-MessageConverter-消息转换器"><a href="#3-MessageConverter-消息转换器" class="headerlink" title="3. MessageConverter 消息转换器"></a>3. MessageConverter 消息转换器</h4><p>我们之前消费者接收到的消息都是byte类型,可以定义自定义的也可以定义一些成熟测消息转换器.</p><ol><li>自定义消息转换器</li></ol><p>需要实现 MessageConverter 接口,重写 toMessage + fromMessage 方法</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>converter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Message</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">MessageProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>support<span class="token punctuation">.</span>converter<span class="token punctuation">.</span></span><span class="token class-name">MessageConversionException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>support<span class="token punctuation">.</span>converter<span class="token punctuation">.</span></span><span class="token class-name">MessageConverter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span><span class="token punctuation">;</span><span class="token comment">/* 自定义消息转换器 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMessageConverter</span> <span class="token keyword">implements</span> <span class="token class-name">MessageConverter</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/*将 Java 对象转换为 Message 对象 */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Message</span> <span class="token function">toMessage</span><span class="token punctuation">(</span><span class="token class-name">Object</span> object<span class="token punctuation">,</span> <span class="token class-name">MessageProperties</span> messageProperties<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessageConversionException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">,</span>messageProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/* 将 Message对象转换为 Java 对象 */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">fromMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> message<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessageConversionException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> contentType <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*判断消息类型，这里将JSON消息转换为String格式        *   String格式数据无法被消息适配器默认的 byte[]参数接收，需要添加String参数方法        */</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">!=</span>contentType <span class="token operator">&amp;&amp;</span> contentType<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>配置进消息MessageListenerAdapter</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory</span> cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span>cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置连接池</span>    container<span class="token punctuation">.</span><span class="token function">setQueues</span><span class="token punctuation">(</span><span class="token function">topicQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置监听队列</span>    container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//消费者数量</span>    container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//最大消费者</span>    container<span class="token punctuation">.</span><span class="token function">setDefaultRequeueRejected</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//是否设置重回队列，一般都为false，相当于 channel.basicReject(message.getEnvelope().getDeliveryTag(),false);</span>    container<span class="token punctuation">.</span><span class="token function">setAcknowledgeMode</span><span class="token punctuation">(</span><span class="token class-name">AcknowledgeMode</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消息应答方式,自动/手动/拒绝</span>    container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createConsumerTag</span><span class="token punctuation">(</span><span class="token class-name">String</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> queue <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消费端的标签策略，每个消费端都有独立的标签，可在控制台的 channel > consumer 中查看 对应tag</span>    <span class="token comment">/*消息监听器使用消息适配器 方案一，通用适配模式 */</span>    <span class="token class-name">MessageListenerAdapter</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setDefaultListenerMethod</span><span class="token punctuation">(</span><span class="token string">"consumerMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//自定义消息处理方法名称</span>    adapter<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//添加消息转换器</span>    container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>第三方消息转换器  Jackson2JsonMessageConverter</li></ol><p>转换为json</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span> <span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory</span> cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>     <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span>cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置连接池</span>     container<span class="token punctuation">.</span><span class="token function">setQueues</span><span class="token punctuation">(</span><span class="token function">topicQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置监听队列</span>     container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//消费者数量</span>     container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//最大消费者</span>     container<span class="token punctuation">.</span><span class="token function">setDefaultRequeueRejected</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//是否设置重回队列，一般都为false，相当于 channel.basicReject(message.getEnvelope().getDeliveryTag(),false);</span>     container<span class="token punctuation">.</span><span class="token function">setAcknowledgeMode</span><span class="token punctuation">(</span><span class="token class-name">AcknowledgeMode</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消息应答方式,自动/手动/拒绝</span>     container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token annotation punctuation">@Override</span>         <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createConsumerTag</span><span class="token punctuation">(</span><span class="token class-name">String</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>             <span class="token keyword">return</span> queue <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消费端的标签策略，每个消费端都有独立的标签，可在控制台的 channel > consumer 中查看 对应tag</span>     <span class="token comment">/*使用默认的JSON格式转换器，消息需要使用Map进行接收*/</span>     <span class="token class-name">MessageListenerAdapter</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     adapter<span class="token punctuation">.</span><span class="token function">setDefaultListenerMethod</span><span class="token punctuation">(</span><span class="token string">"consumerMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//消息适配器默认监听方法名称</span>     <span class="token class-name">Jackson2JsonMessageConverter</span> jsonMessageConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     adapter<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span>jsonMessageConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>     container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> container<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>转换为实体类</p><ul><li><p>实体类</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>experimental<span class="token punctuation">.</span></span><span class="token class-name">Accessors</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@Accessors</span><span class="token punctuation">(</span>chain <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>              <span class="token comment">//ID</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>            <span class="token comment">//名称</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>         <span class="token comment">//内容</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置类</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/* 消息容器SimpleMessageListenerContainer 配置*/</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory</span> cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span>cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置连接池</span>    container<span class="token punctuation">.</span><span class="token function">setQueues</span><span class="token punctuation">(</span><span class="token function">topicQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置监听队列</span>    container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//消费者数量</span>    container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//最大消费者</span>    container<span class="token punctuation">.</span><span class="token function">setDefaultRequeueRejected</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//是否设置重回队列，一般都为false，相当于 channel.basicReject(message.getEnvelope().getDeliveryTag(),false);</span>    container<span class="token punctuation">.</span><span class="token function">setAcknowledgeMode</span><span class="token punctuation">(</span><span class="token class-name">AcknowledgeMode</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消息应答方式,自动/手动/拒绝</span>    container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createConsumerTag</span><span class="token punctuation">(</span><span class="token class-name">String</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> queue <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消费端的标签策略，每个消费端都有独立的标签，可在控制台的 channel > consumer 中查看 对应tag</span>            <span class="token comment">/*使用默认的JSON格式转换器，消息转换为具体的Java对象，需要使用对象进行接收*/</span>    <span class="token class-name">MessageListenerAdapter</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setDefaultListenerMethod</span><span class="token punctuation">(</span><span class="token string">"consumerMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Jackson2JsonMessageConverter</span> jackson2JsonMessageConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">DefaultJackson2JavaTypeMapper</span> javaTypeMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJackson2JavaTypeMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    javaTypeMapper<span class="token punctuation">.</span><span class="token function">addTrustedPackages</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//允许使用所有包进行转换，默认会使用java核心类进行转换</span>    jackson2JsonMessageConverter<span class="token punctuation">.</span><span class="token function">setJavaTypeMapper</span><span class="token punctuation">(</span>javaTypeMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span>jackson2JsonMessageConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>重点在这几行</p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Jackson2JsonMessageConverter</span> jackson2JsonMessageConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">DefaultJackson2JavaTypeMapper</span> javaTypeMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJackson2JavaTypeMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>javaTypeMapper<span class="token punctuation">.</span><span class="token function">addTrustedPackages</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//允许使用所有包进行转换，</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="3"><li>配置不同实体类转换</li></ol><p>配置类如下 </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory</span> cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span>cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置连接池</span>    container<span class="token punctuation">.</span><span class="token function">setQueues</span><span class="token punctuation">(</span><span class="token function">topicQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置监听队列</span>    container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//消费者数量</span>    container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//最大消费者</span>    container<span class="token punctuation">.</span><span class="token function">setDefaultRequeueRejected</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//是否设置重回队列，一般都为false，相当于 channel.basicReject(message.getEnvelope().getDeliveryTag(),false);</span>    container<span class="token punctuation">.</span><span class="token function">setAcknowledgeMode</span><span class="token punctuation">(</span><span class="token class-name">AcknowledgeMode</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消息应答方式,自动/手动/拒绝</span>    container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createConsumerTag</span><span class="token punctuation">(</span><span class="token class-name">String</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> queue <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消费端的标签策略，每个消费端都有独立的标签，可在控制台的 channel > consumer 中查看 对应tag</span>    <span class="token comment">/*使用默认的JSON格式转换器，消息转换为具体的Java对象，需要使用对象进行接收,支持多映射*/</span>    <span class="token class-name">MessageListenerAdapter</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setDefaultListenerMethod</span><span class="token punctuation">(</span><span class="token string">"consumerMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Jackson2JsonMessageConverter</span> jackson2JsonMessageConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">DefaultJackson2JavaTypeMapper</span> javaTypeMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJackson2JavaTypeMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span><span class="token punctuation">></span></span> idClassMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//创建Map进行多映射指定,KEY为名称，value为类全路径</span>    idClassMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"student"</span><span class="token punctuation">,</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span>Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    idClassMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"packaged"</span><span class="token punctuation">,</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span>Packaged</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    javaTypeMapper<span class="token punctuation">.</span><span class="token function">setIdClassMapping</span><span class="token punctuation">(</span>idClassMap<span class="token punctuation">)</span><span class="token punctuation">;</span>    javaTypeMapper<span class="token punctuation">.</span><span class="token function">addTrustedPackages</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//允许使用所有包进行转换，默认会使用 java核心类进行转换</span>    jackson2JsonMessageConverter<span class="token punctuation">.</span><span class="token function">setJavaTypeMapper</span><span class="token punctuation">(</span>javaTypeMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span>jackson2JsonMessageConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> container<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>重点在这里</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span><span class="token punctuation">></span></span> idClassMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//创建Map进行多映射指定,KEY为名称，value为类全路径</span>idClassMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"student"</span><span class="token punctuation">,</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span>Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>idClassMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"packaged"</span><span class="token punctuation">,</span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>dmbjz<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span>Packaged</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>javaTypeMapper<span class="token punctuation">.</span><span class="token function">setIdClassMapping</span><span class="token punctuation">(</span>idClassMap<span class="token punctuation">)</span><span class="token punctuation">;</span>javaTypeMapper<span class="token punctuation">.</span><span class="token function">addTrustedPackages</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//允许使用所有包进行转换，默认会使用 java核心类进行转换</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上我们做了很多工作,但是联想到之前加了一个注解就解决了.</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">bbitHandler<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> <span class="token class-name">RabbitMessage</span> rabbitMessage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//String body = new String(message.getBody());</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接收处理队列A当中的消息： "</span> <span class="token operator">+</span> rabbitMessage<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>因此猜想是否加了这个注解后生成了代理类配置进了adapter?</p><ol start="3"><li>多消息类型转换器</li></ol><p>我们可以为adapter配置多个消息转换器.</p><p>不同的消息配置不同的消息转换类型 </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">SimpleMessageListenerContainer</span> <span class="token function">messageListenerContainer</span><span class="token punctuation">(</span><span class="token class-name">CachingConnectionFactory</span> cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">SimpleMessageListenerContainer</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMessageListenerContainer</span><span class="token punctuation">(</span>cachingConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置连接池</span>    container<span class="token punctuation">.</span><span class="token function">setQueues</span><span class="token punctuation">(</span><span class="token function">topicQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">topicQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">directQueue2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置监听队列</span>    container<span class="token punctuation">.</span><span class="token function">setConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//消费者数量</span>    container<span class="token punctuation">.</span><span class="token function">setMaxConcurrentConsumers</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//最大消费者</span>    container<span class="token punctuation">.</span><span class="token function">setDefaultRequeueRejected</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">//是否设置重回队列，一般都为false，相当于 channel.basicReject(message.getEnvelope().getDeliveryTag(),false);</span>    container<span class="token punctuation">.</span><span class="token function">setAcknowledgeMode</span><span class="token punctuation">(</span><span class="token class-name">AcknowledgeMode</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消息应答方式,自动/手动/拒绝</span>    container<span class="token punctuation">.</span><span class="token function">setConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConsumerTagStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">createConsumerTag</span><span class="token punctuation">(</span><span class="token class-name">String</span> queue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> queue <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//消费端的标签策略，每个消费端都有独立的标签，可在控制台的 channel > consumer 中查看 对应tag</span>        <span class="token comment">/*多类型消息转换器，不同消息类型使用不同类型转换器进行转换*/</span>    <span class="token class-name">MessageListenerAdapter</span> adapter <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">MessageListenerAdapter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageDelegate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setDefaultListenerMethod</span><span class="token punctuation">(</span><span class="token string">"extComsumeMessage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">ContentTypeDelegatingMessageConverter</span> converter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentTypeDelegatingMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//复杂消息转换器</span>    <span class="token class-name">TextMessageConverter</span> textConvert <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//文本转换器</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span>textConvert<span class="token punctuation">)</span><span class="token punctuation">;</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"html/text"</span><span class="token punctuation">,</span>textConvert<span class="token punctuation">)</span><span class="token punctuation">;</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"xml/text"</span><span class="token punctuation">,</span>textConvert<span class="token punctuation">)</span><span class="token punctuation">;</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"text/plain"</span><span class="token punctuation">,</span>textConvert<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Jackson2JsonMessageConverter</span> jsonConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//JSON转换器</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"json"</span><span class="token punctuation">,</span>jsonConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">,</span>jsonConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">ImageMessageConverter</span> imageConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImageMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//图片转换器</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"image/png"</span><span class="token punctuation">,</span>imageConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">,</span>imageConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">PDFMessageConverter</span> pdfConverter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PDFMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//PDF转换器</span>    converter<span class="token punctuation">.</span><span class="token function">addDelegate</span><span class="token punctuation">(</span><span class="token string">"application/pdf"</span><span class="token punctuation">,</span>pdfConverter<span class="token punctuation">)</span><span class="token punctuation">;</span>    adapter<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span>converter<span class="token punctuation">)</span><span class="token punctuation">;</span>    container<span class="token punctuation">.</span><span class="token function">setMessageListener</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> container<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="组件小结"><a href="#组件小结" class="headerlink" title="组件小结:"></a>组件小结:</h4><ol><li>可以为mq配置SimpleMessageListenerContainer,此组件可以动态修改一些消费者的配置如消费者数量、接收消息的模式,监听的队列增删等等.</li><li>MessageListenerContainer配置MessageListenerAdapter,MessageListenerAdapter配置处理器,当消息到来的时候,可以走处理器默认的方法,也可以根据配置,让不同队列走不同方法.</li><li>MessageListenerAdapter可以配置MessageConverter,转换不同的消息</li><li>以上转换配置在消费端可以通过注解完成,原理应该还是动态代理.</li><li>比较实用一点应该还是在生产端配置消息转换器,然后通过对容器参数动态修改.</li></ol><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>主要总结了如下内容 </p><ol><li>不可路由消息,有两类,一类找不到交换机,一类找不到队列,找不到队列的可以发送到备份交换机.</li><li>消费端手动ack,保证消息的不会失效.消费点做限流,降低负载.</li><li>ttl和死信队列,消息设置ttl,当消息过期后,或队列满了成为死信.两者配合可做延迟队列.</li><li>如何保证消息可靠性和幂等性.可靠性可以二次发送也可以二次入库.幂等性根据唯一id和reids来做.</li><li>一些组件的封装,可以见上面的.</li></ol><p>参考:<br><a href="https://www.jianshu.com/p/d21bafe3b9fd">简书:MessageListenerAdapter详解</a><br><a href="https://juejin.cn/post/6844903776545931272">掘金:消息适配器 - MessageListenerAdapter</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> mq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmq基本操作</title>
      <link href="/2022/06/08/rabbitmq-ji-ben-cao-zuo/"/>
      <url>/2022/06/08/rabbitmq-ji-ben-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="rabbitmq基本操作"><a href="#rabbitmq基本操作" class="headerlink" title="rabbitmq基本操作"></a>rabbitmq基本操作</h1><blockquote><p>这次把一些可能实际工作中遇到的问题整理(或许以后会遇到更多问题),<br>翻出之前的笔记,之前在学习的时候记录了笔记,但是也没有整理,知识也没有体系.所以这只是老笔记的整理.</p></blockquote><h2 id="1-rabbitmq基本概念"><a href="#1-rabbitmq基本概念" class="headerlink" title="1. rabbitmq基本概念"></a>1. rabbitmq基本概念</h2><p>安装:各个系统不同,网上可以轻松找到自己对应的系统.</p><h3 id="1-1-四个核心概念"><a href="#1-1-四个核心概念" class="headerlink" title="1.1 四个核心概念"></a>1.1 四个核心概念</h3><p>用一张图可以很好的表示<br><a href="https://imgtu.com/i/XBn2Pf"><img src="https://s1.ax1x.com/2022/06/07/XBn2Pf.png" alt="XBn2Pf.png"></a><br>生产者:生产者生产的数据与交换机为一对一关系<br>交换机:交换机与队列为一对多关系<br>队列:一个队列只能对应一个消费者<br>消费者:绑定多个消费者消息也只能被其中一名消费者获取</p><p><a href="https://imgtu.com/i/XBnIqs"><img src="https://s1.ax1x.com/2022/06/07/XBnIqs.png" alt="XBnIqs.png"></a></p><p>当然如果没有使用过mq,在这里硬想这四个概念也只能记住名字.安装好之后实际操作,然后进控制台点点点,就能理解的更深了.</p><h3 id="1-2-其他概念"><a href="#1-2-其他概念" class="headerlink" title="1.2 其他概念"></a>1.2 其他概念</h3><ul><li>broker:<br>又称 Server，接收客户端的连接，实现AMQP实体服务，接收和分发消息的应用，RabbitMQ Server 就是 Message Broker </li><li>Connection<br>连接，应用服务与Server的连接,本质上是基于tcp的链接.</li><li>Channel<br>信道，客户端可建立多个Channel，每个Channel代表一个会话任务</li><li>message<br>MessageProperties 和 body 构成.BasicProperties （基本API）可对消息的优先级、过期时间等参数进行设置 </li><li>Exchange<br>交换机，消息将根据 routeKey 被交换机转发给对应的绑定队列</li><li>queue<br>消息最终被送到这里等待消费者取走，参数中的Auto-delete意为当前队列的最后一个消息被取出后是否自动删除</li><li>Binding<br>exchange 和 queue 之间的虚拟连接，二者通过 routingkey 进行绑定</li><li>Routingkey：<br>路由规则，交换机可以用它来确定消息改被路由到哪里</li><li>Virtual host<br>虚拟主机，用于进行逻辑隔离，是最上层的消息路由，一个虚拟主机中可以有多个 Exchange 和 Queue，同一个虚拟主机中不能有名称一样的 Exchange 和 Queue</li></ul><p><a href="https://imgtu.com/i/XBnHI0"><img src="https://s1.ax1x.com/2022/06/07/XBnHI0.png" alt="XBnHI0.png"></a></p><h2 id="2-基本的消息模型"><a href="#2-基本的消息模型" class="headerlink" title="2. 基本的消息模型"></a>2. 基本的消息模型</h2><p>rabbitmq官方支持六种,常用的也就四种.</p><h3 id="2-1-maven和虚拟主机"><a href="#2-1-maven和虚拟主机" class="headerlink" title="2.1 maven和虚拟主机"></a>2.1 maven和虚拟主机</h3><ul><li>xml<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>虚拟主机</li></ul><p>创建虚拟主机和用户</p><p><a href="https://imgtu.com/i/XBnqiV"><img src="https://s1.ax1x.com/2022/06/07/XBnqiV.png" alt="XBnqiV.png"></a></p><h3 id="2-2-workQueues模式"><a href="#2-2-workQueues模式" class="headerlink" title="2.2 workQueues模式"></a>2.2 workQueues模式</h3><ul><li>生产者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">workQueues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//队列</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"workQueues"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//发送</span>        <span class="token class-name">String</span> body<span class="token operator">=</span><span class="token string">"workQueues"</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"workQueues"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//释放</span>        channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>消费者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">workQueues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span>       <span class="token comment">//1.链接</span>       <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//参数</span>       factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//链接</span>       <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//channel</span>       <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//队列</span>       channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"workQueues"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//接受</span>       <span class="token class-name">Consumer</span> consumer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>           <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>               <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"body:"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>       channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"workQueues"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以理解为没有指定交换机,而是走了队列,多个消费者消费的话也只能轮询消费.</p><h3 id="发布模式"><a href="#发布模式" class="headerlink" title="发布模式"></a>发布模式</h3><p>可以理解为没有指定routingKey,交换机会把消息发送到与它绑定的所有队列中.</p><ul><li>生产者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PubPro</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//交换机</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"start-fanout"</span><span class="token punctuation">,</span> <span class="token class-name">BuiltinExchangeType</span><span class="token punctuation">.</span>FANOUT<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//队列</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"start-fanout_queue1"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"start-fanout_queue2"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//帮顶</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-fanout_queue1"</span><span class="token punctuation">,</span><span class="token string">"start-fanout"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-fanout_queue2"</span><span class="token punctuation">,</span><span class="token string">"start-fanout"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//发送</span>        <span class="token class-name">String</span> body<span class="token operator">=</span><span class="token string">"pub-pub:"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-fanout"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>消费者</li></ul><p>消费者1,消费者2,需要监听不同消息队列.</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PubCon2</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span><span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//接受</span>        <span class="token class-name">Consumer</span> consumer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"body:"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"start-fanout_queue2"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//释放--消费者不需要关闭资源</span>        <span class="token comment">//channel.close();</span>        <span class="token comment">//connection.close();</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="直连模式"><a href="#直连模式" class="headerlink" title="直连模式"></a>直连模式</h3><p>可以理解为只有routingKey完全相同,才会把消息发送到与routingKey匹配的队列上.</p><ul><li>消费者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoutingPro</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//交换机</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"start-route"</span><span class="token punctuation">,</span> <span class="token class-name">BuiltinExchangeType</span><span class="token punctuation">.</span>DIRECT<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//队列</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"start-route_queue1"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"start-route_queue2"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//帮顶</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-route_queue1"</span><span class="token punctuation">,</span><span class="token string">"start-route"</span><span class="token punctuation">,</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-route_queue2"</span><span class="token punctuation">,</span><span class="token string">"start-route"</span><span class="token punctuation">,</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-route_queue2"</span><span class="token punctuation">,</span><span class="token string">"start-route"</span><span class="token punctuation">,</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//发送</span>        <span class="token class-name">String</span> body<span class="token operator">=</span><span class="token string">"route:info:"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> body2<span class="token operator">=</span><span class="token string">"route:error:"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-route"</span><span class="token punctuation">,</span><span class="token string">"info"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-route"</span><span class="token punctuation">,</span><span class="token string">"error"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body2<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>生产者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoutingCon1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span><span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//接受</span>        <span class="token class-name">Consumer</span> consumer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"body:"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"start-route_queue1"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//释放--消费者不需要关闭资源</span>        <span class="token comment">//channel.close();</span>        <span class="token comment">//connection.close();</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="topic模式"><a href="#topic模式" class="headerlink" title="topic模式"></a>topic模式</h3><p>可以理解为直连模式升级版,当routingKey基于一定规则匹配上时,发送到与交换机帮顶的匹配上的队列中.</p><ul><li>生产者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TopicPro</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//交换机</span>        channel<span class="token punctuation">.</span><span class="token function">exchangeDeclare</span><span class="token punctuation">(</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span> <span class="token class-name">BuiltinExchangeType</span><span class="token punctuation">.</span>TOPIC<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//队列</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"start-topic_queue1"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">"start-topic_queue2"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//帮顶</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-topic_queue1"</span><span class="token punctuation">,</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"#.error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-topic_queue1"</span><span class="token punctuation">,</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"order.*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">queueBind</span><span class="token punctuation">(</span><span class="token string">"start-topic_queue2"</span><span class="token punctuation">,</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"*.*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//发送</span>        <span class="token class-name">String</span> body<span class="token operator">=</span><span class="token string">"topic:info:"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> body2<span class="token operator">=</span><span class="token string">"topic:error:"</span><span class="token operator">+</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"order.info"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"goods.error"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body2<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"order.error"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body2<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">"start-topic"</span><span class="token punctuation">,</span><span class="token string">"goods.info"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>消费者</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TopicCon1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">&#123;</span><span class="token comment">//1.链接</span>        <span class="token class-name">ConnectionFactory</span> factory<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//参数</span>        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">"/hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"hcq"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"121056"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//链接</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//channel</span>        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//接受</span>        <span class="token class-name">Consumer</span> consumer<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"body:"</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">"start-topic_queue1"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//释放--消费者不需要关闭资源</span>        <span class="token comment">//channel.close();</span>        <span class="token comment">//connection.close();</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-整合springboot"><a href="#3-整合springboot" class="headerlink" title="3. 整合springboot"></a>3. 整合springboot</h2><p>整合spring在刚学习mq的时候还做过,不过现在都是springboot的项目,因此只整合一下springboot.</p><ul><li><p>pom文件</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>yml</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  port: 6700spring:  rabbitmq:    port: 5672    host: localhost    username: hcq    password: 121056    #这个配置是保证提供者确保消息推送到交换机中，不管成不成功，都会回调    publisher-confirm-type: correlated    #保证交换机能把消息推送到队列中    publisher-returns: true    virtual-host: &#x2F;hcq    #这个配置是保证消费者会消费消息，手动确认    listener:      simple:        acknowledge-mode: manual    template:      mandatory: true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-1-配置类"><a href="#3-1-配置类" class="headerlink" title="3.1 配置类"></a>3.1 配置类</h3></li><li><p>RabbitConfig</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>guide<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>connection<span class="token punctuation">.</span></span><span class="token class-name">CachingConnectionFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>connection<span class="token punctuation">.</span></span><span class="token class-name">ConnectionFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>rabbit<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RabbitTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>support<span class="token punctuation">.</span>converter<span class="token punctuation">.</span></span><span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>amqp<span class="token punctuation">.</span>support<span class="token punctuation">.</span>converter<span class="token punctuation">.</span></span><span class="token class-name">MessageConverter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token comment">/*配置类*/</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * MQ地址     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> host<span class="token punctuation">;</span>    <span class="token comment">/**     * MQ端口     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.port&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>    <span class="token comment">/**     * 用户名     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.username&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token comment">/**     * 密码     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.password&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token comment">/**     * 虚拟主机     */</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.rabbitmq.virtual-host&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> virtualHost<span class="token punctuation">;</span>    <span class="token comment">// 定义一个或多个交换机</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_A <span class="token operator">=</span> <span class="token string">"ex-direct-guide1"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> EXCHANGE_B <span class="token operator">=</span> <span class="token string">"ex-topic-guide2"</span><span class="token punctuation">;</span>    <span class="token comment">// 定义队列</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_A <span class="token operator">=</span> <span class="token string">"queue-guide1"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_B <span class="token operator">=</span> <span class="token string">"queue-guide2"</span><span class="token punctuation">;</span>    <span class="token comment">// 定义routing-key</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_A <span class="token operator">=</span> <span class="token string">"routing.key.guide1"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ROUTING_KEY_B <span class="token operator">=</span> <span class="token string">"routing.key.*"</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 针对消费者配置     * 1. 设置交换机类型     * 2. 将队列绑定到交换机     FanoutExchange: 将消息分发到所有的绑定队列，无routingkey的概念     HeadersExchange ：通过添加属性key-value匹配     DirectExchange:按照routingkey分发到指定队列     TopicExchange:多关键字匹配     **/</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">DirectExchange</span> <span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DirectExchange</span><span class="token punctuation">(</span>EXCHANGE_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//topic交换机</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">TopicExchange</span> <span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TopicExchange</span><span class="token punctuation">(</span>EXCHANGE_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 获取队列A     * @return     */</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>QUEUE_A<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//队列持久</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Queue</span> <span class="token function">queueB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span>QUEUE_B<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//队列持久</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 一个交换机可以绑定多个消息队列，也就是消息通过一个交换机，可以分发到不同的队列当中去。</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">defaultExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 将queueB和ROUTING_KEY_B绑定     * @return     */</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">queueB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * queueA和ROUTING_KEY_B绑定     * @return     */</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Binding</span> <span class="token function">binding2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">BindingBuilder</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token function">queueA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span><span class="token function">topicExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">MessageConverter</span> <span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 创建连接工厂,获取MQ的连接</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">ConnectionFactory</span> <span class="token function">connectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">CachingConnectionFactory</span> connectionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CachingConnectionFactory</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>        connectionFactory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span>virtualHost<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> connectionFactory<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 创建rabbitTemplate</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"rabbitTemplate"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">RabbitTemplate</span> <span class="token function">rabbitTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">RabbitTemplate</span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RabbitTemplate</span><span class="token punctuation">(</span><span class="token function">connectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//默认使用simpleMessageConverter  在此处更改为json序列化方案</span>        template<span class="token punctuation">.</span><span class="token function">setMessageConverter</span><span class="token punctuation">(</span><span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> template<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-生产者"><a href="#3-2-生产者" class="headerlink" title="3.2 生产者"></a>3.2 生产者</h3></li><li><p>MsgProducer</p></li></ul><p>其实就是调用rabbitTemplate来发送消息</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgProducer</span><span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbitTemplate<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMsg</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">CorrelationData</span> correlationId <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorrelationData</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">RabbitMessage</span> rabbitMessage<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">RabbitMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitMessage<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">21323132132l</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitMessage<span class="token punctuation">.</span><span class="token function">setMsg</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbitMessage<span class="token punctuation">.</span><span class="token function">setSendTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"【++++++++++++++++++ message ：&#123;&#125;】"</span><span class="token punctuation">,</span> objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>rabbitMessage<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//把消息放入ROUTING_KEY_A对应的队列当中去，对应的是队列A</span>        rabbitTemplate<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>EXCHANGE_A<span class="token punctuation">,</span> <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>ROUTING_KEY_A<span class="token punctuation">,</span> rabbitMessage<span class="token punctuation">,</span> correlationId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-3-消费者"><a href="#3-3-消费者" class="headerlink" title="3.3 消费者"></a>3.3 消费者</h3><ul><li>MsgReceiver</li></ul><p>形式上就是在类上加@RabbitListener(queues = RabbitConfig.QUEUE_A) 注解,要标注队列名.<br>在方法上加 @RabbitHandler注解.</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>queues <span class="token operator">=</span> <span class="token class-name">RabbitConfig</span><span class="token punctuation">.</span>QUEUE_A<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MsgReceiver</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@RabbitHandler</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Payload</span> <span class="token class-name">RabbitMessage</span> rabbitMessage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//String body = new String(message.getBody());</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"接收处理队列A当中的消息： "</span> <span class="token operator">+</span> rabbitMessage<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol><li>总结了rabbitmq中的组件,概念,</li><li>四种常见的模式</li><li>整合springboot</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> mq </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分布式锁和redisoon实现</title>
      <link href="/2022/06/05/redis-fen-bu-shi-suo-he-redisoon-xiang-guan-cao-zuo/"/>
      <url>/2022/06/05/redis-fen-bu-shi-suo-he-redisoon-xiang-guan-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="redis分布式锁和redisoon实现"><a href="#redis分布式锁和redisoon实现" class="headerlink" title="redis分布式锁和redisoon实现"></a>redis分布式锁和redisoon实现</h1><blockquote><p>之前的项目中有一个需求,向微信请求获取小程序二维码,需要一个key,这个key需要拿着开发者id和密钥获取,有效期7200秒.这个key存储到redis中,过期后再去微信访问获取.<br>我想如果使用redis的setnx可以解决这个问题.但是可能会出现多个服务请求获取不到,然后都去调用微信的接口去拿,这样又会导致新的存储的key失效.<br>还是得让这个获取-设置的操作成为原子性的,但使用lua脚本似乎也不能解决问题,因为中间需要调用微信的接口.<br>所以还得是使用分布式锁</p></blockquote><p><a href="https://imgtu.com/i/XaXhDI"><img src="https://s1.ax1x.com/2022/06/04/XaXhDI.png" alt="XaXhDI.png"></a></p><h2 id="分布式锁设计"><a href="#分布式锁设计" class="headerlink" title="分布式锁设计"></a>分布式锁设计</h2><blockquote><p>分布式锁有几种实现,自己使用redis简单的实现.使用redisson的实现,zk的实现.<br>这种可以采用适配器模式来实现</p></blockquote><ul><li>DistributedLock<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 锁对象 * DistributedLock提供对不同分布式锁的包装,会有redis实现和zk实现,DistributedLock将第三方的实现返回的锁包装.提供对外统一的形式. */</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DistributedLock</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> key<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">;</span>    <span class="token keyword">private</span>  <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">;</span>    <span class="token comment">/**     * 具体实现类     */</span>    <span class="token keyword">private</span>  <span class="token class-name">DistributedLockAdapter</span> locker<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> locker<span class="token punctuation">.</span><span class="token function">tryLock</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>waitTime<span class="token punctuation">,</span>leaseTime<span class="token punctuation">,</span>unit<span class="token punctuation">,</span>isFair<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>        locker<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>waitTime<span class="token punctuation">,</span>leaseTime<span class="token punctuation">,</span>unit<span class="token punctuation">,</span>isFair<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        locker<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>DistributedLockAdapter</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 分布式锁具体实现 */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DistributedLockAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * 尝试加锁     * @param key     * @param waitTime     * @param leaseTime     * @param unit     */</span>    <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 枷锁     * @param key     * @param waitTime     * @param leaseTime     * @param unit     * @param isFair     */</span>    <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 解锁     */</span>    <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>RedissonDistributedLockAdapter<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedissonDistributedLockAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">DistributedLockAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">RedissonClient</span> redisson<span class="token operator">=</span><span class="token class-name">Redisson</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">RLock</span> rLock<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">getLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>rLock<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isFair<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            rLock <span class="token operator">=</span> redisson<span class="token punctuation">.</span><span class="token function">getFairLock</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>LOCK_KEY_PREFIX <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            rLock <span class="token operator">=</span>  redisson<span class="token punctuation">.</span><span class="token function">getLock</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>LOCK_KEY_PREFIX <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>        <span class="token function">getLock</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>isFair<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> rLock<span class="token punctuation">.</span><span class="token function">tryLock</span><span class="token punctuation">(</span>waitTime<span class="token punctuation">,</span> leaseTime<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">getLock</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>isFair<span class="token punctuation">)</span><span class="token punctuation">;</span>        rLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span>leaseTime<span class="token punctuation">,</span>unit<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>rLock<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rLock<span class="token punctuation">.</span><span class="token function">isLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                rLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>RedisDistributedLockFactory</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span><span class="token operator">*</span> <span class="token operator">*</span> 获取redis分布式锁 <span class="token operator">*</span><span class="token operator">/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisDistributedLockFactory</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DistributedLock</span> <span class="token function">getDistributedLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DistributedLock</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>waitTime<span class="token punctuation">,</span>leaseTime<span class="token punctuation">,</span>unit<span class="token punctuation">,</span>isFair<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">RedissonDistributedLockAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="不使用redisson自己使用redis实现"><a href="#不使用redisson自己使用redis实现" class="headerlink" title="不使用redisson自己使用redis实现"></a>不使用redisson自己使用redis实现</h2><ul><li>RedisDistributedLock</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">RedisTemplate</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Deprecated</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisDistributedLock</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> redisTemplate<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> lockFlag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> UNLOCK_LUA<span class="token punctuation">;</span>    <span class="token comment">/*     * 通过lua脚本释放锁,来达到释放锁的原子操作     */</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        UNLOCK_LUA <span class="token operator">=</span> <span class="token string">"if redis.call(\"get\",KEYS[1]) == ARGV[1] "</span> <span class="token operator">+</span>                <span class="token string">"then "</span> <span class="token operator">+</span>                <span class="token string">"    return redis.call(\"del\",KEYS[1]) "</span> <span class="token operator">+</span>                <span class="token string">"else "</span> <span class="token operator">+</span>                <span class="token string">"    return 0 "</span> <span class="token operator">+</span>                <span class="token string">"end "</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">RedisDistributedLock</span><span class="token punctuation">(</span><span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> redisTemplate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>redisTemplate <span class="token operator">=</span> redisTemplate<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 获取锁     *     * @param key 锁的key     * @param expire 获取锁超时时间     * @param retryTimes 重试次数     * @param sleepMillis 获取锁失败的重试间隔     * @return 成功/失败     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> expire<span class="token punctuation">,</span> <span class="token keyword">int</span> retryTimes<span class="token punctuation">,</span> <span class="token keyword">long</span> sleepMillis<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">boolean</span> result <span class="token operator">=</span> <span class="token function">setRedis</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> expire<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 如果获取锁失败，按照传入的重试次数进行重试</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> retryTimes<span class="token operator">--</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"get redisDistributeLock failed, retrying..."</span> <span class="token operator">+</span> retryTimes<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>sleepMillis<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"Interrupted!"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            result <span class="token operator">=</span> <span class="token function">setRedis</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> expire<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">setRedis</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token keyword">long</span> expire<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">boolean</span> status <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">RedisCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> connection <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> uuid <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                lockFlag<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keyByte <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> uuidByte <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">boolean</span> result <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>keyByte<span class="token punctuation">,</span> uuidByte<span class="token punctuation">,</span> <span class="token class-name">Expiration</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>expire<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">RedisStringCommands<span class="token punctuation">.</span>SetOption</span><span class="token punctuation">.</span><span class="token function">ifAbsent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> result<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> status<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"set redisDistributeLock occured an exception"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 释放锁     * @param key 锁的key     * @return 成功/失败     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">releaseLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 释放锁的时候，有可能因为持锁之后方法执行时间大于锁的有效期，此时有可能已经被另外一个线程持有锁，所以不能直接删除</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 使用lua脚本删除redis中匹配value的key，可以避免由于方法执行时间过长而redis锁自动过期失效的时候误删其他线程的锁</span>            <span class="token comment">// spring自带的执行脚本方法中，集群模式直接抛出不支持执行脚本的异常，所以只能拿到原redis的connection来执行脚本</span>            <span class="token class-name">Boolean</span> result <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">RedisCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> connection <span class="token operator">-></span> <span class="token punctuation">&#123;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> scriptByte <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>UNLOCK_LUA<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> connection<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span>scriptByte<span class="token punctuation">,</span>  <span class="token class-name">ReturnType</span><span class="token punctuation">.</span>BOOLEAN<span class="token punctuation">,</span> <span class="token number">1</span>                        <span class="token punctuation">,</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>                        <span class="token punctuation">,</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getStringSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span>lockFlag<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> result<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"release redisDistributeLock occured an exception"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            lockFlag<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="使用zk实现"><a href="#使用zk实现" class="headerlink" title="使用zk实现"></a>使用zk实现</h2><ul><li>ZookeeperDistributedLock</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZookeeperDistributedLock</span> <span class="token keyword">implements</span> <span class="token class-name">DistributedLockAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">ZookeeperDistributedLock</span><span class="token punctuation">(</span><span class="token class-name">CuratorFramework</span> client<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>client<span class="token operator">=</span>client<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">CuratorFramework</span> client<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">InterProcessMutex</span> lock<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">getLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token class-name">InterProcessMutex</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InterProcessMutex</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> <span class="token function">getPath</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">tryLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token function">getLock</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>lock<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span>waitTime<span class="token punctuation">,</span>unit<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        lock<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lock<span class="token punctuation">.</span><span class="token function">isAcquiredInThisProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            lock<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>PATH_SPLIT <span class="token operator">+</span> <span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>LOCK_KEY_PREFIX <span class="token operator">+</span> <span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>PATH_SPLIT <span class="token operator">+</span> key<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ZookeeperDistributedLockFactory</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"rrs.lock"</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">"lockerType"</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">"ZK"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZookeeperDistributedLockFactory</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">CuratorFramework</span> client<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">DistributedLock</span> <span class="token function">getLock</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> waitTime<span class="token punctuation">,</span> <span class="token keyword">long</span> leaseTime<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isFair<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">ZookeeperDistributedLock</span> <span class="token class-name">Locker</span><span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ZookeeperDistributedLock</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DistributedLock</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>waitTime<span class="token punctuation">,</span>leaseTime<span class="token punctuation">,</span>unit<span class="token punctuation">,</span>isFair<span class="token punctuation">,</span> <span class="token class-name">Locker</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>如果我们自己使用setnx 也可以实现简单的分布式锁. 但有以下几个缺点 不具备可重入性,不支持续约,不具备阻塞的能力</li><li>Redisson的分布式锁在满足以上三个基本要求的同时还增加了线程安全的特点。利用Redis的Hash结构作为储存单元，将业务指定的名称作为key，将随机UUID和线程ID作为field，最后将加锁的次数作为value来储存.</li><li>Redisson的可重入锁解决了setnx锁的许多先天性不足，但是由于它仍然是以单一一个key的方式储存在固定的一个Redis节点里，并且有自动失效期。</li><li>redis作者Salvatore提出了一个基于多个节点的高可用分布式锁的算法，起名叫红锁RedLock。</li><li>虽然Redlock的算法提供了高可用的特性，但建立在大多数可见原则的前提下，这样的算法适用性仍然有一定局限。Redisson为此提供了基于增强型的算法的高可用分布式联锁RedissonMultiLock。这种算法要求客户端必须成功获取全部节点的锁才被视为加锁成功，从而更进一步提高了算法的可靠性。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nvm管理node版本</title>
      <link href="/2022/06/05/nvm-guan-li-node-ban-ben/"/>
      <url>/2022/06/05/nvm-guan-li-node-ban-ben/</url>
      
        <content type="html"><![CDATA[<h1 id="使用nvm管理node版本"><a href="#使用nvm管理node版本" class="headerlink" title="使用nvm管理node版本"></a>使用nvm管理node版本</h1><h2 id="1-window下操作"><a href="#1-window下操作" class="headerlink" title="1. window下操作"></a>1. window下操作</h2><h3 id="第一步：下载NVM下载nvm并解压"><a href="#第一步：下载NVM下载nvm并解压" class="headerlink" title="第一步：下载NVM下载nvm并解压"></a>第一步：下载NVM下载nvm并解压</h3><p>nvm-window 下载地址：<a href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a></p><p>下载文件，然后解压得到nvm-noinstall文件夹，重命名为nvm(名字随意)。<br>这里有四个可下载的文件:<br>nvm-noinstall.zip： 这个是绿色免安装版本，但是使用之前需要配置。（个人推荐这个）<br>nvm-setup.zip：这是一个安装包，下载之后点击安装，无需配置就可以使用，方便。<br>Source code(zip)：zip压缩的源码<br>Sourc code(tar.gz)：tar.gz的源码，一般用于*nix系统</p><h3 id="第二步：配置NVM环境变量"><a href="#第二步：配置NVM环境变量" class="headerlink" title="第二步：配置NVM环境变量"></a>第二步：配置NVM环境变量</h3><p>1 .在nvm文件夹中创建settings.text,写入以下内容保存：</p><p>1  root: D:\dev\nvm<br>2  path: D:\dev\nodejs<br>root: 是nvm.exe所在目录</p><p>path:node快捷方式所在的路径。当使用nvm use XXXnode版本号的时候会根据path的设置创建快捷方式。每切换不同版本，这个快捷方式里的内容根据使用的node的版本而变化。</p><p>注意：手打的话root和path的冒号后面一定要有一个空格，不然安装node的时候是不会安装到该nvm文件夹里。</p><ol start="2"><li>计算机——右键——属性——高级系统设置——环境变量</li></ol><p>新建变量名：NVM_HOME，变量值：D:\dev\nvm</p><p>新建变量名：NVM_SYMLINK，变量值：D:\dev\nodejs</p><p>找到Path选择编辑添加%NVM_HOME%;%NVM_SYMLINK%;</p><p>注意：</p><p>A.变量名必须为NVM_HOME和NVM_SYMLINK，之前重新安装突然想试试变个名会如何于是给NVM后面加个s，然后出问题了。</p><p>B.编辑PATH的时候添加%NVM_HOME%前面一定要分号结尾。</p><p>C.path中%NVM_HOME%与%NVM_SYMLINK%的顺序不要反。</p><p>3.检测nvm安装成功与否</p><p>命令台输入 nvm 跳出呼啦啦一大堆告诉你怎么操作的就是安装成功了。</p><h3 id="第三步-安装node"><a href="#第三步-安装node" class="headerlink" title="第三步 安装node"></a>第三步 安装node</h3><ol><li><p>nvm安装<br>nvm install node版本号   //安装某个版本node<br>nvm use node版本号       //使用某版本node<br>node -v                //查看版本号，需要use后才能才能使用node -v查看版本</p></li><li><p>下载安装</p></li></ol><p>下载个版本的nodejs放入2中的root文件夹</p><h3 id="第四-关于全局安装npm包的问题"><a href="#第四-关于全局安装npm包的问题" class="headerlink" title="第四 关于全局安装npm包的问题"></a>第四 关于全局安装npm包的问题</h3><p>众所周知,node版本的包的版本是一个很复杂的问题.一个node版本下某个包支持的最后版本可能是不相同的,如果两个node版本共用一个全局库,容易造成包版本问题.</p><p>可以知道 nvm中path=node快捷方式所在的路径,可以设置<br>npm config set prefix “path\moudel”  根据不同node版本配置不同全局库.<br>npm config set cache “path\node_cache” 根据不同node版本配置不同缓存库.</p><h2 id="2-linux"><a href="#2-linux" class="headerlink" title="2. linux"></a>2. linux</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo pacman -S nvm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>完成,即可使用nvm</p><h3 id="原理解析"><a href="#原理解析" class="headerlink" title="原理解析"></a>原理解析</h3><p>nvm安装成功后会提示让把一句话加入到bash或zsh的bashrc 中<br><a href="https://imgtu.com/i/XwugOA"><img src="https://s1.ax1x.com/2022/06/05/XwugOA.png" alt="XwugOA.png"></a></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vim &#x2F;usr&#x2F;share&#x2F;nvm&#x2F;init-nvm.sh <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="https://imgtu.com/i/XwK37t"><img src="https://s1.ax1x.com/2022/06/05/XwK37t.png" alt="XwK37t.png"></a></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vim &#x2F;usr&#x2F;share&#x2F;nvm&#x2F;nvm.sh <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>shell太长了,其实就是将node目录加入到path.</p>]]></content>
      
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jdk的spi机制</title>
      <link href="/2022/06/04/spi-ji-zhi/"/>
      <url>/2022/06/04/spi-ji-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="jdk的spi机制"><a href="#jdk的spi机制" class="headerlink" title="jdk的spi机制"></a>jdk的spi机制</h1><blockquote><p>前面学习日志门面时了解到slf4j使用了spi机制,联想到之前数据库链接也是spi机制.包括java定义了很多接口,如xml的接口,servlet接口,都是用spi机制实现的.因此有必要对这一部分进行学习.</p></blockquote><p>本节先自己实现一个简单的spi,然后再看一下原理.</p><h2 id="1-什么是SPI"><a href="#1-什么是SPI" class="headerlink" title="1.什么是SPI"></a>1.什么是SPI</h2><p>SPI 的全称为 (Service Provider Interface)，是 JDK 内置的一种服务提供发现机制。主要由工具类 java.util.ServiceLoader 提供相应的支持。<br>SPI是一种动态替换发现的机制， 比如有个接口，想运行时动态的给它添加实现，你只需要添加一个实现。我们经常遇到的就是java.sql.Driver接口，其他不同厂商可以针对同一接口做出不同的实现，mysql和postgresql都有不同的实现提供给用户，而Java的SPI机制可以为某个接口寻找服务实现。</p><p>SPI 将服务接口和具体的服务实现分离开来，将服务调用方和服务实现者解耦，能够提升程序的扩展性、可维护性。修改或者替换服务实现并不需要修改调用方。</p><p><strong>api和spi的区别</strong><br>当实现方提供了接口和实现，我们可以通过调用实现方的接口从而拥有实现方给我们提供的能力，这就是 API ，这种接口和实现都是放在实现方的。</p><p>当接口存在于调用方这边时，就是 SPI ，由接口调用方确定接口规则，然后由不同的厂商去根绝这个规则对这个接口进行实现，从而提供服务，举个通俗易懂的例子：公司 H 是一家科技公司，新设计了一款芯片，然后现在需要量产了，而市面上有好几家芯片制造业公司，这个时候，只要 H 公司指定好了这芯片生产的标准（定义好了接口标准），那么这些合作的芯片公司（服务提供者）就按照标准交付自家特色的芯片（提供不同方案的实现，但是给出来的结果是一样的）。</p><h2 id="2-spi实现"><a href="#2-spi实现" class="headerlink" title="2.spi实现"></a>2.spi实现</h2><blockquote><p>我设想有一种技术叫做mogo(其实这种技术并不存在),因为这项技术很火暴(假的),java定义了mogo服务的接口.然后其他mogo技术的实现提供了被调用方.<br>项目图如下</p></blockquote><ul><li>spi定义方 </li></ul><p><a href="https://imgtu.com/i/XwAU4H"><img src="https://s1.ax1x.com/2022/06/05/XwAU4H.png" alt="XwAU4H.png"></a></p><ul><li>spi提供方</li></ul><p><a href="https://imgtu.com/i/XwAsDf"><img src="https://s1.ax1x.com/2022/06/05/XwAsDf.png" alt="XwAsDf.png"></a></p><ul><li>spi使用方</li></ul><p><a href="https://imgtu.com/i/XwAyb8"><img src="https://s1.ax1x.com/2022/06/05/XwAyb8.png" alt="XwAyb8.png"></a></p><h3 id="2-1-服务定义"><a href="#2-1-服务定义" class="headerlink" title="2.1. 服务定义"></a>2.1. 服务定义</h3><ul><li>其实就是定义一个接口,定义一个工厂类.<br>MogoServer<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>mogo<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>mogo<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Mogo</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MogoServer</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Mogo</span> <span class="token function">getMogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>MogoFactory</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MogoFactory</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">MogoServer</span> <span class="token function">getMogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">ServiceLoader</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MogoServer</span><span class="token punctuation">></span></span> load <span class="token operator">=</span> <span class="token class-name">ServiceLoader</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">MogoServer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//java实现</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MogoServer</span> mogoServer <span class="token operator">:</span> load<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> mogoServer<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-服务提供"><a href="#2-2-服务提供" class="headerlink" title="2.2 服务提供"></a>2.2 服务提供</h3><p>其实就是实现定义方实现的接口<br>NiceMogoServer</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NiceMogoServer</span> <span class="token keyword">implements</span> <span class="token class-name">MogoServer</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mogo</span> <span class="token function">getMogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"找到我了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Resource下面创建META-INF/services 目录里创建一个以服务接口命名的文件<br>服务名为: org.spi.mogo.service.MogoServer<br>里面的值为: org.spi.nicemogo.service.NiceMogoServer</p><h3 id="2-3-测试类"><a href="#2-3-测试类" class="headerlink" title="2.3 测试类"></a>2.3 测试类</h3><p>新建一个模块,将这两个项目在pom文件中引入.</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spidef<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spipro<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>SpiTest</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>mogo<span class="token punctuation">.</span></span><span class="token class-name">MogoFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>spi<span class="token punctuation">.</span>mogo<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">MogoServer</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpiTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">MogoServer</span> mogo <span class="token operator">=</span> <span class="token class-name">MogoFactory</span><span class="token punctuation">.</span><span class="token function">getMogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mogo<span class="token punctuation">.</span><span class="token function">getMogo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>运行这个测试类,会发现服务会自动加载了.<br><a href="https://imgtu.com/i/XwATbT"><img src="https://s1.ax1x.com/2022/06/05/XwATbT.png" alt="XwATbT.png"></a></p><h2 id="3-spi原理浅析"><a href="#3-spi原理浅析" class="headerlink" title="3. spi原理浅析"></a>3. spi原理浅析</h2><p>大致浏览一下源码</p><ol><li>首先构造了了一个ServiceLoader对象.这个过程中并没有其他操作,那肯定是在迭代中进行了加载.<br><a href="https://imgtu.com/i/XwV9ln"><img src="https://s1.ax1x.com/2022/06/05/XwV9ln.png" alt="XwV9ln.png"></a></li><li>要加载肯定要加载我们自己写的类 META-INF/services/肯定会用到</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> PREFIX <span class="token operator">=</span> <span class="token string">"META-INF/services/"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>搜索PREFIX</li></ol><p><a href="https://imgtu.com/i/XwVgpj"><img src="https://s1.ax1x.com/2022/06/05/XwVgpj.png" alt="XwVgpj.png"></a></p><p>会发现在这里会尝试通过目录获取信息,存到一个中间枚举中.</p><ol start="4"><li>nextService会将这个类反射获取一个对象返回.同时自己维护了Providers,存储所有服务.<br><a href="https://imgtu.com/i/XwVhn0"><img src="https://s1.ax1x.com/2022/06/05/XwVhn0.png" alt="XwVhn0.png"></a></li></ol><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol><li>spi是一种一种服务发现机制,与spi项目,接口定义于服务调用者.</li><li>spi实现: 1. 定义方提供接口,使用ServiceLoader.load()方法加载服务 2. 服务提供者实现接口类,并于META-INF/services中增加一个名为接口名,内容为实现者的文件.</li><li>源码方面,ServiceLoader.load()采用了懒加载,当调用服务时才加载,并通过ClassLoader.getSystemResources(fullName)加载文件.反射获取对象.</li><li>spring也实现了spi,与jdk的不同.它们的基本原理都是一样的，都是通过 ClassLoader.getResources 方法找到相应的配置文件，然后解析文件得到服务提供者的全限定名。</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日志处理中的一些问题</title>
      <link href="/2022/05/28/slf4j-de-shi-yong/"/>
      <url>/2022/05/28/slf4j-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="日志中的一些问题"><a href="#日志中的一些问题" class="headerlink" title="日志中的一些问题"></a>日志中的一些问题</h1><blockquote><p>在之前的项目中对于日志的处理,一直没有总结,所以这里做一下总结.大致的需求如下.</p><ol><li>微服务的链路调用日志怎么处理,异步的情况下(线程池)如何传给子线程,如scg本身就是异步的.</li><li>比如我们后台管理的操作日志(也可以叫做审计日志),这部分日志想要入数据库或者es,该怎么操作.</li><li>或者有一些埋点日至,方便我们快速定位出现bug的地方,埋点日志希望按照一定的格式存储.</li></ol></blockquote><h2 id="1-链路日志的处理"><a href="#1-链路日志的处理" class="headerlink" title="1. 链路日志的处理"></a>1. 链路日志的处理</h2><blockquote><p>虽然链路日志有Sleuth可以很好的嵌入cloud,但这次先不使用sleuth来处理.</p></blockquote><p>问题如下:</p><ol><li>API网关中的MDC数据如何传递给下游服务</li><li>服务如何接收数据，并且调用其他远程服务时如何继续传递</li><li>异步的情况下(线程池)如何传给子线程</li></ol><h3 id="1-1-API网关中的MDC数据如何传递给下游服务"><a href="#1-1-API网关中的MDC数据如何传递给下游服务" class="headerlink" title="1.1 API网关中的MDC数据如何传递给下游服务"></a>1.1 API网关中的MDC数据如何传递给下游服务</h3><blockquote><p>mdc是什么:Mapped Diagnostic Contexts ,翻译过来就是：映射的诊断上下文 。意思是：在日志中 （映射的） 请求ID（requestId），可以作为我们定位 （诊断） 问题的关键字 （上下文）。<br>Slf4j MDC 内部实现很简单。实现一个单例对应实例，获取具体的MDC实现类，然后其对外接口，就是对参数进行校验，然后调用 MDCAdapter 的方法实现。MDCAdapter 是个接口类，当日志框架使用 Logback 时，对应接口的实现类就是 LogbackMDCAdapter，所以核心的实现类还是它，对于需要子父线程的传递 我们可以重写这个类,来替换.</p></blockquote><ul><li><p>对于scg网关<br>可以写一个全局过滤器</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 生成日志链路追踪id，并传入header中 * */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TraceFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">TraceProperties</span> traceProperties<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>traceProperties<span class="token punctuation">.</span><span class="token function">getEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//链路追踪id</span>            <span class="token class-name">String</span> traceId <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">fastSimpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//</span>            MDC<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>LOG_TRACE_ID<span class="token punctuation">,</span> traceId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ServerHttpRequest</span> serverHttpRequest <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">headers</span><span class="token punctuation">(</span>h <span class="token operator">-></span> h<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>TRACE_ID_HEADER<span class="token punctuation">,</span> traceId<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">ServerWebExchange</span> build <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>serverHttpRequest<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>build<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>对于zuul</p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 生成日志链路追踪id，并传入header中 * */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TraceFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ZuulFilter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">TraceProperties</span> traceProperties<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">filterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">FilterConstants</span><span class="token punctuation">.</span>PRE_TYPE<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">filterOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> FORM_BODY_WRAPPER_FILTER_ORDER <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//根据配置控制是否开启过滤器</span>        <span class="token keyword">return</span> traceProperties<span class="token punctuation">.</span><span class="token function">getEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//链路追踪id</span>        <span class="token class-name">String</span> traceId <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">fastSimpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        MDC<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>LOG_TRACE_ID<span class="token punctuation">,</span> traceId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">RequestContext</span> ctx <span class="token operator">=</span> <span class="token class-name">RequestContext</span><span class="token punctuation">.</span><span class="token function">getCurrentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ctx<span class="token punctuation">.</span><span class="token function">addZuulRequestHeader</span><span class="token punctuation">(</span><span class="token class-name">CommonConstant</span><span class="token punctuation">.</span>TRACE_ID_HEADER<span class="token punctuation">,</span> traceId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上面两个是放在对应的网关的目录下.</p><ul><li>其他对日志的封装,我们抽取出一个配置包. log-spring-boot-start</li></ul><p>pom文件</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--增强thread-local--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>transmittable-thread-local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--日至入库--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--dubbo 可能会有链路日至相关--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--openfeign 也是链路日至相关--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.github.openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>feign-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.7.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对应配置类<br>TraceProperties</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Getter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Setter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>context<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RefreshScope</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Setter</span><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"rrs.trace"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RefreshScope</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TraceProperties</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * 是否开启日志链路追踪     */</span>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> enable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>LogAutoConfigure</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">TraceProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">TraceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAutoConfigure</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//可以在这配置</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在网关引入我们的配置包,开启链路日志后就能将tracid传给下游了.</p><h3 id="1-2-服务如何接收数据，并且调用其他远程服务时如何继续传递"><a href="#1-2-服务如何接收数据，并且调用其他远程服务时如何继续传递" class="headerlink" title="1.2 服务如何接收数据，并且调用其他远程服务时如何继续传递"></a>1.2 服务如何接收数据，并且调用其他远程服务时如何继续传递</h3><ul><li>对于服务接收tracid,可以加一个过滤器.</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">TraceProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">MDCTraceUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">OncePerRequestFilter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterChain</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token comment">/** * 过滤器 接收上游传递过来的traceid */</span><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">OncePerRequestFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span>FILTER_ORDER<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebTraceFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">TraceProperties</span> traceProperties<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">shouldNotFilter</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token operator">!</span>traceProperties<span class="token punctuation">.</span><span class="token function">getEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//接收traceid 设置到mdc中</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> httpServletRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> httpServletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> traceId<span class="token operator">=</span>httpServletRequest<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span>TRACE_ID_HEADER<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>traceId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span><span class="token function">addTraceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span><span class="token function">putTraceId</span><span class="token punctuation">(</span>traceId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>httpServletRequest<span class="token punctuation">,</span>httpServletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//这里为什么要remove呢?</span>            <span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span><span class="token function">removeTraceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>向下游传递traceid,可以加一个feign的拦截器.</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>interceptor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">TraceProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">MDCTraceUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">feign<span class="token punctuation">.</span></span><span class="token class-name">RequestInterceptor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span><span class="token comment">/** * 服务之间调用 拦截增加traceid */</span><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">RequestInterceptor</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeignTraceInterceptor</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">TraceProperties</span> traceProperties<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RequestInterceptor</span> <span class="token function">feignTraceInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> template <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>traceProperties<span class="token punctuation">.</span><span class="token function">getEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//传递日志traceId</span>                <span class="token class-name">String</span> traceId <span class="token operator">=</span> <span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span><span class="token function">getTraceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>traceId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    template<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token class-name">MDCTraceUtils</span><span class="token punctuation">.</span>TRACE_ID_HEADER<span class="token punctuation">,</span> traceId<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3-traceid在父子线程之间的传递"><a href="#1-3-traceid在父子线程之间的传递" class="headerlink" title="1.3 traceid在父子线程之间的传递"></a>1.3 traceid在父子线程之间的传递</h3><p>解决父子线程传递问题,重写logback的LogbackMDCAdapte</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>ttl<span class="token punctuation">.</span></span><span class="token class-name">TransmittableThreadLocal</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>spi<span class="token punctuation">.</span></span><span class="token class-name">MDCAdapter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span><span class="token punctuation">;</span><span class="token comment">/** * TransmittableThreadLocal替换LogbackMDCAdapter中的ThreadLocal * 实现子父线程的日志信息传递 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TtlMDCAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">MDCAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> copyOnInheritThreadLocal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransmittableThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> WRITE_OPERATION <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAP_COPY_OPERATION <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">TtlMDCAdapter</span> mtcMDCAdapter<span class="token punctuation">;</span>    <span class="token comment">/**     * keeps track of the last operation performed     */</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> lastOperation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        mtcMDCAdapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TtlMDCAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        MDC<span class="token punctuation">.</span>mdcAdapter <span class="token operator">=</span> mtcMDCAdapter<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">MDCAdapter</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> mtcMDCAdapter<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">Integer</span> <span class="token function">getAndSetLastOperation</span><span class="token punctuation">(</span><span class="token keyword">int</span> op<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Integer</span> lastOp <span class="token operator">=</span> lastOperation<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        lastOperation<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>op<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> lastOp<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">wasLastOpReadOrNull</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> lastOp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> lastOp <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> lastOp <span class="token operator">==</span> MAP_COPY_OPERATION<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">duplicateAndInsertNewMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> oldMap<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> newMap <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldMap <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// we don't want the parent thread modifying oldMap while we are</span>            <span class="token comment">// iterating over it</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>oldMap<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                newMap<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>oldMap<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>newMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> newMap<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Put a context value (the &lt;code>val&lt;/code> parameter) as identified with the     * &lt;code>key&lt;/code> parameter into the current thread's context map. Note that     * contrary to log4j, the &lt;code>val&lt;/code> parameter can be null.     * &lt;p/>     * &lt;p/>     * If the current thread does not have a context map it is created as a side     * effect of this call.     *     * @throws IllegalArgumentException in case the "key" parameter is null     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key cannot be null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> oldMap <span class="token operator">=</span> copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Integer</span> lastOp <span class="token operator">=</span> <span class="token function">getAndSetLastOperation</span><span class="token punctuation">(</span>WRITE_OPERATION<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">wasLastOpReadOrNull</span><span class="token punctuation">(</span>lastOp<span class="token punctuation">)</span> <span class="token operator">||</span> oldMap <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> newMap <span class="token operator">=</span> <span class="token function">duplicateAndInsertNewMap</span><span class="token punctuation">(</span>oldMap<span class="token punctuation">)</span><span class="token punctuation">;</span>            newMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            oldMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Remove the the context identified by the &lt;code>key&lt;/code> parameter.     * &lt;p/>     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> oldMap <span class="token operator">=</span> copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldMap <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">Integer</span> lastOp <span class="token operator">=</span> <span class="token function">getAndSetLastOperation</span><span class="token punctuation">(</span>WRITE_OPERATION<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">wasLastOpReadOrNull</span><span class="token punctuation">(</span>lastOp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> newMap <span class="token operator">=</span> <span class="token function">duplicateAndInsertNewMap</span><span class="token punctuation">(</span>oldMap<span class="token punctuation">)</span><span class="token punctuation">;</span>            newMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            oldMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Clear all entries in the MDC.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        lastOperation<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>WRITE_OPERATION<span class="token punctuation">)</span><span class="token punctuation">;</span>        copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Get the context identified by the &lt;code>key&lt;/code> parameter.     * &lt;p/>     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>map <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Get the current thread's MDC as a map. This method is intended to be used     * internally.     */</span>    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getPropertyMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        lastOperation<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>MAP_COPY_OPERATION<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Returns the keys in the MDC as a &#123;@link Set&#125;. The returned value can be     * null.     */</span>    <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token function">getPropertyMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>map <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * Return a copy of the current thread's context map. Returned value may be     * null.     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">getCopyOfContextMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> hashMap <span class="token operator">=</span> copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>hashMap <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>hashMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContextMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> contextMap<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        lastOperation<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>WRITE_OPERATION<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> newMap <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        newMap<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>contextMap<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// the newMap replaces the old one for serialisation's sake</span>        copyOnInheritThreadLocal<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>newMap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>TtlMDCAdapterInitializer类用于程序启动时加载自己的mdcAdapter实现 </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">TtlMDCAdapter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContextInitializer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">;</span><span class="token comment">/** * 继承ApplicationContextInitializer spring初始化 * 初始化TtlMDCAdapter实例，并替换MDC中的adapter对象 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TtlMDCAdapterInitializer</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextInitializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//加载TtlMDCAdapter实例</span>        <span class="token class-name">TtlMDCAdapter</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-审计日志处理"><a href="#2-审计日志处理" class="headerlink" title="2. 审计日志处理"></a>2. 审计日志处理</h2><blockquote><p>对于这种重要的操作日志,我们想要使用一个注解在某一个某个重要的方法上,就可以自动实现操作的入库.</p></blockquote><h3 id="2-1-定义审计信息"><a href="#2-1-定义审计信息" class="headerlink" title="2.1 定义审计信息"></a>2.1 定义审计信息</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Audit</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * 操作时间     */</span>    <span class="token keyword">private</span> <span class="token class-name">LocalDateTime</span> timestamp<span class="token punctuation">;</span>    <span class="token comment">/**     * 应用名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> applicationName<span class="token punctuation">;</span>    <span class="token comment">/**     * 类名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> className<span class="token punctuation">;</span>    <span class="token comment">/**     * 方法名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> methodName<span class="token punctuation">;</span>    <span class="token comment">/**     * 用户id     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> userId<span class="token punctuation">;</span>    <span class="token comment">/**     * 用户名     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>    <span class="token comment">/**     * 租户id,可以改为其他字段.     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> clientId<span class="token punctuation">;</span>    <span class="token comment">/**     * 操作信息     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> operation<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-增加可配置项"><a href="#2-2-增加可配置项" class="headerlink" title="2.2 增加可配置项"></a>2.2 增加可配置项</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Getter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Setter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>context<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RefreshScope</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Setter</span><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"rrs.audit-log"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@RefreshScope</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuditLogProperties</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * 是否开启审计日志     */</span>    <span class="token keyword">private</span> <span class="token class-name">Boolean</span> enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 日志记录类型(logger/redis/db/es/kafka/mq)     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> logType<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 日志数据源配置 * logType=db时生效(非必须)，如果不配置则使用当前数据源 * 我认为一般要配置,毕竟不希望每个fuwu dou jia yige xin de biao . */</span><span class="token annotation punctuation">@Setter</span><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"rrs.audit-log.datasource"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogDbProperties</span> <span class="token keyword">extends</span> <span class="token class-name">HikariConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * jdbc url     * 审计日志需要的配置     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> jdbcUrl <span class="token punctuation">;</span>        <span class="token comment">/**     * name     */</span>    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>    <span class="token comment">/**     * password     */</span>    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>    <span class="token comment">/**     * qudong      */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> driverClassName<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此时配置类<br>LogAutoConfigure</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">TraceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">AuditLogProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">LogDbProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAutoConfigure</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//可以在这配置</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3-增加数据库服务类"><a href="#2-3-增加数据库服务类" class="headerlink" title="2.3 增加数据库服务类"></a>2.3 增加数据库服务类</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 审计日志接口 * */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAuditService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Audit</span> audit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>DbAuditServiceImpl</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Audit</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">LogDbProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IAuditService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>zaxxer<span class="token punctuation">.</span>hikari<span class="token punctuation">.</span></span><span class="token class-name">HikariDataSource</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnProperty</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Async</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span><span class="token comment">/** * 审计日志实现类-数据库 */</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"rrs.audit-log.log-type"</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">"db"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DbAuditServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IAuditService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> INSERT_SQL <span class="token operator">=</span> <span class="token string">" insert into sys_logger "</span> <span class="token operator">+</span>            <span class="token string">" (application_name, class_name, method_name, user_id, user_name, client_id, operation, timestamp) "</span> <span class="token operator">+</span>            <span class="token string">" values (?,?,?,?,?,?,?,?)"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">DbAuditServiceImpl</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">LogDbProperties</span> logDbProperties<span class="token punctuation">,</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//优先使用配置的日志数据源，否则使用默认的数据源</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>logDbProperties <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>logDbProperties<span class="token punctuation">.</span><span class="token function">getJdbcUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HikariDataSource</span><span class="token punctuation">(</span>logDbProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@PostConstruct</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"CREATE TABLE IF NOT EXISTS `sys_logger`  (\n"</span> <span class="token operator">+</span>                <span class="token string">"  `id` int(11) NOT NULL AUTO_INCREMENT,\n"</span> <span class="token operator">+</span>                <span class="token string">"  `application_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '应用名',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `class_name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '类名',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `method_name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '方法名',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `user_id` int(11) NULL COMMENT '用户id',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `user_name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '用户名',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `client_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '租户id',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `operation` varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作信息',\n"</span> <span class="token operator">+</span>                <span class="token string">"  `timestamp` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '创建时间',\n"</span> <span class="token operator">+</span>                <span class="token string">"  PRIMARY KEY (`id`) USING BTREE\n"</span> <span class="token operator">+</span>                <span class="token string">") ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;"</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jdbcTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Async</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Audit</span> audit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>INSERT_SQL                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getApplicationName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getMethodName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>增加打印到文件实现类</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 审计日志实现类-打印日志 */</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"rrs.audit-log.log-type"</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">"logger"</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggerAuditServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IAuditService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> MSG_PATTERN <span class="token operator">=</span> <span class="token string">"&#123;&#125;|&#123;&#125;|&#123;&#125;|&#123;&#125;|&#123;&#125;|&#123;&#125;|&#123;&#125;|&#123;&#125;"</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 格式为：&#123;时间&#125;|&#123;应用名&#125;|&#123;类名&#125;|&#123;方法名&#125;|&#123;用户id&#125;|&#123;用户名&#125;|&#123;租户id&#125;|&#123;操作信息&#125;     * 例子：2020-02-04 09:13:34.650|user-center|com.central.user.controller.SysUserController|saveOrUpdate|1|admin|webApp|新增用户:admin     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Audit</span> audit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>MSG_PATTERN                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss.SSS"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getApplicationName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getMethodName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">,</span> audit<span class="token punctuation">.</span><span class="token function">getOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注解类</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>annotation</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token comment">/** *  */</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">,</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token annotation punctuation">@Documented</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AuditLog</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * 操作信息     */</span>    <span class="token class-name">String</span> <span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4-切面类"><a href="#2-4-切面类" class="headerlink" title="2.4 切面类"></a>2.4 切面类</h3><blockquote><p>实现加注解自动将审计日志入库.</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>aspect</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AuditLog</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Audit</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">AuditLogProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">IAuditService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">JoinPoint</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Aspect</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Before</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">MethodSignature</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnClass</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">DefaultParameterNameDiscoverer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>expression<span class="token punctuation">.</span></span><span class="token class-name">EvaluationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>expression<span class="token punctuation">.</span></span><span class="token class-name">Expression</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>expression<span class="token punctuation">.</span>spel<span class="token punctuation">.</span>standard<span class="token punctuation">.</span></span><span class="token class-name">SpelExpressionParser</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>expression<span class="token punctuation">.</span>spel<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">StandardEvaluationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">RequestContextHolder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span><span class="token comment">/** * 审计日志切面 */</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuditLogAspect</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.application.name&#125;"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> applicationName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">AuditLogProperties</span> auditLogProperties<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">IAuditService</span> auditService<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">AuditLogAspect</span><span class="token punctuation">(</span><span class="token class-name">AuditLogProperties</span> auditLogProperties<span class="token punctuation">,</span> <span class="token class-name">IAuditService</span> auditService<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>auditLogProperties <span class="token operator">=</span> auditLogProperties<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>auditService <span class="token operator">=</span> auditService<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 用于SpEL表达式解析.     */</span>    <span class="token keyword">private</span> <span class="token class-name">SpelExpressionParser</span> spelExpressionParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpelExpressionParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 用于获取方法参数定义名字.     */</span>    <span class="token keyword">private</span> <span class="token class-name">DefaultParameterNameDiscoverer</span> nameDiscoverer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//这里使用@within是可以通过aop拦截类上的注解。而@annotation是通过aop拦截方法上的注解。</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"@within(auditLog) || @annotation(auditLog)"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">beforeMethod</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">AuditLog</span> auditLog<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//判断功能是否开启</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>auditLogProperties<span class="token punctuation">.</span><span class="token function">getEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>auditService <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"AuditLogAspect - auditService is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>auditLog <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 获取类上的注解</span>                auditLog <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredAnnotation</span><span class="token punctuation">(</span><span class="token class-name">AuditLog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">Audit</span> audit <span class="token operator">=</span> <span class="token function">getAudit</span><span class="token punctuation">(</span>auditLog<span class="token punctuation">,</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>            auditService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>audit<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 解析spEL表达式     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getValBySpEL</span><span class="token punctuation">(</span><span class="token class-name">String</span> spEL<span class="token punctuation">,</span> <span class="token class-name">MethodSignature</span> methodSignature<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//获取方法形参名数组</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> paramNames <span class="token operator">=</span> nameDiscoverer<span class="token punctuation">.</span><span class="token function">getParameterNames</span><span class="token punctuation">(</span>methodSignature<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>paramNames <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> paramNames<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Expression</span> expression <span class="token operator">=</span> spelExpressionParser<span class="token punctuation">.</span><span class="token function">parseExpression</span><span class="token punctuation">(</span>spEL<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// spring的表达式上下文对象</span>            <span class="token class-name">EvaluationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEvaluationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 给上下文赋值</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span>paramNames<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> expression<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 构建审计对象     */</span>    <span class="token keyword">private</span> <span class="token class-name">Audit</span> <span class="token function">getAudit</span><span class="token punctuation">(</span><span class="token class-name">AuditLog</span> auditLog<span class="token punctuation">,</span> <span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Audit</span> audit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Audit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setTimestamp</span><span class="token punctuation">(</span><span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setApplicationName</span><span class="token punctuation">(</span>applicationName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MethodSignature</span> methodSignature <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MethodSignature</span><span class="token punctuation">)</span>joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>methodSignature<span class="token punctuation">.</span><span class="token function">getDeclaringTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setMethodName</span><span class="token punctuation">(</span>methodSignature<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ServletRequestAttributes</span> attributes <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> attributes<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> userId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"x-userid-header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> userName <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"x-user-header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> clientId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"x-tenant-header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>        audit<span class="token punctuation">.</span><span class="token function">setClientId</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> operation <span class="token operator">=</span> auditLog<span class="token punctuation">.</span><span class="token function">operation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//一般我们没有加# 里面就是自定义的操作描述.如果加了# 说明审计日志中需要包含方法参数.</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>operation<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"#"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//获取方法的参数</span>            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//使用spel表达式构建字符串</span>            operation <span class="token operator">=</span> <span class="token function">getValBySpEL</span><span class="token punctuation">(</span>operation<span class="token punctuation">,</span> methodSignature<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        audit<span class="token punctuation">.</span><span class="token function">setOperation</span><span class="token punctuation">(</span>operation<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> audit<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当然我们也可以实现es存储,直接发送到卡夫卡,mq,es聚合队列等.</p><h2 id="3-埋点日志工具类"><a href="#3-埋点日志工具类" class="headerlink" title="3. 埋点日志工具类"></a>3. 埋点日志工具类</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>log<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ReflectUtil</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Getter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Setter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ObjectUtils</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token comment">/** * 日志埋点工具类 */</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PointUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> MSG_PATTERN <span class="token operator">=</span> <span class="token string">"&#123;&#125;|&#123;&#125;|&#123;&#125;"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> PROPERTIES_SPLIT <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> PROPERTIES_VALUE_SPLIT <span class="token operator">=</span> <span class="token string">"="</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PointEntry</span> pointEntry<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">PointUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        pointEntry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PointEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Setter</span>    <span class="token annotation punctuation">@Getter</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">PointEntry</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> id<span class="token punctuation">;</span>        <span class="token class-name">String</span> type<span class="token punctuation">;</span>        <span class="token class-name">Object</span> properties<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 格式为：&#123;时间&#125;|&#123;来源&#125;|&#123;对象id&#125;|&#123;类型&#125;|&#123;对象属性(以&amp;分割)&#125;     * 例子1：2016-07-27 23:37:23|business-center|1|user-login|ip=xxx.xxx.xx&amp;userName=张三&amp;userType=后台管理员     * 例子2：2016-07-27 23:37:23|file-center|c0a895e114526786450161001d1ed9|file-upload|fileName=xxx&amp;filePath=xxx     *     * @param id      对象id     * @param type    类型     * @param message 对象属性     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>MSG_PATTERN<span class="token punctuation">,</span> id<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">debug</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> type<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>MSG_PATTERN<span class="token punctuation">,</span> id<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PointUtil</span> <span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PointUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * @param businessId 业务id/对象id     */</span>    <span class="token keyword">public</span> <span class="token class-name">PointUtil</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token class-name">Object</span> businessId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pointEntry<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>businessId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * @param type 类型     */</span>    <span class="token keyword">public</span> <span class="token class-name">PointUtil</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pointEntry<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * @param properties 对象属性     */</span>    <span class="token keyword">public</span> <span class="token class-name">PointUtil</span> <span class="token function">properties</span><span class="token punctuation">(</span><span class="token class-name">Object</span> properties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pointEntry<span class="token punctuation">.</span><span class="token function">setProperties</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getPropertiesStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> properties <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pointEntry<span class="token punctuation">.</span><span class="token function">getProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">StringBuilder</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//解析map</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>properties <span class="token keyword">instanceof</span> <span class="token class-name">Map</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Map</span> proMap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">)</span>properties<span class="token punctuation">;</span>                <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">></span></span> ite <span class="token operator">=</span> proMap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>ite<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">Map<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">=</span> ite<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>PROPERTIES_SPLIT<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>PROPERTIES_VALUE_SPLIT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">//解析对象</span>                <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> allFields <span class="token operator">=</span> <span class="token class-name">ReflectUtil</span><span class="token punctuation">.</span><span class="token function">getFields</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> allFields<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">String</span> fieldName <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">Object</span> fieldValue <span class="token operator">=</span> <span class="token class-name">ReflectUtil</span><span class="token punctuation">.</span><span class="token function">getFieldValue</span><span class="token punctuation">(</span>properties<span class="token punctuation">,</span> field<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>PROPERTIES_SPLIT<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                    result<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fieldName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>PROPERTIES_VALUE_SPLIT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>fieldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">PointUtil</span><span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pointEntry<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pointEntry<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getPropertiesStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>与整体相配的log. xml文件如下.</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contextName</span><span class="token punctuation">></span></span>$&#123;APP_NAME&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contextName</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>APP_NAME<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.application.name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_FILE<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logging.file<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../logs/application/$&#123;APP_NAME&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_POINT_FILE<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logging.file<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../logs/point<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_AUDIT_FILE<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logging.file<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../logs/audit<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_MAXFILESIZE<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logback.filesize<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50MB<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_FILEMAXDAY<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logback.filemaxday<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ServerIP<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.cloud.client.ip-address<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.0.0.0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ServerPort<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>server.port<span class="token punctuation">"</span></span> <span class="token attr-name">defaultValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0000<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 彩色日志 --></span>    <span class="token comment">&lt;!-- 彩色日志依赖的渲染类 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr<span class="token punctuation">"</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.boot.logging.logback.ColorConverter<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wex<span class="token punctuation">"</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wEx<span class="token punctuation">"</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 彩色日志格式 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE_LOG_PATTERN<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[$&#123;APP_NAME&#125;:$&#123;ServerIP&#125;:$&#123;ServerPort&#125;] %clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;faint&#125; %clr(%level)&#123;blue&#125; %clr($&#123;PID&#125;)&#123;magenta&#125; %clr([%X&#123;traceId&#125;])&#123;yellow&#125; %clr([%thread])&#123;orange&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CONSOLE_LOG_PATTERN_NO_COLOR<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[$&#123;APP_NAME&#125;:$&#123;ServerIP&#125;:$&#123;ServerPort&#125;] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %level $&#123;PID&#125; [%X&#123;traceId&#125;] [%thread] %-40.40logger&#123;39&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 控制台日志 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StdoutAppender<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>withJansi</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>withJansi</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 按照每天生成常规日志文件 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FileAppender<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_FILE&#125;/$&#123;APP_NAME&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>$&#123;CONSOLE_LOG_PATTERN_NO_COLOR&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 基于时间的分包策略 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_FILE&#125;/$&#123;APP_NAME&#125;.%d&#123;yyyy-MM-dd&#125;.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--保留时间,单位:天--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>$&#123;LOG_FILEMAXDAY&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>timeBasedFileNamingAndTriggeringPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">></span></span>$&#123;LOG_MAXFILESIZE&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>timeBasedFileNamingAndTriggeringPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">></span></span>INFO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>point_log<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_POINT_FILE&#125;/point.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;|$&#123;APP_NAME&#125;|%msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 基于时间的分包策略 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_POINT_FILE&#125;/point.%d&#123;yyyy-MM-dd&#125;.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--保留时间,单位:天--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>$&#123;LOG_FILEMAXDAY&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>timeBasedFileNamingAndTriggeringPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">></span></span>$&#123;LOG_MAXFILESIZE&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>timeBasedFileNamingAndTriggeringPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>audit_log<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_AUDIT_FILE&#125;/audit.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">></span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- 基于时间的分包策略 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_AUDIT_FILE&#125;/audit.%d&#123;yyyy-MM-dd&#125;.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--保留时间,单位:天--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>$&#123;LOG_FILEMAXDAY&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>timeBasedFileNamingAndTriggeringPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">></span></span>$&#123;LOG_MAXFILESIZE&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>timeBasedFileNamingAndTriggeringPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>point_log_async<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.AsyncAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discardingThreshold</span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>discardingThreshold</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>point_log<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file_async<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.AsyncAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discardingThreshold</span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>discardingThreshold</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FileAppender<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>audit_log_async<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.AsyncAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>discardingThreshold</span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>discardingThreshold</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>audit_log<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.rrs.log.util<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>debug<span class="token punctuation">"</span></span> <span class="token attr-name">addtivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>point_log_async<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.rrs.log.service.impl.LoggerAuditServiceImpl<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>debug<span class="token punctuation">"</span></span> <span class="token attr-name">addtivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>audit_log_async<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>StdoutAppender<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file_async<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol><li>以上实现了链路日志在服务中传递链路id,这部分链路日志因为数据量很大一般是要入es的,具体怎么入es思路是不是很清晰,在上个项目中这部分也没有开始做.等我下一篇文章来解决吧.</li><li>操作日志的注解化,操作日志的入数据库.入es和卡夫卡还待做.</li><li>埋点日志的工具类</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java中的log</title>
      <link href="/2022/05/24/java-zhong-de-log/"/>
      <url>/2022/05/24/java-zhong-de-log/</url>
      
        <content type="html"><![CDATA[<h1 id="java中的log"><a href="#java中的log" class="headerlink" title="java中的log"></a>java中的log</h1><blockquote><p>我们知道现在spring中默认推荐的log组件是logback,对于java中log的发展历史个使用应该是怎样的呢.</p></blockquote><h2 id="1-log的发展史"><a href="#1-log的发展史" class="headerlink" title="1. log的发展史"></a>1. log的发展史</h2><h3 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h3><p> 2001年以前，Java是没有日志库的，打印日志全凭System.out和System.err</p><h3 id="第二阶段"><a href="#第二阶段" class="headerlink" title="第二阶段"></a>第二阶段</h3><p>2001年，一个ceki Gulcü的大佬搞了一个日志框架 log4j后来( log4j成为Apache项目，Ceki加入Apache组织<br>Apache还曾经建议Sun引入Log4j到Java的标准库中，但Sun拒绝了.</p><h3 id="第三阶段"><a href="#第三阶段" class="headerlink" title="第三阶段"></a>第三阶段</h3><p>sun有自己的小心思，2002年2月JDK1.4发布，Sun推出了自己的日志标准库JUL(Java Util Logging)，其实是照着Log4j抄的，而且还没抄好，还是在JDK1.5以后性能和可用性才有所提升。由于Log4j比JUL好用，并且成熟，所以Log4j在选择上占据了一定的优势</p><h3 id="第四阶段"><a href="#第四阶段" class="headerlink" title="第四阶段"></a>第四阶段</h3><p>2002年8月Apache推出了JCL(Jakarta Commons Logging)，也就是日志抽象层，支持运行时动态加载日志组件的实现，当然也提供一个默认实现Simple Log(在 ClassLoader 中进行查找，如果能找到Log4j则默认使用llog4j实现，如果没有则使用JUL实现，再没有则使用JCL内部提供的 Simple Log实现)</p><h3 id="第五阶段"><a href="#第五阶段" class="headerlink" title="第五阶段"></a>第五阶段</h3><p> 2006年巨佬Ceki( Log4j的作者）因为一些原因离开了Apache组织，之后Ceki觉得JCL不好用，自己搀了一套新的日志标准接口规范Slf4j (Simple Logging Facacfor Java)，也可以称为日志门面，很明显Slf4j是对标JCL，后面也证明了Slf4j比JCL更优秀。<br>巨佬Ceki提供了一系列的桥接包来帮助Slf4j接口与其他日志库建立关系，这种方式称桥接设计模式。<br>代码使用Slf4j接口，就可以实现日志的统一标准化，后续如果想要更换日志实现，只需引入Slf4j与相关的桥接包，再引入具体的日志标准库即可。</p><h3 id="第六阶段"><a href="#第六阶段" class="headerlink" title="第六阶段"></a>第六阶段</h3><p> Ceki巨佬觉得市场上的日志标准库都是间接实现Slf4j接口，也就是说每次都需要配合桥接包，因此在2006年，Ceki巨佬基于Slf4j接口写出了Logback日志标准库，做为Slf4j接口的默认实现，Logback 也十分给力，在功能完整度和性能上超越了所有已有的日志标准库。</p><h3 id="第七阶段"><a href="#第七阶段" class="headerlink" title="第七阶段"></a>第七阶段</h3><p>2012年，Apache直接推出新项目Log4j2(不兼容Log4j) , Log4j2全面借鉴Slf4j+Logback 。<br>Log4j2不仅仅具有Logback的所有特性，还做了分离设计，分为log4j-api和log4j-core，log4j-api是日志接口，log4j-core是日志标准库，并且Apache也为Log4j2提供了各种桥接包。</p><p>画一张图大概如下</p><p><a href="https://imgtu.com/i/XC80bj"><img src="https://s1.ax1x.com/2022/05/24/XC80bj.png" alt="XC80bj.png"></a></p><h2 id="2-各种日至框架的基本使用"><a href="#2-各种日至框架的基本使用" class="headerlink" title="2. 各种日至框架的基本使用"></a>2. 各种日至框架的基本使用</h2><blockquote><p>项目中主要是logback,但是之前的怎么使用这里做个简单总结,至于原理,可以看代码,也可以在网上找一些视频.</p></blockquote><h3 id="jul"><a href="#jul" class="headerlink" title="jul"></a>jul</h3><blockquote><p>JUL全称Java util Logging是java原生的日志框架,使用时不需要另外引用第三方类库,相对其他日志框<br>架使用方便,学习简单,能够在小型应用中灵活使用。</p></blockquote><ol><li><p>基本入门</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1.创建日志记录器对象</span>        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">"com.cq.jul.test.Test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2.日志记录输出</span>        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"hello jul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">"info msg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"jack"</span><span class="token punctuation">;</span>        <span class="token class-name">Integer</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>INFO<span class="token punctuation">,</span> <span class="token string">"用户信息:&#123;0&#125;,&#123;1&#125;"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">&#123;</span>name<span class="token punctuation">,</span> age<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">testLogConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//日至级别配置</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testLogConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1.创建日志记录器对象</span>        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">"com.cq.jul.test.Test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//关闭默认</span>        logger<span class="token punctuation">.</span><span class="token function">setUseParentHandlers</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//控制台</span>        <span class="token class-name">ConsoleHandler</span> handler<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ConsoleHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SimpleFormatter</span> simpleFormatter<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SimpleFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        handler<span class="token punctuation">.</span><span class="token function">setFormatter</span><span class="token punctuation">(</span>simpleFormatter<span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">setLevel</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">;</span>        handler<span class="token punctuation">.</span><span class="token function">setLevel</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//输出放到文件</span>        <span class="token class-name">File</span> file<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"/home/hcq/logs/jultest.log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            file<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">FileHandler</span> fileHandler<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileHandler</span><span class="token punctuation">(</span><span class="token string">"/home/hcq/logs/jultest.log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        fileHandler<span class="token punctuation">.</span><span class="token function">setFormatter</span><span class="token punctuation">(</span>simpleFormatter<span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>fileHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">severe</span><span class="token punctuation">(</span><span class="token string">"severe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"warning"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">"config"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">fine</span><span class="token punctuation">(</span><span class="token string">"fine"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">finer</span><span class="token punctuation">(</span><span class="token string">"finer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">finest</span><span class="token punctuation">(</span><span class="token string">"finest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token comment">//日至对象的父子关系</span>     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testLogParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">// 日志记录器对象父子关系</span>        <span class="token class-name">Logger</span> logger1 <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">"com.itheima.log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Logger</span> logger2 <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">"com.itheima"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>logger1<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> logger2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 所有日志记录器对象的顶级父元素class为java.util.logging.LogManager$RootLogger</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"logger2 parent:"</span> <span class="token operator">+</span> logger2<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">",name:"</span> <span class="token operator">+</span>                logger2<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 一、自定义日志级别</span><span class="token comment">// a.关闭系统默认配置</span>        logger2<span class="token punctuation">.</span><span class="token function">setUseParentHandlers</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// b.创建handler对象</span>        <span class="token class-name">ConsoleHandler</span> consoleHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConsoleHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// c.创建formatter对象</span>        <span class="token class-name">SimpleFormatter</span> simpleFormatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// d.进行关联</span>        consoleHandler<span class="token punctuation">.</span><span class="token function">setFormatter</span><span class="token punctuation">(</span>simpleFormatter<span class="token punctuation">)</span><span class="token punctuation">;</span>        logger2<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span>consoleHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// e.设置日志级别</span>        logger2<span class="token punctuation">.</span><span class="token function">setLevel</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">;</span>        consoleHandler<span class="token punctuation">.</span><span class="token function">setLevel</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 测试日志记录器对象父子关系</span>        logger1<span class="token punctuation">.</span><span class="token function">severe</span><span class="token punctuation">(</span><span class="token string">"severe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger1<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"warning"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger1<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger1<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">"config"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger1<span class="token punctuation">.</span><span class="token function">fine</span><span class="token punctuation">(</span><span class="token string">"fine"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger1<span class="token punctuation">.</span><span class="token function">finer</span><span class="token punctuation">(</span><span class="token string">"finer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger1<span class="token punctuation">.</span><span class="token function">finest</span><span class="token punctuation">(</span><span class="token string">"finest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置文件<br>默认配置文件路径$JAVAHOME\jre\lib\logging.properties<br>也可以自己写配置文件读取</p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 读取自定义配置文件</span>        <span class="token class-name">InputStream</span> in <span class="token operator">=</span>                <span class="token class-name">JulTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"logging.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取日志管理器对象</span>        <span class="token class-name">LogManager</span> logManager <span class="token operator">=</span> <span class="token class-name">LogManager</span><span class="token punctuation">.</span><span class="token function">getLogManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 通过日志管理器加载配置文件</span>        logManager<span class="token punctuation">.</span><span class="token function">readConfiguration</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">"com.itheima.log.JULTest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">severe</span><span class="token punctuation">(</span><span class="token string">"severe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token string">"warning"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">"config"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">fine</span><span class="token punctuation">(</span><span class="token string">"fine"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">finer</span><span class="token punctuation">(</span><span class="token string">"finer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logger<span class="token punctuation">.</span><span class="token function">finest</span><span class="token punctuation">(</span><span class="token string">"finest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">## RootLogger使用的处理器(获取时设置)</span><span class="token attr-name">handlers</span><span class="token punctuation">=</span> <span class="token attr-value">java.util.logging.ConsoleHandler</span><span class="token comment"># RootLogger日志等级</span><span class="token attr-name">.level</span><span class="token punctuation">=</span> <span class="token attr-value">INFO</span><span class="token comment">## 自定义Logger</span><span class="token attr-name">com.cq.handlers</span><span class="token punctuation">=</span> <span class="token attr-value">java.util.logging.FileHandler</span><span class="token comment"># 自定义Logger日志等级</span><span class="token attr-name">com.itheima.level</span><span class="token punctuation">=</span> <span class="token attr-value">INFO</span><span class="token comment"># 忽略父日志设置</span><span class="token attr-name">com.cq.useParentHandlers</span><span class="token punctuation">=</span><span class="token attr-value">false</span><span class="token comment">## 控制台处理器</span><span class="token comment"># 输出日志级别</span><span class="token attr-name">java.util.logging.ConsoleHandler.level</span> <span class="token punctuation">=</span> <span class="token attr-value">INFO</span><span class="token comment"># 输出日志格式</span><span class="token attr-name">java.util.logging.ConsoleHandler.formatter</span> <span class="token punctuation">=</span> <span class="token attr-value">java.util.logging.SimpleFormatter</span><span class="token comment">## 文件处理器</span><span class="token comment"># 输出日志级别</span><span class="token attr-name">java.util.logging.FileHandler.level</span><span class="token punctuation">=</span><span class="token attr-value">INFO</span><span class="token comment"># 输出日志格式</span><span class="token attr-name">java.util.logging.FileHandler.formatter</span> <span class="token punctuation">=</span> <span class="token attr-value">java.util.logging.SimpleFormatter</span><span class="token comment"># 输出日志文件路径</span><span class="token attr-name">java.util.logging.FileHandler.pattern</span> <span class="token punctuation">=</span> <span class="token attr-value">/java%u.log</span><span class="token comment"># 输出日志文件限制大小(50000字节)</span><span class="token attr-name">java.util.logging.FileHandler.limit</span> <span class="token punctuation">=</span> <span class="token attr-value">50000</span><span class="token comment"># 输出日志文件限制个数</span><span class="token attr-name">java.util.logging.FileHandler.count</span> <span class="token punctuation">=</span> <span class="token attr-value">10</span><span class="token comment"># 输出日志文件 是否是追加</span><span class="token attr-name">java.util.logging.FileHandler.append</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h3><p>Log4j是Apache下的一款开源的日志框架,通过在项目中使用 Log4J,我们可以控制日志信息输出到控<br>制台、文件、甚至是数据库中。我们可以控制每一条日志的输出格式,通过定义日志的输出级别,可以<br>更灵活的控制日志的输出过程。方便项目的调试。</p><ol><li>log4j中的抽象组件</li></ol><p>Log4J 主要由 Loggers (日志记录器)、Appenders(输出端)和 Layout(日志格式化器)组成。其中<br>Loggers 控制日志的输出级别与日志是否输出;Appenders 指定日志的输出方式(输出到控制台、文件<br>等);Layout 控制日志信息的输出格式。</p><p>Log4J中有一个特殊的logger叫做“root”,他是所有logger的根,也就意味着其他所有的logger都会直接<br>或者间接地继承自root。root logger可以用Logger.getRootLogger()方法获取。<br>但是,自log4j 1.2版以来, Logger 类已经取代了 Category 类。对于熟悉早期版本的log4j的人来说,<br>Logger 类可以被视为 Category 类的别名。</p><p>Appender 用来指定日志输出到哪个地方,可以同时指定日志的输出目的地。</p><p>布局器 Layouts用于控制日志输出内容的格式,让我们可以使用各种需要的格式输出日志。</p><ol start="2"><li>组件在配置文件中的映射<br>log4j.properties</li></ol><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">#指定日志的输出级别与输出端</span><span class="token attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token attr-value">INFO,Console</span><span class="token comment"># 控制台输出配置</span><span class="token attr-name">log4j.appender.Console</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.ConsoleAppender</span><span class="token attr-name">log4j.appender.Console.layout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.PatternLayout</span><span class="token attr-name">log4j.appender.Console.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">%d [%t] %-5p [%c] - %m%n</span><span class="token comment"># 文件输出配置</span><span class="token attr-name">log4j.appender.dailyFile</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.DailyRollingFileAppender</span><span class="token comment">#指定日志的输出路径</span><span class="token attr-name">log4j.appender.dailyFile.File</span> <span class="token punctuation">=</span> <span class="token attr-value">/home/hcq/logs/log.txt</span><span class="token attr-name">log4j.appender.dailyFile.Append</span> <span class="token punctuation">=</span> <span class="token attr-value">true</span><span class="token comment">#使用自定义日志格式化器</span><span class="token attr-name">log4j.appender.dailyFile.layout</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.PatternLayout</span><span class="token comment">#指定日志的输出格式</span><span class="token attr-name">log4j.appender.dailyFile.layout.ConversionPattern</span> <span class="token punctuation">=</span> <span class="token attr-value">%-d&#123;yyyy-MM-dd-HH-mm-ss&#125; [%t:%r] -[%p]%m%n</span><span class="token comment">#指定日志的文件编码</span><span class="token attr-name">log4j.appender.dailyFile.encoding</span><span class="token punctuation">=</span><span class="token attr-value">UTF-8</span><span class="token comment">#mysql</span><span class="token attr-name">log4j.appender.logDB</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.jdbc.JDBCAppender</span><span class="token attr-name">log4j.appender.logDB.layout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.PatternLayout</span><span class="token attr-name">log4j.appender.logDB.Driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span><span class="token attr-name">log4j.appender.logDB.URL</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/test</span><span class="token attr-name">log4j.appender.logDB.User</span><span class="token punctuation">=</span><span class="token attr-value">root</span><span class="token attr-name">log4j.appender.logDB.Password</span><span class="token punctuation">=</span><span class="token attr-value">root123</span><span class="token attr-name">log4j.appender.logDB.Sql</span><span class="token punctuation">=</span><span class="token attr-value">INSERT INTO log (project_name,create_date,level,category,file_name,thread_name,line,all_category,message) values('itcast','%d&#123;yyyy-MM-dd HH-mm-ss&#125;','%p','%c','%F','%t','%L','%l','%m')</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="jcl"><a href="#jcl" class="headerlink" title="jcl"></a>jcl</h3><blockquote><p>全称为Jakarta Commons Logging,是Apache提供的一个通用日志API。<br>它是为 “所有的Java日志实现”提供一个统一的接口,它自身也提供一个日志的实现,但是功能非常常弱<br>(SimpleLog)。所以一般不会单独使用它。他允许开发人员使用不同的具体日志实现工具: Log4j, Jdk<br>自带的日志(JUL)<br>JCL 有两个基本的抽象类:Log(基本记录器)和LogFactory(负责创建Log实例)。</p></blockquote><ol><li>导入jar包</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>commons-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>commons-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>test<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JULTest</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span><span class="token comment">// 创建日志对象</span><span class="token class-name">Log</span> log <span class="token operator">=</span> <span class="token class-name">LogFactory</span><span class="token punctuation">.</span><span class="token function">getLog</span><span class="token punctuation">(</span><span class="token class-name">JULTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 日志记录输出</span>log<span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token string">"fatal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="slf4j"><a href="#slf4j" class="headerlink" title="slf4j"></a>slf4j</h3><blockquote><p>简单日志门面(Simple Logging Facade For Java) SLF4J主要是为了给Java日志访问提供一套标准、规范<br>的API框架,其主要意义在于提供接口,具体的实现可以交由其他日志框架,例如log4j和logback等。<br>当然slf4j自己也提供了功能较为简单的实现,但是一般很少用到。对于一般的Java项目而言,日志框架<br>会选择slf4j-api作为门面,配上具体的实现框架(log4j、logback等),中间使用桥接器完成桥接。</p></blockquote><p>SLF4J是目前市面上最流行的日志门面。现在的项目中,基本上都是使用SLF4J作为我们的日志系统。</p><ol><li>添加依赖<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--slf4j core 使用slf4j必須添加--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--slf4j 自带的简单日志实现 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>2 .代码</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Slf4jTest</span> <span class="token punctuation">&#123;</span><span class="token comment">// 声明日志对象</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span><span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Slf4jTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span><span class="token comment">//打印日志信息</span>LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 使用占位符输出日志信息</span><span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"jack"</span><span class="token punctuation">;</span><span class="token class-name">Integer</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"用户:&#123;&#125;,&#123;&#125;"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 将系统异常信息写入日志</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// e.printStackTrace();</span>LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"出现异常:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>slf4j对其他日至实现的绑定</p><ol><li>添加slf4j-api的依赖</li><li>使用slf4j的API在项目中进行统一的日志记录</li><li>绑定具体的日志实现框架<ol><li>绑定已经实现了slf4j的日志框架,直接添加对应依赖</li><li>绑定没有实现slf4j的日志框架,先添加日志的适配器,再添加实现类的依赖</li></ol></li><li>slf4j有且仅有一个日志实现框架的绑定(如果出现多个默认使用第一个依赖日志实现)</li></ol></li><li><p>slf4j的桥接器</p></li></ol><p>slf4j-api出现的时候,logback还没有实现,接入其他的日至实现需要桥接器.</p><p>如果我们要使用SLF4J的桥接器,替换原有的日志框架,那么我们需要做的第一件事情,就是删除掉原<br>有项目中的日志框架的依赖。然后替换成SLF4J提供的桥接器。</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- log4j--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j-over-slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- jul --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jul-to-slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--jcl --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jcl-over-slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="logbcak"><a href="#logbcak" class="headerlink" title="logbcak"></a>logbcak</h3><p>Logback主要分为三个模块:<br>logback-core:其它两个模块的基础模块<br>logback-classic:它是log4j的一个改良版本,同时它完整实现了slf4j API<br>logback-access:访问模块与Servlet容器集成提供通过Http来访问日志的功能</p><ol><li>入门</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//定义日志对象</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span><span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">LogBackTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSlf4j</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token comment">//打印日志信息</span>LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>logbcak的配置</li></ol><p>logbcak使用xml配置</p><p>logback组件之间的关系</p><ol><li>Logger:日志的记录器,把它关联到应用的对应的context上后,主要用于存放日志对象,也<br>可以定义日志类型、级别。</li><li>Appender:用于指定日志输出的目的地,目的地可以是控制台、文件、数据库等等。</li><li>Layout:负责把事件转换成字符串,格式化的日志信息的输出。在logback中Layout对象被封<br>装在encoder中。</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--定义日志文件的存储地址 勿在 LogBack 的配置中使用相对路径--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_HOME<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home/hcq/logs<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>APP_NAME<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logback-test<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 控制台输出 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.encoder.PatternLayoutEncoder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg %n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 按照每天生成日志文件 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.log.%d&#123;yyyy-MM-dd&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.encoder.PatternLayoutEncoder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 应用的日志(错误级别)文件 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;-error.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;-error-%d&#123;yyyy-MM-dd&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%date %level [%thread] %logger&#123;40&#125;[%file-%M %line] %msg%n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">></span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMatch</span><span class="token punctuation">></span></span>ACCEPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMatch</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 只接收错误级别的日志 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMismatch</span><span class="token punctuation">></span></span>DENY<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMismatch</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ALL<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>logbcak-access</li></ol><p>ogback-access模块与Servlet容器(如Tomcat和Jetty)集成,以提供HTTP访问日志功能。我们可以使<br>用logback-access模块来替换tomcat的访问日志。</p><ul><li>将logback-access.jar与logback-core.jar复制到$TOMCAT_HOME/lib/目录下</li><li>修改$TOMCAT_HOME/conf/server.xml中的Host元素中添加:<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Valve</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.access.tomcat.LogbackValve<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>logback默认会在$TOMCAT_HOME/conf下查找文件 logback-access.xml<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- always a good activate OnConsoleStatusListener --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>statusListener</span><span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.status.OnConsoleStatusListener<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_DIR<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;catalina.base&#125;/logs<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span><span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_DIR&#125;/access.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span><span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>access.%d&#123;yyyy-MM-dd&#125;.log.zip<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 访问日志的格式 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>combined<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="log4j2"><a href="#log4j2" class="headerlink" title="log4j2"></a>log4j2</h3><p>Apache Log4j 2是对Log4j的升级版,参考了logback的一些优秀的设计,并且修复了一些问题,因此带<br>来了一些重大的提升</p><p>我认为最重要的是两个</p><ul><li>异步日至</li><li>无垃圾机制</li></ul><ol><li>入门</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- Log4j2 门面API--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.11.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- Log4j2 日志实现 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.11.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Log4j2Test</span> <span class="token punctuation">&#123;</span><span class="token comment">// 定义日志记录器对象</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span><span class="token class-name">LogManager</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">Log4j2Test</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>LOGGER<span class="token punctuation">.</span><span class="token function">fatal</span><span class="token punctuation">(</span><span class="token string">"fatal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当我们使用slf4j门面的时候</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- Log4j2 日志实现 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.11.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--使用slf4j作为日志的门面,使用log4j2来记录日志 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.7.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--为slf4j绑定日志实现 log4j2的适配器 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>log4j-slf4j-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.10.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>配置<br>log4j2.xml</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Configuration</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>warn<span class="token punctuation">"</span></span> <span class="token attr-name">monitorInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>&lt;property<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>name="LOG_HOME">D:/logs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Appenders</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Console</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Console<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>SYSTEM_OUT<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>%d&#123;HH:mm:ss.SSS&#125; [%t] [%-5level] %c&#123;36&#125;:%L --- %m%n<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Console</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>File</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_HOME&#125;/myfile.log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;] [%-5level] %l%c&#123;36&#125; - %m%n<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>File</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RandomAccessFile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accessFile<span class="token punctuation">"</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_HOME&#125;/myAcclog.log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;] [%-5level] %l%c&#123;36&#125; - %m%n<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RandomAccessFile</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RollingFile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rollingFile<span class="token punctuation">"</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_HOME&#125;/myrollog.log<span class="token punctuation">"</span></span><span class="token attr-name">filePattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>D:/logs/$$&#123;date:yyyy-MM-dd&#125;/myrollog-%d&#123;yyyy-MM-dd-HH-mm&#125;-%i.log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ThresholdFilter</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>debug<span class="token punctuation">"</span></span> <span class="token attr-name">onMatch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ACCEPT<span class="token punctuation">"</span></span> <span class="token attr-name">onMismatch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DENY<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>[%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;] [%-5level] %l%c&#123;36&#125; - %msg%n<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Policies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OnStartupTriggeringPolicy</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SizeBasedTriggeringPolicy</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10 MB<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TimeBasedTriggeringPolicy</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Policies</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DefaultRolloverStrategy</span> <span class="token attr-name">max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RollingFile</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Appenders</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loggers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>trace<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Console<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Root</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Loggers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>异步日志<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--异步日志依赖--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.lmax<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>disruptor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.3.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>AsyncAppender方式</li></ul><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Configuration</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>warn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_HOME<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>D:/logs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Appenders</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>File</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_HOME&#125;/myfile.log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Pattern</span><span class="token punctuation">></span></span>%d %p %c&#123;1.&#125; [%t] %m%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PatternLayout</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>File</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Async</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Async<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Async</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Appenders</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loggers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Root</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Loggers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>AsyncLogger方式</p><ul><li>全局异步就是,所有的日志都异步的记录,在配置文件上不用做任何改动,只需要添加一个<br>log4j2.component.properties 配置;<br>Log4jContextSelector=org.apache.logging.log4j.core.async.AsyncLoggerCon<br>textSelector</li><li>混合异步</li></ul></li></ul><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Configuration</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>WARN<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_HOME<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>D:/logs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Appenders</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>File</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">fileName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;LOG_HOME&#125;/myfile.log<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PatternLayout</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Pattern</span><span class="token punctuation">></span></span>%d %p %c&#123;1.&#125; [%t] %m%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Pattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PatternLayout</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>File</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Async</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Async<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Async</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Appenders</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Loggers</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AsyncLogger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.cq<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>trace<span class="token punctuation">"</span></span>                     <span class="token attr-name">includeLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>AsyncLogger</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span> <span class="token attr-name">includeLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppenderRef</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Root</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Loggers</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如上配置: com.cq 日志是异步的,root日志是同步的。</p><h2 id="3-在springboot中使用日志"><a href="#3-在springboot中使用日志" class="headerlink" title="3. 在springboot中使用日志"></a>3. 在springboot中使用日志</h2><blockquote><p>springboot框架在企业中的使用越来越普遍,springboot日志也是开发中常用的日志系统。springboot<br>默认就是使用SLF4J作为日志门面,logback作为日志实现来记录日志。</p></blockquote><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol><li>入门</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">SpringbootLogApplicationTests</span> <span class="token punctuation">&#123;</span><span class="token comment">//记录器</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> LOGGER <span class="token operator">=</span><span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">SpringbootLogApplicationTests</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// 打印日志信息</span>LOGGER<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"warn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 默认日志级别</span>LOGGER<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"debug"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LOGGER<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>修改日至配置</li></ol><pre class="line-numbers language-none"><code class="language-none">logging.level.com.cq&#x3D;trace# 在控制台输出的日志的格式 同logbacklogging.pattern.console&#x3D;%d&#123;yyyy-MM-dd&#125; [%thread] [%-5level] %logger&#123;50&#125; -%msg%n# 指定文件中日志输出的格式logging.file&#x3D;D:&#x2F;logs&#x2F;springboot.loglogging.pattern.file&#x3D;%d&#123;yyyy-MM-dd&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>xml配置文件</li></ol><p>logback-spring.xml:由SpringBoot解析日志配置</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span> <span class="token attr-name">debug</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--定义日志文件的存储地址 勿在 LogBack 的配置中使用相对路径--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG_HOME<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/home/hcq/logs<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProperty</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>context<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>APP_NAME<span class="token punctuation">"</span></span> <span class="token attr-name">source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spring.application.name<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- 控制台输出 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.encoder.PatternLayoutEncoder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg %n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 按照每天生成日志文件 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.log.%d&#123;yyyy-MM-dd&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.encoder.PatternLayoutEncoder<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- 应用的日志(错误级别)文件 --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;-error.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">></span></span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;-error-%d&#123;yyyy-MM-dd&#125;.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">></span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">></span></span>%date %level [%thread] %logger&#123;40&#125;[%file-%M %line] %msg%n            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.classic.filter.LevelFilter<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span><span class="token punctuation">></span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>level</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMatch</span><span class="token punctuation">></span></span>ACCEPT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMatch</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 只接收错误级别的日志 --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>onMismatch</span><span class="token punctuation">></span></span>DENY<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>onMismatch</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dev<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test,prod<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>INFO<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FILE<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ERROR<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>修改为默认的为log4j2</li></ol> <pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--排除logback--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 添加log4j2 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-log4j2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol><li>java中log的发展历程是log4j-&gt;jul-&gt;jcl-&gt;slf4j-&gt;logbcak-&gt;log4j2</li><li>现在常用的是slf4j+logback,在springboot项目中通过logback-spring.xml修改配置</li><li>log4j2性能有很大提升,主要是由于异步日至和无垃圾机制</li><li>以后的项目中log4j2可能成为主流,要多加关注,自己的项目中也可以尝试使用.在spring项目中log4j2-spring.xml 为默认的配置.</li></ol><p>引用:<br><a href="https://www.cnblogs.com/caoweixiong/p/11285748.html">JAVA日志发展史，终于了解了…</a><br><a href="https://www.cnblogs.com/linzm14/p/15696474.html">java日至体系</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为linux添加人脸认证</title>
      <link href="/2022/05/22/linux-face/"/>
      <url>/2022/05/22/linux-face/</url>
      
        <content type="html"><![CDATA[<h1 id="为linux添加人脸认证"><a href="#为linux添加人脸认证" class="headerlink" title="为linux添加人脸认证"></a>为linux添加人脸认证</h1><blockquote><ul><li>deepin的最新版本已经支持了人脸登陆,linux的东西都是开源的,那么对于其他linux版本,有没有类似的功能呢?</li><li>答案是有的,让Linux拥有类似Windows Hello的体验,使用Howdy即可.</li></ul></blockquote><p><a href="https://github.com/boltgolt/howdy">Howdy</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>Howdy的github页面上介绍了各个发行版的安装方法,</p><ul><li>对于archlinux</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yay -S howdy <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>Ubuntu <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo add-apt-repository ppa:boltgolt&#x2F;howdysudo apt updatesudo apt install howdy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li>红帽系<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo dnf copr enable principis&#x2F;howdysudo dnf --refresh install howdy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li>openSUSE<br>可以去github上详细查看.</li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>每个发行版下配置的方式不同</p><p>以archlinux为例吧,arch的wiki文档很丰富,汲取前人的经验照着做即可.</p><ol><li>为sudo启用howdy认证</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo vim &#x2F;etc&#x2F;pam.d&#x2F;sudo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>增加 </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">auth sufficient pam_python.so &#x2F;lib&#x2F;security&#x2F;howdy&#x2F;pam.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="https://imgtu.com/i/OzcajI"><img src="https://s1.ax1x.com/2022/05/22/OzcajI.png" alt="OzcajI.png"></a></p><ol start="2"><li>为锁屏启用</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo vim &#x2F;etc&#x2F;pam.d&#x2F;system-local-login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>增加</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">auth sufficient pam_python.so &#x2F;lib&#x2F;security&#x2F;howdy&#x2F;pam.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="https://imgtu.com/i/OzgfRH"><img src="https://s1.ax1x.com/2022/05/22/OzgfRH.png" alt="OzgfRH.png"></a></p><ol start="3"><li>如果要为登陆界面启用可以使用<blockquote><p>这个要看自己的使用的gdm还是sddm</p></blockquote></li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo vim &#x2F;etc&#x2F;pam.d&#x2F;sddm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>增加</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">auth sufficient pam_python.so &#x2F;lib&#x2F;security&#x2F;howdy&#x2F;pam.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>我建议是只对sudo和锁屏后解锁启用<br>详细见<a href="https://wiki.archlinux.org/title/Howdy_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">wiki</a></p><h2 id="添加正确的红外传感器"><a href="#添加正确的红外传感器" class="headerlink" title="添加正确的红外传感器"></a>添加正确的红外传感器</h2><ol><li>确认摄像头设备名</li></ol><p>摄像头的文件名多为/dev/video0,/dev/video1,等等.可以通过工具确认,也可以自己尝试后确定.</p><ol start="2"><li>修改howdy配置文件<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vim &#x2F;lib&#x2F;security&#x2F;howdy&#x2F;config.ini<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><p><a href="https://imgtu.com/i/Oz2lFO"><img src="https://s1.ax1x.com/2022/05/22/Oz2lFO.png" alt="Oz2lFO.png"></a></p><ol start="3"><li>测试<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">suod howdy test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><a href="https://imgtu.com/i/OzR1H0"><img src="https://s1.ax1x.com/2022/05/22/OzR1H0.png" alt="OzR1H0.png"></a></li></ol><h2 id="增加人脸模型并使用"><a href="#增加人脸模型并使用" class="headerlink" title="增加人脸模型并使用"></a>增加人脸模型并使用</h2><ol><li>人脸增加<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo howdy add <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>其他配置</li></ol><p>默认每次增加和识别都会拍一张照片存起来,可以配置关闭</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo vim &#x2F;lib&#x2F;security&#x2F;howdy&#x2F;config.ini#### [snapshots]capture_failed &#x3D; falsecapture_successful &#x3D; false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://imgtu.com/i/OzRIVP"><img src="https://s1.ax1x.com/2022/05/22/OzRIVP.png" alt="OzRIVP.png"></a></p><ol start="3"><li>使用和测试<br>当使用sudo 命令时,不输入密码直接按enter会发现,可以执行sudo命令.</li><li>终端里有 GStreamer warnings<br>临时解决方案是向全局或者每个用户加入OPENCV_LOG_LEVEL=ERROR 这个环境变量。<br>可以在zsh或bash的配置文件中增加,也可以在profile文件中增加</li></ol><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>howdy在不同发行版上都有,装起来也比较方便.</li><li>使用howdy要修改操作对应的配置文件</li><li>对于opencv出现的警告,可以增加环境变量解决.</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>seata-分布式事务管理器</title>
      <link href="/2022/05/16/fen-bu-shi-shi-wu-02-seata-fen-bu-shi-shi-wu-guan-li-qi/"/>
      <url>/2022/05/16/fen-bu-shi-shi-wu-02-seata-fen-bu-shi-shi-wu-guan-li-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="seata-分布式事务管理器"><a href="#seata-分布式事务管理器" class="headerlink" title="seata-分布式事务管理器"></a>seata-分布式事务管理器</h1><blockquote><p>前面讲了tx-lcn实现的分布式事务，其原理是不释放连接，暂停提交。</p></blockquote><h2 id="1-tx-lcn相关的原理（引入阿里seata）"><a href="#1-tx-lcn相关的原理（引入阿里seata）" class="headerlink" title="1. tx-lcn相关的原理（引入阿里seata）"></a>1. tx-lcn相关的原理（引入阿里seata）</h2><p>lcn模式是两阶段提交的一种实现，2pc提交传统方案是在数据库层面实现的，tx-lcn在数据库层面之上做了实现。<br>传统的方案图如下.<br><a href="https://imgtu.com/i/ORNG0f"><img src="https://s1.ax1x.com/2022/05/15/ORNG0f.png" alt="ORNG0f.png"></a></p><p>1、应用程序(AP)持有用户库和积分库两个数据源。<br>2、应用程序(AP)通过TM通知用户库RM新增用户,同时通知积分库RM为该用户新增积分,RM此时并未提交事<br>务,此时用户和积分资源锁定。<br>3、TM收到执行回复,只要有一方失败则分别向其他RM发起回滚事务,回滚完毕,资源锁释放。<br>4、TM收到执行回复,全部成功,此时向所有RM发起提交事务,提交完毕,资源锁释放。</p><ul><li>小结:</li></ul><ol><li>在准备阶段RM执行实际的业务操作,但不提交事务,资源锁定;</li><li>在提交阶段TM会接受RM在准备阶段的执行回复,只要有任一个RM执行失败,TM会通知所有RM执行回滚操<br>作,否则,TM将会通知所有RM提交该事务。提交阶段结束资源锁释放。</li></ol><ul><li>XA方案的问题:</li></ul><ol><li>需要本地数据库支持XA协议。</li><li>资源锁需要等到两个阶段结束才释放,性能较差。</li></ol><h2 id="2-seata方案"><a href="#2-seata方案" class="headerlink" title="2. seata方案"></a>2. seata方案</h2><blockquote><p>Seata是由阿里中间件团队发起的开源项目 Fescar,后更名为Seata,它是一个是开源的分布式事务框架。<br>传统2PC的问题在Seata中得到了解决,它通过对本地关系数据库的分支事务的协调来驱动完成全局事务,是工作<br>在应用层的中间件。主要优点是性能较好,且不长时间占用连接资源,它以高效并且对业务0侵入的方式解决微服<br>务场景下面临的分布式事务问题,它目前提供AT模式(即2PC)及TCC模式的分布式事务解决方案。 </p></blockquote><h3 id="2-1-设计思想"><a href="#2-1-设计思想" class="headerlink" title="2.1 设计思想"></a>2.1 设计思想</h3><p>Seata把一个分布式事务理解成一个包含了若干分支事务的全局事务。全局事务的职责是协调其下管辖的分支事务<br>达成一致,要么一起成功提交,要么一起失败回滚。此外,通常分支事务本身就是一个关系数据库的本地事务,下<br>图是全局事务与分支事务的关系图:  </p><p><a href="https://imgtu.com/i/ORU38J"><img src="https://s1.ax1x.com/2022/05/15/ORU38J.png" alt="ORU38J.png"></a></p><p>与 传统2PC 的模型类似,Seata定义了3个组件来协议分布式事务的处理过程:</p><p><a href="https://imgtu.com/i/ORUD8H"><img src="https://s1.ax1x.com/2022/05/15/ORUD8H.png" alt="ORUD8H.png"></a></p><ul><li>Transaction Coordinator (TC): 事务协调器,它是独立的中间件,需要独立部署运行,它维护全局事务的运<br>行状态,接收TM指令发起全局事务的提交与回滚,负责与RM通信协调各各分支事务的提交或回滚。</li><li>Transaction Manager (TM): 事务管理器,TM需要嵌入应用程序中工作,它负责开启一个全局事务,并最终<br>向TC发起全局提交或全局回滚的指令。</li><li>Resource Manager (RM): 控制分支事务,负责分支注册、状态汇报,并接收事务协调器TC的指令,驱动分<br>支(本地)事务的提交和回滚。</li></ul><h3 id="2-2-工作机制"><a href="#2-2-工作机制" class="headerlink" title="2.2 工作机制"></a>2.2 工作机制</h3><blockquote><p>默认是at模式,以实例的模式说明.</p></blockquote><p>业务表：product</p><blockquote><p>id    bigint(20)    PRI<br>name    varchar(100)<br>since    varchar(100)</p></blockquote><p>例如</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> product <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'GTS'</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'TXC'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="一阶段"><a href="#一阶段" class="headerlink" title="一阶段"></a>一阶段</h4><ol><li>解析 SQL：得到 SQL 的类型（UPDATE），表（product），条件（where name = ‘TXC’）等相关的信息。</li><li>查询前镜像：根据解析得到的条件信息，生成查询语句，定位数据。</li></ol><blockquote><p>id    name    since<br>1    TXC    2014</p></blockquote><ol start="3"><li>执行业务 SQL：更新这条记录的 name 为 ‘GTS’。</li><li>查询后镜像：根据前镜像的结果，通过 主键 定位数据。</li></ol><blockquote><p>id    name    since<br>1    GTS    2014</p></blockquote><ol start="5"><li>插入回滚日志：把前后镜像数据以及业务 SQL 相关的信息组成一条回滚日志记录，插入到 UNDO_LOG 表中。</li></ol><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"branchId"</span><span class="token operator">:</span> <span class="token number">641789253</span><span class="token punctuation">,</span><span class="token property">"undoItems"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"afterImage"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"rows"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"id"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span><span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"GTS"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"since"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span><span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"2014"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"tableName"</span><span class="token operator">:</span> <span class="token string">"product"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"beforeImage"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"rows"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"id"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span><span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"TXC"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"since"</span><span class="token punctuation">,</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span><span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"2014"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"tableName"</span><span class="token operator">:</span> <span class="token string">"product"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"sqlType"</span><span class="token operator">:</span> <span class="token string">"UPDATE"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"xid"</span><span class="token operator">:</span> <span class="token string">"xid:xxx"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>提交前，向 TC 注册分支：申请 product 表中，主键值等于 1 的记录的 全局锁 。</li><li>本地事务提交：业务数据的更新和前面步骤中生成的 UNDO LOG 一并提交。</li><li>将本地事务提交的结果上报给 TC。</li></ol><h4 id="二阶段-回滚"><a href="#二阶段-回滚" class="headerlink" title="二阶段-回滚"></a>二阶段-回滚</h4><ol><li>收到 TC 的分支回滚请求，开启一个本地事务，执行如下操作。</li><li>通过 XID 和 Branch ID 查找到相应的 UNDO LOG 记录。</li><li>数据校验：拿 UNDO LOG 中的后镜与当前数据进行比较，如果有不同，说明数据被当前全局事务之外的动作做了修 改。这种情况，需要根据配置策略来做处理，详细的说明在另外的文档中介绍。</li><li>根据 UNDO LOG 中的前镜像和业务 SQL 的相关信息生成并执行回滚的语句：<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">update</span> product <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'TXC'</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>提交本地事务。并把本地事务的执行结果（即分支事务回滚的结果）上报给 TC。</li></ol><h4 id="二阶段-提交"><a href="#二阶段-提交" class="headerlink" title="二阶段-提交"></a>二阶段-提交</h4><ol><li>收到 TC 的分支提交请求，把请求放入一个异步任务的队列中，马上返回提交成功的结果给 TC。</li><li>异步任务阶段的分支提交请求将异步和批量地删除相应 UNDO LOG 记录。</li></ol><h3 id="2-3-小结"><a href="#2-3-小结" class="headerlink" title="2.3 小结"></a>2.3 小结</h3><p>此二阶段提交相比于lcn的二阶段提交不占用资源,整体提高效率。</p><h2 id="3-搭建seata-demo"><a href="#3-搭建seata-demo" class="headerlink" title="3.搭建seata demo"></a>3.搭建seata demo</h2><p>我们搭建的微服务架构图如下<br><a href="https://imgtu.com/i/ORB1Xj"><img src="https://s1.ax1x.com/2022/05/15/ORB1Xj.png" alt="ORB1Xj.png"></a> </p><h3 id="3-1-tc的下载和搭建"><a href="#3-1-tc的下载和搭建" class="headerlink" title="3.1 tc的下载和搭建"></a>3.1 tc的下载和搭建</h3><ol><li>下载nacos-server-2.0.4 ,<a href="https://nacos.io/zh-cn/docs/quick-start.html">下载</a></li><li>从 <a href="https://github.com/seata/seata/releases">github</a> 下载seata-server软件包，将其解压缩。</li><li>启动nacos后,运行.<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">启动前要修改seata-server配置文件修改registry <span class="token punctuation">&#123;</span>  <span class="token comment"># file 、nacos 、eureka、redis、zk、consul、etcd3、sofa</span>  <span class="token builtin class-name">type</span> <span class="token operator">=</span> <span class="token string">"nacos"</span><span class="token punctuation">&#125;</span>config <span class="token punctuation">&#123;</span>  <span class="token comment"># file、nacos 、apollo、zk、consul、etcd3</span>  <span class="token builtin class-name">type</span> <span class="token operator">=</span> <span class="token string">"nacos"</span><span class="token punctuation">&#125;</span>./seata-server.sh -p <span class="token number">8091</span> -h <span class="token number">127.0</span>.0.1 -m <span class="token function">file</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p><strong>会发现seata注册到了nacos</strong> </p><h3 id="3-2-服务搭建"><a href="#3-2-服务搭建" class="headerlink" title="3.2 服务搭建"></a>3.2 服务搭建</h3><ol><li>这里可以从官网下载实例项目. <a href="https://github.com/seata/seata-samples/tree/master/springcloud-nacos-seata">springcloud-nacos-seata</a>,也可以下载我搭建的. 我这里只记录自己搭建的.<blockquote><p>关于github上的配置文件,上面说:”每个应用的resource里需要配置一个registry.conf ，demo中与seata-server里的配置相同” 我自己搭建的没有配置,选择了在spring的配置文件中配置.</p></blockquote></li><li>建立相关库和表<blockquote><p>实际上，在示例用例中，这3个服务应该有3个数据库。 但是，为了简单起见，我们只创建一个数据库并配置3个数据源。</p></blockquote></li></ol><ul><li><p>undo.log 每一个库中都要有undo.log表</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 注意此处0.3.0+ 增加唯一索引 ux_undo_log</span><span class="token keyword">create</span> <span class="token keyword">database</span> seata_demo<span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>undo_log<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>branch_id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>xid<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>context<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>rollback_info<span class="token punctuation">`</span> <span class="token keyword">longblob</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>log_status<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>log_created<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>log_modified<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>ext<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token punctuation">`</span>ux_undo_log<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>xid<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>branch_id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>为服务创建表</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>storage_tbl<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>storage_tbl<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>commodity_code<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>count<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>commodity_code<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>order_tbl<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>order_tbl<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>user_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>commodity_code<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>count<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>account_tbl<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>account_tbl<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>user_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="3"><li>配置文件</li></ol><ul><li>pom文件<br>必要seata项目如下,如要连接数据库还要配置jdbc相关.<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- seata--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-seata<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- 封装的db模块 包含mybatisplus等--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.rrs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>db-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;project.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>application.yml配置<br>对于每个服务都要加入如下seata配置,如果要连接数据库还要配置数据源.<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  datasource:    url: jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;seata_demo?useUnicode&#x3D;true&amp;characterEncoding&#x3D;UTF-8&amp;autoReconnect&#x3D;true&amp;useSSL&#x3D;false&amp;zeroDateTimeBehavior&#x3D;convertToNull    username: root    password: root123    driver-class-name: com.mysql.cj.jdbc.Driverseata:  tx-service-group: test_tx_service_group  config:    type: nacos    nacos:      serverAddr: $&#123;spring.cloud.nacos.server-addr&#125;      group: SEATA_GROUP      username: nacos      password: nacos  registry:    type: nacos    nacos:      server-addr: $&#123;spring.cloud.nacos.server-addr&#125;      group: SEATA_GROUP      username: nacos      password: nacos  service:    vgroup-mapping:      vgroup: test_tx_service_group      rgroup: default<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>bootstrap.yml<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  port: 9092 #spring:  application:    name: storage-service  main:    allow-bean-definition-overriding: true  cloud:    nacos:      server-addr: 127.0.0.1:8848      username: nacos      password: nacos<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="4"><li>代码<br>模块图如下<br>common封装了必要的公共类<br>app作为tm,account,order,storage 作为事务参与者.<br><a href="https://imgtu.com/i/OWgJXT"><img src="https://s1.ax1x.com/2022/05/16/OWgJXT.png" alt="OWgJXT.png"></a></li></ol><p>app.BusinessService</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BusinessService</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> COMMODITY_CODE <span class="token operator">=</span> <span class="token string">"P001"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ORDER_COUNT <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">OrderFeignClient</span> orderFeignClient<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">StorageFeignClient</span> storageFeignClient<span class="token punctuation">;</span>    <span class="token comment">/**     * 下订单     */</span>    <span class="token annotation punctuation">@GlobalTransactional</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">placeOrder</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        storageFeignClient<span class="token punctuation">.</span><span class="token function">deduct</span><span class="token punctuation">(</span>COMMODITY_CODE<span class="token punctuation">,</span> ORDER_COUNT<span class="token punctuation">)</span><span class="token punctuation">;</span>        orderFeignClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> COMMODITY_CODE<span class="token punctuation">,</span> ORDER_COUNT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>order</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">AccountFeignClient</span> accountFeignClient<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">OrderMapper</span> orderMapper<span class="token punctuation">;</span>    <span class="token comment">//@Transactional(rollbackFor = Exception.class)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token class-name">String</span> commodityCode<span class="token punctuation">,</span> <span class="token class-name">Integer</span> count<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//订单金额</span>        <span class="token class-name">Integer</span> orderMoney <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token class-name">Order</span> order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setCommodityCode</span><span class="token punctuation">(</span>commodityCode<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span>orderMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>        orderMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>        accountFeignClient<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> orderMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>storage</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StorageService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">StorageMapper</span> storageMapper<span class="token punctuation">;</span>    <span class="token comment">/**     * 减库存     *      * @param commodityCode 商品编号     * @param count 数量     */</span>    <span class="token comment">//@Transactional(rollbackFor = Exception.class)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> commodityCode<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Storage</span><span class="token punctuation">></span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        wrapper<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Storage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCommodityCode</span><span class="token punctuation">(</span>commodityCode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Storage</span> storage <span class="token operator">=</span> storageMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>        storage<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>storage<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>        storageMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>storage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>account</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccountService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">AccountMapper</span> accountMapper<span class="token punctuation">;</span>    <span class="token comment">/**     * 减账号金额     */</span>    <span class="token comment">//@Transactional(rollbackFor = Exception.class)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">String</span> userId<span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"U002"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"this is a mock Exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">></span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        wrapper<span class="token punctuation">.</span><span class="token function">setEntity</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Account</span> account <span class="token operator">=</span> accountMapper<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>        account<span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>        accountMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>搭建到此时,是否可以运行了呢? 非也,当我们启动服务的时候会报错.此时需要在nacos中增加一条配置.</p><p><a href="https://imgtu.com/i/OhWJnx"><img src="https://s1.ax1x.com/2022/05/17/OhWJnx.png" alt="OhWJnx.png"></a></p><p>service.vgroup-mapping.test_tx_service_group=default<br>test_tx_service_group可以替换成自己在yml文件中配置的事务组的名称.</p><h3 id="3-3-测试"><a href="#3-3-测试" class="headerlink" title="3.3 测试"></a>3.3 测试</h3><ol><li><p>调用不抛出异常的方法,会发现正常,且数据库中数据都正常提交.<br><a href="https://imgtu.com/i/OhWd4e"><img src="https://s1.ax1x.com/2022/05/17/OhWd4e.png" alt="OhWd4e.png"></a><br>数据库<br><a href="https://imgtu.com/i/OhWB3d"><img src="https://s1.ax1x.com/2022/05/17/OhWB3d.png" alt="OhWB3d.png"></a></p></li><li><p>当调用抛出异常的方法,数据库中的事务都没有变化.</p></li></ol><p><a href="https://imgtu.com/i/OhWyut"><img src="https://s1.ax1x.com/2022/05/17/OhWyut.png" alt="OhWyut.png"></a></p><p>数据库</p><p><a href="https://imgtu.com/i/OhW6DP"><img src="https://s1.ax1x.com/2022/05/17/OhW6DP.png" alt="OhW6DP.png"></a></p><p>控制台输出</p><p><a href="https://imgtu.com/i/OhW2E8"><img src="https://s1.ax1x.com/2022/05/17/OhW2E8.png" alt="OhW2E8.png"></a></p><p>undo_log执行</p><h2 id="4-事务分组"><a href="#4-事务分组" class="headerlink" title="4. 事务分组"></a>4. 事务分组</h2><blockquote><p>service.vgroup-mapping.test_tx_service_group=default<br>还记得测试的时候,我们不加这条会出错?为什么呢?是因为seata开启了事务分组.</p></blockquote><ul><li><p>事务分组：seata的资源逻辑，可以按微服务的需要，在应用程序（客户端）对自行定义事务分组，每组取一个名字。</p></li><li><p>集群：seata-server服务端一个或多个节点组成的集群cluster。 应用程序（客户端）使用时需要指定事务逻辑分组与Seata服务端集群的映射关系。</p></li></ul><h3 id="4-1-事务分组如何找到后端Seata集群？"><a href="#4-1-事务分组如何找到后端Seata集群？" class="headerlink" title="4.1 事务分组如何找到后端Seata集群？"></a>4.1 事务分组如何找到后端Seata集群？</h3><ol><li>首先应用程序（客户端）中配置了事务分组（GlobalTransactionScanner 构造方法的txServiceGroup参数）。若应用程序是SpringBoot则通过seata.tx-service-group 配置</li><li>应用程序（客户端）会通过用户配置的配置中心去寻找service.vgroupMapping .[事务分组配置项]，取得配置项的值就是TC集群的名称。若应用程序是SpringBoot则通过seata.service.vgroup-mapping.事务分组名=集群名称 配置</li><li>拿到集群名称程序通过一定的前后缀+集群名称去构造服务名，各配置中心的服务名实现不同（前提是Seata-Server已经完成服务注册，且Seata-Server向注册中心报告cluster名与应用程序（客户端）配置的集群名称一致）</li><li>拿到服务名去相应的注册中心去拉取相应服务名的服务列表，获得后端真实的TC服务列表（即Seata-Server集群节点列表）</li></ol><blockquote><p>我这里在yml中配置了seata.service.vgroup-mapping.事务分组名=集群名称并不管用,在nacos中配置了第三节中所说的参数才不报错. 难道是因为开启了nacos才从nacos中取这个配置项?</p></blockquote><h3 id="4-2-为什么要事务分组"><a href="#4-2-为什么要事务分组" class="headerlink" title="4.2 为什么要事务分组"></a>4.2 为什么要事务分组</h3><p>这里多了一层获取事务分组到映射集群的配置。这样设计后，事务分组可以作为资源的逻辑隔离单位，出现某集群故障时可以快速failover，只切换对应分组，可以把故障缩减到服务级别，但前提也是你有足够server集群。</p><p>client-查找到server的过程呢刚</p><ol><li>读取配置 通过NacosConfiguration远程读取seata配置参数</li><li>获取事务分组(服务启动时加载配置) spring/springboot可配置在yml、properties中，对应值”my_test_tx_group”即为事务分组名，若不配置则默认以：spring.application.name值+”-seata-service-group”拼接后的字符串作为分组名</li><li>查找TC集群名 拿到事务分组名”my_test_tx_group”拼接成”service.vgroupMapping.my_test_tx_group”从配置中心查找到TC集群名clusterName为”default”</li><li>查找TC服务 根据serverAddr和namespace以及clusterName在注册中心找到真实TC服务列表</li></ol><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>seata的配置方式多种多样,且因为阿里一直在维护,配置也都是一直在更新. 阿里的github上有多种架构下的配置和demo.<br><a href="https://imgtu.com/i/OhWW4g"><img src="https://s1.ax1x.com/2022/05/17/OhWW4g.png" alt="OhWW4g.png"></a></li><li>如果我们要使用seata,那么在项目的架构搭建好时就要配置好seata,且不要轻易的改动.</li><li>上面我们探究了seata的原理,搭建了demo,seata的at模式本质上是一种事务失败后进行全局事务的手动回滚,每个分支事务会读取undo_log,进行数据的回滚.</li><li>阿里有很多组件,但是也有好多组件不能做到开箱即用,最早接触的fastdfs就这样,canal也是,seata我搭建起来也感觉不太好,但是这个组件也经过了阿里的广泛应用,所以必要时项目中要用还是要认真的学习一下的.</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 分布式事务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tx-lcn-分布式事务管理器</title>
      <link href="/2022/05/15/fen-bu-shi-shi-wu-01-tx-tlc-fen-bu-shi-shi-wu-guan-li-qi/"/>
      <url>/2022/05/15/fen-bu-shi-shi-wu-01-tx-tlc-fen-bu-shi-shi-wu-guan-li-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="tx-lcn分布式事务管理器"><a href="#tx-lcn分布式事务管理器" class="headerlink" title="tx-lcn分布式事务管理器"></a>tx-lcn分布式事务管理器</h1><blockquote><p>分布式事务是什么和分布式事务的cap,base理论这里不做讨论，网上的文章有很多，视频也很多。只记录如何搭建tx-lcn和如何使用。</p></blockquote><h2 id="1-tx-lcn是什么"><a href="#1-tx-lcn是什么" class="headerlink" title="1. tx-lcn是什么"></a>1. tx-lcn是什么</h2><p>LCN框架在2017年6月发布第一个版本，目前最新已经达到5.0版本。<br>LCN早期设计时，1.0版本和2.0版本设计步骤如下：</p><ul><li><p>锁定事务单元（Lock）</p></li><li><p>确认事务模块状态（Confirm）</p></li><li><p>通知事务（Notify）</p></li></ul><p>取各自首字母后名称为LCN。<br>LCN框架从5.0开始兼容了LCN、TCC、TXC三种事务模式，为了和LCN框架区分，从5.0开始把LCN框架更名为：TX-LCN分布式事务框架。</p><p><a href="https://www.codingapi.com/docs/">tx-lcn官网</a></p><h2 id="2-分布式事务中lcn模式的工作场景和原理"><a href="#2-分布式事务中lcn模式的工作场景和原理" class="headerlink" title="2. 分布式事务中lcn模式的工作场景和原理"></a>2. 分布式事务中lcn模式的工作场景和原理</h2><h3 id="2-1-组件和概念"><a href="#2-1-组件和概念" class="headerlink" title="2.1 组件和概念"></a>2.1 组件和概念</h3><blockquote><p>TX-LCN由两大模块组成，TxClient、TxManager。<br>TxClient作为模块的依赖框架，提供了TX-LCN的标准支持，事务发起方和参与方都属于TxClient。<br>TxManager作为分布式事务的控制方，控制整个事务。</p></blockquote><ul><li><p>创建事务组<br>是指在事务发起方开始执行业务代码之前先调用TxManager创建事务组对象，然后拿到事务标识GroupId的过程。</p></li><li><p>加入事务组<br>添加事务组是指参与方在执行完业务方法以后，将该模块的事务信息通知给TxManager的操作。</p></li><li><p>通知事务组<br>是指在发起方执行完业务代码以后，将发起方执行结果状态通知给TxManager,TxManager将根据事务最终状态和事务组的信息来通知相应的参与模块提交或回滚事务，并返回结果给事务发起方。 </p><h3 id="2-2-典型场景"><a href="#2-2-典型场景" class="headerlink" title="2.2 典型场景"></a>2.2 典型场景</h3></li></ul><ol><li><blockquote><ol><li>发起方创建事务</li><li>发起方调用a</li><li>发起方调用b</li><li>发起方提交事务 </li></ol></blockquote></li></ol><p><a href="https://imgtu.com/i/OywNS1"><img src="https://s1.ax1x.com/2022/05/13/OywNS1.png" alt="OywNS1.png"></a>  </p><ol start="2"><li><blockquote><ol><li>发起方创建事务</li><li>发起方调用a</li><li>a调用b</li><li>发起方提交事务</li></ol></blockquote></li></ol><p><a href="https://imgtu.com/i/Oy0q4H"><img src="https://s1.ax1x.com/2022/05/13/Oy0q4H.png" alt="Oy0q4H.png"></a></p><h3 id="2-3-工作原理"><a href="#2-3-工作原理" class="headerlink" title="2.3 工作原理"></a>2.3 工作原理</h3><ol><li>当事务发起方创建事务时，我们可以理解为在tx-manager中创建了一个事务组</li><li>a服务被调用时，a执行完毕会进行一个提交，<strong>注意这里并不是真的向数据库提交了事务，而是对commit进行了代理</strong>，此时会占用连接，等待tx-manager服务通知真提交还是回滚。</li><li>当所有的事务都没有出错时，事务发起方会提交事务，由事务管理对子事务进行通知，让其真正提交事务。</li><li>当有事务出错时，比如b服务中抛出了异常，事务发起方知道了异常，会让tx-manager通知子事务回滚。</li></ol><blockquote><p>从这个原理可以看出，lcn模式是很占用数据库连接，因为子事务不会真正提交，会等待所有事务完毕后才提交或回滚。<br>同时lcn也是只支持jdbc的连接的回滚</p></blockquote><h2 id="3-实战搭建"><a href="#3-实战搭建" class="headerlink" title="3. 实战搭建"></a>3. 实战搭建</h2><h3 id="3-1-事务管理器（tx-manager）搭建"><a href="#3-1-事务管理器（tx-manager）搭建" class="headerlink" title="3.1  事务管理器（tx-manager）搭建"></a>3.1  事务管理器（tx-manager）搭建</h3><blockquote><p>tx-manager是一个服务器，也是基于springboot的。</p></blockquote><ol><li>创建项目springboot项目，引入pom文件，添加配置文件</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.xsyw<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>xsyw-log-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--nacos配置  ：： 可有可无--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--tx-lcn管理器--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.codingapi.txlcn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>txlcn-tm<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>配置文件如下</li></ul><p>bootstrap.properties</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">## 此处如果不在application配置，会启动不起来。</span><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">TX-Manager</span><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">7970</span><span class="token attr-name">xsyw.nacos.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">192.168.28.130:8848</span><span class="token attr-name">spring.cloud.nacos.discovery.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;xsyw.nacos.server-addr&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>application.properties </p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">##################</span><span class="token comment"># 你可以在 https://txlcn.org/zh-cn/docs/setting/manager.html 看到所有的个性化配置</span><span class="token comment">#################</span><span class="token attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token attr-value">TX-Manager</span><span class="token attr-name">server.port</span><span class="token punctuation">=</span><span class="token attr-value">7970</span><span class="token attr-name">spring.profiles.active</span><span class="token punctuation">=</span><span class="token attr-value">dev</span><span class="token comment">#####db配置 tx-manager</span><span class="token attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span><span class="token attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://$&#123;rrs.datasource.ip&#125;:3306/tx-manager?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;useSSL=false&amp;zeroDateTimeBehavior=convertToNull</span><span class="token attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;rrs.datasource.username&#125;</span><span class="token attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;rrs.datasource.password&#125;</span><span class="token attr-name">spring.jpa.database-platform</span><span class="token punctuation">=</span><span class="token attr-value">org.hibernate.dialect.MySQL5InnoDBDialect</span><span class="token attr-name">spring.jpa.hibernate.ddl-auto</span><span class="token punctuation">=</span><span class="token attr-value">update</span><span class="token comment">### tx-lcn logger配置</span><span class="token attr-name">tx-lcn.logger.enabled</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span class="token attr-name">tx-lcn.logger.driver-class-name</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span><span class="token attr-name">tx-lcn.logger.jdbc-url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://$&#123;rrs.datasource.ip&#125;:3306/tx_logger?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;useSSL=false&amp;zeroDateTimeBehavior=convertToNull</span><span class="token attr-name">tx-lcn.logger.username</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;rrs.datasource.username&#125;</span><span class="token attr-name">tx-lcn.logger.password</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;rrs.datasource.password&#125;</span><span class="token comment"># redis 的设置信息. 线上请用Redis Cluster</span><span class="token attr-name">spring.redis.host</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;rrs.redis.host&#125;</span><span class="token attr-name">spring.redis.port</span><span class="token punctuation">=</span><span class="token attr-value">$&#123;rrs.redis.port&#125;</span><span class="token attr-name">spring.redis.password</span><span class="token punctuation">=</span><span class="token comment"># TM后台登陆密码，默认值为codingapi</span><span class="token attr-name">tx-lcn.manager.admin-key</span><span class="token punctuation">=</span><span class="token attr-value">admin</span><span class="token comment"># 分布式事务执行总时间(ms). 默认为8000</span><span class="token attr-name">tx-lcn.manager.dtx-time</span><span class="token punctuation">=</span><span class="token attr-value">15000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将文件中 rrs.datasource.username 等换成自己的数据库地址，数据库密码等。</p><p>至于为什么要用peoperties,是因为tx-lcn默认采用的peoperties文件配置的，如果我们采用yml文件会不生效。</p><ol start="2"><li>执行sql语句</li></ol><p>tx-lcn依赖mysql和redis，所以需要在mysql中建立对应的库。<br>tx-lcn将此sql文件放在txlcn-tm-5.0.2.RELEASE.jar包根目录下。当然也可以到官网查看。</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/* Navicat Premium Data Transfer Source Server         : local Source Server Type    : MySQL Source Server Version : 100309 Source Host           : localhost:3306 Source Schema         : tx-manager Target Server Type    : MySQL Target Server Version : 100309 File Encoding         : 65001 Date: 29/12/2018 18:35:59*/</span><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span>  <span class="token punctuation">`</span>tx<span class="token operator">-</span>manager<span class="token punctuation">`</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci<span class="token punctuation">;</span><span class="token keyword">USE</span> <span class="token punctuation">`</span>tx<span class="token operator">-</span>manager<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">SET</span> NAMES utf8mb4<span class="token punctuation">;</span><span class="token keyword">SET</span> FOREIGN_KEY_CHECKS <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">-- ----------------------------</span><span class="token comment">-- Table structure for t_tx_exception</span><span class="token comment">-- ----------------------------</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>t_tx_exception<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>t_tx_exception<span class="token punctuation">`</span>  <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>group_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>unit_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>mod_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_general_ci <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>transaction_state<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>registrar<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>ex_state<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'0 待处理 1已处理'</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>remark<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10240</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'备注'</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">967</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token operator">=</span> utf8mb4 <span class="token keyword">COLLATE</span> <span class="token operator">=</span> utf8mb4_general_ci ROW_FORMAT <span class="token operator">=</span> Dynamic<span class="token punctuation">;</span><span class="token keyword">SET</span> FOREIGN_KEY_CHECKS <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>tx_logger<span class="token punctuation">`</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token operator">=</span> utf8<span class="token punctuation">;</span><span class="token keyword">Use</span> <span class="token punctuation">`</span>tx_logger<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token comment">-- ----------------------------</span><span class="token comment">-- Table structure for t_logger</span><span class="token comment">-- ----------------------------</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>t_logger<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>t_logger<span class="token punctuation">`</span>  <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>group_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>unit_id<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>tag<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>content<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>app_name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">19</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token operator">=</span> utf8 <span class="token keyword">COLLATE</span> <span class="token operator">=</span> utf8_general_ci ROW_FORMAT <span class="token operator">=</span> Dynamic<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>启动redis， 并将配置文件中地址改为自己的redis地址。</p></li><li><p>编写启动类<br>TransactionManagerApplication.java</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author hcq */</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token comment">//@EnableDiscoveryClient</span><span class="token annotation punctuation">@EnableTransactionManagerServer</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionManagerApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">TransactionManagerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>保证redis和mysql启动且配置正确，启动启动类，访问服务端口进入控制台。</p></li></ol><h3 id="3-2-tx-client的搭建和使用"><a href="#3-2-tx-client的搭建和使用" class="headerlink" title="3.2  tx-client的搭建和使用"></a>3.2  tx-client的搭建和使用</h3><blockquote><p>即为我们客户端服务发起者和服务调用者 </p></blockquote><p><a href="https://github.com/hcqbuqingzhen/rrs-platform/tree/master/demo/tx-demo">tx-demo模块</a> 搭建的demo,可下载查看并运行。</p><h4 id="3-2-1-common模块，服务公共模块。"><a href="#3-2-1-common模块，服务公共模块。" class="headerlink" title="3.2.1 common模块，服务公共模块。"></a>3.2.1 common模块，服务公共模块。</h4><p><a href="https://imgtu.com/i/O2Jhxx"><img src="https://s1.ax1x.com/2022/05/15/O2Jhxx.png" alt="O2Jhxx.png"></a></p><p>项目类图，主要封装了公共的dao操作，和feign的客户端供其他demo模块调用。</p><h4 id="3-2-2-其他服务模块"><a href="#3-2-2-其他服务模块" class="headerlink" title="3.2.2 其他服务模块"></a>3.2.2 其他服务模块</h4><p><a href="https://imgtu.com/i/O2YkJs"><img src="https://s1.ax1x.com/2022/05/15/O2YkJs.png" alt="O2YkJs.png"></a></p><p>服务a,b,c的内容相似，不同的是服务之间方法的不同</p><ol><li><p> 服务a,service方法。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@LcnTransaction</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> exFlag<span class="token punctuation">,</span> <span class="token class-name">String</span> flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> dResp <span class="token operator">=</span> serviceBClient<span class="token punctuation">.</span><span class="token function">rpc</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// step2. call remote ServiceB</span>        <span class="token class-name">String</span> eResp <span class="token operator">=</span> serviceCClient<span class="token punctuation">.</span><span class="token function">rpc</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// step3. execute local transaction</span>        <span class="token class-name">Demo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token class-name">TracingContext</span><span class="token punctuation">.</span><span class="token function">tracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setDemoField</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span><span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demoMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 置异常标志，DTX 回滚</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>exFlag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"by exFlag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> dResp <span class="token operator">+</span> <span class="token string">" > "</span> <span class="token operator">+</span> eResp <span class="token operator">+</span> <span class="token string">" > "</span> <span class="token operator">+</span> <span class="token string">"ok-service-a"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>服务b,service方法。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@LcnTransaction</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">rpc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Demo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token class-name">TracingContext</span><span class="token punctuation">.</span><span class="token function">tracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setDemoField</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span><span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demoMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"ok-service-b"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>服务c,service方法。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@LcnTransaction</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">rpc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Demo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setDemoField</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span><span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token class-name">TracingContext</span><span class="token punctuation">.</span><span class="token function">tracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demoMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"by test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token string">"ok-service-c"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="3-3-测试lcn分布式事务"><a href="#3-3-测试lcn分布式事务" class="headerlink" title="3.3 测试lcn分布式事务"></a>3.3 测试lcn分布式事务</h3><ol><li>我们先开启tx-manager，同时开启啊a,b,c服务。<blockquote><p>可以下载我搭建的项目运行</p></blockquote></li></ol><ul><li>tx-manager为transaction模块下的tx-lcn模块，配置好数据库，redis，直接运行即可。</li></ul><p><a href="https://imgtu.com/i/O2YvtJ"><img src="https://s1.ax1x.com/2022/05/15/O2YvtJ.png" alt="O2YvtJ.png"></a></p><ul><li>demo模块在demo下</li></ul><p><a href="https://imgtu.com/i/O2tGNQ"><img src="https://s1.ax1x.com/2022/05/15/O2tGNQ.png" alt="O2tGNQ.png"></a></p><ol start="2"><li>数据库建好库和表</li></ol><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> txlcn_demo<span class="token punctuation">;</span><span class="token keyword">use</span> txlcn_demo<span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> t_demo<span class="token punctuation">(</span>    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span>  <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    kid <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    demo_field <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    group_id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    create_time <span class="token keyword">datetime</span><span class="token punctuation">,</span>    app_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>调用服务a测试</li></ol><ul><li>其中参数ex有值会让服务a抛出异常<br><a href="https://imgtu.com/i/O2t2g1"><img src="https://s1.ax1x.com/2022/05/15/O2t2g1.png" alt="O2t2g1.png"></a></li></ul><ol start="4"><li>测试结果</li></ol><ul><li>当不传ex字段时，数据都会成功写入。</li></ul><p><a href="https://imgtu.com/i/O2tT4H"><img src="https://s1.ax1x.com/2022/05/15/O2tT4H.png" alt="O2tT4H.png"></a></p><ul><li>当传入ex字段时，数据库中不会写入数据，观察b,c控制台如下。</li></ul><p><a href="https://imgtu.com/i/O2NNIe"><img src="https://s1.ax1x.com/2022/05/15/O2NNIe.png" alt="O2NNIe.png"></a></p><p>我们可以发现这一套分布式事务可以正常运行。</p><h2 id="4-tx-lcn使用tcc模式的分布式事务"><a href="#4-tx-lcn使用tcc模式的分布式事务" class="headerlink" title="4. tx-lcn使用tcc模式的分布式事务"></a>4. tx-lcn使用tcc模式的分布式事务</h2><blockquote><p>我们上面使用的是lcn模式，lcn模式的原理在第二节中有描述，其实在电商的场景中还有一种tcc的模式也很常用，tx-lcn也支持了这种模式。</p></blockquote><h3 id="4-1-tcc模式的原理"><a href="#4-1-tcc模式的原理" class="headerlink" title="4.1 tcc模式的原理"></a>4.1 tcc模式的原理</h3><ul><li>TCC的核心思想是：针对每个操作，都要注册一个与其对应的确认和补偿（撤销）操作，分为三个阶段：</li><li>Try：这个阶段对各个服务的资源做检测以及对资源进行锁定或者预留；</li><li>Confirm ：执行真正的业务操作，不作任何业务检查，只使用Try阶段预留的业务资源，Confirm操作要求具备幂等设计，Confirm失败后需要进行重试；</li><li>Cancel：如果任何一个服务的业务方法执行出错，那么这里就需要进行补偿，即执行回滚操作，释放Try阶段预留的业务资源 ，Cancel操作要求具备幂等设计，Cancel失败后需要进行重试</li></ul><p><strong>假设我们的分布式系统一共包含4个服务：订单服务、库存服务、积分服务、仓储服务，每个服务有自己的数据库，如下图：</strong></p><p><a href="https://imgtu.com/i/O2UawT"><img src="https://s1.ax1x.com/2022/05/15/O2UawT.png" alt="O2UawT.png"></a></p><ol><li>try阶段</li></ol><ul><li>Try阶段一般用于锁定某个资源，设置一个预备状态或冻结部分数据。对于示例中的每一个服务，Try阶段所做的工作如下：</li><li>订单服务：先置一个中间状态“UPDATING，支付中”，而不是直接设置“支付成功”状态；</li><li>库存服务：先用一个冻结库存字段保存冻结库存数，而不是直接扣掉库存，大致意思是冻结库存两个；</li><li>积分服务：预增加会员积分；</li><li>仓储服务：创建销售出库单，但状态是UNKONWN，出单中。</li></ul><p><a href="https://imgtu.com/i/O2aucR"><img src="https://s1.ax1x.com/2022/05/15/O2aucR.png" alt="O2aucR.png"></a></p><ol start="2"><li>Confirm</li></ol><ul><li><p>根据Try阶段的执行情况，Confirm分为两种情况：</p><ul><li>理想情况下，所有Try全部执行成功，则执行各个服务的Confirm逻辑；</li><li>部分服务Try执行失败，则执行第三阶段——Cancel。</li></ul></li><li><p>Confirm阶段一般需要各个服务自己实现Confirm逻辑：</p><ul><li>订单服务：confirm逻辑可以是将订单的中间状态变更为PAYED-支付成功；</li><li>库存服务：将冻结库存数清零，同时扣减掉真正的库存；</li><li>积分服务：将预增加积分清零，同时增加真实会员积分；</li><li>仓储服务：修改销售出库单的状态为已创建-CREATED。</li></ul><p><strong>Confirm阶段的各个服务本身可能出现问题，这时候一般就需要TCC框架了（比如ByteTCC，tcc-transaction，himly），TCC事务框架一般会记录一些分布式事务的活动日志，保存事务运行的各个阶段和状态，从而保证整个分布式事务的最终一致性。</strong></p></li></ul><ol start="3"><li>Cancel</li></ol><ul><li>如果Try阶段执行异常，就会执行Cancel阶段。比如：<ul><li>对于订单服务，可以实现的一种Cancel逻辑就是：将订单的状态设置为“CANCELED”；</li><li>对于库存服务，Cancel逻辑就是：将冻结库存扣减掉，加回到可销售库存里去。</li></ul></li></ul><p><a href="https://imgtu.com/i/O2aoUU"><img src="https://s1.ax1x.com/2022/05/15/O2aoUU.png" alt="O2aoUU.png"></a></p><ul><li>框架选型<ul><li>TCC框架的可供选择余地比较少，目前相对比较成熟的是阿里开源的分布式事务框架seata（<a href="https://github.com/seata/seata%EF%BC%89%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%A1%86%E6%9E%B6%E6%98%AF%E7%BB%8F%E5%8E%86%E8%BF%87%E9%98%BF%E9%87%8C%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E7%9A%84%E5%A4%A7%E9%87%8F%E8%80%83%E9%AA%8C%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E6%94%AF%E6%8C%81dubbo%E3%80%81spring">https://github.com/seata/seata），这个框架是经历过阿里生产环境的大量考验，同时也支持dubbo、spring</a> cloud。</li></ul></li><li>优点<ul><li>跟2PC比起来，实现以及流程相对简单了一些，但数据的一致性比2PC也要差一些，当然性能也可以得到提升。</li></ul></li><li>缺点<ul><li>TCC模型对业务的侵入性太强，事务回滚实际上就是自己写业务代码来进行回滚和补偿，改造的难度大。一般来说支付、交易等核心业务场景，可能会用TCC来严格保证分布式事务的一致性，要么全部成功，要么全部自动回滚。这些业务场景都是整个公司的核心业务有，比如银行核心主机的账务系统，不容半点差池。</li><li>但是，在一般的业务场景下，尽量别没事就用TCC作为分布式事务的解决方案，因为自己手写回滚/补偿逻辑，会造成业务代码臃肿且很难维护。</li></ul></li></ul><h3 id="4-2-tx-lcn测试tcc模式"><a href="#4-2-tx-lcn测试tcc模式" class="headerlink" title="4.2 tx-lcn测试tcc模式"></a>4.2 tx-lcn测试tcc模式</h3><ol><li> 增加方法</li></ol><ul><li><p>servera</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@TccTransaction</span><span class="token punctuation">(</span>confirmMethod <span class="token operator">=</span> <span class="token string">"confirmExecuteTcc"</span><span class="token punctuation">,</span>cancelMethod <span class="token operator">=</span><span class="token string">"confirmExecuteTcc"</span> <span class="token punctuation">)</span><span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">executeTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> exFlag<span class="token punctuation">,</span> <span class="token class-name">String</span> flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//tcc模式下增加一个用于判断的字段，当try阶段是这个字段的含义是 增加中。</span>    <span class="token class-name">String</span> dResp <span class="token operator">=</span> serviceBClient<span class="token punctuation">.</span><span class="token function">rpcTcc</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// step2. call remote ServiceB</span>    <span class="token class-name">String</span> eResp <span class="token operator">=</span> serviceCClient<span class="token punctuation">.</span><span class="token function">rpcTcc</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// step3. execute local transaction</span>    <span class="token class-name">Demo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demo<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token class-name">TracingContext</span><span class="token punctuation">.</span><span class="token function">tracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demo<span class="token punctuation">.</span><span class="token function">setDemoField</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    demo<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span><span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demo<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demoMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 置异常标志，DTX 回滚</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>exFlag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"by exFlag"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> dResp <span class="token operator">+</span> <span class="token string">" > "</span> <span class="token operator">+</span> eResp <span class="token operator">+</span> <span class="token string">" > "</span> <span class="token operator">+</span> <span class="token string">"ok-service-a"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">confirmExecuteTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> exFlag<span class="token punctuation">,</span> <span class="token class-name">String</span> flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//确认方法 需要自己手动修改业务逻辑</span>    <span class="token comment">//我们确认字段增加成功</span>    <span class="token class-name">String</span> applicationId <span class="token operator">=</span> <span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demoMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>applicationId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cancelExecuteTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> exFlag<span class="token punctuation">,</span> <span class="token class-name">String</span> flag<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//确认方法 需要自己手动修改业务逻辑</span>    <span class="token comment">//我们修改字段为增加失败</span>    <span class="token class-name">String</span> applicationId <span class="token operator">=</span> <span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    demoMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>applicationId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>serverb</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@TccTransaction</span><span class="token punctuation">(</span>confirmMethod <span class="token operator">=</span> <span class="token string">"confirmRpcTcc"</span><span class="token punctuation">,</span>cancelMethod <span class="token operator">=</span><span class="token string">"cancelRpcTcc"</span> <span class="token punctuation">)</span>   <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>   <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">rpcTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">Demo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demo<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token class-name">TracingContext</span><span class="token punctuation">.</span><span class="token function">tracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demo<span class="token punctuation">.</span><span class="token function">setDemoField</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>       demo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span><span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demo<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demo<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demoMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token string">"ok-service-b"</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">confirmRpcTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token comment">//确认方法 需要自己手动修改业务逻辑</span>       <span class="token comment">//我们确认字段增加成功</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"confirm 运行了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">String</span> applicationId <span class="token operator">=</span> <span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demoMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>applicationId<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cancelRpcTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>       <span class="token comment">//确认方法 需要自己手动修改业务逻辑</span>       <span class="token comment">//我们修改字段为增加失败</span>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cancl 运行了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">String</span> applicationId <span class="token operator">=</span> <span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       demoMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>applicationId<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>serverc</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span>    <span class="token annotation punctuation">@TccTransaction</span><span class="token punctuation">(</span>confirmMethod <span class="token operator">=</span> <span class="token string">"confirmRpcTcc"</span><span class="token punctuation">,</span>cancelMethod <span class="token operator">=</span><span class="token string">"cancelRpcTcc"</span> <span class="token punctuation">)</span>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor <span class="token operator">=</span> <span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">rpcTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Demo</span> demo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setDemoField</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setCreateTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setAppName</span><span class="token punctuation">(</span><span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setGroupId</span><span class="token punctuation">(</span><span class="token class-name">TracingContext</span><span class="token punctuation">.</span><span class="token function">tracing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demo<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demoMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"456"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">"by test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token string">"ok-service-c"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">confirmRpcTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//确认方法 需要自己手动修改业务逻辑</span>        <span class="token comment">//我们确认字段增加成功</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"confirm 执行了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> applicationId <span class="token operator">=</span> <span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demoMapper<span class="token punctuation">.</span><span class="token function">updateById</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>applicationId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cancelRpcTcc</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token comment">//确认方法 需要自己手动修改业务逻辑</span>        <span class="token comment">//我们修改字段为增加失败</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cancel 执行了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> applicationId <span class="token operator">=</span> <span class="token class-name">Transactions</span><span class="token punctuation">.</span><span class="token function">getApplicationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        demoMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>applicationId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p><strong>对应的contrller中要添加对应的方法。</strong><br><strong>注意 confirmRpcTcc cancelRpcTcc 等方法，参数要和原方法一致，tx-lcn框架会在分布式事务有一个失败时，调用我们写的业务方法</strong></p><ol start="2"><li>使用方法</li></ol><ul><li><p>也可以下载此demo模块<br><a href="https://github.com/hcqbuqingzhen/rrs-platform/tree/master/demo/tx-demo">tx-demo模块</a></p></li><li><p>当调用txlcn-tcc 时，方法失败，且数据库中数据回滚。</p></li></ul><p>调用 且让其抛异常<br><a href="https://imgtu.com/i/O2LcvQ"><img src="https://s1.ax1x.com/2022/05/15/O2LcvQ.png" alt="O2LcvQ.png"></a></p><p>控制台输出，回滚方法运行，且数据库中数据无增加。</p><p><a href="https://imgtu.com/i/O2LLr9"><img src="https://s1.ax1x.com/2022/05/15/O2LLr9.png" alt="O2LLr9.png"></a></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol><li>tx-lcn是lcn模式的一个实现：<br>其原理是对数据库连接进行代理，当commit时并没有真正的提交，当所有事务都没有出错时，事务管理器会下达提交的命令，此时才会提交，当有一个事务出现异常时，执行回滚。</li><li>tx-lcn通过注解来开发，当我们配置好时，开发起来比较简单。</li><li>tx-lcn也支持了tcc模式，4小结节进行了实现。</li><li>tx-lcn的lcn模式可用在资源较多的情况，如果资源比较少，或者不仅仅是jdbc,如mongodb,redis，可采用tcc模式。</li><li>tcc模式的缺点是代码侵入性高，且业务代码需要重写。</li></ol><p><strong>资源</strong> ：数据库连接。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 分布式事务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次内网穿透搭建过程</title>
      <link href="/2022/05/10/ji-yi-ci-nei-wang-chuan-tou-da-jian-liu-cheng/"/>
      <url>/2022/05/10/ji-yi-ci-nei-wang-chuan-tou-da-jian-liu-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="记一次内网搭建过程"><a href="#记一次内网搭建过程" class="headerlink" title="记一次内网搭建过程"></a>记一次内网搭建过程</h1><blockquote><p>3月份的时候大家都居家办公，开发的过程中后端和前端开发联调，每次后端修改接口都要重新发一次服务器上的代码，前后端都在抱怨这么做浪费时间。</p></blockquote><ul><li>我们知道我们的个人ip都是都是非公网ip，一般来说外人访问不到我们家中的电脑,那么有没有办法可以让在家办公的前端调用到在家办公的后端的接口呢？</li><li>答案是内网穿透。简单来说需要一台服务器，服务器上运行一个代理软件，后端小伙伴也要运行同样的代理软件，代理软件建立链接，服务器将某个端口和某个后端小伙伴做映射。这样前端小伙伴访问服务器上某个端口时，实际访问的是后端小伙伴的电脑上的服务。</li></ul><h2 id="1-技术选型（选哪个代理软件）"><a href="#1-技术选型（选哪个代理软件）" class="headerlink" title="1. 技术选型（选哪个代理软件）"></a>1. 技术选型（选哪个代理软件）</h2><ul><li>这样的代理软件有很多，大可不必纠结，选择自己熟悉的就可以了。</li></ul><blockquote><p>我选择了v2ray这款代理软件，V2Ray 是一个与Shadowsocks 类似的代理软件，可以用来科学上网（翻墙）学习，V2RayW，V2RayN，Qv2ray 等开箱即用的科学上网软件都是使用v2ray为核心。</p><p>v2ray文档全面丰富，可以参照官网的配置来实现我们的需求。</p></blockquote><p><a href="https://www.v2ray.com/">v2ray官网</a><br><a href="https://www.v2ray.com/chapter_00/install.html">下载</a></p><h2 id="2-实现过程"><a href="#2-实现过程" class="headerlink" title="2.实现过程"></a>2.实现过程</h2><ul><li><p>访问的步骤大概如图<br><a href="https://imgtu.com/i/OB6j4H"><img src="https://s1.ax1x.com/2022/05/12/OB6j4H.png" alt="OB6j4H.png"></a></p></li><li><p>实际上算是一个反向代理</p><blockquote><ol><li>假设在主机 A 中有一个网页服务器，这台主机没有公网 IP，无法在公网上直接访问。另有一台主机 B，它可以由公网访问。现在我们需要把 B 作为入口，把流量从 B 转发到 A。</li><li>在主机 A 中配置一个 V2Ray，称为bridge，在 B 中也配置一个 V2Ray，称为portal。</li><li>bridge会向portal主动建立连接，此连接的目标地址可以自行设定。portal会收到两种连接，一是由bridge发来的连接，二是公网用户发来的连接。portal会自动将两类连接合并。于是bridge就可以收到公网流量了。</li><li>bridge在收到公网流量之后，会将其原封不动地发给主机 A 中的网页服务器。当然，这一步需要路由的协作。<br>bridge会根据流量的大小进行动态的负载均衡。</li></ol></blockquote></li></ul><p>对应我们的图示，前端就是访问者。服务器就是portal，后端的机器是bridge。</p><ul><li>对于服务端上的而v2ray配置可以采用如下内容。<blockquote><p>reverse: 配置项为配置反向代理所用。</p></blockquote></li></ul><p>server.json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"> <span class="token punctuation">&#123;</span>      <span class="token property">"reverse"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>       <span class="token property">"portals"</span><span class="token operator">:</span><span class="token punctuation">[</span>          <span class="token punctuation">&#123;</span>            <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"portal"</span><span class="token punctuation">,</span>  <span class="token comment">//portal的标识。在路由中使用outboundTag将流量转发到这个portal。</span>          <span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"www.ytty.xyz"</span> <span class="token comment">//一个域名。当portal接收到流量时，如果流量的目标域名是此域名，则portal认为当前连接上bridge发来的通信连接。而其它流量则会被当成需要转发的流量。portal所做的工作就是把这两类连接进行识别并拼接。     </span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"inbounds"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">&#123;</span>                 <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"zcc-mobile"</span><span class="token punctuation">,</span>  <span class="token comment">//随意 这两个端口17050 17052 对应着后台开发的7050,7052端口，而这两个端口是后台开发的api端口。</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">17052</span><span class="token punctuation">,</span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"dokodemo-door"</span><span class="token punctuation">,</span>          <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>              <span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token comment">// 后台开发机上的服务地址和端口</span>            <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">7052</span><span class="token punctuation">,</span>             <span class="token property">"network"</span><span class="token operator">:</span><span class="token string">"tcp"</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>          <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token string">"tunnel"</span><span class="token punctuation">,</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">16823</span><span class="token punctuation">,</span>  <span class="token comment">//用于接收 bridge 的连接</span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"vmess"</span><span class="token punctuation">,</span>        <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"clients"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token punctuation">&#123;</span>                <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span><span class="token punctuation">,</span> <span class="token comment">//id要和开发机上一致</span>              <span class="token property">"alterId"</span><span class="token operator">:</span><span class="token number">64</span>            <span class="token punctuation">&#125;</span>          <span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token property">"routing"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"rules"</span><span class="token operator">:</span><span class="token punctuation">[</span>          <span class="token punctuation">&#123;</span>            <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>          <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token string">"zcc-mobile"</span>  <span class="token comment">//表示从这两个端口进来的流量 会转发到连接的开发机上</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"portal"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>          <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token string">"tunnel"</span> <span class="token comment">//对于来自 16823即bridge连接的流量  转发到www.ytty.xyz---后端开发机上。</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"portal"</span>        <span class="token punctuation">&#125;</span>       <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>客户端配置如下<br>client.json<pre class="line-numbers language-json" data-language="json"><code class="language-json"> <span class="token punctuation">&#123;</span>    <span class="token property">"reverse"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>     <span class="token property">"bridges"</span><span class="token operator">:</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"bridge"</span><span class="token punctuation">,</span> <span class="token comment">//一个标识，所有由bridge发出的连接，都会带有这个标识。可以在路由中使用inboundTag进行识别。</span>        <span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"www.ytty.xyz"</span><span class="token comment">//一个域名。bridge向portal建立的连接，都会使用这个域名进行发送。这个域名只作为bridge和portal的通信用途，不必真实存在。  可以随意配置  </span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"outbounds"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token string">"bridgeout"</span><span class="token punctuation">,</span>      <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token string">"freedom"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"zcc-mobile-server"</span><span class="token punctuation">,</span>       <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"vmess"</span><span class="token punctuation">,</span>      <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"vnext"</span><span class="token operator">:</span><span class="token punctuation">[</span>  <span class="token comment">// vnext 表示要建立链接的服务器配置</span>          <span class="token punctuation">&#123;</span>              <span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"123.45.67.89"</span><span class="token punctuation">,</span> <span class="token comment">//服务器地址</span>            <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">16823</span><span class="token punctuation">,</span> <span class="token comment">//服务器和bridges通信的端口</span>            <span class="token property">"users"</span><span class="token operator">:</span><span class="token punctuation">[</span>                <span class="token punctuation">&#123;</span>                  <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span><span class="token punctuation">,</span>                <span class="token property">"alterId"</span><span class="token operator">:</span><span class="token number">64</span>              <span class="token punctuation">&#125;</span>            <span class="token punctuation">]</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"routing"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>       <span class="token property">"rules"</span><span class="token operator">:</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>                  <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>        <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"bridge"</span>  <span class="token comment">// 对于标识主机为www.ytty.xyz 发送到7050端口</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"domain"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"full:www.ytty.xyz"</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"zcc-mobile-server"</span> <span class="token comment">//</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>        <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"bridge"</span> <span class="token comment">//对于发来的流量其他流量 不做任何代理</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"bridgeout"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>对于v2ray中有些概念如outbounds，inbounads可能需要看一下v2ray的文档，了解v2ray的工作原理才能理解的清楚。<br>上面的图画得有些简陋，详细一点流程画法应该如下。 </p><p><a href="https://imgtu.com/i/OBLwpq"><img src="https://s1.ax1x.com/2022/05/12/OBLwpq.png" alt="OBLwpq.png"></a></p><ol><li>启动服务器和后端开发机器上的v2ray,通过服务器上的16823端口建立链接。（开发机上可能不是16823）</li><li>前端访问123.45.67.89：17050端口，v服务器上2ray检测到。通过已建立的链接（16823）将这测请求发送到开发机上。</li><li>开发机收到请求，解析可得此次请求要发送到本机上的7050端口，于是发送。</li><li>7050返回，将信息路由到已链接的（16823）返回给服务器。</li><li>服务器返回给前端</li></ol><p><strong>要运行</strong></p><p>客户端执行 </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">./v2ray --config<span class="token operator">=</span>./client.json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>服务端运行</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">./v2ray --config<span class="token operator">=</span>./server.json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后发现访问服务器上的17050端口是访问的自己机器上启动的7050端口。</p><h2 id="3-增加用户和端口"><a href="#3-增加用户和端口" class="headerlink" title="3. 增加用户和端口"></a>3. 增加用户和端口</h2><blockquote><p>这样的配置只能满足一位后台开发的需求，如果团队内的其他后台开发也有这样的需求呢？如果一个开发需要穿透自己机器上多个端口呢？</p></blockquote><ul><li>其实修改配置文件就可以解决了，</li></ul><p>对于新增一个后台开发，配置文件修改的<strong>必要</strong>项如下</p><blockquote><ol><li>bridges 修改domain</li><li>outbounds 修改vnext中的地址和端口，user id.</li><li>routing中的相关配置项 domain,togs</li></ol></blockquote><p>例如：上面的client.json文件可以修改为如下</p><p>client-2.json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"> <span class="token punctuation">&#123;</span>    <span class="token property">"reverse"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>     <span class="token property">"bridges"</span><span class="token operator">:</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"bridge"</span><span class="token punctuation">,</span>         <span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"www.ytty.xyz1"</span> <span class="token comment">// 修改1</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"outbounds"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token string">"bridgeout"</span><span class="token punctuation">,</span>      <span class="token property">"protocol"</span><span class="token operator">:</span> <span class="token string">"freedom"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"zcc-mobile-server"</span><span class="token punctuation">,</span>       <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"vmess"</span><span class="token punctuation">,</span>      <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"vnext"</span><span class="token operator">:</span><span class="token punctuation">[</span>  <span class="token comment">// vnext 表示要建立链接的服务器配置</span>          <span class="token punctuation">&#123;</span>              <span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"123.45.67.89"</span><span class="token punctuation">,</span> <span class="token comment">//服务器地址</span>            <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">16824</span><span class="token punctuation">,</span> <span class="token comment">//修改2</span>            <span class="token property">"users"</span><span class="token operator">:</span><span class="token punctuation">[</span>                <span class="token punctuation">&#123;</span>                  <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"b831381d-6324-4d53-ad4f-8cda48b30812"</span><span class="token punctuation">,</span> <span class="token comment">//修改3</span>                <span class="token property">"alterId"</span><span class="token operator">:</span><span class="token number">64</span>              <span class="token punctuation">&#125;</span>            <span class="token punctuation">]</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"routing"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>       <span class="token property">"rules"</span><span class="token operator">:</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>                  <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>        <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"bridge"</span>  <span class="token comment">// </span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"domain"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"full:www.ytty.xyz1"</span> <span class="token comment">//修改4</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"zcc-mobile-server"</span>       <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>        <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"bridge"</span>         <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"bridgeout"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>当新增一个后台开发时，服务端文件也要修改。<br>增加如下项</p><blockquote><ol><li>新增portals</li><li>新增inbounds项目，用于外部流量端口，修改见下。</li><li>在新增一个inbounds，用于链接新增的开发人员机器 见下，tag==tunnel1</li><li>新增routing roules 见下</li></ol></blockquote><p>server.json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"> <span class="token punctuation">&#123;</span>      <span class="token property">"reverse"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>       <span class="token property">"portals"</span><span class="token operator">:</span><span class="token punctuation">[</span>          <span class="token punctuation">&#123;</span>            <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"portal"</span><span class="token punctuation">,</span>  <span class="token comment">//portal的标识。在路由中使用outboundTag将流量转发到这个portal。</span>          <span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"www.ytty.xyz"</span> <span class="token comment">//一个域名。当portal接收到流量时，如果流量的目标域名是此域名，则portal认为当前连接上bridge发来的通信连接。而其它流量则会被当成需要转发的流量。portal所做的工作就是把这两类连接进行识别并拼接。     </span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"portal1"</span><span class="token punctuation">,</span>            <span class="token property">"domain"</span><span class="token operator">:</span><span class="token string">"www.ytty.xyz1"</span>              <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"inbounds"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">&#123;</span>                 <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"zcc-mobile"</span><span class="token punctuation">,</span>  <span class="token comment">//随意 这两个端口17050 17052 对应着后台开发的7050,7052端口，而这两个端口是后台开发的api端口。</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">17052</span><span class="token punctuation">,</span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"dokodemo-door"</span><span class="token punctuation">,</span>          <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>              <span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token comment">// 后台开发机上的服务地址和端口</span>            <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">7052</span><span class="token punctuation">,</span>             <span class="token property">"network"</span><span class="token operator">:</span><span class="token string">"tcp"</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token comment">//开发增加端口</span>      <span class="token punctuation">&#123;</span>                 <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"zcc-admin"</span><span class="token punctuation">,</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">17050</span><span class="token punctuation">,</span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"dokodemo-door"</span><span class="token punctuation">,</span>           <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>              <span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span>            <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">7050</span><span class="token punctuation">,</span>             <span class="token property">"network"</span><span class="token operator">:</span><span class="token string">"tcp"</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>                 <span class="token property">"tag"</span><span class="token operator">:</span><span class="token string">"lx-mobile"</span><span class="token punctuation">,</span> <span class="token comment">//修改</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">27052</span><span class="token punctuation">,</span> <span class="token comment">//修改 </span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"dokodemo-door"</span><span class="token punctuation">,</span>          <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>              <span class="token property">"address"</span><span class="token operator">:</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token comment">// 后台开发机上的服务地址和端口</span>            <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">7052</span><span class="token punctuation">,</span>             <span class="token property">"network"</span><span class="token operator">:</span><span class="token string">"tcp"</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">//新增</span>      <span class="token punctuation">&#123;</span>          <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token string">"tunnel"</span><span class="token punctuation">,</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">16823</span><span class="token punctuation">,</span>  <span class="token comment">//用于接收 bridge 的连接</span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"vmess"</span><span class="token punctuation">,</span>        <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"clients"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token punctuation">&#123;</span>                <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span><span class="token punctuation">,</span> <span class="token comment">//id要和开发机上一致</span>              <span class="token property">"alterId"</span><span class="token operator">:</span><span class="token number">64</span>            <span class="token punctuation">&#125;</span>          <span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token punctuation">&#123;</span>          <span class="token property">"tag"</span><span class="token operator">:</span> <span class="token string">"tunnel1"</span><span class="token punctuation">,</span> <span class="token comment">//修改</span>        <span class="token property">"port"</span><span class="token operator">:</span><span class="token number">16824</span><span class="token punctuation">,</span>   <span class="token comment">//修改</span>        <span class="token property">"protocol"</span><span class="token operator">:</span><span class="token string">"vmess"</span><span class="token punctuation">,</span>        <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"clients"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token punctuation">&#123;</span>                <span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"b831381d-6324-4d53-ad4f-8cda48b30812"</span><span class="token punctuation">,</span> <span class="token comment">//id要和开发机上一致 //修改</span>              <span class="token property">"alterId"</span><span class="token operator">:</span><span class="token number">64</span>            <span class="token punctuation">&#125;</span>          <span class="token punctuation">]</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span> <span class="token comment">//新增</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token property">"routing"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"rules"</span><span class="token operator">:</span><span class="token punctuation">[</span>          <span class="token punctuation">&#123;</span>            <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>          <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token string">"zcc-mobile"</span><span class="token punctuation">,</span>  <span class="token comment">//表示从这两个端口进来的流量 会转发到连接的开发机上</span>            <span class="token string">"zcc-admin"</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"portal"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>          <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token string">"lx-mobile"</span>  <span class="token comment">//修改</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"portal1"</span> <span class="token comment">//修改</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token comment">//新增</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>          <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token string">"tunnel"</span>           <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"portal"</span>        <span class="token punctuation">&#125;</span> <span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"field"</span><span class="token punctuation">,</span>          <span class="token property">"inboundTag"</span><span class="token operator">:</span><span class="token punctuation">[</span>              <span class="token string">"tunnel1"</span> <span class="token comment">//修改</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"outboundTag"</span><span class="token operator">:</span><span class="token string">"portal1"</span> <span class="token comment">//修改</span>        <span class="token punctuation">&#125;</span> <span class="token comment">//新增</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对于上面的配置文件，当一个开发人员想要增加一个端口时，服务端增加一个inbounds，并配置路由即可。</p><p>当然服务器上要开启外部访问的端口17050,17052等。</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><blockquote><p>使用以上配置文件可以快速搭建内网穿透，而不必理解v2ray<br>v2ray的功能很强大，想要理解配置文件中的作用，和其他更强大的功能可以访问v2ray的官网查看学习。 </p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Project Reactor-02</title>
      <link href="/2022/02/13/002-project-reactor/"/>
      <url>/2022/02/13/002-project-reactor/</url>
      
        <content type="html"><![CDATA[<h1 id="002-Project-Reactor"><a href="#002-Project-Reactor" class="headerlink" title="002-Project Reactor"></a>002-Project Reactor</h1><blockquote><p>上一篇文章中，我们介绍了Reactive Streams规范，现在学习一个Reactive Streams规范的流行实现：Project Reactor的核心项目Reactor Core。</p></blockquote><h2 id="1-Project-Reactor-简介"><a href="#1-Project-Reactor-简介" class="headerlink" title="1. Project Reactor 简介"></a>1. Project Reactor 简介</h2><p> Project Reactor是一个运行在JVM上的反应式编程基础库，以“背压”的形式管理数据处理，提供了可组合的异步序列APIFlux和Mono。同时，它也实现了Reactive Streams 规范。</p><p> 众所周知，I/O阻塞浪费了系统性能，只有纯异步处理才能发挥系统的全部性能，不作丝毫浪费；而JDK的异步API比较难用，成为异步编程的瓶颈，这就是Reactor等其它反应式框架诞生的原因。</p><p>Reactor大大降低了异步编码难度(尽管相比同步编码，复杂度仍然是上升的)，变得简单的根本原因，是编码思想的转变。</p><p>JDK的异步API使用的是传统的命令式编程，命令式编程是以控制流为核心，通过顺序、分支和循环三种控制结构来完成不同的行为。而Reactor使用反应式编程，应用程序从以逻辑为中心转换为了以数据为中心，这也是命令式到声明式的转换。</p><h3 id="1-1-从命令式到反应式编程"><a href="#1-1-从命令式到反应式编程" class="headerlink" title="1.1 从命令式到反应式编程"></a>1.1 从命令式到反应式编程</h3><p>Reactor反应库旨在解决JVM上“经典”异步方法的缺点，同时还拥有如下特点：</p><ol><li>可组合性和可读性，完美规避了Callback Hell</li><li>以流的形式进行数据处理时，为流中每个节点提供了丰富的操作符</li><li>在Subscribe之前，不会有任何事情发生</li><li>支持背压，消费者可以向生产者发出信号表明排放率过高</li><li>支持两种反应序列：hot和cold</li></ol><p>1.2 子项目列表<br>Project Reactor试图提供反应式编程相关的各类基础库，它包含了如下子项目：</p><ol><li>Reactor Core    3.2.11.RELEASE    一个实现了Reactive Streams规范的基础库</li><li>Reactor Test    3.2.11.RELEASE    测试套件</li><li>Reactor Extra / Reactor Addons    3.2.3.RELEASE    扩展库，包含reactor-adapter和reactor-extra，增强了Reactor Core的功能</li><li>Reactor Netty    0.8.10.RELEASE    基于Netty，提供了非阻塞的、支持背压的TCP/HTTP/UDP客户端和服务端</li><li>Reactor Adapter    3.2.3.RELEASE    支持桥接到其它反应式库，如RxJava</li><li>Reactor Kafka    1.1.1.RELEASE    桥接到Apache Kafka</li><li>Reactor Kotlin Extensions    没有发布正式版    为Kotlin语言添加各种扩展和适配器</li><li>Reactor RabbitMQ    1.2.0.RELEASE    桥接到RabbitMQ</li><li>BlockHound    没有发布正式版    用于检测来自非阻塞线程的阻塞调用</li><li>Reactor Core .NET    0.6.1    为.NET孵化反应流基础库</li><li>Reactor Core JS    0.5.0    为Javascript孵化反应流基础库</li></ol><p>除了上述最后三个子项目，其它子项目都是构建于Reactor Core之上</p><h2 id="2-Flux-amp-Mono"><a href="#2-Flux-amp-Mono" class="headerlink" title="2 Flux &amp; Mono"></a>2 Flux &amp; Mono</h2><p>Flux<T>是一个标准的Reactive Streams规范中的Publisher<T>，它代表一个包含了[0…N]个元素的异步序列流。在Reactive Streams规范中，针对流中每个元素，订阅者将会监听这三个事件：onNext、onComplete、onError。</T></T></p><p>Mono<T>是一个特殊的Flux<T>，它代表一个仅包含1个元素的异步序列流。因为只有一个元素，所以订阅者只需要监听onComplete、onError。</T></T></p><h3 id="2-1-创建并订阅Flux或Mono"><a href="#2-1-创建并订阅Flux或Mono" class="headerlink" title="2.1 创建并订阅Flux或Mono"></a>2.1 创建并订阅Flux或Mono</h3><p>创建Flux或Mono的最简单方法，是使用那些工厂方法，如just、fromIterable、empty、range。当需要订阅它们时，可以调用如下几个重载的方法。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//仅订阅并触发流，不做其它处理</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> consumer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//处理流中的每个元素</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> consumer<span class="token punctuation">,</span>          <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Throwable</span><span class="token punctuation">></span></span> errorConsumer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//处理流中的元素、处理相应的异常</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> consumer<span class="token punctuation">,</span>          <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Throwable</span><span class="token punctuation">></span></span> errorConsumer<span class="token punctuation">,</span>          <span class="token class-name">Runnable</span> completeConsumer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//处理流中的元素、处理相应的异常；当流结束时，可以执行一些内容</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> consumer<span class="token punctuation">,</span>          <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Throwable</span><span class="token punctuation">></span></span> errorConsumer<span class="token punctuation">,</span>          <span class="token class-name">Runnable</span> completeConsumer<span class="token punctuation">,</span>          <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Subscription</span><span class="token punctuation">></span></span> subscriptionConsumer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后一个参数Subscription，代表处理一个元素的生命周期，也是Reactive Streams规范中定义的</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-编程的方式创建Flux"><a href="#2-2-编程的方式创建Flux" class="headerlink" title="2.2 编程的方式创建Flux"></a>2.2 编程的方式创建Flux</h3><p>generate、create、push、handle方法支持以编程的方式创建Flux，使创建方式更加灵活。</p><ul><li><p>generate方法创建的流是同步的，流内元素是有序的，依次被订阅者消费。</p></li><li><p>create方法以异步、多线程的方式创建流。</p></li><li><p>push方法以异步、单线程的方式创建流。</p></li><li><p>handle方法是一个示例方法，它类似于generate，将一个已经存在的流，转换成同步的流。</p></li></ul><p>以下是generate方法的一个简单示例：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> flux <span class="token operator">=</span> <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span>state<span class="token punctuation">,</span> sink<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span>      sink<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">"3 x "</span> <span class="token operator">+</span> state <span class="token operator">+</span> <span class="token string">" = "</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">*</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> sink<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** 流中的元素依次是：3 x 0 = 03 x 1 = 33 x 2 = 63 x 3 = 93 x 4 = 123 x 5 = 15**/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-使用示例"><a href="#3-使用示例" class="headerlink" title="3. 使用示例"></a>3. 使用示例</h2><p>使用静态工厂方法fromIterable创建一个Flux对象，而flatMap、filter等非静态方法即所谓操作符，多种操作符组合使用，可以对数据流的元素进行复杂处理。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> words <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"th"</span><span class="token punctuation">,</span> <span class="token string">"qu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> manyLetters <span class="token operator">=</span> <span class="token class-name">Flux</span>        <span class="token punctuation">.</span><span class="token function">fromIterable</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>word <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Step1="</span> <span class="token operator">+</span> word<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">fromArray</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Step2="</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>s <span class="token operator">-></span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Step3="</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>manyLetters<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>s <span class="token operator">-></span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Result="</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** 输出结果：Step1=thStep2=tStep3=tResult=tStep2=hStep3=hResult=hStep1=quStep2=qStep3=qResult=qStep2=uStep3=uResult=u**/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果仅看上面这种使用方式，看起来与Java 8的Stream差不多，并没有体现异步的特性，数据流在一开始就是确定的。假如不存在异步处理，使用Reactor就没有什么意义了。</p><p>与Java 8的Stream不同，Reactor支持以异步的方式创建Flux，看如下代码片段，MongoDB与Reactor结合使用：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">MongoCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">></span></span> collection<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Restaurant</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">RestaurantTransfer</span><span class="token operator">::</span><span class="token function">toDomainObject</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">::</span><span class="token function">isPresent</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">ReactiveRestaurantRepository</span> repository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReactiveRestaurantRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Restaurant</span><span class="token punctuation">></span></span> flux <span class="token operator">=</span> repository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    flux<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>public static <T> Flux<T> from(Publisher&lt;? extends T&gt; source)方法接收一个org.reactivestreams.Publisher参数，该对象是由MongoDB的Reactive客户端API创建的，MongoDB通过该对象，将DB中的数据，链接到Reactor的流中。</T></T></p><p>当调用subscribe方法后，一个发布-订阅的机制形成，只有当对象被从DB中取出并放入内存后，JVM才会占用线程资源，将消息发送给订阅者；从阻塞等待转变为了被动接收，因此节省了资源。</p><blockquote><p>由此可见，只有流中的数据全部是反应式的，Reactor才能发挥最大作用，一旦有节点被阻塞，就达不到节省资源的目的了。</p></blockquote><blockquote><p>正是由于MongoDB和Reactor Core都实现了Reactive Streams规范，它们才能相互沟通交互，Reactive Streams规范在反应式编程的推广过程中，起着至关重要的作用。<br>当反应式编程的生态越来越完整，将会有更多的人考虑使用这种编程方式。</p></blockquote><h2 id="4-与Spring的关系"><a href="#4-与Spring的关系" class="headerlink" title="4. 与Spring的关系"></a>4. 与Spring的关系</h2><p>Reactor是Spring整个生态系统的基础，特别是Spring Framework 5和 Spring Data “kay”。</p><p>这两个项目的Reactive版本是非常有意义的，我们可以基于此开发出完全Reactive的Web应用：支持对请求的全链路异步处理，一直到数据库，最后异步地返回结果。</p><p>Spring项目因此可以更有效地利用资源，避免为每个请求单独分配一个线程，产生I/O阻塞</p><h2 id="5-学习目标"><a href="#5-学习目标" class="headerlink" title="5.学习目标"></a>5.学习目标</h2><p>作为一名普通的程序员(专注业务开发)，我们接触最多的可能是WebFlux框架，以及Flux、Mono这些基础对象，在理解Project Reactor基本思想的基础上，再使用上层框架，将会更加得心应手。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Reactive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactive Streams-01</title>
      <link href="/2022/02/11/001-reactive-streams/"/>
      <url>/2022/02/11/001-reactive-streams/</url>
      
        <content type="html"><![CDATA[<h1 id="Reactive-Streams"><a href="#Reactive-Streams" class="headerlink" title="Reactive Streams"></a>Reactive Streams</h1><blockquote><p>最近在学习spring-cloud-gataway。spring-cloud-gataway 是基于Spring-Webflux，而Spring-Webflux又和Reactive Streams api紧密相关<br>这里主要了解Java中异步流处理的顶级概念：Reactive Streams。</p></blockquote><h2 id="1-起源"><a href="#1-起源" class="headerlink" title="1. 起源"></a>1. 起源</h2><p>Reactive Streams，翻译为反应式流，从名字上完全无法理解它的意义，像是两个硬凑在一起的词汇。</p><p>事实上，它并不是一个全新的事物，异步编程大家都有了解，Java里典型的多线程处理就是异步编程。而异步编程时，存在很多难题，比如典型的回调地狱(Callback Hell)，一层套一层的回调函数简直是个灾难，这里列出几个异步编程常见的问题：</p><ol><li>超时、异常处理困难</li><li>难以重构</li><li>多个异步任务协同处理</li></ol><p>为了解决异步编程过程中出现的种种难题，人们提出了各种各样方法来规避这些问题，这些方法称为反应式编程(Reactive Programming)，就像面向对象编程，函数式编程一样，反应式编程也是另一种编程范式。</p><p>反应式编程，本质上是对数据流或某种变化所作出的反应，但是这个变化什么时候发生是未知的，所以他是一种基于异步、回调的方式在处理问题。</p><blockquote><p>tips:<br>Reactive Programming = Streams + Operations<br>Streams代表被处理的数据节点，Operations代表那些异步处理</p></blockquote><p>当越来越多的开发人员使用这种编程思想时，自然而然需要一套统一的规范。由此，2013年底Netflix，Pivotal和Lightbend中的工程师们，启动了Reactive Streams项目，希望为异步流(包含背压)处理提供标准，它包括针对运行时环境（JVM和JavaScript）以及网络协议的工作。  </p><h2 id="2-概念"><a href="#2-概念" class="headerlink" title="2. 概念"></a>2. 概念</h2><p>对于Java程序员，Reactive Streams是一个API。Reactive Streams为我们提供了Java中的Reactive Programming的通用API。</p><p>Reactive Streams非常类似于JPA或JDBC。两者都是API规范，实际使用时需要使用API​​对应的具体实现。例如，从JDBC规范中，有DataSource接口，而Oracle JDBC实现了DataSource接口。Microsoft的SQL Server JDBC实现也实现了DataSource接口。</p><p>就像JPA或JDBC一样，Reactive Streams为我们提供了一个我们可以编写代码的API接口，而无需担心底层实现，在GitHub上可以查看API的源码。</p><p>Reactive Streams API的范围是找到一组最小的接口，方法和协议，这些接口，方法和协议将描述必要的操作和实体，从而实现具有非阻塞背压的异步数据流。</p><p>从代码结构上看，它主要包含两部分：reactive-streams和reactive-streams-tck。其中TCK意为技术兼容包（Technology Compatibility Kit ），为实现Reactive Streams接口提供帮助。</p><p>Reactive Streams API中仅仅包含了如下四个接口：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//发布者</span><span class="token keyword">public</span>  <span class="token keyword">interface</span>  <span class="token class-name">Publisher</span> <span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">T</span> <span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span>  subscribe（<span class="token class-name">Subscriber</span> <span class="token operator">&lt;</span>？ <span class="token keyword">super</span>  <span class="token class-name">T</span> <span class="token operator">></span>  s）<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//订阅者</span><span class="token keyword">public</span>  <span class="token keyword">interface</span>  <span class="token class-name">Subscriber</span> <span class="token generics"><span class="token punctuation">&lt;</span> <span class="token class-name">T</span> <span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span>  onSubscribe（<span class="token class-name">Subscription</span>  s）<span class="token punctuation">;</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span>  onNext（<span class="token class-name">T</span>  t）<span class="token punctuation">;</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span>  onError（<span class="token class-name">Throwable</span>  t）<span class="token punctuation">;</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span>  onComplete（）<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//表示Subscriber消费Publisher发布的一个消息的生命周期</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subscription</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//处理器，表示一个处理阶段，它既是订阅者也是发布者，并且遵守两者的契约</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Processor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">Subscriber</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">Publisher</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">R</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-目标"><a href="#3-目标" class="headerlink" title="3. 目标"></a>3. 目标</h2><p>Reactive Streams的主要目标有这两个：</p><ol><li>管理跨异步边界的流数据交换 - 即将元素传递到另一个线程或线程池；</li><li>确保接收方不会强制缓冲任意数量的数据，为了使线程之间的队列有界，引入了回压(Back Pressure)。</li></ol><p>传统异步编程的写法，不同任务分别在不同的线程中执行，协调这些线程执行的先后顺序、线程间的依赖顺序是一件非常麻烦的事情，而Reactive Streams就是为了解决该问题。</p><p>另外，Reactive Streams规范引入了回压(Back Pressure)，可以动态控制线程间消息交换的速率，避免生产者产生过多的消息，消费者消费不完等类似问题。</p><h2 id="4-一些思考"><a href="#4-一些思考" class="headerlink" title="4. 一些思考"></a>4. 一些思考</h2><p>Reactive Streams，是一套非阻塞背压的异步数据流的API。这个概念看起来有点拗口，这里拆开分析下：</p><h3 id="4-1-Reactive"><a href="#4-1-Reactive" class="headerlink" title="4.1 Reactive"></a>4.1 Reactive</h3><p>这是个形容词，翻译为反应的，这个词乍一看相当奇怪，这里尝试做一下解释。</p><p>事实上，在某些语境下，reactive也会被翻译为被动，而Reactive Streams是基于消息驱动的（也可以说是事件驱动的），当消息产生时，系统被动接受消息，并作出反馈，而非主动处理。因此，我们也可以这样理解：被动地接收消息后，作出相应的反应动作，这个行为称之为反应式。</p><h3 id="4-2-Streams"><a href="#4-2-Streams" class="headerlink" title="4.2 Streams"></a>4.2 Streams</h3><p>这是个名词，翻译为数据流，反应式编程的核心思想，体现在了这个单词上。</p><p>流的定义：随着时间顺序排列的一组序列。一切皆是流(Everything is a stream)。我们可以把一组数据抽象为流(可以想象流是一个数组)，把对流中节点的逻辑处理，抽象成对节点的一步一步的处理，围绕该节点做加工处理，最终获得结果。</p><p>这跟工厂车间的流水线非常相似，发布者将半成品放到传送带上，经过层层处理后，得到成品送到订阅者手中。</p><p>而异步特性，是体现在每一步的处理过程中的，每一步处理都是消息驱动的，不阻塞应用程序，被动获得结果后继续进行下一步。</p><blockquote><p>Tips</p><p>响应式编程，在处理流中节点时，各个步骤都使用异步的、消息驱动的方式处理任务，才会节省性能。</p></blockquote><blockquote><p>Tips</p><p>传统的命令式编程范式以控制流为核心，通过顺序、分支和循环三种控制结构来完成不同的行为。<br>在反应式编程中，应用程序从以逻辑为中心转换为了以数据为中心，这也是命令式到声明式的转换。</p></blockquote><h3 id="4-3-非阻塞、异步"><a href="#4-3-非阻塞、异步" class="headerlink" title="4.3 非阻塞、异步"></a>4.3 非阻塞、异步</h3><p>反义词是阻塞、同步，目前在Java中，大多数应用程序是同步的，即暴力创建线程，线程阻塞时，一直等待直到有结果返回。</p><p>异步最吸引人的地方在于资源的充分利用，不把资源浪费在等待的时间上，代价是增加了程序的复杂度，而Reactive Streams封装了这些复杂性，使其变得简单。</p><h3 id="4-4-背压-back-pressure"><a href="#4-4-背压-back-pressure" class="headerlink" title="4.4 背压(back-pressure)"></a>4.4 背压(back-pressure)</h3><p>背压是从流体动力学中借用的类比, 在维基百科的定义是：抵抗所需流体通过管道的阻力或力。在软件环境中，可以调整定义：通过软件抵抗所需数据流的阻力或力量。</p><p>背压是为了解决这个问题的： 上游组件了过量的消息，导致下游组件无法及时处理，从而导致程序崩溃。</p><p>对于正遭受压力的组件来说，无论是灾难性地失败，还是不受控地丢弃消息，都是不可接受的。既然它既不能应对压力，又不能直接做失败处理，那么它就应该向其上游组件传达其正在遭受压力的事实，并让它们降低负载。</p><p>这种背压（back-pressure）是一种重要的反馈机制，使得系统得以优雅地响应负载，而不是在负载下崩溃。相反，如果下游组件比较空闲，则可以向上游组件发出信号，请求获得更多的调用。</p><h2 id="5-与Java1-8、Java1-9的关系"><a href="#5-与Java1-8、Java1-9的关系" class="headerlink" title="5. 与Java1.8、Java1.9的关系"></a>5. 与Java1.8、Java1.9的关系</h2><p>Reactive Streams不要求必须使用Java8，Reactive Streams也不是Java API的一部分。</p><p>但是使用Java8中lambda表达式的存在，可以发挥Reactive Streams规范的强大特性，比如Reactive Streams的实现Project Reactor项目的当前版本，就要求最低使用Java1.8。</p><p>当使用Java1.9时， Reactive Streams已成为官方Java 9 API的一部分，Java9中Flow类下的内容与Reactive Streams完全一致。</p><h2 id="6-具体实现框架"><a href="#6-具体实现框架" class="headerlink" title="6. 具体实现框架"></a>6. 具体实现框架</h2><p>Reactive Streams的实现现在比较多了，David Karnok在Advanced Reactive Java这边文章中，将这些实现分解成几代，也可以侧面了解反应式编程的发展史。</p><ul><li>RxJava</li></ul><blockquote><p>RxJava是ReactiveX项目中的Java实现。ReactiveX项目实现了很多语言，比如JavaScript，.NET（C＃），Scala，Clojure，C ++，Ruby，Python，PHP，Swift等。</p></blockquote><blockquote><p>RxJava早于Reactive Streams规范。虽然RxJava 2.0+确实实现了Reactive Streams API规范，单使用的术语略有不同。</p></blockquote><ul><li>Reactor</li></ul><blockquote><p>Reactor是Pivotal提供的Java实现，它作为Spring Framework 5的重要组成部分，是WebFlux采用的默认反应式框架。</p></blockquote><ul><li>Akka Streams</li></ul><blockquote><p>Akka Streams完全实现了Reactive Streams规范，但Akka Streams API与Reactive Streams API完全分离。</p></blockquote><ul><li>Ratpack</li></ul><blockquote><p>Ratpack是一组用于构建现代高性能HTTP应用程序的Java库。Ratpack使用Java 8，Netty和Reactive原则。可以将RxJava或Reactor与Ratpack一起使用。</p></blockquote><ul><li>Vert.x</li></ul><blockquote><p>Vert.x是一个Eclipse Foundation项目，它是JVM的多语言事件驱动的应用程序框架。Vert.x中的反应支持与Ratpack类似。Vert.x允许我们使用RxJava或其Reactive Streams API的实现。</p></blockquote><h2 id="7-小结"><a href="#7-小结" class="headerlink" title="7. 小结"></a>7. 小结</h2><p>在Reactive Streams之前，各种反应库无法实现互操作性。早期版本的RxJava与Project Reactor的早期版本不兼容。</p><p>另外，反应式编程无法大规模普及，一个很重要的原因是并不是所有库都支持反应式编程，当一些类库只能同步调用时，就无法达到节约性能的作用了。</p><p>Reactive Streams的推出统一了反应式编程的规范，并且已经被Java9集成。由此，不同的库可以互操作了，互操作性是一个重要的多米诺骨牌。</p><p>例如，MongoDB实现了Reactive Streams驱动程序后，我们可以使用Reactor或RxJava来使用MongoDB中的数据。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Reactive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-security-05 核心配置解读</title>
      <link href="/2022/01/29/spring-securyty-05/"/>
      <url>/2022/01/29/spring-securyty-05/</url>
      
        <content type="html"><![CDATA[<h1 id="spring-security-05-核心配置解读"><a href="#spring-security-05-核心配置解读" class="headerlink" title="spring-security-05-核心配置解读"></a>spring-security-05-核心配置解读</h1><h2 id="1-如何配置"><a href="#1-如何配置" class="headerlink" title="1.如何配置"></a>1.如何配置</h2><p> 例子：<br> <pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">&#123;</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>      http          <span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"/home"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span>  <span class="token annotation punctuation">@Autowired</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureGlobal</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>      auth          <span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"USER"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><ul><li>当配置了上述的javaconfig之后，我们的应用便具备了如下的功能：<blockquote><ol><li>除了“/”,”/home”(首页),”/login”(登录),”/logout”(注销),之外，其他路径都需要认证。<br>指定“/login”该路径为登录页面，当未认证的用户尝试访问任何受保护的资源时，都会跳转到“/login”。</li><li>默认指定“/logout”为注销页面</li><li>配置一个内存中的用户认证器，使用admin/admin作为用户名和密码，具有USER角色<br>防止CSRF攻击</li><li>Session Fixation protection</li><li>Security Header(添加一系列和Header相关的控制)</li></ol></blockquote></li></ul><p>其他的高级配法还需要多多研究。</p><h2 id="2-注解探究"><a href="#2-注解探究" class="headerlink" title="2. 注解探究"></a>2. 注解探究</h2><p>@EnableWebSecurity</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token class-name">WebSecurityConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// &lt;2></span>      <span class="token class-name">SpringWebMvcImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">// &lt;1></span><span class="token annotation punctuation">@EnableGlobalAuthentication</span> <span class="token comment">// &lt;3></span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableWebSecurity</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">boolean</span> <span class="token function">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>SpringWebMvcImportSelector的作用是判断当前的环境是否包含springmvc，因为spring security可以在非spring环境下使用，为了避免DispatcherServlet的重复配置，所以使用了这个注解来区分。</li><li>WebSecurityConfiguration顾名思义，是用来配置web安全的，下面的小节会详细介绍。</li><li>@EnableGlobalAuthentication注解的源码如下：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableGlobalAuthentication</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>注意点同样在@Import之中，它实际上激活了AuthenticationConfiguration这样的一个配置类，用来配置认证相关的核心类。</p><p>也就是说：@EnableWebSecurity完成的工作便是加载了WebSecurityConfiguration，AuthenticationConfiguration这两个核心配置类，也就此将spring security的职责划分为了配置安全信息，配置认证信息两部分。</p><h3 id="2-1-WebSecurityConfiguration"><a href="#2-1-WebSecurityConfiguration" class="headerlink" title="2.1 WebSecurityConfiguration"></a>2.1 WebSecurityConfiguration</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfiguration</span> <span class="token punctuation">&#123;</span><span class="token comment">//DEFAULT_FILTER_NAME = "springSecurityFilterChain"</span><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span><span class="token punctuation">.</span>DEFAULT_FILTER_NAME<span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Filter</span> <span class="token function">springSecurityFilterChain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>WebSecurityConfiguration中完成了声明springSecurityFilterChain的作用，并且最终交给DelegatingFilterProxy这个代理类，负责拦截请求（注意DelegatingFilterProxy这个类不是spring security包中的，而是存在于web包中，spring使用了代理模式来实现安全过滤的解耦）</p><p>声明了安全相关的过滤器</p><h3 id="2-2-AuthenticationConfiguration"><a href="#2-2-AuthenticationConfiguration" class="headerlink" title="2.2 AuthenticationConfiguration"></a>2.2 AuthenticationConfiguration</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">ObjectPostProcessorConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthenticationConfiguration</span> <span class="token punctuation">&#123;</span>  <span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">AuthenticationManagerBuilder</span> <span class="token function">authenticationManagerBuilder</span><span class="token punctuation">(</span><span class="token class-name">ObjectPostProcessor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> objectPostProcessor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticationManagerBuilder</span><span class="token punctuation">(</span>objectPostProcessor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  <span class="token keyword">public</span> <span class="token class-name">AuthenticationManager</span> <span class="token function">getAuthenticationManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>AuthenticationConfiguration的主要任务，便是负责生成全局的身份认证管理者AuthenticationManager。</p><p>我们之前探究的AuthenticationManager认证管理器就是在这初始化</p><h3 id="2-3-WebSecurityConfigurerAdapter"><a href="#2-3-WebSecurityConfigurerAdapter" class="headerlink" title="2.3 WebSecurityConfigurerAdapter"></a>2.3 WebSecurityConfigurerAdapter</h3><blockquote><p>适配器模式在spring中被广泛的使用，在配置中使用Adapter的好处便是，我们可以选择性的配置想要修改的那一部分配置，而不用覆盖其他不相关的配置。WebSecurityConfigurerAdapter中我们可以选择自己想要修改的内容，来进行重写，而其提供了三个configure重载方法<br><a href="https://imgtu.com/i/7Ns6j1"><img src="https://s4.ax1x.com/2022/01/16/7Ns6j1.png" alt="7Ns6j1.png"></a><br>由参数就可以知道，分别是对AuthenticationManagerBuilder，WebSecurity，HttpSecurity进行个性化的配置。</p></blockquote><ol><li>HttpSecurity常用配置</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomWebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        http            <span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/resources/**"</span><span class="token punctuation">,</span> <span class="token string">"/signup"</span><span class="token punctuation">,</span> <span class="token string">"/about"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"ADMIN"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/db/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"hasRole('ADMIN') and hasRole('DBA')"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">usernameParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">passwordParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">failureForwardUrl</span><span class="token punctuation">(</span><span class="token string">"/login?error"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">logoutUrl</span><span class="token punctuation">(</span><span class="token string">"/logout"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">logoutSuccessUrl</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>他们配置的含义也非常容易通过变量本身来推测，</p><ul><li>authorizeRequests()配置路径拦截，表明路径访问所对应的权限，角色，认证信息。</li><li>formLogin()对应表单认证相关的配置</li><li>logout()对应了注销相关的配置</li><li>httpBasic()可以配置basic登录</li></ul><ol start="2"><li>WebSecurityBuilder</li></ol><p>这一部分比较少配置</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">WebSecurity</span> web<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        web            <span class="token punctuation">.</span><span class="token function">ignoring</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/resources/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>AuthenticationManagerBuilder</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * 全局用户信息 比如增加验证器。 */</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">PasswordAuthenticationProvider</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PasswordAuthenticationProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>provider<span class="token punctuation">.</span><span class="token function">setPasswordEncoder</span><span class="token punctuation">(</span>passwordEncoder<span class="token punctuation">)</span><span class="token punctuation">;</span>provider<span class="token punctuation">.</span><span class="token function">setUserDetailsServiceFactory</span><span class="token punctuation">(</span>userDetailsServiceFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>auth<span class="token punctuation">.</span><span class="token function">authenticationProvider</span><span class="token punctuation">(</span>provider<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> spring-security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-security-04 过滤器链的加载流程</title>
      <link href="/2022/01/29/spring-securyty-04/"/>
      <url>/2022/01/29/spring-securyty-04/</url>
      
        <content type="html"><![CDATA[<h1 id="spring-security-04-过滤器链的加载流程"><a href="#spring-security-04-过滤器链的加载流程" class="headerlink" title="spring-security-04 过滤器链的加载流程"></a>spring-security-04 过滤器链的加载流程</h1><p>通过之前的学习，不免会有以下疑问。</p><blockquote><ol><li>这个 SpringSecurityFilterChain 是怎么注册到 web 环境中的？</li><li>SpringSecurityFilterChain 的实现类到底是什么，我知道它是一个 Filter，但是在很多配置类中看到了 BeanName=SpringSecurityFilterChain 相关的类，比如 DelegatingFilterProxy，FilterChainProxy，SecurityFilterChain，他们的的名称实在太相似了，到底哪个才是真正的实现，SpringSecurity 又为什么要这么设计？“</li><li>如果我们使用SpringSecurity，那我们貌似一直在配置 WebSecurity ，但没有对 SpringSecurityFilterChain 进行什么配置，WebSecurity 相关配置是怎么和 SpringSecurityFilterChain 结合在一起的？</li></ol></blockquote><p>那么围绕着这些问题进行一下探究。<br>SpringSecurityFilterChain是怎么注册的，这个问题比较复杂，SpringSecurity 仅仅在 web 环境下（SpringSecurity 还支持非 web 环境）就有非常多的支持形式。<br>比如servlet+xml+SpringSecurity,springmvc+SpringSecurity，springboot+SpringSecurity。</p><p>SpringSecurityFilterChain 抽象概念里最重要的三个类：DelegatingFilterProxy，FilterChainProxy 和 SecurityFilterChain，对这三个类的源码分析和设计将会贯彻本文。不同环境下 DelegatingFilterProxy 的注册方式区别较大，但 FilterChainProxy 和 SecurityFilterChain 的差异不大，所以重点就是分析 DelegatingFilterProxy 的注册方式。它们三者的分析会放到下一节中。<br>##</p><h3 id="1-xml方式配置"><a href="#1-xml方式配置" class="headerlink" title="1.xml方式配置"></a>1.xml方式配置</h3><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>springSecurityFilterChain<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>org.springframework.web.filter.DelegatingFilterProxy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>springSecurityFilterChain<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-java方式配置"><a href="#2-java方式配置" class="headerlink" title="2. java方式配置"></a>2. java方式配置</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>      <span class="token class-name">SessionCreationPolicy</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token class-name">SecurityAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityFilterAutoConfiguration</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_FILTER_NAME <span class="token operator">=</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span><span class="token punctuation">.</span>DEFAULT_FILTER_NAME<span class="token punctuation">;</span><span class="token comment">//springSecurityFilterChain</span>    <span class="token comment">// &lt;1></span>   <span class="token annotation punctuation">@Bean</span>   <span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> DEFAULT_FILTER_NAME<span class="token punctuation">)</span>   <span class="token keyword">public</span> <span class="token class-name">DelegatingFilterProxyRegistrationBean</span> <span class="token function">securityFilterChainRegistration</span><span class="token punctuation">(</span>         <span class="token class-name">SecurityProperties</span> securityProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">DelegatingFilterProxyRegistrationBean</span> registration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DelegatingFilterProxyRegistrationBean</span><span class="token punctuation">(</span>            DEFAULT_FILTER_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>      registration<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span>securityProperties<span class="token punctuation">.</span><span class="token function">getFilterOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      registration<span class="token punctuation">.</span><span class="token function">setDispatcherTypes</span><span class="token punctuation">(</span><span class="token function">getDispatcherTypes</span><span class="token punctuation">(</span>securityProperties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> registration<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span> <span class="token comment">//在此处配置这个bean</span>   <span class="token annotation punctuation">@Bean</span>   <span class="token annotation punctuation">@ConditionalOnMissingBean</span>   <span class="token keyword">public</span> <span class="token class-name">SecurityProperties</span> <span class="token function">securityProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SecurityProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-servlet3-0-环境下SpringSecurity的java-config方式（不常用哦）"><a href="#3-servlet3-0-环境下SpringSecurity的java-config方式（不常用哦）" class="headerlink" title="3. servlet3.0+环境下SpringSecurity的java config方式（不常用哦）"></a>3. servlet3.0+环境下SpringSecurity的java config方式（不常用哦）</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityWebApplicationInitializer</span><span class="token keyword">extends</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>主要自定义一个 SecurityWebApplicationInitializer 并且让其继承自 AbstractSecurityWebApplicationInitializer 即可。如此简单的一个继承背后又经历了 Spring 怎样的封装呢？自然要去 AbstractSecurityWebApplicationInitializer 中去一探究竟。经过删减后的源码如下</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractSecurityWebApplicationInitializer</span>      <span class="token keyword">implements</span> <span class="token class-name">WebApplicationInitializer</span> <span class="token punctuation">&#123;</span><span class="token comment">//&lt;1></span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_FILTER_NAME <span class="token operator">=</span> <span class="token string">"springSecurityFilterChain"</span><span class="token punctuation">;</span>   <span class="token comment">// &lt;1> 父类WebApplicationInitializer的加载入口</span>   <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">onStartup</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>      <span class="token function">beforeSpringSecurityFilterChain</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>configurationClasses <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token class-name">AnnotationConfigWebApplicationContext</span> rootAppContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         rootAppContext<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>configurationClasses<span class="token punctuation">)</span><span class="token punctuation">;</span>         servletContext<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ContextLoaderListener</span><span class="token punctuation">(</span>rootAppContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">enableHttpSessionEventPublisher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         servletContext<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>               <span class="token string">"org.springframework.security.web.session.HttpSessionEventPublisher"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      servletContext<span class="token punctuation">.</span><span class="token function">setSessionTrackingModes</span><span class="token punctuation">(</span><span class="token function">getSessionTrackingModes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">insertSpringSecurityFilterChain</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&lt;2></span>      <span class="token function">afterSpringSecurityFilterChain</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>    <span class="token comment">// &lt;2> 在这儿初始化了关键的DelegatingFilterProxy</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">insertSpringSecurityFilterChain</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">String</span> filterName <span class="token operator">=</span> DEFAULT_FILTER_NAME<span class="token punctuation">;</span>        <span class="token comment">// &lt;2> 该方法中最关键的一个步骤，DelegatingFilterProxy在此被创建</span><span class="token class-name">DelegatingFilterProxy</span> springSecurityFilterChain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DelegatingFilterProxy</span><span class="token punctuation">(</span>filterName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> contextAttribute <span class="token operator">=</span> <span class="token function">getWebApplicationContextAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>contextAttribute <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>springSecurityFilterChain<span class="token punctuation">.</span><span class="token function">setContextAttribute</span><span class="token punctuation">(</span>contextAttribute<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">registerFilter</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> filterName<span class="token punctuation">,</span> springSecurityFilterChain<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token comment">// &lt;3> 使用servlet3.0的新特性，动态注册springSecurityFilterChain(实际上注册的是springSecurityFilterChain代理类)</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">registerFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">,</span><span class="token keyword">boolean</span> insertBeforeOtherFilters<span class="token punctuation">,</span> <span class="token class-name">String</span> filterName<span class="token punctuation">,</span> <span class="token class-name">Filter</span> filter<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Dynamic</span> registration <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span>filterName<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>registration<span class="token punctuation">.</span><span class="token function">setAsyncSupported</span><span class="token punctuation">(</span><span class="token function">isAsyncSecuritySupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">EnumSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DispatcherType</span><span class="token punctuation">></span></span> dispatcherTypes <span class="token operator">=</span> <span class="token function">getSecurityDispatcherTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>registration<span class="token punctuation">.</span><span class="token function">addMappingForUrlPatterns</span><span class="token punctuation">(</span>dispatcherTypes<span class="token punctuation">,</span> <span class="token operator">!</span>insertBeforeOtherFilters<span class="token punctuation">,</span><span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>在 servlet3.0 环境下，web 容器启动时会自行去寻找类路径下所有实现了 WebApplicationInitializer 接口的 Initializer 实例，并调用他们的 onStartup 方法。</li><li>所以，我们只需要继承 AbstractSecurityWebApplicationInitializer ，便可以自动触发 web 容器的加载，进而配置和 SpringSecurityFilterChain 第一个密切相关的类，第&lt;2&gt;步中的 DelegatingFilterProxy。</li><li>&lt;2&gt; DelegatingFilterProxy 在此被实例化出来。在第&lt;3&gt;步中，它作为一个 Filter 正式注册到了 web 容器中。</li></ol></blockquote><h2 id="2-有关springSecurityFilterChain三个核心类的源码分析"><a href="#2-有关springSecurityFilterChain三个核心类的源码分析" class="headerlink" title="2. 有关springSecurityFilterChain三个核心类的源码分析"></a>2. 有关springSecurityFilterChain三个核心类的源码分析</h2><p>理解 SpringSecurityFilterChain 的工作流程必须搞懂三个类：</p><ol><li>org.springframework.web.filter.DelegatingFilterProxy</li><li>org.springframework.security.web.FilterChainProxy </li><li>org.springframework.security.web.SecurityFilterChain</li></ol><h3 id="2-1-DelegatingFilterProxy"><a href="#2-1-DelegatingFilterProxy" class="headerlink" title="2.1 DelegatingFilterProxy"></a>2.1 DelegatingFilterProxy</h3><p>上面一节主要就是介绍 DelegatingFilterProxy 在不同环境下的注册方式，可以很明显的发现，DelegatingFilterProxy 是 SpringSecurity 的“门面”，注意它的包结构：org.springframework.web.filter，它本身是 Spring Web 包中的类，并不是 SpringSecurity 中的类。<br>因为 Spring 考虑到了多种使用场景，自然希望将侵入性降到最低，所以使用了这个委托代理类来代理真正的 SpringSecurityFilterChain。DelegatingFilterProxy 实现了 javax.servlet.Filter 接口，使得它可以作为一个 java web 的标准过滤器，其职责也很简单，<br><strong>只负责调用真正的 SpringSecurityFilterChain。</strong>  </p><p>DelegatingFilterProxy的重要代码。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DelegatingFilterProxy</span> <span class="token keyword">extends</span> <span class="token class-name">GenericFilterBean</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">private</span> <span class="token class-name">WebApplicationContext</span> webApplicationContext<span class="token punctuation">;</span>   <span class="token comment">// springSecurityFilterChain</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> targetBeanName<span class="token punctuation">;</span>   <span class="token comment">// &lt;1> 关键点</span>   <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token class-name">Filter</span> delegate<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> delegateMonitor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token class-name">DelegatingFilterProxy</span><span class="token punctuation">(</span><span class="token class-name">String</span> targetBeanName<span class="token punctuation">,</span> <span class="token class-name">WebApplicationContext</span> wac<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>targetBeanName<span class="token punctuation">,</span> <span class="token string">"Target Filter bean name must not be null or empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTargetBeanName</span><span class="token punctuation">(</span>targetBeanName<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationContext <span class="token operator">=</span> wac<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>wac <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setEnvironment</span><span class="token punctuation">(</span>wac<span class="token punctuation">.</span><span class="token function">getEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span>   <span class="token annotation punctuation">@Override</span>   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initFilterBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegateMonitor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>targetBeanName <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token keyword">this</span><span class="token punctuation">.</span>targetBeanName <span class="token operator">=</span> <span class="token function">getFilterName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// Fetch Spring root application context and initialize the delegate early,</span>            <span class="token comment">// if possible. If the root application context will be started after this</span>            <span class="token comment">// filter proxy, we'll have to resort to lazy initialization.</span>            <span class="token class-name">WebApplicationContext</span> wac <span class="token operator">=</span> <span class="token function">findWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>wac <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token function">initDelegate</span><span class="token punctuation">(</span>wac<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>         <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span>   <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span>         <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// 过滤器代理支持懒加载</span>      <span class="token class-name">Filter</span> delegateToUse <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>delegateToUse <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>delegateMonitor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            delegateToUse <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delegate<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>delegateToUse <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token class-name">WebApplicationContext</span> wac <span class="token operator">=</span> <span class="token function">findWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               delegateToUse <span class="token operator">=</span> <span class="token function">initDelegate</span><span class="token punctuation">(</span>wac<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>delegate <span class="token operator">=</span> delegateToUse<span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token comment">// 让代理过滤器执行实际的过滤行为</span>      <span class="token function">invokeDelegate</span><span class="token punctuation">(</span>delegateToUse<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> filterChain<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">// 初始化过滤器代理</span>   <span class="token comment">// &lt;2></span>   <span class="token keyword">protected</span> <span class="token class-name">Filter</span> <span class="token function">initDelegate</span><span class="token punctuation">(</span><span class="token class-name">WebApplicationContext</span> wac<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">Filter</span> delegate <span class="token operator">=</span> wac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token function">getTargetBeanName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Filter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTargetFilterLifecycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         delegate<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token function">getFilterConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> delegate<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">// 调用代理过滤器</span>   <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">invokeDelegate</span><span class="token punctuation">(</span>         <span class="token class-name">Filter</span> delegate<span class="token punctuation">,</span> <span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span>         <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>      delegate<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> filterChain<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>可以发现整个 DelegatingFilterProxy 的逻辑就是为了调用 private volatile Filter delegate;那么问题来了，这个 delegate 的真正实现是什么呢？</li><li>可以看到，DelegatingFilterProxy 尝试去容器中获取名为 targetBeanName 的类，而 targetBeanName 的默认值便是 Filter 的名称，也就是 springSecurityFilterChain！也就是说，DelegatingFilterProxy 只是名称和 <strong>targetBeanName 叫 springSecurityFilterChain，</strong>真正容器中的 Bean(name=”springSecurityFilterChain”) 其实另有其人（这里springboot稍微有点区别，不过不影响理解，我们不纠结这个细节了）。通过 debug，我们发现了真正的 springSecurityFilterChain — FilterChainProxy。</li></ol><h3 id="2-2-FilterChainProxy和SecurityFilterChain"><a href="#2-2-FilterChainProxy和SecurityFilterChain" class="headerlink" title="2.2 FilterChainProxy和SecurityFilterChain"></a>2.2 FilterChainProxy和SecurityFilterChain</h3><p><strong>org.springframework.security.web.FilterChainProxy</strong>已经是 SpringSecurity 提供的类了，原来它才是真正的 springSecurityFilterChain，我们来看看它的源码（有删减，不影响理解）。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterChainProxy</span> <span class="token keyword">extends</span> <span class="token class-name">GenericFilterBean</span> <span class="token punctuation">&#123;</span>   <span class="token comment">// &lt;1> 包含了多个SecurityFilterChain</span>   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityFilterChain</span><span class="token punctuation">></span></span> filterChains<span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token class-name">FilterChainProxy</span><span class="token punctuation">(</span><span class="token class-name">SecurityFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>chain<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token class-name">FilterChainProxy</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityFilterChain</span><span class="token punctuation">></span></span> filterChains<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>filterChains <span class="token operator">=</span> filterChains<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token annotation punctuation">@Override</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      filterChainValidator<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span>         <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>         <span class="token function">doFilterInternal</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> chain<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> response<span class="token punctuation">,</span>         <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">FirewalledRequest</span> fwRequest <span class="token operator">=</span> firewall            <span class="token punctuation">.</span><span class="token function">getFirewalledRequest</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">HttpServletResponse</span> fwResponse <span class="token operator">=</span> firewall            <span class="token punctuation">.</span><span class="token function">getFirewalledResponse</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;1></span>      <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token function">getFilters</span><span class="token punctuation">(</span>fwRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>filters <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> filters<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         fwRequest<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//如果没有 则走传进来的过滤器链</span>         chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>fwRequest<span class="token punctuation">,</span> fwResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token class-name">VirtualFilterChain</span> vfc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VirtualFilterChain</span><span class="token punctuation">(</span>fwRequest<span class="token punctuation">,</span> chain<span class="token punctuation">,</span> filters<span class="token punctuation">)</span><span class="token punctuation">;</span>      vfc<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>fwRequest<span class="token punctuation">,</span> fwResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">/**    * &lt;1> 可能会有多个过滤器链，返回第一个和请求URL匹配的过滤器链    */</span>   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> <span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SecurityFilterChain</span> chain <span class="token operator">:</span> filterChains<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span>chain<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>看 FilterChainProxy 的名字就可以发现，它依旧不是真正实施过滤的类，它内部维护了一个 SecurityFilterChain，这个过滤器链才是请求真正对应的过滤器链，并且同一个 Spring 环境下，可能同时存在多个安全过滤器链。</li><li>如 private List filterChains 所示，需要经过 chain.matches(request) 判断到底哪个过滤器链匹配成功，每个 request 最多只会经过一个 SecurityFilterChain。</li><li>为何要这么设计？因为 Web 环境下可能有多种安全保护策略，每种策略都需要有自己的一条链路，比如 Oauth2 服务，在极端条件下，可能同一个服务本身既是资源服务器，又是认证服务器，还需要做 Web 安全！</li></ul><p>需要强调的是：实际每次请求，最多只有一个安全过滤器链被返回。如何匹配还需要研究一下。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSecurityFilterChain</span> <span class="token keyword">implements</span> <span class="token class-name">SecurityFilterChain</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RequestMatcher</span> requestMatcher<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> filters<span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span> <span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> filters<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">matches</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> requestMatcher<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其中的 List filters 就是我们之前分析的诸多核心过滤器，包含了 UsernamePasswordAuthenticationFilter，SecurityContextPersistenceFilter，FilterSecurityInterceptor 等之前就介绍过的 Filter。</p><h3 id="3-SecurityFilterChain的注册过程"><a href="#3-SecurityFilterChain的注册过程" class="headerlink" title="3. SecurityFilterChain的注册过程"></a>3. SecurityFilterChain的注册过程</h3><blockquote><ol><li>DelegatingFilterProxy 从 Spring 容器中寻找了一个 targetBeanName=springSecurityFilterChain 的 Bean 。我们通过 debug 直接定位到了其实现是 SecurityFilterChain，但它又是什么时候被放进去的呢？</li><li>这就得说到老朋友 WebSecurity 了，还记得一般我们都会选择使用 @EnableWebSecurity 和 WebSecurityConfigurerAdapter 来进行 web 安全配置吗，来到 WebSecurity 的源码：</li></ol></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurity</span> <span class="token keyword">extends</span>      <span class="token class-name">AbstractConfiguredSecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">,</span> <span class="token class-name">WebSecurity</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span>      <span class="token class-name">SecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Filter</span><span class="token punctuation">></span></span><span class="token punctuation">,</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token class-name">Filter</span> <span class="token function">performBuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> chainSize <span class="token operator">=</span> ignoredRequests<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> securityFilterChainBuilders<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityFilterChain</span><span class="token punctuation">></span></span> securityFilterChains <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityFilterChain</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>chainSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">RequestMatcher</span> ignoredRequest <span class="token operator">:</span> ignoredRequests<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>securityFilterChains<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultSecurityFilterChain</span><span class="token punctuation">(</span>ignoredRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SecurityBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">SecurityFilterChain</span><span class="token punctuation">></span></span> securityFilterChainBuilder <span class="token operator">:</span> securityFilterChainBuilders<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>securityFilterChains<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>securityFilterChainBuilder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token comment">// &lt;1> FilterChainProxy 由 WebSecurity 构建</span><span class="token class-name">FilterChainProxy</span> filterChainProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterChainProxy</span><span class="token punctuation">(</span>securityFilterChains<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>httpFirewall <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>filterChainProxy<span class="token punctuation">.</span><span class="token function">setFirewall</span><span class="token punctuation">(</span>httpFirewall<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>filterChainProxy<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Filter</span> result <span class="token operator">=</span> filterChainProxy<span class="token punctuation">;</span>postBuildAction<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> result<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>WebSecurity 的 performBuild 方法，我们之前配置了一堆参数的 WebSecurity 最终帮助我们构建了 FilterChainProxy。<br>并且，最终在 org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration中被注册为默认名称为 SpringSecurityFilterChain。</p></blockquote><p>到此可以做一个最终简单的总结 </p><blockquote><p>一个名称 SpringSecurityFilterChain，借助于 Spring 的 IOC 容器，完成了 DelegatingFilterProxy 到 FilterChainProxy 的连接，并借助于 FilterChainProxy 内部维护的 List 中的某一个 SecurityFilterChain 来完成最终的过滤。</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> spring-security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-securyty-03 过滤器和核心过滤器</title>
      <link href="/2022/01/29/spring-securyty-03/"/>
      <url>/2022/01/29/spring-securyty-03/</url>
      
        <content type="html"><![CDATA[<h1 id="spring-securyty-03-过滤器和核心过滤器"><a href="#spring-securyty-03-过滤器和核心过滤器" class="headerlink" title="spring-securyty-03 过滤器和核心过滤器"></a>spring-securyty-03 过滤器和核心过滤器</h1><blockquote><p>前面的部分，我们关注了Spring Security是如何完成认证工作的，但是另外一部分核心的内容：过滤器，一直没有提到，我们已经知道Spring Security使用了springSecurityFilterChain作为了安全过滤的入口，这一节主要分析一下这个过滤器链都包含了哪些关键的过滤器，并且各自的使命是什么。</p></blockquote><h2 id="1-核心过滤器概述"><a href="#1-核心过滤器概述" class="headerlink" title="1. 核心过滤器概述"></a>1. 核心过滤器概述</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">o<span class="token punctuation">.</span>s<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span>DefaultSecurityFilterChain</span> <span class="token operator">-</span> <span class="token class-name">Creating</span> filter chain<span class="token operator">:</span> any request<span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token number">1</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span>async<span class="token punctuation">.</span></span>WebAsyncManagerIntegrationFilter</span><span class="token annotation punctuation">@22781286</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span>SecurityContextPersistenceFilter</span><span class="token annotation punctuation">@5aa026e9</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>header<span class="token punctuation">.</span></span>HeaderWriterFilter</span><span class="token annotation punctuation">@42365c82</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>logout<span class="token punctuation">.</span></span>LogoutFilter</span><span class="token annotation punctuation">@7e474bd</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>xsyw<span class="token punctuation">.</span>oauth<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span>LoginProcessSetTenantFilter</span><span class="token annotation punctuation">@11564455</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>xsyw<span class="token punctuation">.</span>oauth<span class="token punctuation">.</span>tenant<span class="token punctuation">.</span></span>TenantUsernamePasswordAuthenticationFilter</span><span class="token annotation punctuation">@3bc6c10f</span><span class="token punctuation">,</span> <span class="token number">7</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span></span>UsernamePasswordAuthenticationFilter</span><span class="token annotation punctuation">@1ae8556c</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>savedrequest<span class="token punctuation">.</span></span>RequestCacheAwareFilter</span><span class="token annotation punctuation">@499f9003</span><span class="token punctuation">,</span> <span class="token number">9</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servletapi<span class="token punctuation">.</span></span>SecurityContextHolderAwareRequestFilter</span><span class="token annotation punctuation">@39bd07fe</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span></span>AnonymousAuthenticationFilter</span><span class="token annotation punctuation">@173c0722</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span>SessionManagementFilter</span><span class="token annotation punctuation">@46c47690</span><span class="token punctuation">,</span> <span class="token number">12</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>access<span class="token punctuation">.</span></span>ExceptionTranslationFilter</span><span class="token annotation punctuation">@1c61f9bf</span><span class="token punctuation">,</span> <span class="token number">13</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>access<span class="token punctuation">.</span>intercept<span class="token punctuation">.</span></span>FilterSecurityInterceptor</span><span class="token annotation punctuation">@5f7dbdfa</span><span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>从第一大节里已经从控制台发现了过滤器链，除去项目中添加的两个过滤器5,6，默认的有十一个过滤器，主要是摸清这十一个中重点过滤器的作用。</p><ol><li><strong>SecurityContextPersistenceFilter</strong> 两个主要职责：请求来临时，创建SecurityContext安全上下文信息，请求结束时清空SecurityContextHolder。</li><li>HeaderWriterFilter (文档中并未介绍，非核心过滤器) 用来给http响应添加一些Header,比如X-Frame-Options, X-XSS-Protection*，X-Content-Type-Options.</li><li>CsrfFilter 在spring4这个版本中被默认开启的一个过滤器，用于防止csrf攻击，了解前后端分离的人一定不会对这个攻击方式感到陌生，前后端使用json交互需要注意的一个问题。</li><li>LogoutFilter 顾名思义，处理注销的过滤器</li><li><strong>UsernamePasswordAuthenticationFilter</strong> 这个会重点分析，表单提交了username和password，被封装成token进行一系列的认证，便是主要通过这个过滤器完成的，在表单认证的方法中，这是最最关键的过滤器。</li><li>RequestCacheAwareFilter (文档中并未介绍，非核心过滤器) 内部维护了一个RequestCache，用于缓存request请求</li><li>SecurityContextHolderAwareRequestFilter 此过滤器对ServletRequest进行了一次包装，使得request具有更加丰富的API</li><li><strong>AnonymousAuthenticationFilter</strong> 匿名身份过滤器，这个过滤器个人认为很重要，需要将它与UsernamePasswordAuthenticationFilter 放在一起比较理解，spring security为了兼容未登录的访问，也走了一套认证流程，只不过是一个匿名的身份。</li><li>SessionManagementFilter 和session相关的过滤器，内部维护了一个SessionAuthenticationStrategy，两者组合使用，常用来防止session-fixation protection attack，以及限制同一用户开启多个会话的数量</li><li><strong>ExceptionTranslationFilter</strong> 直译成异常翻译过滤器，还是比较形象的，这个过滤器本身不处理异常，而是将认证过程中出现的异常交给内部维护的一些类去处理，具体是那些类下面详细介绍</li><li><strong>FilterSecurityInterceptor</strong> 这个过滤器决定了访问特定路径应该具备的权限，访问的用户的角色，权限是什么？访问的路径需要什么样的角色和权限？这些判断和处理都是由该类进行的。</li></ol><p>其中加粗的过滤器可以被认为是Spring Security的核心过滤器，将在下面，一个过滤器对应一个小节来讲解。</p><h2 id="2-SecurityContextPersistenceFilter"><a href="#2-SecurityContextPersistenceFilter" class="headerlink" title="2. SecurityContextPersistenceFilter"></a>2. SecurityContextPersistenceFilter</h2><blockquote><ul><li>试想一下，如果我们不使用Spring Security，如果保存用户信息呢，大多数情况下会考虑使用Session对吧？在Spring Security中也是如此，用户在登录过一次之后，后续的访问便是通过sessionId来识别，从而认为用户已经被认证。</li><li>具体在何处存放用户信息，便是第一篇文章中提到的SecurityContextHolder；认证相关的信息是如何被存放到其中的，便是通过SecurityContextPersistenceFilter。</li><li>在第一节中提到了，SecurityContextPersistenceFilter的两个主要作用便是请求来临时，创建SecurityContext安全上下文信息和请求结束时清空SecurityContextHolder。</li><li>顺带提一下：微服务的一个设计理念需要实现服务通信的无状态，而http协议中的无状态意味着不允许存在session，这可以通过setAllowSessionCreation(false) 实现，这并不意味着SecurityContextPersistenceFilter变得无用，因为它还需要负责清除用户信息。在Spring Security中，虽然安全上下文信息被存储于Session中，但我们在实际使用中不应该直接操作Session，而应当使用SecurityContextHolder。</li></ul></blockquote><p>源码如下</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityContextPersistenceFilter</span> <span class="token keyword">extends</span> <span class="token class-name">GenericFilterBean</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_APPLIED <span class="token operator">=</span> <span class="token string">"__spring_security_scpf_applied"</span><span class="token punctuation">;</span>   <span class="token comment">//安全上下文存储的仓库</span>   <span class="token keyword">private</span> <span class="token class-name">SecurityContextRepository</span> repo<span class="token punctuation">;</span>   <span class="token keyword">public</span> <span class="token class-name">SecurityContextPersistenceFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//HttpSessionSecurityContextRepository是SecurityContextRepository接口的一个实现类</span>      <span class="token comment">//使用HttpSession来存储SecurityContext</span>      <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpSessionSecurityContextRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>         <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>      <span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> res<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>FILTER_APPLIED<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token comment">// ensure that filter is only applied once per request</span>         chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>FILTER_APPLIED<span class="token punctuation">,</span> <span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//包装request，response</span>      <span class="token class-name">HttpRequestResponseHolder</span> holder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpRequestResponseHolder</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>            response<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//从Session中获取安全上下文信息</span>      <span class="token class-name">SecurityContext</span> contextBeforeChainExecution <span class="token operator">=</span> repo<span class="token punctuation">.</span><span class="token function">loadContext</span><span class="token punctuation">(</span>holder<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>         <span class="token comment">//请求开始时，设置安全上下文信息，这样就避免了用户直接从Session中获取安全上下文信息</span>         <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span>contextBeforeChainExecution<span class="token punctuation">)</span><span class="token punctuation">;</span>         chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> holder<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>         <span class="token comment">//请求结束后，清空安全上下文信息</span>         <span class="token class-name">SecurityContext</span> contextAfterChainExecution <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span>               <span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">clearContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         repo<span class="token punctuation">.</span><span class="token function">saveContext</span><span class="token punctuation">(</span>contextAfterChainExecution<span class="token punctuation">,</span> holder<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>               holder<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         request<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>FILTER_APPLIED<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token keyword">if</span> <span class="token punctuation">(</span>debug<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"SecurityContextHolder now cleared, as request processing completed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>过滤器一般负责核心的处理流程，而具体的业务实现，通常交给其中聚合的其他实体类，这在Filter的设计中很常见，同时也符合职责分离模式。例如存储安全上下文和读取安全上下文的工作完全委托给了HttpSessionSecurityContextRepository去处理，而这个类中也有几个方法可以稍微解读下，方便我们理解内部的工作流程</p></blockquote><p><strong>org.springframework.security.web.context.HttpSessionSecurityContextRepository</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpSessionSecurityContextRepository</span> <span class="token keyword">implements</span> <span class="token class-name">SecurityContextRepository</span> <span class="token punctuation">&#123;</span>   <span class="token comment">// 'SPRING_SECURITY_CONTEXT'是安全上下文默认存储在Session中的键值</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SPRING_SECURITY_CONTEXT_KEY <span class="token operator">=</span> <span class="token string">"SPRING_SECURITY_CONTEXT"</span><span class="token punctuation">;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> contextObject <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">createEmptyContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">boolean</span> allowSessionCreation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token keyword">boolean</span> disableUrlRewriting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> springSecurityContextKey <span class="token operator">=</span> SPRING_SECURITY_CONTEXT_KEY<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token class-name">AuthenticationTrustResolver</span> trustResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticationTrustResolverImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//从当前request中取出安全上下文，如果session为空，则会返回一个新的安全上下文</span>   <span class="token keyword">public</span> <span class="token class-name">SecurityContext</span> <span class="token function">loadContext</span><span class="token punctuation">(</span><span class="token class-name">HttpRequestResponseHolder</span> requestResponseHolder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> requestResponseHolder<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> requestResponseHolder<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">HttpSession</span> httpSession <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">SecurityContext</span> context <span class="token operator">=</span> <span class="token function">readSecurityContextFromSession</span><span class="token punctuation">(</span>httpSession<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         context <span class="token operator">=</span> <span class="token function">generateNewContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>      <span class="token keyword">return</span> context<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsContext</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>springSecurityContextKey<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">private</span> <span class="token class-name">SecurityContext</span> <span class="token function">readSecurityContextFromSession</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> httpSession<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>httpSession <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>      <span class="token comment">// Session存在的情况下，尝试获取其中的SecurityContext</span>      <span class="token class-name">Object</span> contextFromSession <span class="token operator">=</span> httpSession<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>springSecurityContextKey<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>contextFromSession <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">SecurityContext</span><span class="token punctuation">)</span> contextFromSession<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">//初次请求时创建一个新的SecurityContext实例</span>   <span class="token keyword">protected</span> <span class="token class-name">SecurityContext</span> <span class="token function">generateNewContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">createEmptyContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>SecurityContextPersistenceFilter和HttpSessionSecurityContextRepository配合使用，构成了Spring Security整个调用链路的入口，为什么将它放在最开始的地方也是显而易见的，后续的过滤器中大概率会依赖Session信息和安全上下文信息。</p></blockquote><h2 id="3-UsernamePasswordAuthenticationFilter"><a href="#3-UsernamePasswordAuthenticationFilter" class="headerlink" title="3.UsernamePasswordAuthenticationFilter"></a>3.UsernamePasswordAuthenticationFilter</h2><p><a href="https://imgtu.com/i/7tLrHU"><img src="https://s4.ax1x.com/2022/01/16/7tLrHU.png" alt="7tLrHU.png"></a></p><blockquote><p>上述的时序图，可以看出UsernamePasswordAuthenticationFilter主要肩负起了调用身份认证器，校验身份的作用，至于认证的细节，在前面几章花了很大篇幅进行了介绍，到这里，其实Spring Security的基本流程就已经走通了。</p></blockquote><p>源码</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Authentication</span> <span class="token function">attemptAuthentication</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>      <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">&#123;</span>   <span class="token comment">//获取表单中的用户名和密码</span>   <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token function">obtainUsername</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token function">obtainPassword</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   username <span class="token operator">=</span> username<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//组装成username+password形式的token</span>   <span class="token class-name">UsernamePasswordAuthenticationToken</span> authRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>         username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Allow subclasses to set the "details" property</span>   <span class="token function">setDetails</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> authRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//交给内部的AuthenticationManager去认证，并返回认证信息</span>   <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAuthenticationManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>authRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其实大部分逻辑是其父类完成的</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractAuthenticationProcessingFilter</span> <span class="token keyword">extends</span> <span class="token class-name">GenericFilterBean</span>      <span class="token keyword">implements</span> <span class="token class-name">ApplicationEventPublisherAware</span><span class="token punctuation">,</span> <span class="token class-name">MessageSourceAware</span> <span class="token punctuation">&#123;</span><span class="token comment">//包含了一个身份认证器</span><span class="token keyword">private</span> <span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">;</span><span class="token comment">//用于实现remeberMe</span><span class="token keyword">private</span> <span class="token class-name">RememberMeServices</span> rememberMeServices <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NullRememberMeServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">RequestMatcher</span> requiresAuthenticationRequestMatcher<span class="token punctuation">;</span><span class="token comment">//这两个Handler很关键，分别代表了认证成功和失败相应的处理器</span><span class="token keyword">private</span> <span class="token class-name">AuthenticationSuccessHandler</span> successHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SavedRequestAwareAuthenticationSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">AuthenticationFailureHandler</span> failureHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleUrlAuthenticationFailureHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span><span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span><span class="token class-name">HttpServletResponse</span> response <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> res<span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token class-name">Authentication</span> authResult<span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token comment">//此处实际上就是调用UsernamePasswordAuthenticationFilter的attemptAuthentication方法</span>authResult <span class="token operator">=</span> <span class="token function">attemptAuthentication</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>authResult <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//子类未完成认证，立刻返回</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>sessionStrategy<span class="token punctuation">.</span><span class="token function">onAuthentication</span><span class="token punctuation">(</span>authResult<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//在认证过程中可以直接抛出异常，在过滤器中，就像此处一样，进行捕获</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InternalAuthenticationServiceException</span> failed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//内部服务异常</span><span class="token function">unsuccessfulAuthentication</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> failed<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">AuthenticationException</span> failed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//认证失败</span><span class="token function">unsuccessfulAuthentication</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> failed<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//认证成功</span><span class="token keyword">if</span> <span class="token punctuation">(</span>continueChainBeforeSuccessfulAuthentication<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//注意，认证成功后过滤器把authResult结果也传递给了成功处理器</span><span class="token function">successfulAuthentication</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> chain<span class="token punctuation">,</span> authResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以看到只要是login就会进行身份的验证<br><a href="https://imgtu.com/i/7tvXFS"><img src="https://s4.ax1x.com/2022/01/16/7tvXFS.png" alt="7tvXFS.png"></a></p><h2 id="4-AnonymousAuthenticationFilter"><a href="#4-AnonymousAuthenticationFilter" class="headerlink" title="4.AnonymousAuthenticationFilter"></a>4.AnonymousAuthenticationFilter</h2><blockquote><p>匿名认证过滤器，可能有人会想：匿名了还有身份？我自己对于Anonymous匿名身份的理解是Spirng Security为了整体逻辑的统一性，即使是未通过认证的用户，也给予了一个匿名身份。而AnonymousAuthenticationFilter该过滤器的位置也是非常的科学的，它位于常用的身份认证过滤器（如UsernamePasswordAuthenticationFilter、BasicAuthenticationFilter、RememberMeAuthenticationFilter）之后，意味着只有在上述身份过滤器执行完毕后，SecurityContext依旧没有用户信息，AnonymousAuthenticationFilter该过滤器才会有意义—-基于用户一个匿名身份。</p></blockquote><p><strong>org.springframework.security.web.authentication.AnonymousAuthenticationFilter</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnonymousAuthenticationFilter</span> <span class="token keyword">extends</span> <span class="token class-name">GenericFilterBean</span> <span class="token keyword">implements</span>      <span class="token class-name">InitializingBean</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">private</span> <span class="token class-name">AuthenticationDetailsSource</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">></span></span> authenticationDetailsSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebAuthenticationDetailsSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token class-name">String</span> key<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token class-name">Object</span> principal<span class="token punctuation">;</span>   <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">;</span>   <span class="token comment">//自动创建一个"anonymousUser"的匿名用户,其具有ANONYMOUS角色</span>   <span class="token keyword">public</span> <span class="token class-name">AnonymousAuthenticationFilter</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">this</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">"anonymousUser"</span><span class="token punctuation">,</span> <span class="token class-name">AuthorityUtils</span><span class="token punctuation">.</span><span class="token function">createAuthorityList</span><span class="token punctuation">(</span><span class="token string">"ROLE_ANONYMOUS"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">/**    *    * @param key key用来识别该过滤器创建的身份    * @param principal principal代表匿名用户的身份    * @param authorities authorities代表匿名用户的权限集合    */</span>   <span class="token keyword">public</span> <span class="token class-name">AnonymousAuthenticationFilter</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> principal<span class="token punctuation">,</span>         <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">hasLength</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">"key cannot be null or empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>principal<span class="token punctuation">,</span> <span class="token string">"Anonymous authentication principal must be set"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>authorities<span class="token punctuation">,</span> <span class="token string">"Anonymous authorities must be set"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> principal<span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>authorities <span class="token operator">=</span> authorities<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> res<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span>         <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>      <span class="token comment">//过滤器链都执行到匿名认证过滤器这儿了还没有身份信息，塞一个匿名身份进去</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>               <span class="token function">createAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>      chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token keyword">protected</span> <span class="token class-name">Authentication</span> <span class="token function">createAuthentication</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">//创建一个AnonymousAuthenticationToken</span>      <span class="token class-name">AnonymousAuthenticationToken</span> auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnonymousAuthenticationToken</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>            principal<span class="token punctuation">,</span> authorities<span class="token punctuation">)</span><span class="token punctuation">;</span>      auth<span class="token punctuation">.</span><span class="token function">setDetails</span><span class="token punctuation">(</span>authenticationDetailsSource<span class="token punctuation">.</span><span class="token function">buildDetails</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> auth<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="5-ExceptionTranslationFilter"><a href="#5-ExceptionTranslationFilter" class="headerlink" title="5. ExceptionTranslationFilter"></a>5. ExceptionTranslationFilter</h2><blockquote><ol><li>ExceptionTranslationFilter异常转换过滤器位于整个springSecurityFilterChain的后方，用来转换整个链路中出现的异常，将其转化，顾名思义，转化以意味本身并不处理。一般其只处理两大类异常：AccessDeniedException访问异常和AuthenticationException认证异常。</li><li>这个过滤器非常重要，因为它将Java中的异常和HTTP的响应连接在了一起，这样在处理异常时，我们不用考虑密码错误该跳到什么页面，账号锁定该如何，只需要关注自己的业务逻辑，抛出相应的异常便可。</li><li>如果该过滤器检测到AuthenticationException，则将会交给内部的AuthenticationEntryPoint去处理，如果检测到AccessDeniedException，需要先判断当前用户是不是匿名用户，如果是匿名访问，则和前面一样运行AuthenticationEntryPoint，否则会委托给AccessDeniedHandler去处理，而AccessDeniedHandler的默认实现，是AccessDeniedHandlerImpl。所以ExceptionTranslationFilter内部的AuthenticationEntryPoint是至关重要的，顾名思义：认证的入口点。</li></ol></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionTranslationFilter</span> <span class="token keyword">extends</span> <span class="token class-name">GenericFilterBean</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//处理异常转换的核心方法</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handleSpringSecurityException</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>        <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">,</span> <span class="token class-name">RuntimeException</span> exception<span class="token punctuation">)</span>        <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token keyword">instanceof</span> <span class="token class-name">AuthenticationException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token comment">//重定向到登录端点</span>        <span class="token function">sendStartAuthentication</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> chain<span class="token punctuation">,</span>              <span class="token punctuation">(</span><span class="token class-name">AuthenticationException</span><span class="token punctuation">)</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">&#125;</span>     <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token keyword">instanceof</span> <span class="token class-name">AccessDeniedException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Authentication</span> authentication <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>authenticationTrustResolver<span class="token punctuation">.</span><span class="token function">isAnonymous</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span> <span class="token operator">||</span> authenticationTrustResolver<span class="token punctuation">.</span><span class="token function">isRememberMe</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//重定向到登录端点</span>           <span class="token function">sendStartAuthentication</span><span class="token punctuation">(</span>                 request<span class="token punctuation">,</span>                 response<span class="token punctuation">,</span>                 chain<span class="token punctuation">,</span>                 <span class="token keyword">new</span> <span class="token class-name">InsufficientAuthenticationException</span><span class="token punctuation">(</span>                       <span class="token string">"Full authentication is required to access this resource"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>           <span class="token comment">//交给accessDeniedHandler处理</span>           accessDeniedHandler<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span>                 <span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span><span class="token punctuation">)</span> exception<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>     <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>那么什么是AuthenticationEntryPoint，认证实例端点。</p><p>之前配置springSecurity时，去探究如何配置。<br>formLogin()配置了之后最起码做了两件事，其一，为UsernamePasswordAuthenticationFilter设置了相关的配置，其二配置了AuthenticationEntryPoint。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        http            <span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"/home"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//FormLoginConfigurer</span>                <span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>配置类<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractAuthenticationFilterConfigurer</span> <span class="token keyword">extends</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#123;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>   <span class="token comment">//formLogin不出所料配置了AuthenticationEntryPoint</span>   <span class="token keyword">private</span> <span class="token class-name">LoginUrlAuthenticationEntryPoint</span> authenticationEntryPoint<span class="token punctuation">;</span>   <span class="token comment">//认证失败的处理器</span>   <span class="token keyword">private</span> <span class="token class-name">AuthenticationFailureHandler</span> failureHandler<span class="token punctuation">;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>EntryPoint就可以理解为某一个端点，比如登陆的端点，登陆失败的端点。当我们在认证过程中，抛出异常类，当过滤器走到这里，会自动帮我们转到定义的端点。</p><h2 id="6-FilterSecurityInterceptor"><a href="#6-FilterSecurityInterceptor" class="headerlink" title="6.FilterSecurityInterceptor"></a>6.FilterSecurityInterceptor</h2><blockquote><ol><li>想想整个认证安全控制流程还缺了什么？我们已经有了认证，有了请求的封装，有了Session的关联…还缺一个：由什么控制哪些资源是受限的，这些受限的资源需要什么权限，需要什么角色…这一切和访问控制相关的操作，都是由FilterSecurityInterceptor完成的。</li><li>FilterSecurityInterceptor的工作流程用笔者的理解可以理解如下：FilterSecurityInterceptor从SecurityContextHolder中获取Authentication对象，然后比对用户拥有的权限和资源所需的权限。前者可以通过Authentication对象直接获得，而后者则需要引入我们之前一直未提到过的两个类：SecurityMetadataSource，AccessDecisionManager。理解清楚决策管理器的整个创建流程和SecurityMetadataSource的作用需要花很大一笔功夫，这里，暂时只介绍其大概的作用。</li></ol></blockquote><p>在JavaConfig的配置中，我们通常如下配置路径的访问控制：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/resources/**"</span><span class="token punctuation">,</span> <span class="token string">"/signup"</span><span class="token punctuation">,</span> <span class="token string">"/about"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"ADMIN"</span><span class="token punctuation">)</span>             <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/db/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">access</span><span class="token punctuation">(</span><span class="token string">"hasRole('ADMIN') and hasRole('DBA')"</span><span class="token punctuation">)</span>             <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withObjectPostProcessor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectPostProcessor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FilterSecurityInterceptor</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">O</span> <span class="token keyword">extends</span> <span class="token class-name">FilterSecurityInterceptor</span><span class="token punctuation">></span></span> <span class="token class-name">O</span> <span class="token function">postProcess</span><span class="token punctuation">(</span><span class="token class-name">O</span> fsi<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>fsi<span class="token punctuation">.</span><span class="token function">setPublishAuthorizationSuccess</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> fsi<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> spring-security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-securyty-02-认证流程</title>
      <link href="/2022/01/28/spring-security-02/"/>
      <url>/2022/01/28/spring-security-02/</url>
      
        <content type="html"><![CDATA[<h1 id="spring-securyty-02-认证流程"><a href="#spring-securyty-02-认证流程" class="headerlink" title="spring-securyty-02-认证流程"></a>spring-securyty-02-认证流程</h1><blockquote><p>本章来粗略的讲解一下,当一个项目配置了spring-securyty默认认证的流程。</p></blockquote><h2 id="1-简单的认证流程"><a href="#1-简单的认证流程" class="headerlink" title="1. 简单的认证流程"></a>1. 简单的认证流程</h2><ol><li><p>用户名和密码被过滤器获取到，封装成Authentication,通常情况下是UsernamePasswordAuthenticationToken这个实现类。</p></li><li><p>AuthenticationManager 身份管理器负责验证这个Authentication</p></li><li><p>认证成功后，AuthenticationManager身份管理器返回一个被填充满了信息的（包括上面提到的权限信息，身份信息，细节信息，但密码通常会被移除）Authentication实例。</p></li><li><p>SecurityContextHolder安全上下文容器将第3步填充了信息的Authentication，通过SecurityContextHolder.getContext().setAuthentication(…)方法，设置到其中。</p><h2 id="2-核心组件"><a href="#2-核心组件" class="headerlink" title="2. 核心组件"></a>2. 核心组件</h2><p>spring Security中常见且核心的Java类，它们之间的依赖，构建起了整个框架。本节不涉及源码流程，只是先熟悉几个核心类，再仔细了解是如何把这几个核心类串联起来的。</p><h3 id="2-1-SecurityContextHolder"><a href="#2-1-SecurityContextHolder" class="headerlink" title="2.1 SecurityContextHolder"></a>2.1 SecurityContextHolder</h3></li></ol><blockquote><p>SecurityContextHolder用于存储安全上下文（security context）的信息。当前操作的用户是谁，该用户是否已经被认证，他拥有哪些角色权限…这些都被保存在SecurityContextHolder中。<br>SecurityContextHolder默认使用ThreadLocal 策略来存储认证信息。<br>看到ThreadLocal 也就意味着，这是一种与线程绑定的策略。Spring Security在用户登录时自动绑定认证信息到当前线程，在用户退出时，自动清除当前线程的认证信息。<br>SecurityContextHolder解决的是用户认证信息存储的问题。</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SecurityContext</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> strategy<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//strategy为具体的SecurityContext方式，</span>                                    <span class="token comment">//initialize方法中初始化</span><span class="token punctuation">&#125;</span><span class="token comment">/** * Primarily for troubleshooting purposes, this method shows how many times the class * has re-initialized its &lt;code>SecurityContextHolderStrategy&lt;/code>. * * @return the count (should be one unless you've called * &#123;@link #setStrategyName(String)&#125; to switch to an alternate strategy. */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">getInitializeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> initializeCount<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>strategyName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// Set default</span>strategyName <span class="token operator">=</span> MODE_THREADLOCAL<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>strategyName<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>MODE_THREADLOCAL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>strategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocalSecurityContextHolderStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//默认的而实现方式</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>strategyName<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>MODE_INHERITABLETHREADLOCAL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>strategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InheritableThreadLocalSecurityContextHolderStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>strategyName<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>MODE_GLOBAL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>strategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GlobalSecurityContextHolderStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token comment">// Try to load a custom strategy</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>strategyName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> customStrategy <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>strategy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SecurityContextHolderStrategy</span><span class="token punctuation">)</span> customStrategy<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">ReflectionUtils</span><span class="token punctuation">.</span><span class="token function">handleReflectionException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>initializeCount<span class="token operator">++</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>可以看到默认的存储用户信息的实现 ThreadLocalSecurityContextHolderStrategy <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">ThreadLocalSecurityContextHolderStrategy</span> <span class="token keyword">implements</span><span class="token class-name">SecurityContextHolderStrategy</span> <span class="token punctuation">&#123;</span><span class="token comment">// ~ Static fields/initializers</span><span class="token comment">// =====================================================================================</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityContext</span><span class="token punctuation">></span></span> contextHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ~ Methods</span><span class="token comment">// ========================================================================================================</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clearContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>contextHolder<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">SecurityContext</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">SecurityContext</span> ctx <span class="token operator">=</span> contextHolder<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>ctx <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ctx <span class="token operator">=</span> <span class="token function">createEmptyContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>contextHolder<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ctx<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">SecurityContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">"Only non-null SecurityContext instances are permitted"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>contextHolder<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">SecurityContext</span> <span class="token function">createEmptyContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SecurityContextImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-Authentication对象"><a href="#2-2-Authentication对象" class="headerlink" title="2.2 Authentication对象"></a>2.2 Authentication对象</h3></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Authentication</span> <span class="token keyword">extends</span> <span class="token class-name">Principal</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> <span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Object</span> <span class="token function">getCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Object</span> <span class="token function">getDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isAuthenticated<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">Authentication</span> 继承于<span class="token class-name">Principal</span>  <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Principal</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">default</span> <span class="token keyword">boolean</span> <span class="token function">implies</span><span class="token punctuation">(</span><span class="token class-name">Subject</span> var1<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> var1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> var1<span class="token punctuation">.</span><span class="token function">getPrincipals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>&lt;1&gt; Authentication是spring security包中的接口，直接继承自Principal类，而Principal是位于java.security包中的。可以见得，Authentication在spring security中是最高级别的身份/认证的抽象。<br>&lt;2&gt; 由这个顶级接口，我们可以得到用户拥有的权限信息列表，密码，用户细节信息，用户身份信息，认证信息。<br>接口详细解读如下：</p><ul><li>getAuthorities()，权限信息列表，默认是GrantedAuthority接口的一些实现类，通常是代表权限信息的一系列字符串。</li><li>getCredentials()，Credentials 中文意为可信的，密码信息，用户输入的密码字符串，在认证过后通常会被移除，用于保障安全。</li><li>getDetails()，细节信息，web应用中的实现接口通常为 WebAuthenticationDetails，它记录了访问者的ip地址和sessionId的值。</li><li>getPrincipal()，最重要的身份信息，表示用户是谁的接口。大部分情况下返回的是UserDetails接口的实现类，也是框架中的常用接口之一。UserDetails接口将会在下面的小节重点介绍。</li></ul></blockquote><h3 id="2-3-AuthenticationManager"><a href="#2-3-AuthenticationManager" class="headerlink" title="2.3 AuthenticationManager"></a>2.3 AuthenticationManager</h3><p>初次接触可能会被AuthenticationManager，ProviderManager ，AuthenticationProvider …这么多相似的Spring认证类搞得晕头转向，但只要稍微梳理一下就可以理解清楚它们的联系和设计者的用意。</p><ul><li>AuthenticationManager（接口）是认证相关的核心接口，也是发起认证的出发点，因为在实际需求中，我们可能会允许用户使用用户名+密码登录，同时允许用户使用邮箱+密码，手机号码+密码登录，甚至，可能允许用户使用指纹登录（还有这样的操作？没想到吧）。</li><li>所以说AuthenticationManager一般不直接认证，AuthenticationManager接口的常用实现类ProviderManager 内部会维护一个List<AuthenticationProvider>列表，存放多种认证方式，实际上这是委托者模式的应用（Delegate）。</AuthenticationProvider></li><li>也就是说，核心的认证入口始终只有一个：AuthenticationManager，不同的认证方式：用户名+密码（UsernamePasswordAuthenticationToken），邮箱+密码，手机号码+密码登录则对应了三个AuthenticationProvider</li><li>在默认策略下，只需要通过一个AuthenticationProvider的认证，即可被认为是登录成功。</li></ul><p>注意这里用了委托模式，可以学一下哦。<br>ProviderManager中比较重要的方法如下。 </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderManager</span> <span class="token keyword">implements</span> <span class="token class-name">AuthenticationManager</span><span class="token punctuation">,</span> <span class="token class-name">MessageSourceAware</span><span class="token punctuation">,</span><span class="token class-name">InitializingBean</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 维护一个AuthenticationProvider列表</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AuthenticationProvider</span><span class="token punctuation">></span></span> providers <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Authentication</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span>          <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">&#123;</span>       <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Authentication</span><span class="token punctuation">></span></span> toTest <span class="token operator">=</span> authentication<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token class-name">AuthenticationException</span> lastException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>       <span class="token class-name">Authentication</span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>       <span class="token comment">// 依次认证</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">AuthenticationProvider</span> provider <span class="token operator">:</span> <span class="token function">getProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>provider<span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span>toTest<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//这个方法用于验证是否支持验证方式，如果不支持就去看下一个。</span>             <span class="token keyword">continue</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>          <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>             result <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">copyDetails</span><span class="token punctuation">(</span>authentication<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>             <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>          <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">AuthenticationException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>             lastException <span class="token operator">=</span> e<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>       <span class="token punctuation">&#125;</span>       <span class="token comment">// 如果有Authentication信息，则直接返回</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>eraseCredentialsAfterAuthentication<span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">CredentialsContainer</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token comment">//移除密码</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">CredentialsContainer</span><span class="token punctuation">)</span> result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eraseCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>             <span class="token comment">//发布验证成功，登录成功事件</span>eventPublisher<span class="token punctuation">.</span><span class="token function">publishAuthenticationSuccess</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> result<span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>       <span class="token comment">//执行到此，说明没有认证成功，包装异常信息</span>       <span class="token keyword">if</span> <span class="token punctuation">(</span>lastException <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          lastException <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProviderNotFoundException</span><span class="token punctuation">(</span>messages<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>                <span class="token string">"ProviderManager.providerNotFound"</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span> toTest<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                <span class="token string">"No AuthenticationProvider found for &#123;0&#125;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>       <span class="token function">prepareException</span><span class="token punctuation">(</span>lastException<span class="token punctuation">,</span> authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">throw</span> lastException<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>到这里，如果不纠结于AuthenticationProvider的实现细节以及安全相关的过滤器，认证相关的核心类其实都已经介绍完毕了：身份信息的存放容器SecurityContextHolder，身份信息的抽象Authentication，身份认证器AuthenticationManager及其认证流程。姑且在这里做一个分隔线。下面来介绍下AuthenticationProvider接口的具体实现。</p><p>但是我要纠结一下，看一个认证器的具体实现。</p><h2 id="3-认证器的具体实现"><a href="#3-认证器的具体实现" class="headerlink" title="3. 认证器的具体实现"></a>3. 认证器的具体实现</h2><h3 id="3-1-DaoAuthenticationProvider"><a href="#3-1-DaoAuthenticationProvider" class="headerlink" title="3.1 DaoAuthenticationProvider"></a>3.1 DaoAuthenticationProvider</h3><p>这一小节看一下具体的实现<br>DaoAuthenticationProvider 的uml类图如下。<br><a href="https://imgtu.com/i/7tROeI"><img src="https://s4.ax1x.com/2022/01/16/7tROeI.png" alt="7tROeI.png"></a></p><ul><li>在DaoAuthenticationProvider中，对应的方法便是retrieveUser，虽然有两个参数，但是retrieveUser只有第一个参数起主要作用，返回一个UserDetails。</li><li>还需要完成UsernamePasswordAuthenticationToken和UserDetails密码的比对，这便是交给additionalAuthenticationChecks方法完成的，如果这个void方法没有抛异常，则认为比对成功。</li><li>比对密码的过程，用到了PasswordEncoder和SaltSource，密码加密和盐的概念相信不用我赘述了，它们为保障安全而设计，都是比较基础的概念。</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">UserDetails</span> <span class="token function">retrieveUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">UsernamePasswordAuthenticationToken</span> authentication<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">&#123;</span><span class="token function">prepareTimingAttackProtection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token class-name">UserDetails</span> loadedUser <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserDetailsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadUserByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>loadedUser <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalAuthenticationServiceException</span><span class="token punctuation">(</span><span class="token string">"UserDetailsService returned null, which is an interface contract violation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> loadedUser<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UsernameNotFoundException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">mitigateAgainstTimingAttack</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">throw</span> ex<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InternalAuthenticationServiceException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> ex<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalAuthenticationServiceException</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-UserDetails与UserDetailsService"><a href="#3-2-UserDetails与UserDetailsService" class="headerlink" title="3.2 UserDetails与UserDetailsService"></a>3.2 UserDetails与UserDetailsService</h3><ul><li>UserDetails这个接口，它代表了最详细的用户信息，这个接口涵盖了一些必要的用户信息字段，具体的实现类对它进行了扩展。  </li><li>它和Authentication接口很类似，比如它们都拥有username，authorities，区分他们也是本文的重点内容之一。</li><li>Authentication的getCredentials()与UserDetails中的getPassword()需要被区分对待，前者是用户提交的密码凭证，后者是用户正确的密码，认证器其实就是对这两者的比对。Authentication中的getAuthorities()实际是由UserDetails的getAuthorities()传递而形成的。还记得Authentication接口中的getUserDetails()方法吗？其中的UserDetails用户详细信息便是经过了AuthenticationProvider之后被填充的。</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDetails</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> <span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> <span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">isAccountNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">isAccountNonLocked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">isCredentialsNonExpired</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>UserDetailsService只负责从特定的地方（通常是数据库）加载用户信息，仅此而已，记住这一点，可以避免走很多弯路。UserDetailsService常见的实现类有JdbcDaoImpl，InMemoryUserDetailsManager，前者从数据库加载用户，后者从内存中加载用户，也可以自己实现UserDetailsService，通常这更加灵活</p></blockquote><p>小结：<br>认证过程的架构概览图<br><a href="https://imgtu.com/i/7t430s"><img src="https://s4.ax1x.com/2022/01/16/7t430s.png" alt="7t430s.png"></a></p>]]></content>
      
      
      
        <tags>
            
            <tag> spring-security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-security-01-介绍</title>
      <link href="/2022/01/28/spring-security-01/"/>
      <url>/2022/01/28/spring-security-01/</url>
      
        <content type="html"><![CDATA[<h1 id="spring-security-介绍"><a href="#spring-security-介绍" class="headerlink" title="spring-security-介绍"></a>spring-security-介绍</h1><blockquote><p>spring-security这个认证框架从我一开始学习java就知道了,但工作中也一直没用到，直到现在有个需求让我解决微服务中使用oauth2统一认证，发现spring-oauth2是基于spring-security的。但做的时候没有认真来看spring-security，只是使用网上的办法解决了统一认证的问题，但每每想起建立的基础还不了解，就心里面不踏实，因此静下心来看看security。</p></blockquote><h2 id="01-security是什么"><a href="#01-security是什么" class="headerlink" title="01 security是什么"></a>01 security是什么</h2><blockquote><p>安全方面的两个主要区域是“认证”和“授权”（或者访问控制），一般来说，Web 应用的安全性包括用户认证（Authentication）和用户授权（Authorization）两个部分，这两点也是 Spring Security 重要核心功能。</p></blockquote><ul><li><p>用户认证指的是：验证某个用户是否为系统中的合法主体，也就是说用户能否访问该系统。用户认证一般要求用户提供用户名和密码。系统通过校验用户名和密码来完成认证过程。通俗点说就是系统认为用户是否能登录</p></li><li><p>用户授权指的是验证某个用户是否有权限执行某个操作。</p><blockquote><p>在一个系统中，不同用户所具有的权限是不同的。比如对一个文件来说，有的用户只能进行读取，而有的用户可以进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的权限。通俗点讲就是系统判断用户是否有权限去做某些事情。  </p></blockquote></li></ul><p>初学java的时候，如果解决认证登陆，一般最简单的是写个servlet来认证，后来又学习了filter,知道了可以在filter中校验，对于访问权限也可以简单的使用filter实现。但这样只是最简单的做法，真实项目中需要解决的与认证和权限以及攻击防护相关的内容很复杂。   </p><p>spring-security就是这样一个认证和授权的框架，同时也包含了其他的一些强大的功能。    </p><p>在实现上是一系列的过滤器加核心认证类。<br><a href="https://www.springcloud.cc/spring-security-zhcn.html">https://www.springcloud.cc/spring-security-zhcn.html</a><br>官方网站有很全面的使用介绍。</p><h2 id="02-过滤器链"><a href="#02-过滤器链" class="headerlink" title="02 过滤器链"></a>02 过滤器链</h2><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">o.s.security.web.DefaultSecurityFilterChain - Creating filter chain: any request,  [1org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22781286, 2org.springframework.security.web.context.SecurityContextPersistenceFilter@5aa026e9,3 org.springframework.security.web.header.HeaderWriterFilter@42365c82, 4 org.springframework.security.web.authentication.logout.LogoutFilter@7e474bd, 5 com.xsyw.oauth.filter.LoginProcessSetTenantFilter@11564455, 6 com.xsyw.oauth.tenant.TenantUsernamePasswordAuthenticationFilter@3bc6c10f, 7 org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1ae8556c, 8 org.springframework.security.web.savedrequest.RequestCacheAwareFilter@499f9003, 9 org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@39bd07fe, 10 org.springframework.security.web.authentication.AnonymousAuthenticationFilter@173c0722, 11 org.springframework.security.web.session.SessionManagementFilter@46c47690, 12 org.springframework.security.web.access.ExceptionTranslationFilter@1c61f9bf, 13 org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5f7dbdfa] <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上面是引入了spring-security的项目启动时打印的日志，除了5和6是自定义的过滤器，其他为框架内置的过滤器。每一种过滤器都有其作用，我们将在后面逐一讲解。</p><p>因为这是个oauth2统一认证的项目，在引入了oauth2后会打印如下另一条过滤器链条。  </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>requestMatchers<span class="token operator">=</span><span class="token punctuation">[</span>Ant <span class="token punctuation">[</span>pattern<span class="token operator">=</span><span class="token string">'/oauth/token'</span><span class="token punctuation">]</span>, Ant <span class="token punctuation">[</span>pattern<span class="token operator">=</span><span class="token string">'/oauth/token_key'</span><span class="token punctuation">]</span>, Ant <span class="token punctuation">[</span>pattern<span class="token operator">=</span><span class="token string">'/oauth/check_token'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>,   <span class="token punctuation">[</span><span class="token number">1</span>org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@20f94e9a, <span class="token number">2</span>org.springframework.security.web.context.SecurityContextPersistenceFilter@54af9cce, <span class="token number">3</span>org.springframework.security.web.header.HeaderWriterFilter@7c59f315, <span class="token number">4</span>org.springframework.security.web.authentication.logout.LogoutFilter@35129b9e, <span class="token number">5</span>org.springframework.security.oauth2.provider.client.ClientCredentialsTokenEndpointFilter@704ca8a8, <span class="token number">6</span>org.springframework.security.web.authentication.www.BasicAuthenticationFilter@17a756db, <span class="token number">7</span>org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6cb1da13, <span class="token number">8</span>org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@539953af, <span class="token number">9</span>org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f213e97,<span class="token number">10</span>org.springframework.security.web.session.SessionManagementFilter@65689000, <span class="token number">11</span> org.springframework.security.web.access.ExceptionTranslationFilter@2bd67cf9, <span class="token number">12</span>org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7926d092<span class="token punctuation">]</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上面的不出意外都是内置的过滤器。  </p><p>简单的认识之后<br>接下来就是springsecurity的源码探究，包括以下几点。</p><ul><li>认证流程</li><li>过滤器和核心过滤器</li><li>过滤器链的加载流程和原理</li><li>实现一个过滤器</li><li>如何配置，配置的原理。</li><li>oauth2认证，在oauth2之前走了哪些过滤器。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> spring-security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-security-01-介绍</title>
      <link href="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/"/>
      <url>/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="spring-oauth2-03-获取token的流程"><a href="#spring-oauth2-03-获取token的流程" class="headerlink" title="spring-oauth2-03-获取token的流程"></a>spring-oauth2-03-获取token的流程</h2><h3 id="1-获取token的流程"><a href="#1-获取token的流程" class="headerlink" title="1.获取token的流程"></a>1.获取token的流程</h3><h4 id="1-1-为什么要看流程"><a href="#1-1-为什么要看流程" class="headerlink" title="1.1 为什么要看流程"></a>1.1 为什么要看流程</h4><ul><li>我们已经知道oauth2服务器的作用如左图所示<br><img src="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/oauth2-rz.png" alt="oauth的作用"></li></ul><blockquote><p>我们的目标就是将Spring Security OAuth默认的走授权流程后发放token的步骤替换成走我们自定义的认证方式后发放token，除此之外，其他的认证校验步骤（如访问资源服务器的认证、授权等）仍然可以使用Spring Security OAuth提供的默认实现来完成。</p></blockquote><h4 id="1-2-获取源码的核心流程"><a href="#1-2-获取源码的核心流程" class="headerlink" title="1.2 获取源码的核心流程"></a>1.2 获取源码的核心流程</h4><ul><li><p>经过探究源码，先上结论，获取的核心流程如下<br><img src="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/oauth2-lc.png" alt="oauth的作用"></p></li><li><p>每一种授权方式有些差异，例如默认的密码授权时序图如下。</p></li></ul><p><img src="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/oauth2-lc1.jpg" alt="oauth的流程"></p><p>针对获取token的流程，我们探究查看代码。</p><h4 id="1-3-源码简析"><a href="#1-3-源码简析" class="headerlink" title="1.3 源码简析"></a>1.3 源码简析</h4><h5 id="1-获取用户信息和认证用户"><a href="#1-获取用户信息和认证用户" class="headerlink" title="1 获取用户信息和认证用户"></a>1 获取用户信息和认证用户</h5><ul><li>获取token的端点如下，发送获取token请求的源码会被解析到这里。<br><img src="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/yuanma01.jpg" alt="oauth的流程"></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/oauth/token"</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OAuth2AccessToken</span><span class="token punctuation">></span></span> <span class="token function">postAccessToken</span><span class="token punctuation">(</span><span class="token class-name">Principal</span> principal<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> parameters<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">HttpRequestMethodNotSupportedException</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>principal <span class="token keyword">instanceof</span> <span class="token class-name">Authentication</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InsufficientAuthenticationException</span><span class="token punctuation">(</span><span class="token string">"There is no client authentication. Try adding an appropriate authentication filter."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//获取客户端id</span><span class="token class-name">String</span> clientId <span class="token operator">=</span> <span class="token function">getClientId</span><span class="token punctuation">(</span>principal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//从数据库获取客户端信息</span><span class="token class-name">ClientDetails</span> authenticatedClient <span class="token operator">=</span> <span class="token function">getClientDetailsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadClientByClientId</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//构造TokenRequest对象  1 </span><span class="token class-name">TokenRequest</span> tokenRequest <span class="token operator">=</span> <span class="token function">getOAuth2RequestFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createTokenRequest</span><span class="token punctuation">(</span>parameters<span class="token punctuation">,</span> authenticatedClient<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>clientId <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>clientId<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// Only validate the client details if a client authenticated during this</span><span class="token comment">// request.</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clientId<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// double check to make sure that the client ID in the token request is the same as that in the</span><span class="token comment">// authenticated client</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidClientException</span><span class="token punctuation">(</span><span class="token string">"Given client ID does not match authenticated client"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>authenticatedClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>oAuth2RequestValidator<span class="token punctuation">.</span><span class="token function">validateScope</span><span class="token punctuation">(</span>tokenRequest<span class="token punctuation">,</span> authenticatedClient<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//没有授权方式就抛异常</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getGrantType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidRequestException</span><span class="token punctuation">(</span><span class="token string">"Missing grant type"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//隐士模式不需要走到这里面</span><span class="token keyword">if</span> <span class="token punctuation">(</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getGrantType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"implicit"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidGrantException</span><span class="token punctuation">(</span><span class="token string">"Implicit grant type not supported from token endpoint"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//如果有scope参数，则置为空</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAuthCodeRequest</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// The scope was requested or determined during the authorization step</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Clearing scope of incoming token request"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tokenRequest<span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span><span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">emptySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//如果是刷新token 保持原有的scope</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRefreshTokenRequest</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// A refresh token has its own default scopes, so we should ignore any added by the factory here.</span>tokenRequest<span class="token punctuation">.</span><span class="token function">setScope</span><span class="token punctuation">(</span><span class="token class-name">OAuth2Utils</span><span class="token punctuation">.</span><span class="token function">parseParameterList</span><span class="token punctuation">(</span>parameters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">OAuth2Utils</span><span class="token punctuation">.</span>SCOPE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>        <span class="token comment">//获取token对象的真正的地方 2 </span><span class="token class-name">OAuth2AccessToken</span> token <span class="token operator">=</span> <span class="token function">getTokenGranter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">grant</span><span class="token punctuation">(</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getGrantType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedGrantTypeException</span><span class="token punctuation">(</span><span class="token string">"Unsupported grant type"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">getResponse</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li> TokenRequest  对象如下</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"serial"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TokenRequest</span> <span class="token keyword">extends</span> <span class="token class-name">BaseRequest</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token class-name">String</span> grantType<span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"serial"</span><span class="token punctuation">)</span><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseRequest</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token class-name">String</span> clientId<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> scope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> requestParameters <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">unmodifiableMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>TokenRequest 请求中的参数做了封装，包括客户端id,授权方式，授权所用的其他参数等。</p><ol start="2"><li>getTokenGranter()会获取授权方式对应的TokenGranter，<br><img src="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/yuanma02.jpg" alt="yuanma02"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CompositeTokenGranter</span> <span class="token keyword">implements</span> <span class="token class-name">TokenGranter</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TokenGranter</span><span class="token punctuation">></span></span> tokenGranters<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">CompositeTokenGranter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TokenGranter</span><span class="token punctuation">></span></span> tokenGranters<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tokenGranters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TokenGranter</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>tokenGranters<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">OAuth2AccessToken</span> <span class="token function">grant</span><span class="token punctuation">(</span><span class="token class-name">String</span> grantType<span class="token punctuation">,</span> <span class="token class-name">TokenRequest</span> tokenRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TokenGranter</span> granter <span class="token operator">:</span> tokenGranters<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//遍历授权器 调用授权器的方法获取token</span><span class="token class-name">OAuth2AccessToken</span> grant <span class="token operator">=</span> granter<span class="token punctuation">.</span><span class="token function">grant</span><span class="token punctuation">(</span>grantType<span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 </span><span class="token keyword">if</span> <span class="token punctuation">(</span>grant<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> grant<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>grant()方法调用的是抽象类里的方法</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractTokenGranter</span> <span class="token keyword">implements</span> <span class="token class-name">TokenGranter</span> <span class="token punctuation">&#123;</span><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">Log</span> logger <span class="token operator">=</span> <span class="token class-name">LogFactory</span><span class="token punctuation">.</span><span class="token function">getLog</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AuthorizationServerTokenServices</span> tokenServices<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">OAuth2AccessToken</span> <span class="token function">grant</span><span class="token punctuation">(</span><span class="token class-name">String</span> grantType<span class="token punctuation">,</span> <span class="token class-name">TokenRequest</span> tokenRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>grantType<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>grantType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">String</span> clientId <span class="token operator">=</span> tokenRequest<span class="token punctuation">.</span><span class="token function">getClientId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">ClientDetails</span> client <span class="token operator">=</span> clientDetailsService<span class="token punctuation">.</span><span class="token function">loadClientByClientId</span><span class="token punctuation">(</span>clientId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">validateGrantType</span><span class="token punctuation">(</span>grantType<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"Getting access token for: "</span> <span class="token operator">+</span> clientId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">protected</span> <span class="token class-name">OAuth2AccessToken</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token class-name">ClientDetails</span> client<span class="token punctuation">,</span> <span class="token class-name">TokenRequest</span> tokenRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> tokenServices<span class="token punctuation">.</span><span class="token function">createAccessToken</span><span class="token punctuation">(</span><span class="token function">getOAuth2Authentication</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 </span><span class="token punctuation">&#125;</span><span class="token keyword">protected</span> <span class="token class-name">OAuth2Authentication</span> <span class="token function">getOAuth2Authentication</span><span class="token punctuation">(</span><span class="token class-name">ClientDetails</span> client<span class="token punctuation">,</span> <span class="token class-name">TokenRequest</span> tokenRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">OAuth2Request</span> storedOAuth2Request <span class="token operator">=</span> requestFactory<span class="token punctuation">.</span><span class="token function">createOAuth2Request</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OAuth2Authentication</span><span class="token punctuation">(</span>storedOAuth2Request<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>我们以密码模式为例看授权器如何获取到token   </li></ul><p>密码模式对应的为ResourceOwnerPasswordTokenGranter </p><p>上面的 getOAuth2Authentication(client, tokenRequest) 方法调用的是 ResourceOwnerPasswordTokenGranter 实现类里面的方法。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceOwnerPasswordTokenGranter</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractTokenGranter</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> GRANT_TYPE <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">ResourceOwnerPasswordTokenGranter</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">,</span><span class="token class-name">AuthorizationServerTokenServices</span> tokenServices<span class="token punctuation">,</span> <span class="token class-name">ClientDetailsService</span> clientDetailsService<span class="token punctuation">,</span> <span class="token class-name">OAuth2RequestFactory</span> requestFactory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">(</span>authenticationManager<span class="token punctuation">,</span> tokenServices<span class="token punctuation">,</span> clientDetailsService<span class="token punctuation">,</span> requestFactory<span class="token punctuation">,</span> GRANT_TYPE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">protected</span> <span class="token class-name">ResourceOwnerPasswordTokenGranter</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">,</span> <span class="token class-name">AuthorizationServerTokenServices</span> tokenServices<span class="token punctuation">,</span><span class="token class-name">ClientDetailsService</span> clientDetailsService<span class="token punctuation">,</span> <span class="token class-name">OAuth2RequestFactory</span> requestFactory<span class="token punctuation">,</span> <span class="token class-name">String</span> grantType<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">(</span>tokenServices<span class="token punctuation">,</span> clientDetailsService<span class="token punctuation">,</span> requestFactory<span class="token punctuation">,</span> grantType<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>authenticationManager <span class="token operator">=</span> authenticationManager<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token class-name">OAuth2Authentication</span> <span class="token function">getOAuth2Authentication</span><span class="token punctuation">(</span><span class="token class-name">ClientDetails</span> client<span class="token punctuation">,</span> <span class="token class-name">TokenRequest</span> tokenRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> parameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getRequestParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> username <span class="token operator">=</span> parameters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> password <span class="token operator">=</span> parameters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Protect from downstream leaks of password</span>parameters<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Authentication</span> userAuth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AbstractAuthenticationToken</span><span class="token punctuation">)</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDetails</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>userAuth <span class="token operator">=</span> authenticationManager<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 </span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">AccountStatusException</span> ase<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">//covers expired, locked, disabled cases (mentioned in section 5.2, draft 31)</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidGrantException</span><span class="token punctuation">(</span>ase<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BadCredentialsException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// If the username/password are wrong the spec says we should send 400/invalid grant</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidGrantException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>userAuth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidGrantException</span><span class="token punctuation">(</span><span class="token string">"Could not authenticate user: "</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">OAuth2Request</span> storedOAuth2Request <span class="token operator">=</span> <span class="token function">getRequestFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createOAuth2Request</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OAuth2Authentication</span><span class="token punctuation">(</span>storedOAuth2Request<span class="token punctuation">,</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>比较重要的是注释1  </p><p>会通过authenticationManager的实现类ProviderManager来验证传入的信息。</p><p>ProviderManager维护AuthenticationProvide集合，遍历AuthenticationProvide集合，如果哪一个支持，则使用这个AuthenticationProvide实现类。<br><img src="/2022/01/04/spring-oauth2-03-huo-qu-token-de-liu-cheng/yuanma04.jpg" alt="yuanma04"></p><p>密码模式对应的AuthenticationProvide实现类就是 DaoAuthenticationProvider</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaoAuthenticationProvider</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractUserDetailsAuthenticationProvider</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token class-name">PasswordEncoder</span> passwordEncoder<span class="token punctuation">;</span><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">UserDetails</span> <span class="token function">retrieveUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">UsernamePasswordAuthenticationToken</span> authentication<span class="token punctuation">)</span><span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">&#123;</span><span class="token function">prepareTimingAttackProtection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span><span class="token class-name">UserDetails</span> loadedUser <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getUserDetailsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadUserByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>loadedUser <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalAuthenticationServiceException</span><span class="token punctuation">(</span><span class="token string">"UserDetailsService returned null, which is an interface contract violation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> loadedUser<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UsernameNotFoundException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">mitigateAgainstTimingAttack</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">throw</span> ex<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InternalAuthenticationServiceException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> ex<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalAuthenticationServiceException</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractUserDetailsAuthenticationProvider</span> <span class="token keyword">implements</span><span class="token class-name">AuthenticationProvider</span><span class="token punctuation">,</span> <span class="token class-name">InitializingBean</span><span class="token punctuation">,</span> <span class="token class-name">MessageSourceAware</span> <span class="token punctuation">&#123;</span><span class="token keyword">public</span> <span class="token class-name">Authentication</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span>  <span class="token comment">//2 </span><span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span> <span class="token punctuation">&#123;</span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">isInstanceOf</span><span class="token punctuation">(</span><span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> authentication<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-></span> messages<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">"AbstractUserDetailsAuthenticationProvider.onlySupports"</span><span class="token punctuation">,</span><span class="token string">"Only UsernamePasswordAuthenticationToken is supported"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Determine username</span><span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token punctuation">(</span>authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"NONE_PROVIDED"</span><span class="token operator">:</span> authentication<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> cacheWasUsed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token class-name">UserDetails</span> user <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userCache<span class="token punctuation">.</span><span class="token function">getUserFromCache</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>cacheWasUsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>user <span class="token operator">=</span> <span class="token function">retrieveUser</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">)</span> authentication<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 </span><span class="token punctuation">&#125;</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span>```  在<span class="token class-name">AbstractUserDetailsAuthenticationProvider</span>的authenticate方法 返回的userAuth是一个<span class="token class-name">Authentication</span>对象（具体是那个实现类不同授权模式不同）。最终在<span class="token class-name">ResourceOwnerPasswordTokenGranter</span>中返回一个<span class="token class-name">OAuth2Authentication</span>对象，这是tokenrequest对象和<span class="token class-name">Authentication</span>对象的封装。<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>小结  <span class="token operator">*</span><span class="token operator">*</span>源码读到现在，可以知晓它做的事情是。<span class="token operator">*</span><span class="token operator">*</span><span class="token number">1.</span> 我们拿到传递来的用户信息。<span class="token number">2.</span> 根据信息里的授权模式找到了对应的授权类。<span class="token number">3.</span> 对应的授权类又找到对应的认证类提供商进行了认证。<span class="token number">4.</span> 使用传递过来的用户信息和认证得到的用户信息，得到<span class="token class-name">OAuth2Authentication</span>对象。##### <span class="token number">2.</span> 生成token那么接下来就是拿着这个对象去生成token对象了<span class="token operator">!</span><span class="token punctuation">[</span>yuanma05<span class="token punctuation">]</span><span class="token punctuation">(</span>spring<span class="token operator">-</span>oauth2<span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span>获取token的流程<span class="token operator">/</span>yuanma05<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span>tokenServices官方暂时只有一个实现类<span class="token class-name">DefaultTokenServices</span><span class="token operator">!</span><span class="token punctuation">[</span>yuanma05<span class="token punctuation">]</span><span class="token punctuation">(</span>spring<span class="token operator">-</span>oauth2<span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span>获取token的流程<span class="token operator">/</span>yuanma06<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span><span class="token class-name">DefaultTokenServices</span>调用tokenstore获取token。   官方实现的tokenStore<span class="token operator">-</span> <span class="token class-name">RedisTokenStore</span><span class="token operator">-</span> <span class="token class-name">InMemoryTokenStore</span><span class="token operator">-</span> <span class="token class-name">JdbcTokenStore</span> <span class="token operator">-</span> <span class="token class-name">JwtTokenStore</span>每一种tokenStore，实现的细节都不同。要使用什么tokenStore自己可以使用第二篇将的配置授权服务器配置。我们以<span class="token class-name">RedisTokenStore</span>为例探究<span class="token operator">!</span><span class="token punctuation">[</span>yuanma07<span class="token punctuation">]</span><span class="token punctuation">(</span>spring<span class="token operator">-</span>oauth2<span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span>获取token的流程<span class="token operator">/</span>yuanma07<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span><span class="token operator">-</span> 根据传入的<span class="token class-name">OAuth2Authentication</span> 生成一个key，猜测这个key应当和用户信息有关。<span class="token operator">-</span> 如果redis中没有这个key<span class="token punctuation">,</span>那么accesstoken为<span class="token keyword">null</span>。返回<span class="token keyword">null</span><span class="token punctuation">.</span><span class="token operator">-</span> 如果有，则说明已经登陆，则更新。<span class="token comment">//2</span>如果为<span class="token keyword">null</span> 返回上一层方法。<span class="token operator">!</span><span class="token punctuation">[</span>yuanma08<span class="token punctuation">]</span><span class="token punctuation">(</span>spring<span class="token operator">-</span>oauth2<span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span>获取token的流程<span class="token operator">/</span>yuanma08<span class="token punctuation">.</span>jpg<span class="token punctuation">)</span>  <span class="token operator">-</span> 创建accesstoken<span class="token operator">-</span> 存储token<span class="token operator">-</span> 存储刷新token<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">></span>小结<span class="token operator">*</span><span class="token operator">*</span>生成token的过过程如下<span class="token operator">*</span><span class="token operator">*</span><span class="token number">1.</span> 获取<span class="token class-name">TokenServices</span><span class="token number">2.</span> <span class="token class-name">TokenServices</span>调用配置的 <span class="token class-name">TokenStore</span> 获取token### <span class="token number">2.</span> 修改我们要修改框架，让他可以做微服务的授权中心。 #### <span class="token number">1.</span>生成token的简化流程  <span class="token operator">></span>整体的生成token的过程可以梳理一下<span class="token operator">></span> <span class="token number">1.</span> 获取处理传入的信息<span class="token operator">></span> <span class="token number">2.</span> 获取授权类 <span class="token punctuation">(</span>根据传入的授权模式<span class="token punctuation">)</span><span class="token operator">></span> <span class="token number">3.</span> 进行用户认证<span class="token punctuation">(</span>根据授权类掉用时传入的对象，委托模式<span class="token punctuation">)</span><span class="token operator">></span> <span class="token number">4.</span> 认证通过一个对象<span class="token operator">></span> <span class="token number">5.</span> 获取<span class="token class-name">TokenService</span> <span class="token operator">></span> <span class="token number">6.</span> 使用<span class="token class-name">TokenStore</span> 获取<span class="token function">token</span><span class="token punctuation">(</span>配置<span class="token punctuation">)</span>改造<span class="token number">1.</span> 一是增加授权模式 <span class="token number">2.</span> 增加认证模式 <span class="token number">3.</span> 增加tokenStore ，例如增加mogodb等存储方式，生成方法等。<span class="token number">4.</span> <span class="token class-name">TokenService</span> 方法增强授权模式和认证模式是一对一的#### 增加一种授权模式 以增加手机号验证码为例子<span class="token number">1.</span> 首先增加一个<span class="token class-name">TokenGranter</span>   ```java<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobileSMSGranter</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractTokenGranter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> GRANT_TYPE <span class="token operator">=</span> <span class="token string">"mobile_sms"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MobileSMSGranter</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">,</span> <span class="token class-name">AuthorizationServerTokenServices</span> tokenServices            <span class="token punctuation">,</span> <span class="token class-name">ClientDetailsService</span> clientDetailsService<span class="token punctuation">,</span> <span class="token class-name">OAuth2RequestFactory</span> requestFactory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>tokenServices<span class="token punctuation">,</span> clientDetailsService<span class="token punctuation">,</span> requestFactory<span class="token punctuation">,</span> GRANT_TYPE<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>authenticationManager <span class="token operator">=</span> authenticationManager<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">OAuth2Authentication</span> <span class="token function">getOAuth2Authentication</span><span class="token punctuation">(</span><span class="token class-name">ClientDetails</span> client<span class="token punctuation">,</span> <span class="token class-name">TokenRequest</span> tokenRequest<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> parameters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>tokenRequest<span class="token punctuation">.</span><span class="token function">getRequestParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> mobile <span class="token operator">=</span> parameters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"mobile"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> sms <span class="token operator">=</span> parameters<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"sms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Protect from downstream leaks of sms</span>        parameters<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"sms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Authentication</span> userAuth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MobileSMSAuthenticationToken</span><span class="token punctuation">(</span>mobile<span class="token punctuation">,</span> sms<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 </span>        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AbstractAuthenticationToken</span><span class="token punctuation">)</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDetails</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2 </span>        userAuth <span class="token operator">=</span> authenticationManager<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>userAuth<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidGrantException</span><span class="token punctuation">(</span><span class="token string">"Could not authenticate mobile: "</span> <span class="token operator">+</span> mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">OAuth2Request</span> storedOAuth2Request <span class="token operator">=</span> <span class="token function">getRequestFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createOAuth2Request</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> tokenRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OAuth2Authentication</span><span class="token punctuation">(</span>storedOAuth2Request<span class="token punctuation">,</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意注释1处，要根据这个类判断调用哪种认证器。</p><ol start="2"><li>增加AbstractAuthenticationToken实现类</li></ol><p>基本上和UsernamePasswordAuthenticationToken 这个官方实现类一样。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobileSMSAuthenticationToken</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAuthenticationToken</span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token class-name">SpringSecurityCoreVersion</span><span class="token punctuation">.</span>SERIAL_VERSION_UID<span class="token punctuation">;</span><span class="token comment">// ~ Instance fields</span><span class="token comment">// ================================================================================================</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> principal<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Object</span> credentials<span class="token punctuation">;</span><span class="token comment">// ~ Constructors</span><span class="token comment">// ===================================================================================================</span><span class="token comment">/** * This constructor can be safely used by any code that wishes to create a * &lt;code>UsernamePasswordAuthenticationToken&lt;/code>, as the &#123;@link #isAuthenticated()&#125; * will return &lt;code>false&lt;/code>. * */</span><span class="token keyword">public</span> <span class="token class-name">MobileSMSAuthenticationToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> mobile<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> mobile<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>credentials <span class="token operator">=</span> password<span class="token punctuation">;</span><span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * This constructor should only be used by &lt;code>AuthenticationManager&lt;/code> or * &lt;code>AuthenticationProvider&lt;/code> implementations that are satisfied with * producing a trusted (i.e. &#123;@link #isAuthenticated()&#125; = &lt;code>true&lt;/code>) * authentication token. * * @param principal * @param authorities */</span><span class="token keyword">public</span> <span class="token class-name">MobileSMSAuthenticationToken</span><span class="token punctuation">(</span><span class="token class-name">Object</span> principal<span class="token punctuation">,</span> <span class="token class-name">Object</span> credentials<span class="token punctuation">,</span>                                        <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">GrantedAuthority</span><span class="token punctuation">></span></span> authorities<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">(</span>authorities<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>principal <span class="token operator">=</span> principal<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>credentials <span class="token operator">=</span> credentials<span class="token punctuation">;</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// ~ Methods</span><span class="token comment">// ========================================================================================================</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>credentials<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>principal<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isAuthenticated<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>isAuthenticated<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Cannot set this token to trusted - use constructor which takes a GrantedAuthority list instead"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setAuthenticated</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eraseCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">eraseCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>增加一个认证处理器</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobileSMSAuthenticationProvider</span> <span class="token keyword">implements</span> <span class="token class-name">AuthenticationProvider</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">UserDetailServiceFactory</span> userDetailsServiceFactory<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">PasswordEncoder</span> passwordEncoder<span class="token punctuation">;</span>    <span class="token comment">//发送消息服务 用于验证验证码</span>    <span class="token keyword">private</span> <span class="token class-name">MessageFeign</span>  messageFeign<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Authentication</span> <span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">MobileSMSAuthenticationToken</span> authenticationToken <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MobileSMSAuthenticationToken</span><span class="token punctuation">)</span> authentication<span class="token punctuation">;</span>        <span class="token class-name">String</span> mobile <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> authenticationToken<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> sms <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> authenticationToken<span class="token punctuation">.</span><span class="token function">getCredentials</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//加载用户信息</span>        <span class="token class-name">UserDetails</span> user <span class="token operator">=</span> userDetailsServiceFactory<span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span>authenticationToken<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadUserByMobile</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalAuthenticationServiceException</span><span class="token punctuation">(</span><span class="token string">"手机号错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//调用信息接口获取电话号码对应的验证码</span>        <span class="token class-name">Result</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">></span></span> booleanResult <span class="token operator">=</span> messageFeign<span class="token punctuation">.</span><span class="token function">smsCodeValid</span><span class="token punctuation">(</span>mobile<span class="token punctuation">,</span> <span class="token class-name">SmsCodeTemplateEnums</span><span class="token punctuation">.</span>ADMIN_SEND<span class="token punctuation">.</span><span class="token function">getTemplateCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sms<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Boolean</span> data <span class="token operator">=</span> booleanResult<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InternalAuthenticationServiceException</span><span class="token punctuation">(</span><span class="token string">"验证码错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">MobileSMSAuthenticationToken</span> authenticationResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MobileSMSAuthenticationToken</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> sms<span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getAuthorities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        authenticationResult<span class="token punctuation">.</span><span class="token function">setDetails</span><span class="token punctuation">(</span>authenticationToken<span class="token punctuation">.</span><span class="token function">getDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> authenticationResult<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supports</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> authentication<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">MobileSMSAuthenticationToken</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>authentication<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li><p>将这个类配置进框架</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobileSMSAuthenticationSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">SecurityConfigurerAdapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DefaultSecurityFilterChain</span><span class="token punctuation">,</span> <span class="token class-name">HttpSecurity</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">UserDetailServiceFactory</span> userDetailsServiceFactory<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">PasswordEncoder</span> passwordEncoder<span class="token punctuation">;</span>    <span class="token comment">//发送消息服务 用于验证验证码</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">MessageFeign</span> messageFeign<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//mobile provider</span>        <span class="token class-name">MobileSMSAuthenticationProvider</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MobileSMSAuthenticationProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        provider<span class="token punctuation">.</span><span class="token function">setUserDetailsServiceFactory</span><span class="token punctuation">(</span>userDetailsServiceFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>        provider<span class="token punctuation">.</span><span class="token function">setPasswordEncoder</span><span class="token punctuation">(</span>passwordEncoder<span class="token punctuation">)</span><span class="token punctuation">;</span>        provider<span class="token punctuation">.</span><span class="token function">setMessageFeign</span><span class="token punctuation">(</span>messageFeign<span class="token punctuation">)</span><span class="token punctuation">;</span>        http<span class="token punctuation">.</span><span class="token function">authenticationProvider</span><span class="token punctuation">(</span>provider<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>要将这个TokenGranter 配置进框架<br>自定义bean list，然后配置进授权配置类。  </p></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">TokenGranter</span> <span class="token function">tokenGranter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>配置类中配置    <span class="token comment">/**     * 配置身份认证器，配置认证方式，TokenStore，TokenGranter，OAuth2RequestFactory     * @param endpoints     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthorizationServerEndpointsConfigurer</span> endpoints<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        endpoints<span class="token punctuation">.</span><span class="token function">tokenStore</span><span class="token punctuation">(</span>tokenStore<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">authenticationManager</span><span class="token punctuation">(</span>authenticationManager<span class="token punctuation">)</span>                <span class="token comment">//.userDetailsService(userDetailsServiceFactory.getService(SecurityConstants.DEF_ACCOUNT_TYPE))</span>                <span class="token punctuation">.</span><span class="token function">authorizationCodeServices</span><span class="token punctuation">(</span>authorizationCodeServices<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">exceptionTranslator</span><span class="token punctuation">(</span>webResponseExceptionTranslator<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">tokenGranter</span><span class="token punctuation">(</span>tokenGranter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>认证方式增加到框架<br>在SecurityConfig 配置类中添加。<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//授权服务器关闭basic认证</span>                    <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logoutUrl</span><span class="token punctuation">(</span><span class="token class-name">SecurityConstants</span><span class="token punctuation">.</span>LOGOUT_URL<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logoutSuccessHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OauthLogoutSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLogoutHandler</span><span class="token punctuation">(</span>oauthLogoutHandler<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearAuthentication</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>openIdAuthenticationSecurityConfig<span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>mobileAuthenticationSecurityConfig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>mobileSMSAuthenticationSecurityConfig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addFilterBefore</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginProcessSetTenantFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">UsernamePasswordAuthenticationFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 解决不允许显示在iframe的问题</span><span class="token punctuation">.</span><span class="token function">headers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">frameOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cacheControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h4 id="增强redis"><a href="#增强redis" class="headerlink" title="增强redis"></a>增强redis</h4><h4 id="其他修改的方法"><a href="#其他修改的方法" class="headerlink" title="其他修改的方法"></a>其他修改的方法</h4><pre><code>todo</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> spring-security </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-oauth2-02 spring的实现</title>
      <link href="/2022/01/04/spring-oauth2-02-spring-de-shi-xian/"/>
      <url>/2022/01/04/spring-oauth2-02-spring-de-shi-xian/</url>
      
        <content type="html"><![CDATA[<h2 id="spring-oauth2-02-spring的实现"><a href="#spring-oauth2-02-spring的实现" class="headerlink" title="spring-oauth2-02 spring的实现"></a>spring-oauth2-02 spring的实现</h2><h3 id="1-spring-security-oauth2是什么"><a href="#1-spring-security-oauth2是什么" class="headerlink" title="1. spring security oauth2是什么"></a>1. spring security oauth2是什么</h3><blockquote><p>他是基于spring security 的oauth2实现<br>前面我们已经讨论了oauth2是一种规范，那么spring security oauth2便是对这种规范的实现，<br>spring security oauth2对授权服务器和资源服务器做了实现，<br>如同我们前面所说，授权服务器是获取token,资源服务器是使用和验证token。</p></blockquote><p><img src="/2022/01/04/spring-oauth2-02-spring-de-shi-xian/oauth2-01.jpg" alt="授权服务器"></p><ul><li>spring security oauth2的授权服务器提供的功能如上图所示。<br>这几个端点通过url对外暴露  </li></ul><ol><li>授权端点，可以授权。</li><li>获取token</li><li>验证token</li><li>撤销token</li></ol><ul><li>spring security oauth2的架构如下<br><img src="/2022/01/04/spring-oauth2-02-spring-de-shi-xian/oauth2-02.jpg" alt="架构"></li></ul><p>可以看出 spring security oauth2 </p><blockquote><p>1.提供了一个较为完善的的授权服务器的框架，但我们还是要在他上面做一些封装和开发，以适应项目的要求。<br>2.提供了一个资源访问的客户端，用来帮助第三方（第一方）客户端获取授权和访问资源。</p></blockquote><h3 id="2-基于spring-security-oauth2的-授权模式的实现"><a href="#2-基于spring-security-oauth2的-授权模式的实现" class="headerlink" title="2. 基于spring security oauth2的 授权模式的实现"></a>2. 基于spring security oauth2的 授权模式的实现</h3><p>本小节主要是使用spring security oauth2来实现几种授权方式（获取token的方式）<br>参考<a href="https://github.com/hcqbuqingzhen/oauth2lab">波波微课oauth2</a>实现</p><h4 id="2-1-授权码实现"><a href="#2-1-授权码实现" class="headerlink" title="2.1 授权码实现"></a>2.1 授权码实现</h4><ol><li>需要的依赖<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- for OAuth 2.0 --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.security.oauth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-security-oauth2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>配置授权服务器。<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//授权服务器配置</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableAuthorizationServer</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2AuthorizationServer</span> <span class="token keyword">extends</span>        <span class="token class-name">AuthorizationServerConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">ClientDetailsServiceConfigurer</span> clients<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        clients<span class="token punctuation">.</span><span class="token function">inMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withClient</span><span class="token punctuation">(</span><span class="token string">"clientapp"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token string">"112233"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">redirectUris</span><span class="token punctuation">(</span><span class="token string">"http://localhost:9001/callback"</span><span class="token punctuation">)</span>            <span class="token comment">// 授权码模式</span>            <span class="token punctuation">.</span><span class="token function">authorizedGrantTypes</span><span class="token punctuation">(</span><span class="token string">"authorization_code"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">scopes</span><span class="token punctuation">(</span><span class="token string">"read_userinfo"</span><span class="token punctuation">,</span> <span class="token string">"read_contacts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>资源服务器配置<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//资源服务配置</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableResourceServer</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2ResourceServer</span> <span class="token keyword">extends</span> <span class="token class-name">ResourceServerConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/api/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>资源服务器和授权服务器可以是同一台  </p><ol start="4"><li>资源接口<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">&#123;</span><span class="token comment">// 资源API</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/userinfo"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span><span class="token punctuation">></span></span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> email <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"@spring2go.com"</span><span class="token punctuation">;</span>        <span class="token class-name">UserInfo</span> userInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userInfo<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userInfo<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">ResponseEntity</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>验证流程  </li></ol><ul><li>获取授权码  </li></ul><blockquote><p>浏览器请求：<br><a href="http://localhost:8080/oauth/authorize?client_id=clientapp&amp;redirect_uri=http://localhost:9001/callback&amp;response_type=code&amp;scope=read_userinfo">http://localhost:8080/oauth/authorize?client_id=clientapp&amp;redirect_uri=http://localhost:9001/callback&amp;response_type=code&amp;scope=read_userinfo</a></p></blockquote><pre><code>注意：state参数暂忽略</code></pre><p>响应案例：</p><blockquote><p><a href="http://localhost:9001/callback?code=8uYpdo">http://localhost:9001/callback?code=8uYpdo</a></p></blockquote><ul><li>获取访问令牌<blockquote><p>curl -X POST –user clientapp:123456 <a href="http://localhost:8080/oauth/token">http://localhost:8080/oauth/token</a> -H “content-type: application/x-www-form-urlencoded” -d “code=8uYpdo&amp;grant_type=authorization_code&amp;redirect_uri=http%3A%2F%2Flocalh ost%3A9001%2Fcallback&amp;scope=read_userinfo”</p></blockquote></li></ul><p>案例响应：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"access_token"</span><span class="token operator">:</span> <span class="token string">"36cded80-b6f5-43b7-bdfc-594788a24530"</span><span class="token punctuation">,</span>    <span class="token property">"token_type"</span><span class="token operator">:</span> <span class="token string">"bearer"</span><span class="token punctuation">,</span>    <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">43199</span><span class="token punctuation">,</span>    <span class="token property">"scope"</span><span class="token operator">:</span> <span class="token string">"read_userinfo"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>访问资源调用API<blockquote><p>curl -X GET <a href="http://localhost:8080/api/userinfo">http://localhost:8080/api/userinfo</a> -H “authorization: Bearer 36cded80-b6f5-43b7-bdfc-594788a24530”</p></blockquote></li></ul><p>案例响应：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"bobo"</span><span class="token punctuation">,</span>    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"bobo@spring2go.com"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-2-简化模式实现"><a href="#2-2-简化模式实现" class="headerlink" title="2.2 简化模式实现"></a>2.2 简化模式实现</h4><ol><li><p>依赖配置<br>同2.1  </p></li><li><p>服务器配置</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//授权服务器配置</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableAuthorizationServer</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2AuthorizationServer</span> <span class="token keyword">extends</span>        <span class="token class-name">AuthorizationServerConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">ClientDetailsServiceConfigurer</span> clients<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        clients<span class="token punctuation">.</span><span class="token function">inMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withClient</span><span class="token punctuation">(</span><span class="token string">"clientapp"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token string">"112233"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">redirectUris</span><span class="token punctuation">(</span><span class="token string">"http://localhost:9001/callback"</span><span class="token punctuation">)</span>            <span class="token comment">// 简化模式</span>            <span class="token punctuation">.</span><span class="token function">authorizedGrantTypes</span><span class="token punctuation">(</span><span class="token string">"implicit"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">accessTokenValiditySeconds</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">scopes</span><span class="token punctuation">(</span><span class="token string">"read_userinfo"</span><span class="token punctuation">,</span> <span class="token string">"read_contacts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>资源服务器配置<br> 同2.1</p></li><li><p>资源接口<br>同2.1  </p></li><li><p>验证流程    </p></li></ol><ul><li>获取访问令牌</li></ul><p>浏览器请求：</p><blockquote><p><a href="http://localhost:8080/oauth/authorize?client_id=clientapp&amp;redirect_uri=http://localhost:9001/callback&amp;response_type=token&amp;scope=read_userinfo&amp;state=abc">http://localhost:8080/oauth/authorize?client_id=clientapp&amp;redirect_uri=http://localhost:9001/callback&amp;response_type=token&amp;scope=read_userinfo&amp;state=abc</a></p></blockquote><p>响应案例：</p><blockquote><p><a href="http://localhost:9001/callback#access_token=0406040a-779e-4b5e-adf1-bf2f02031e83&amp;token_type=bearer&amp;state=abc&amp;expires_in=119">http://localhost:9001/callback#access_token=0406040a-779e-4b5e-adf1-bf2f02031e83&amp;token_type=bearer&amp;state=abc&amp;expires_in=119</a></p></blockquote><ul><li>调用API<blockquote><p>curl -X GET <a href="http://localhost:8080/api/userinfo">http://localhost:8080/api/userinfo</a> -H “authorization: Bearer 0406040a-779e-4b5e-adf1-bf2f02031e83”</p></blockquote></li></ul><p>案例响应：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"bobo"</span><span class="token punctuation">,</span>    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"bobo@spring2go.com"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-3-密码模式实现"><a href="#2-3-密码模式实现" class="headerlink" title="2.3 密码模式实现"></a>2.3 密码模式实现</h4><ol><li><p>依赖配置<br>同2.1  </p></li><li><p>服务器配置  </p><blockquote><p>密码模式一步就实现了，要认证和授权都做，需要配置用户认证器。</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 授权服务器配置</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableAuthorizationServer</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2AuthorizationServer</span> <span class="token keyword">extends</span>        <span class="token class-name">AuthorizationServerConfigurerAdapter</span> <span class="token punctuation">&#123;</span><span class="token comment">// 用户认证</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">AuthenticationManager</span> authenticationManager<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthorizationServerEndpointsConfigurer</span> endpoints<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        endpoints<span class="token punctuation">.</span><span class="token function">authenticationManager</span><span class="token punctuation">(</span>authenticationManager<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">ClientDetailsServiceConfigurer</span> clients<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        clients<span class="token punctuation">.</span><span class="token function">inMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withClient</span><span class="token punctuation">(</span><span class="token string">"clientapp"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token string">"112233"</span><span class="token punctuation">)</span>            <span class="token comment">// 密码模式</span>            <span class="token punctuation">.</span><span class="token function">authorizedGrantTypes</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">scopes</span><span class="token punctuation">(</span><span class="token string">"read_userinfo"</span><span class="token punctuation">,</span> <span class="token string">"read_contacts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>资源服务器配置<br> 同2.1</p></li><li><p>资源接口<br>同2.1 </p></li><li><p>验证流程  </p></li></ol><ul><li>获取访问令牌<blockquote><p>curl -X POST –user clientapp:112233 <a href="http://localhost:8080/oauth/token">http://localhost:8080/oauth/token</a> -H “accept: application/json” -H “content-type: application/x-www-form-urlencoded” -d “grant_type=password&amp;username=bobo&amp;password=xyz&amp;scope=read_userinfo”</p></blockquote></li></ul><p>响应案例：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"access_token"</span><span class="token operator">:</span> <span class="token string">"58a02fd5-87f5-44ff-bbdd-d429cf6a2f60"</span><span class="token punctuation">,</span>    <span class="token property">"token_type"</span><span class="token operator">:</span> <span class="token string">"bearer"</span><span class="token punctuation">,</span>    <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">43199</span><span class="token punctuation">,</span>    <span class="token property">"scope"</span><span class="token operator">:</span> <span class="token string">"read_userinfo"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>调用API<blockquote><p>curl -X GET <a href="http://localhost:8080/api/userinfo">http://localhost:8080/api/userinfo</a> -H “authorization: Bearer 58a02fd5-87f5-44ff-bbdd-d429cf6a2f60”</p></blockquote></li></ul><p>案例响应：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"bobo"</span><span class="token punctuation">,</span>    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"bobo@spring2go.com"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-4-客户端模式实现"><a href="#2-4-客户端模式实现" class="headerlink" title="2.4 客户端模式实现"></a>2.4 客户端模式实现</h4><ol><li><p>依赖配置<br>同2.1  </p></li><li><p>服务器配置  </p><blockquote><p>密码模式一步就实现了，要认证和授权都做，需要配置用户认证器。</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 授权服务器配置</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableAuthorizationServer</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OAuth2AuthorizationServer</span> <span class="token keyword">extends</span>        <span class="token class-name">AuthorizationServerConfigurerAdapter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">ClientDetailsServiceConfigurer</span> clients<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        clients<span class="token punctuation">.</span><span class="token function">inMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withClient</span><span class="token punctuation">(</span><span class="token string">"clientdevops"</span><span class="token punctuation">)</span>            <span class="token comment">// 密码模式</span>            <span class="token punctuation">.</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token string">"789"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">authorizedGrantTypes</span><span class="token punctuation">(</span><span class="token string">"client_credentials"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">scopes</span><span class="token punctuation">(</span><span class="token string">"devops"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>资源服务器配置<br> 同2.1</p></li><li><p>资源接口<br>同2.1 </p></li><li><p>验证流程  </p></li></ol><ul><li>获取访问令牌<blockquote><p>curl -X POST “<a href="http://localhost:8080/oauth/token&quot;">http://localhost:8080/oauth/token&quot;</a> –user clientdevops:789 -d “grant_type=client_credentials&amp;scope=devops”</p></blockquote></li></ul><p>响应案例：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"access_token"</span><span class="token operator">:</span> <span class="token string">"776b162a-949e-4dcb-b16b-9985e8171dc0"</span><span class="token punctuation">,</span>    <span class="token property">"token_type"</span><span class="token operator">:</span> <span class="token string">"bearer"</span><span class="token punctuation">,</span>    <span class="token property">"expires_in"</span><span class="token operator">:</span> <span class="token number">43188</span><span class="token punctuation">,</span>    <span class="token property">"scope"</span><span class="token operator">:</span> <span class="token string">"devops"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>调用API<blockquote><p>curl -X GET <a href="http://localhost:8080/api/user">http://localhost:8080/api/user</a> -H “authorization: Bearer 776b162a-949e-4dcb-b16b-9985e8171dc0”</p></blockquote></li></ul><p>案例响应：</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"bobo"</span><span class="token punctuation">,</span>        <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"bobo@spring2go.com"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们可以看到框架对规范定义的几种授权方式做了很好的实现，这几种方式用在第三方登陆是可以的。    </p><p>但在微服务中使用这个框架做服务本身的授权服务器是远远不够的。比如我们想要用户验证码登陆，手机号密码登陆，扫码登陆等 框架的四种模式就无法授权了。因此我们需要在框架的基础上做改造，使它符合我们的要求。   </p><p>那么我们怎么改造呢？ 如果我们想要在框架的基础上做改造，首先要明白它的原理，知道在哪里扩展。因此第三节我们将探究认证的流程，对框架的源码做简单分析。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>spring-oauth2-01-oauth2认识</title>
      <link href="/2022/01/04/spring-oauth2-01-oauth2-ren-shi/"/>
      <url>/2022/01/04/spring-oauth2-01-oauth2-ren-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="spring-oauth2-01-oauth2-认识"><a href="#spring-oauth2-01-oauth2-认识" class="headerlink" title="spring-oauth2-01 oauth2 认识"></a>spring-oauth2-01 oauth2 认识</h2><h3 id="1-oauth2-是什么"><a href="#1-oauth2-是什么" class="headerlink" title="1. oauth2 是什么"></a>1. oauth2 是什么</h3><blockquote><p>先上结论，oauth2是一种给予权限(认证、发令牌)的规范，现在是由几个大互联网大厂共同维护。针对此规范，不同的厂商有不同的实现。不同的产品细节不同，内部如何实现也不同，但他们都遵循基本的oauth2规范。  </p></blockquote><p>oauth2规范有三个角色。</p><ul><li>用户 资源拥有者</li><li>客户端 想要拿用户资源</li><li>服务器 <ul><li>认证服务器 给客户端发token的</li><li>资源服务器 客户端拿token取资源的地方</li></ul></li></ul><p>其中资源服务器和认证服务器可以是同一台服务器，但最好分开。  </p><ul><li>这其中，客户端如何取到token，规范规定了几种方式，是重点。</li><li>资源服务器如何认证也是一个小重点。</li><li>学习oauth2,把握住一个要点 取token和验证token</li></ul><p>下面这两张图可以解释各方的作用</p><p><img src="/2022/01/04/spring-oauth2-01-oauth2-ren-shi/oauth2-1.jpg" alt="oauth2"></p><p><img src="/2022/01/04/spring-oauth2-01-oauth2-ren-shi/oauth2-3.jpg" alt="oauth2角色"></p><p>oauth最早于2007年提出，经过多年发展形成了oauth2规范。<br>oauth规范的历程如下。  </p><p><img src="/2022/01/04/spring-oauth2-01-oauth2-ren-shi/oauth2-2.jpg" alt="oauth2历程"></p><p>大牛写的更好，参考下面的链接。<br><a href="https://www.ruanyifeng.com/blog/2019/04/oauth_design.html">OAuth 2.0 的一个简单解释</a><br><a href="https://www.bilibili.com/video/BV1g3411i7YL?p=4">微服务中的oauth2</a> </p><h3 id="2-oauth2的获取token的模式"><a href="#2-oauth2的获取token的模式" class="headerlink" title="2. oauth2的获取token的模式"></a>2. oauth2的获取token的模式</h3><p>官方规范了四种方式来获取token<br>分别是</p><p>授权码（authorization-code）<br>隐藏式（implicit）<br>密码式（password）：<br>客户端凭证（client credentials）  </p><p>依然是阮一峰的博客<br><a href="https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html">oauth2认证方式</a></p><h3 id="3-如何选择-oauth2-获取token的方式"><a href="#3-如何选择-oauth2-获取token的方式" class="headerlink" title="3. 如何选择 oauth2 获取token的方式"></a>3. 如何选择 oauth2 获取token的方式</h3><p>记得下面这张图就可以了</p><p><img src="/2022/01/04/spring-oauth2-01-oauth2-ren-shi/oauth2-4.jpg" alt="oatuh选型"></p>]]></content>
      
      
      
        <tags>
            
            <tag> spring-oauth2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES客户端Java High Level REST Client</title>
      <link href="/2021/12/24/es05-esjava-ke-hu-duan/"/>
      <url>/2021/12/24/es05-esjava-ke-hu-duan/</url>
      
        <content type="html"><![CDATA[<h2 id="ES客户端Java-High-Level-REST-Client"><a href="#ES客户端Java-High-Level-REST-Client" class="headerlink" title="ES客户端Java High Level REST Client"></a>ES客户端Java High Level REST Client</h2><p>本节主要内容是使用ES客户端Java High Level REST Client操作ES  </p><blockquote><p>Java High Level REST Client是ElasticSearch官方目前推荐使用的，适用于6.x以上的版本，要求JDK在1.8以上，<br>可以很好的在大版本中进行兼容，并且该架包自身也包含Java Low Level REST Client中的方法，可以应对一些特需的情况进行特殊的处理，<br>它对于一些常用的方法封装Restful风格，可以直接对应操作名调用使用即可，支持同步和异步(Async)调用。</p></blockquote><h3 id="索引操作和文档基本操作"><a href="#索引操作和文档基本操作" class="headerlink" title="索引操作和文档基本操作"></a>索引操作和文档基本操作</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>indices<span class="token punctuation">.</span>delete<span class="token punctuation">.</span></span><span class="token class-name">DeleteIndexRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>bulk<span class="token punctuation">.</span></span><span class="token class-name">BulkRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>bulk<span class="token punctuation">.</span></span><span class="token class-name">BulkResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>delete<span class="token punctuation">.</span></span><span class="token class-name">DeleteRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>delete<span class="token punctuation">.</span></span><span class="token class-name">DeleteResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>get<span class="token punctuation">.</span></span><span class="token class-name">GetRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>get<span class="token punctuation">.</span></span><span class="token class-name">GetResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>index<span class="token punctuation">.</span></span><span class="token class-name">IndexRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>index<span class="token punctuation">.</span></span><span class="token class-name">IndexResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>search<span class="token punctuation">.</span></span><span class="token class-name">SearchRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>search<span class="token punctuation">.</span></span><span class="token class-name">SearchResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>support<span class="token punctuation">.</span>master<span class="token punctuation">.</span></span><span class="token class-name">AcknowledgedResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>update<span class="token punctuation">.</span></span><span class="token class-name">UpdateRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>action<span class="token punctuation">.</span>update<span class="token punctuation">.</span></span><span class="token class-name">UpdateResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RequestOptions</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestHighLevelClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span></span><span class="token class-name">CreateIndexRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span></span><span class="token class-name">CreateIndexResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>client<span class="token punctuation">.</span>indices<span class="token punctuation">.</span></span><span class="token class-name">GetIndexRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>common<span class="token punctuation">.</span>unit<span class="token punctuation">.</span></span><span class="token class-name">TimeValue</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>common<span class="token punctuation">.</span>xcontent<span class="token punctuation">.</span></span><span class="token class-name">XContentType</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>index<span class="token punctuation">.</span>query<span class="token punctuation">.</span></span><span class="token class-name">QueryBuilders</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>index<span class="token punctuation">.</span>query<span class="token punctuation">.</span></span><span class="token class-name">TermQueryBuilder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>search<span class="token punctuation">.</span></span><span class="token class-name">SearchHit</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>search<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span><span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>elasticsearch<span class="token punctuation">.</span>search<span class="token punctuation">.</span>fetch<span class="token punctuation">.</span>subphase<span class="token punctuation">.</span></span><span class="token class-name">FetchSourceContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Qualifier</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span>JSON<span class="token punctuation">;</span><span class="token comment">/** *  es7.6.x 高级客户端测试 API */</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ElasticsearchJdApplicationTests</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// 面向对象来操作</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"restHighLevelClient"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> client<span class="token punctuation">;</span>    <span class="token comment">// 测试索引的创建 Request PUT kuang_index</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testCreateIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 1、创建索引请求</span>        <span class="token class-name">CreateIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateIndexRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 2、客户端执行请求 IndicesClient,请求后获得响应</span>        <span class="token class-name">CreateIndexResponse</span> createIndexResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>createIndexResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 测试获取索引,判断其是否存在</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testExistIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">GetIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetIndexRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> exists <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>exists<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 测试删除索引</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testDeleteIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">DeleteIndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteIndexRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 删除</span>        <span class="token class-name">AcknowledgedResponse</span> delete <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>delete<span class="token punctuation">.</span><span class="token function">isAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 测试添加文档</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testAddDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 创建对象</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"狂神说"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 创建请求</span>        <span class="token class-name">IndexRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 规则 put /kuang_index/_doc/1</span>        request<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        request<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token class-name">TimeValue</span><span class="token punctuation">.</span><span class="token function">timeValueSeconds</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        request<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token string">"1s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 将我们的数据放入请求 json</span>        request<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 客户端发送请求 , 获取响应的结果</span>        <span class="token class-name">IndexResponse</span> indexResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>indexResponse<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>indexResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 对应我们命令返回的状态CREATED</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 获取文档，判断是否存在 get /index/doc/1</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testIsExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">GetRequest</span> getRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 不获取返回的 _source 的上下文了</span>        getRequest<span class="token punctuation">.</span><span class="token function">fetchSourceContext</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FetchSourceContext</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        getRequest<span class="token punctuation">.</span><span class="token function">storedFields</span><span class="token punctuation">(</span><span class="token string">"_none_"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> exists <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>getRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>exists<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 获得文档的信息</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testGetDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">GetRequest</span> getRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">GetResponse</span> getResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>getRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>getResponse<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印文档的内容</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>getResponse<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回的全部内容和命令式一样的</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 更新文档的信息</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testUpdateRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">UpdateRequest</span> updateRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        updateRequest<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token string">"1s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"狂神说Java"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        updateRequest<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">UpdateResponse</span> updateResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>updateRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>updateResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 删除文档记录</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testDeleteRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">DeleteRequest</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        request<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token string">"1s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">DeleteResponse</span> deleteResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deleteResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 特殊的，真的项目一般都会批量插入数据！</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testBulkRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">BulkRequest</span> bulkRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BulkRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        bulkRequest<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token string">"10s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">></span></span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"kuangshen1"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"kuangshen2"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"kuangshen3"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"qinjiang1"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"qinjiang1"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"qinjiang1"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 批处理请求</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> userList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 批量更新和批量删除，就在这里修改对应的请求就可以了</span>            bulkRequest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">""</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>userList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">BulkResponse</span> bulkResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">bulk</span><span class="token punctuation">(</span>bulkRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bulkResponse<span class="token punctuation">.</span><span class="token function">hasFailures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否失败，返回 false 代表 成功！</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// 查询</span>    <span class="token comment">// SearchRequest 搜索请求</span>    <span class="token comment">// SearchSourceBuilder 条件构造</span>    <span class="token comment">// HighlightBuilder 构建高亮</span>    <span class="token comment">// TermQueryBuilder 精确查询</span>    <span class="token comment">// MatchAllQueryBuilder</span>    <span class="token comment">// xxx QueryBuilder 对应我们刚才看到的命令！</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">"kuang_index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 构建搜索条件</span>        <span class="token class-name">SearchSourceBuilder</span> sourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sourceBuilder<span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 查询条件，我们可以使用 QueryBuilders 工具来实现</span>        <span class="token comment">// QueryBuilders.termQuery 精确</span>        <span class="token comment">// QueryBuilders.matchAllQuery() 匹配所有</span>        <span class="token class-name">TermQueryBuilder</span> termQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"qinjiang1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// MatchAllQueryBuilder matchAllQueryBuilder =</span>        <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>termQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>        sourceBuilder<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimeValue</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        searchRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>sourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"================================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> documentFields <span class="token operator">:</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>documentFields<span class="token punctuation">.</span><span class="token function">getSourceAsMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查询选项"><a href="#查询选项" class="headerlink" title="查询选项"></a>查询选项</h3><h4 id="一个基本的查询构造"><a href="#一个基本的查询构造" class="headerlink" title="一个基本的查询构造"></a>一个基本的查询构造</h4><ol><li>创建SearchRequest，不带参数，表示查询所有索引</li><li>添加大部分查询参数到 SearchSourceBuilder，接收QueryBuilders构建的查询参数</li><li>添加 match_all 查询到 SearchSourceBuilder</li><li>添加 SearchSourceBuilder 到 SearchRequest  </li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> searchSourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> searchRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>searchSourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="SearchRequest-有一些可选参数"><a href="#SearchRequest-有一些可选参数" class="headerlink" title="SearchRequest 有一些可选参数"></a>SearchRequest 有一些可选参数</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 指定查询“posts”索引</span><span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">"posts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置路由</span>searchRequest<span class="token punctuation">.</span><span class="token function">routing</span><span class="token punctuation">(</span><span class="token string">"routing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// IndicesOptions 设置如何解析未知的索引及通配符表达式如何扩展</span>searchRequest<span class="token punctuation">.</span><span class="token function">indicesOptions</span><span class="token punctuation">(</span><span class="token class-name">IndicesOptions</span><span class="token punctuation">.</span><span class="token function">lenientExpandOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置偏好参数，如设置搜索本地分片的偏好，默认是在分片中随机检索</span>searchRequest<span class="token punctuation">.</span><span class="token function">preference</span><span class="token punctuation">(</span><span class="token string">"_local"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="使用SearchSourceBuilder"><a href="#使用SearchSourceBuilder" class="headerlink" title="使用SearchSourceBuilder"></a>使用SearchSourceBuilder</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 使用默认参数创建 SearchSourceBuilder</span><span class="token class-name">SearchSourceBuilder</span> sourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 可以设置任何类型的QueryBuilder查询参数</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"kimchy"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置查询的起始位置，默认是0</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置查询结果的页大小，默认是10</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置当前查询的超时时间</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimeValue</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>构建查询参数QueryBuilder</li></ul><p>可以使用QueryBuilde构造器创建一个QueryBuilder：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 构建一个全文检索Match Query, 查询匹配kimchy的user字段</span><span class="token class-name">MatchQueryBuilder</span> matchQueryBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MatchQueryBuilder</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"kimchy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 可以针对创建的QueryBuilder对象设置查询参数</span><span class="token comment">// 开启模糊查询</span>matchQueryBuilder<span class="token punctuation">.</span><span class="token function">fuzziness</span><span class="token punctuation">(</span><span class="token class-name">Fuzziness</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置查询前缀长度</span>matchQueryBuilder<span class="token punctuation">.</span><span class="token function">prefixLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置模糊查询最大扩展</span>matchQueryBuilder<span class="token punctuation">.</span><span class="token function">maxExpansions</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以使用工具类QueryBuilders,采用流式编程的形式构建QueryBuilder  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">QueryBuilder</span> matchQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchQuery</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"kimchy"</span><span class="token punctuation">)</span>                                                <span class="token punctuation">.</span><span class="token function">fuzziness</span><span class="token punctuation">(</span><span class="token class-name">Fuzziness</span><span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span>                                                <span class="token punctuation">.</span><span class="token function">prefixLength</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>                                                <span class="token punctuation">.</span><span class="token function">maxExpansions</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>创建好的querubuilder，一定要执行下面这一步</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">searchSourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>matchQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>指定排序</p><blockquote><p>SearchSourceBuilder允许增加一或多个排序参数SortBuilder，有四个具体实现FieldSortBuilder, ScoreSortBuilder, GeoDistanceSortBuilder 和 ScriptSortBuilder。    </p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 默认排序。根据_score倒序</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ScoreSortBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">SortOrder</span><span class="token punctuation">.</span>DESC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 根据_id升序</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FieldSortBuilder</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token class-name">SortOrder</span><span class="token punctuation">.</span>ASC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用Source字段过滤</p></li></ul><p>默认情况下，查询请求会返回_source字段的全部内容，但是该行为可以被覆写，比如，你可以完全关掉该字段的索引（不推荐，该行为，原因参考上面的链接）  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java">sourceBuilder<span class="token punctuation">.</span><span class="token function">fetchSource</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>该方法fetchSource也可以接收组通配模式来以更细粒度地方式控制哪些字段被包含或者被排除。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> includeFields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span><span class="token string">"title"</span><span class="token punctuation">,</span> <span class="token string">"innerObject.*"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> excludeFields <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">&#123;</span><span class="token string">"user"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>sourceBuilder<span class="token punctuation">.</span><span class="token function">fetchSource</span><span class="token punctuation">(</span>includeFields<span class="token punctuation">,</span> excludeFields<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>搜索结果高亮（Highlighting）</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">HighlightBuilder</span> highlightBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置需要突出的字段</span><span class="token class-name">HighlightBuilder<span class="token punctuation">.</span>Field</span> highlightTitle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder<span class="token punctuation">.</span>Field</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> highlightTitle<span class="token punctuation">.</span><span class="token function">highlighterType</span><span class="token punctuation">(</span><span class="token string">"unified"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  highlightBuilder<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span>highlightTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token class-name">HighlightBuilder<span class="token punctuation">.</span>Field</span> highlightUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder<span class="token punctuation">.</span>Field</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>highlightBuilder<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span>highlightUser<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置HighlightBuilder到SearchSourceBuilder</span>searchSourceBuilder<span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span>highlightBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>例子：  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 获取数据实现高亮功能</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">searchPageHighlightBuilder</span><span class="token punctuation">(</span><span class="token class-name">String</span> keyword<span class="token punctuation">,</span> <span class="token keyword">int</span> pageNo<span class="token punctuation">,</span> <span class="token keyword">int</span> pageSize<span class="token punctuation">)</span>    <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageNo <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        pageNo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    keyword <span class="token operator">=</span> <span class="token class-name">URLDecoder</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 条件搜索</span>    <span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">"jd_goods"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 分页</span>    searchSourceBuilder<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>pageNo<span class="token punctuation">)</span><span class="token punctuation">;</span>    searchSourceBuilder<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 精准匹配</span>    <span class="token class-name">TermQueryBuilder</span> termQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>    searchSourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>termQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>    searchSourceBuilder<span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimeValue</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 高亮</span>    <span class="token class-name">HighlightBuilder</span> highlightBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    highlightBuilder<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    highlightBuilder<span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 多个高亮显示</span>    highlightBuilder<span class="token punctuation">.</span><span class="token function">preTags</span><span class="token punctuation">(</span><span class="token string">"&lt;span style='color:red'>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    highlightBuilder<span class="token punctuation">.</span><span class="token function">postTags</span><span class="token punctuation">(</span><span class="token string">"&lt;/span>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    searchSourceBuilder<span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span>highlightBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 执行搜索</span>    searchRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>searchSourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">SearchResponse</span> search <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 解析结果</span>    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> documentFields <span class="token operator">:</span> search<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 解析高亮的字段</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">HighlightField</span><span class="token punctuation">></span></span> highlightFields <span class="token operator">=</span> documentFields<span class="token punctuation">.</span><span class="token function">getHighlightFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">HighlightField</span> title <span class="token operator">=</span> highlightFields<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> sourceAsMap <span class="token operator">=</span> documentFields<span class="token punctuation">.</span><span class="token function">getSourceAsMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>title <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Text</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fragments <span class="token operator">=</span> title<span class="token punctuation">.</span><span class="token function">fragments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> n_title <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Text</span> text <span class="token operator">:</span> fragments<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                n_title <span class="token operator">+=</span> text<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            sourceAsMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span> n_title<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>sourceAsMap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>请求聚合（Requesting Aggregations）</li></ul><p>聚合各公司下员工的平均年龄  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">TermsAggregationBuilder</span> aggregation <span class="token operator">=</span> <span class="token class-name">AggregationBuilders</span><span class="token punctuation">.</span><span class="token function">terms</span><span class="token punctuation">(</span><span class="token string">"by_company"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"company.keyword"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>aggregation<span class="token punctuation">.</span><span class="token function">subAggregation</span><span class="token punctuation">(</span><span class="token class-name">AggregationBuilders</span><span class="token punctuation">.</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token string">"average_age"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>searchSourceBuilder<span class="token punctuation">.</span><span class="token function">aggregation</span><span class="token punctuation">(</span>aggregation<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>请求建议Requesting Suggestions</li></ul><p>在查询请求中可以设置请求Suggestions，通过使用SuggestBuilders辅助类，或者SuggestionBuilder构造器，将其设置到SuggestBuilder，最后将SuggestBuilder设置SearchSourceBuilder中。  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 为字段user和文本kmichy创建 TermSuggestionBuilder </span><span class="token class-name">SuggestionBuilder</span> termSuggestionBuilder <span class="token operator">=</span> <span class="token class-name">SuggestBuilders</span><span class="token punctuation">.</span><span class="token function">termSuggestion</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"kmichy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token class-name">SuggestBuilder</span> suggestBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuggestBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 添加TermSuggestionBuilder到suggestBuilder中，并命名为suggest_user</span>suggestBuilder<span class="token punctuation">.</span><span class="token function">addSuggestion</span><span class="token punctuation">(</span><span class="token string">"suggest_user"</span><span class="token punctuation">,</span> termSuggestionBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span> searchSourceBuilder<span class="token punctuation">.</span><span class="token function">suggest</span><span class="token punctuation">(</span>suggestBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Profiling Queries和aggregations#<br>Profile API可以配置某个具体的查询或聚合请求的执行过程。如果想使用该功能，需要将SearchSourceBuilder的开关打开。<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>searchSourceBuilder<span class="token punctuation">.</span><span class="token function">profile</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h4 id="执行查询"><a href="#执行查询" class="headerlink" title="执行查询"></a>执行查询</h4><ul><li>同步查询执行Synchronous execution <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>异步查询执行Asynchronous execution</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java">client<span class="token punctuation">.</span><span class="token function">searchAsync</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>searchRequest执行完成后会调用ActionListener</p><p>异步方式不会阻塞，当该异步调用结果后，ActionListener会被调用，如果执行成功，则onResponse会被调用，如果失败，则onFailure被调用。一个典型的search listener如下：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ActionListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SearchResponse</span><span class="token punctuation">></span></span> listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActionListener</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SearchResponse</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onResponse</span><span class="token punctuation">(</span><span class="token class-name">SearchResponse</span> searchResponse<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFailure</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="SearchResponse"><a href="#SearchResponse" class="headerlink" title="SearchResponse"></a>SearchResponse</h4><blockquote><p>SearchResponse提供了查询执行的细节以及返回的文档结果。<br>首先，SearchResponse包括当前查询的执行细节，比如HTTP响应码、执行时间、或者是否超时等：</p></blockquote><ul><li><p>检索结果Retrieving SearchHits  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchHits</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">TotalHits</span> totalHits <span class="token operator">=</span> hits<span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// the total number of hits, must be interpreted in the context of totalHits.relation</span><span class="token keyword">long</span> numHits <span class="token operator">=</span> totalHits<span class="token punctuation">.</span>value<span class="token punctuation">;</span><span class="token comment">// whether the number of hits is accurate (EQUAL_TO) or a lower bound of the total (GREATER_THAN_OR_EQUAL_TO)</span><span class="token class-name">TotalHits<span class="token punctuation">.</span>Relation</span> relation <span class="token operator">=</span> totalHits<span class="token punctuation">.</span>relation<span class="token punctuation">;</span><span class="token keyword">float</span> maxScore <span class="token operator">=</span> hits<span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//SearchHits中的单个结果集可以迭代获取：</span><span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> searchHits <span class="token operator">=</span> hits<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> searchHits<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// do something with the SearchHit</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>SearchHit可以以JSON或MAP形式返回文档的source信息。</p></li><li><p>在Map中，普通的字段以字段名作为key，值为字段值。多值字段是以对象列表形式返回，嵌套对象，则以另一个map的形式返回。需要根据实际情况进行强转：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> sourceAsString <span class="token operator">=</span> hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> sourceAsMap <span class="token operator">=</span> hit<span class="token punctuation">.</span><span class="token function">getSourceAsMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> documentTitle <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> users <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> innerObject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"innerObject"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>获取高亮内容</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">SearchHits</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">HighlightField</span><span class="token punctuation">></span></span> highlightFields <span class="token operator">=</span> hit<span class="token punctuation">.</span><span class="token function">getHighlightFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Get the highlighting for the title field</span>    <span class="token class-name">HighlightField</span> highlight <span class="token operator">=</span> highlightFields<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Get one or many fragments containing the highlighted field content</span>    <span class="token class-name">Text</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fragments <span class="token operator">=</span> highlight<span class="token punctuation">.</span><span class="token function">fragments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token class-name">String</span> fragmentString <span class="token operator">=</span> fragments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>获取聚合结果</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Aggregations</span> aggregations <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getAggregations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Get the by_company terms aggregation</span><span class="token class-name">Terms</span> byCompanyAggregation <span class="token operator">=</span> aggregations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"by_company"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Get the buckets that is keyed with Elastic</span><span class="token class-name">Bucket</span> elasticBucket <span class="token operator">=</span> byCompanyAggregation<span class="token punctuation">.</span><span class="token function">getBucketByKey</span><span class="token punctuation">(</span><span class="token string">"Elastic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Get the average_age sub-aggregation from that bucket</span><span class="token class-name">Avg</span> averageAge <span class="token operator">=</span> elasticBucket<span class="token punctuation">.</span><span class="token function">getAggregations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"average_age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">double</span> avg <span class="token operator">=</span> averageAge<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对比下面来看</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"排骨"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//searchResponse.getAggregations()</span>    <span class="token property">"count"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">//aggregations.get("by_company")</span>      <span class="token property">"max"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> <span class="token comment">//elasticBucket.getAggregations().get("average_age")</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"views"</span> <span class="token comment">//double avg = averageAge.getValue();</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>也可以以map的形式获取aggregations，key是aggregation名称。这种情况下，aggregation 接口需要显式的强转。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Aggregation</span><span class="token punctuation">></span></span> aggregationMap <span class="token operator">=</span> aggregations<span class="token punctuation">.</span><span class="token function">getAsMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Terms</span> companyAggregation <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Terms</span><span class="token punctuation">)</span> aggregationMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"by_company"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>迭代  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Aggregation</span> agg <span class="token operator">:</span> aggregations<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> type <span class="token operator">=</span> agg<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">TermsAggregationBuilder</span><span class="token punctuation">.</span>NAME<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Bucket</span> elasticBucket <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Terms</span><span class="token punctuation">)</span> agg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBucketByKey</span><span class="token punctuation">(</span><span class="token string">"Elastic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> numberOfDocs <span class="token operator">=</span> elasticBucket<span class="token punctuation">.</span><span class="token function">getDocCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>获取建议结果</p></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Use the Suggest class to access suggestions</span><span class="token class-name">Suggest</span> suggest <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getSuggest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Suggestions can be retrieved by name. You need to assign them to the correct type of Suggestion class (here TermSuggestion), otherwise a ClassCastException is thrown</span><span class="token class-name">TermSuggestion</span> termSuggestion <span class="token operator">=</span> suggest<span class="token punctuation">.</span><span class="token function">getSuggestion</span><span class="token punctuation">(</span><span class="token string">"suggest_user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Iterate over the suggestion entries</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TermSuggestion<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">:</span> termSuggestion<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// Iterate over the options in one entry</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">TermSuggestion<span class="token punctuation">.</span>Entry<span class="token punctuation">.</span>Option</span> option <span class="token operator">:</span> entry<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token class-name">String</span> suggestText <span class="token operator">=</span> option<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>获取配置结果</li></ul><p>可以使用SearchResponse的getProfileResults()方法获取。返回结果为每个分片包装一个Map，值为ProfileShardResult对象。key是能唯一标识分片的信息。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Retrieve the Map of ProfileShardResult from the SearchResponse</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ProfileShardResult</span><span class="token punctuation">></span></span> profilingResults <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getProfileResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Profiling results can be retrieved by shard’s key if the key is known, otherwise it might be simpler to iterate over all the profiling results</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">ProfileShardResult</span><span class="token punctuation">></span></span> profilingResult <span class="token operator">:</span> profilingResults<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// Retrieve the key that identifies which shard the ProfileShardResult belongs to</span>    <span class="token class-name">String</span> key <span class="token operator">=</span> profilingResult<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Retrieve the ProfileShardResult for the given shard</span>    <span class="token class-name">ProfileShardResult</span> profileShardResult <span class="token operator">=</span> profilingResult<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ProfileShardResult包含一个或多个profile 结果：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Retrieve the list of QueryProfileShardResult</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">QueryProfileShardResult</span><span class="token punctuation">></span></span> queryProfileShardResults <span class="token operator">=</span>        profileShardResult<span class="token punctuation">.</span><span class="token function">getQueryProfileResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Iterate over each QueryProfileShardResult</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">QueryProfileShardResult</span> queryProfileResult <span class="token operator">:</span> queryProfileShardResults<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>每个QueryProfileShardResult 中可以获取ProfileResult对象列表： </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Iterate over the profile results</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ProfileResult</span> profileResult <span class="token operator">:</span> queryProfileResult<span class="token punctuation">.</span><span class="token function">getQueryResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Retrieve the name of the Lucene query</span>    <span class="token class-name">String</span> queryName <span class="token operator">=</span> profileResult<span class="token punctuation">.</span><span class="token function">getQueryName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Retrieve the time in millis spent executing the Lucene query</span>    <span class="token keyword">long</span> queryTimeInMillis <span class="token operator">=</span> profileResult<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Retrieve the profile results for the sub-queries (if any)</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProfileResult</span><span class="token punctuation">></span></span> profiledChildren <span class="token operator">=</span> profileResult<span class="token punctuation">.</span><span class="token function">getProfiledChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>QueryProfileShardResult也可以获取Lucene collectors的信息：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Retrieve the profiling result of the Lucene collector</span><span class="token class-name">CollectorResult</span> collectorResult <span class="token operator">=</span> queryProfileResult<span class="token punctuation">.</span><span class="token function">getCollectorResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Retrieve the name of the Lucene collector</span><span class="token class-name">String</span> collectorName <span class="token operator">=</span> collectorResult<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Retrieve the time in millis spent executing the Lucene collector</span><span class="token class-name">Long</span> collectorTimeInMillis <span class="token operator">=</span> collectorResult<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Retrieve the profile results for the sub-collectors (if any)</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CollectorResult</span><span class="token punctuation">></span></span> profiledChildren <span class="token operator">=</span> collectorResult<span class="token punctuation">.</span><span class="token function">getProfiledChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>QueryProfileShardResult可以获取详细的aggregations tree执行信息：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// Retrieve the AggregationProfileShardResult</span><span class="token class-name">AggregationProfileShardResult</span> aggsProfileResults <span class="token operator">=</span>        profileShardResult<span class="token punctuation">.</span><span class="token function">getAggregationProfileResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Iterate over the aggregation profile results</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ProfileResult</span> profileResult <span class="token operator">:</span> aggsProfileResults<span class="token punctuation">.</span><span class="token function">getProfileResults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// Retrieve the type of the aggregation (corresponds to Java class used to execute the aggregation)</span>    <span class="token class-name">String</span> aggName <span class="token operator">=</span> profileResult<span class="token punctuation">.</span><span class="token function">getQueryName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Retrieve the time in millis spent executing the Lucene collector</span>    <span class="token keyword">long</span> aggTimeInMillis <span class="token operator">=</span> profileResult<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Retrieve the profile results for the sub-aggregations (if any)</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ProfileResult</span><span class="token punctuation">></span></span> profiledChildren <span class="token operator">=</span> profileResult<span class="token punctuation">.</span><span class="token function">getProfiledChildren</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> es </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>es04-es原理</title>
      <link href="/2021/12/24/es04-es-yuan-li/"/>
      <url>/2021/12/24/es04-es-yuan-li/</url>
      
        <content type="html"><![CDATA[<h2 id="es04-es原理"><a href="#es04-es原理" class="headerlink" title="es04-es原理"></a>es04-es原理</h2><h3 id="es集群"><a href="#es集群" class="headerlink" title="es集群"></a>es集群</h3><blockquote><p>首先，每一个ElasticSearch服务端就是一个集群节点，当我们启动一个elasticsearch时，就相当于启动了一个集群节点。<br>那么，多个节点之间如何建立联系呢？当我们启动一个节点的时候，这个节点会自动创建一个集群，集群的名称默认为elasticsearch，当我们再次启动一个节点的时候，它首先会尝试寻找名称为elasticsearch的集群，然后加入其中，（所有的都是先尝试寻找，没有再自己创建）。【集群名称可以自行配置，下面讲】<br>当节点加入到集群中后，这个集群就算是建立起来了。</p></blockquote><h4 id="1-配置文件"><a href="#1-配置文件" class="headerlink" title="1.配置文件"></a>1.配置文件</h4><p>ElasticSearch的配置文件是config/elasticsearch.yml，里面有以下几个配置项：<br>【左边是配置项，右边是值，修改配置也就是修改右边的值】</p><ul><li>集群名称：cluster.name: my-application</li><li>索引存储位置：path.data: /path/to/data</li><li>日志存储位置：path.logs: /path/to/logs</li><li>绑定的IP地址：network.host: 192.168.0.1</li><li>绑定的http端口：http.port: 9200</li><li>是否允许使用通配符来标识索引：action.destructive_requires_name，true为禁止。</li></ul><h4 id="2-健康状态"><a href="#2-健康状态" class="headerlink" title="2.健康状态"></a>2.健康状态</h4><p>GET /_cluster/health：以json方式显示集群状态</p><p>返回结果解析：</p><ul><li>epoch：时间戳</li><li>timestamp：时间</li><li>cluster：集群名</li><li>status：状态</li><li>集群状态解析看下面。</li><li>node.total：集群中的节点数</li><li>node.data：集群中的数据节点数</li><li>shards：集群中总的分片数量</li><li>pri：主分片数量</li><li>relo：副本分片数量</li><li>init：初始化中的分片数？【不确定，英文是这样的：number of initializing nodes 】</li><li>unassign：没有被分配的分片的数量</li><li>pending_tasks：待处理的任务数</li><li>max_task_wait_time：最大任务等待时间</li><li>activeds_percent：active的分片数量</li></ul><h3 id="分片"><a href="#分片" class="headerlink" title="分片"></a>分片</h3><p>文档的数据是存储到索引中的，而索引的数据是存储在分片上的，而分片是位于节点上的。</p><blockquote><p>分片shard有主分片primary shard和复制分片replica shard两种，其中主分片是主要存储的分片，可以进行读写操作；副本分片是主分片的备份，可以进行读操作（不支持写操作）。<br>查询可以在主分片或副本分片上进行查询，这样可以提供查询效率。</p></blockquote><p>主分片有读和写的能力，副本分片只可以读，所以数据的更新都发生在主分片上</p><h3 id="文档的元数据"><a href="#文档的元数据" class="headerlink" title="文档的元数据"></a>文档的元数据</h3><ul><li>_index:代表当前document存放到哪个index中。</li><li>_type:代表当前document存放在index的哪个type中。</li><li>_id:代表document的唯一标识，与index和type一起，可以唯一标识和定位一个document。【在前面我们都是手动指定的，其实可以不手动指定，那样会随机产生要给唯一的字符串作为ID】</li><li>_version：是当前document的版本，这个版本用于标识这个document的“更新次数”（新建、删除、修改都会增加版本）</li><li>_source：返回的结果是查询出来的当前存储在索引中的完整的document数据。之前在搜索篇中讲到了，我们可以使用_source来指定返回docuemnt的哪些字段。</li></ul><h3 id="文档的数据类型"><a href="#文档的数据类型" class="headerlink" title="文档的数据类型"></a>文档的数据类型</h3><p>ElasticSearch主要有以下这几种数据类型：</p><ul><li>字符类：<ul><li>text：是存储字符串的类型，在elasticsearch中存储会分词的字符串数据一般用text</li><li>keyword：也是存储字符串的类型，在elasticsearch中用于存储不会分词的、结构化的字符串数据</li><li>string:string在5.x之前可以使用，现在已被text和keyword取代。</li></ul></li><li>整数类型：<ul><li>integer</li><li>long</li><li>short</li><li>byte</li></ul></li><li>浮点数类型：<ul><li>double</li><li>float</li></ul></li><li>日期类型：date</li><li>布尔类型：boolean</li><li>数组类型：array</li><li>对象类型：object</li></ul><h3 id="mapping"><a href="#mapping" class="headerlink" title="mapping"></a>mapping</h3><blockquote><p>mapping负责维护index中文档的结构，包括文档的字段名、字段数据类型、分词器、字段是否进行分词等。这些属性会对我们的搜索造成影响。</p></blockquote><blockquote><p>在前面，其实我们都没有定义过mapping，直接就是插入数据了。其实这时候ElasticSearch会帮我们自动定义mapping,这个mapping会依据文档的数据来自动生成。<br>此时，如果数据是字符串的，会认为是text类型，并且默认进行分词；如果数据是日期类型类（字符串里面的数据是日期格式的），那么这个字段会认为是date类型的，是不分词的；如果数据是整数，那么这个字段会认为是long类型的数据；如果数据是小数，那么这个字段会认为是float类型的；如果是true或者false，会认为是boolean类型的。</p></blockquote><p>例子  </p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token number">1</span>.创建一个mapping<span class="token punctuation">,</span>只定义数据类型：【定义了每个字段的数据类型后，插入数据的时候并没有说要严格遵循，数据类型的作用是提前声明字段的数据类型，例如在之前第二篇说type的时候，就提到了多个type中的字段其实都会汇总到mapping中，如果不提前声明，那么可能导致因为使用dynamic mapping而使得数据类型定义出错。比如在type1中birthdate字段】    当我们直接插入document的时候，如果不指定document的数据结构，那么ElastciSearch会基于dynamic mapping来自动帮我们声明每一个字段的数据类型  比如<span class="token property">"content"</span><span class="token operator">:</span><span class="token string">"hello world!"</span>会被声明成字符串类型，<span class="token property">"post_date"</span><span class="token operator">:</span><span class="token string">"2017-07-07"</span>会被认为是date类型。如果我们首先在一个type中声明了content为字符串类型，再在另外一个type中声明成日期类型，这会报错，因为对于index来说，这个content已经被声明成字符串类型了。PUT /test0101<span class="token punctuation">&#123;</span>  <span class="token property">"settings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"index"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"number_of_shards"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"number_of_replicas"</span><span class="token operator">:</span><span class="token number">1</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"mappings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"person"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"name"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token property">"age"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"long"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token property">"birthdate"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"date"</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token number">2</span>.设置某个字段不进行索引【设置后，你可以尝试对这个字段搜索，会报错！】PUT /test0102<span class="token punctuation">&#123;</span>  <span class="token property">"settings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"index"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"number_of_shards"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>            <span class="token property">"number_of_replicas"</span><span class="token operator">:</span><span class="token number">1</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"mappings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"person"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"name"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span>          <span class="token property">"index"</span><span class="token operator">:</span> <span class="token string">"false"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token property">"age"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"long"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token property">"birthdate"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"date"</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>测试：PUT /test0102/person/<span class="token number">1</span><span class="token punctuation">&#123;</span>  <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Paul Smith"</span><span class="token punctuation">,</span>  <span class="token property">"age"</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>  <span class="token property">"birthdate"</span><span class="token operator">:</span><span class="token string">"2018-01-01"</span><span class="token punctuation">&#125;</span>GET /test0102/person/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Paul"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token number">3</span>.给某个字段增加keywordPUT /test0103<span class="token punctuation">&#123;</span>  <span class="token property">"settings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"index"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"number_of_shards"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>            <span class="token property">"number_of_replicas"</span><span class="token operator">:</span><span class="token number">1</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"mappings"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"person"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"name"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span>          <span class="token property">"index"</span><span class="token operator">:</span> <span class="token string">"false"</span><span class="token punctuation">,</span>          <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"keyword"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"keyword"</span><span class="token punctuation">,</span><span class="token property">"ignore_above"</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token property">"age"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"long"</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token property">"birthdate"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>          <span class="token property">"type"</span><span class="token operator">:</span><span class="token string">"date"</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>测试：PUT /test0103/person/<span class="token number">1</span><span class="token punctuation">&#123;</span>  <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Paul Smith"</span><span class="token punctuation">,</span>  <span class="token property">"age"</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>  <span class="token property">"birthdate"</span><span class="token operator">:</span><span class="token string">"2018-01-01"</span><span class="token punctuation">&#125;</span>【注意这里是不能使用name来搜索的，要使用name.keyword来搜索，而且keyword是对原始数据进行**不分词**的搜索的，所以你搜单个词是找不到的。】GET /test0103/person/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"name.keyword"</span><span class="token operator">:</span> <span class="token string">"Paul Smith"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="修改mapping"><a href="#修改mapping" class="headerlink" title="修改mapping"></a>修改mapping</h4><p>mapping只能新增字段，不能修改原有的字段。</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 给索引test0103的类型person新增一个字段height</span>PUT /test0103/_mapping/person<span class="token punctuation">&#123;</span>  <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"height"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"float"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="查看mapping"><a href="#查看mapping" class="headerlink" title="查看mapping"></a>查看mapping</h4><p>1.之前说过了，可以通过查看索引来查看mapping：GET /index，例如GET /test0103/_mapping<br>2.通过GET /index/_mapping，例子：GET /test0103/_mapping<br>3.你也可以附加type来查看指定type包裹的mapping。GET /test0103/_mapping/person</p><h3 id="相关度分数"><a href="#相关度分数" class="headerlink" title="相关度分数"></a>相关度分数</h3><p>相关度分数的具体算法我们其实并不需要关心。但可能还是需要大概了解一下计算的方式。</p><ul><li><p>在我们进行搜索的时候，你可以看到一个score，这个就是相关度分数，在默认排序中相关度分数最高的会被排在最前面，这个分数是ElasticSearch根据你搜索的内容，使用内部算法计算出的一个数值。</p></li><li><p>内部算法主要是指TF算法和IDF算法。</p></li><li><p>TF算法，全称Term frequency，索引词频率算法。<br>意义就像它的名字，会根据索引词的频率来计算，索引词出现的次数越多，分数越高  </p></li><li><p>IDF算法全称Inverse Document Frequency，逆文本频率。<br>搜索文本的词在整个索引的所有文档中出现的次数越多，这个词所占的score的比重就越低。</p></li></ul><h4 id="score计算API"><a href="#score计算API" class="headerlink" title="score计算API"></a>score计算API</h4><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /index/type/_search?explain=<span class="token boolean">true</span><span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"搜索字段"</span><span class="token operator">:</span> <span class="token string">"搜索值"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>例子：GET /douban/book/_search?explain=<span class="token boolean">true</span><span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"Story"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="分词器"><a href="#分词器" class="headerlink" title="分词器"></a>分词器</h3><p>中文分词器<br>IK分词器提供了两种分词器ik_max_word和ik_smart</p><ul><li>ik_max_word: 会将文本做最细粒度的拆分，比如北京天安门广场会被拆分为北京，京，天安门广场，天安门，天安，门，广场，会尝试各种在IK中可能的组合；</li><li>ik_smart: 会做最粗粒度的拆分，比如会将北京天安门广场拆分为北京，天安门广场。<br>一般都会使用ik_max_word，只有在某些确实只需要最粗粒度的时候才使用ik_smart。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> es </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>es03-搜索-过滤排序</title>
      <link href="/2021/12/23/es03-sou-suo-guo-lu-pai-xu/"/>
      <url>/2021/12/23/es03-sou-suo-guo-lu-pai-xu/</url>
      
        <content type="html"><![CDATA[<h2 id="es03-搜索-过滤排序"><a href="#es03-搜索-过滤排序" class="headerlink" title="es03-搜索-过滤排序"></a>es03-搜索-过滤排序</h2><p>就像在学习mysql的时候，学习查询语句比其他语句花费的时间要多，es的查询语句也是如此。</p><h3 id="文档的搜索"><a href="#文档的搜索" class="headerlink" title="文档的搜索"></a>文档的搜索</h3><h4 id="URL参数条件搜索"><a href="#URL参数条件搜索" class="headerlink" title="URL参数条件搜索"></a>URL参数条件搜索</h4><ul><li>q：使用某个字段来进行查询，例如q:book_name=book，就是根据book_name中是否有book来- 进行搜索。</li><li>sort：使用某个字段来进行排序，例如sort=cost:desc，就是根据cost字段来进行降序desc排序。</li><li>其他：fileds,timeout,analyzer【这些参数留在请求体搜索中讲】</li><li>不带参数时，为“全搜索”</li><li>多个参数使用&amp;&amp;拼接</li></ul><p>例子</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">GET <span class="token operator">/</span>douban<span class="token operator">/</span>book<span class="token operator">/</span>_search<span class="token operator">?</span>q<span class="token operator">=</span>book_summary<span class="token operator">:</span>characterGET <span class="token operator">/</span>douban<span class="token operator">/</span>book<span class="token operator">/</span>_search<span class="token operator">?</span>q<span class="token operator">=</span>book_author<span class="token operator">:</span><span class="token class-name">Milan</span>GET <span class="token operator">/</span>douban<span class="token operator">/</span>book<span class="token operator">/</span>_search<span class="token operator">?</span>q<span class="token operator">=</span>book_summary<span class="token operator">:</span>aGET <span class="token operator">/</span>douban<span class="token operator">/</span>book<span class="token operator">/</span>_search<span class="token operator">?</span>q<span class="token operator">=</span>book_summary<span class="token operator">:</span>a<span class="token operator">&amp;&amp;</span>sort<span class="token operator">=</span>book_pages<span class="token operator">:</span>descGET <span class="token operator">/</span>douban<span class="token operator">/</span>book<span class="token operator">/</span>_search<span class="token operator">?</span>q<span class="token operator">=</span>book_summary<span class="token operator">:</span>a<span class="token operator">&amp;&amp;</span>q<span class="token operator">=</span>book_author<span class="token operator">:</span><span class="token class-name">Milan</span>【值得注意的是，请先不要对text类型的数据进行排序，这会影响搜索，对整数排序即可，后面会再细讲】<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="请求体参数"><a href="#请求体参数" class="headerlink" title="请求体参数"></a>请求体参数</h4><p>语法和例子</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">//全搜索</span>GET /index/type/_searchGET /douban/book/_search<span class="token comment">//全搜索</span>GET /index/type/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 查询指定字段的数据（全文搜索，如果搜索值有多个词，仅匹配一个词的结果也可以查询出来）：</span>GET /index/type/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"字段名"</span><span class="token operator">:</span> <span class="token string">"搜索值"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"A The"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 使用同一搜索值搜索多个字段：</span>GET /index/type/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"multi_match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"搜索值"</span><span class="token punctuation">,</span>      <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"搜索的字段1"</span><span class="token punctuation">,</span><span class="token string">"搜索的字段2"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"multi_match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>      <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"book_name"</span><span class="token punctuation">,</span><span class="token string">"book_summary"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 短语查询：【搜索值必须完全匹配，不会把搜索值拆分来搜索】</span>GET /index/type/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match_phrase"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"字段"</span><span class="token operator">:</span> <span class="token string">"搜索值"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match_phrase"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_summary"</span><span class="token operator">:</span> <span class="token string">"a character"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 字段过滤，查询的结果只显示指定字段</span>GET /product/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token string">"查询条件"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"_source"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"显示的字段1"</span><span class="token punctuation">,</span>    <span class="token string">"显示的字段2"</span>    <span class="token punctuation">]</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"Story"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"_source"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"book_name"</span><span class="token punctuation">,</span>    <span class="token string">"book_id"</span>    <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token comment">// 高亮查询：【根据查询的关键字来进行高亮,高亮的结果会显示在返回结果的会自动在返回结果中的highlight中，关键字会被加上&lt;em>标签】</span><span class="token comment">// 如果想要多字段高亮，也需要进行多字段搜索</span>GET /index/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token string">"查询条件"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"highlight"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"高亮的字段名1"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_summary"</span><span class="token operator">:</span> <span class="token string">"Story"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"highlight"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_summary"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"multi_match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"Story"</span><span class="token punctuation">,</span>      <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"book_name"</span><span class="token punctuation">,</span><span class="token string">"book_summary"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>  <span class="token property">"highlight"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_summary"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>前置知识：对于条件拼接，在SQL中有and,or,not，在ElasticSearch不太一样，下面逐一讲解：</p></li><li><p>bool:用来表明里面的语句是多条件的组合，用来包裹多个条件。</p></li><li><p>should:里面可以有多个条件，查询结果必须符合查询条件中的一个或多个。</p></li><li><p>must：里面的多个条件都必须成立</p></li><li><p>must_not：里面的多个条件必须不成立</p></li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 书名必须包含Story的</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 书名必须不包含Story的</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must_not"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 书名必须不包含Story,书名包含Adventures或Immortality的</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must_not"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"should"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"Adventures"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"Immortality"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 在should、must、must_not这些里面都可以放多个条件</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must_not"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"Adventures"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 如果是单个条件的时候，还可以这样写，省去[]：</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must_not"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 还可以条件嵌套，也就是再嵌套一层bool，不过要注意逻辑，例如：</span><span class="token comment">// 查询出（书名有story）或者（书名有The而且作者名有David）的，第二个是可成立可不成立的。</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"should"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"must"</span><span class="token operator">:</span> <span class="token punctuation">[</span>              <span class="token punctuation">&#123;</span>                <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                  <span class="token property">"book_name"</span><span class="token operator">:</span> <span class="token string">"The"</span>                <span class="token punctuation">&#125;</span>              <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>              <span class="token punctuation">&#123;</span>                <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                  <span class="token property">"book_author"</span><span class="token operator">:</span> <span class="token string">"David"</span>                <span class="token punctuation">&#125;</span>              <span class="token punctuation">&#125;</span>            <span class="token punctuation">]</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>上面主要讲解了：</li><li>基于bool、should、must、must_not的多条件搜索，上面的知识已经能基础地实现一些搜索功能了。</li><li>索指定分词器、给多条件指定匹配数量、滚动查询还没了解</li></ul><h3 id="文档的过滤filter"><a href="#文档的过滤filter" class="headerlink" title="文档的过滤filter"></a>文档的过滤filter</h3><p>过滤的效果其实有点像条件搜索，不过条件搜索会考虑相关度分数和考虑分词，而过滤是不考虑这些的，过滤对相关度没有影响。过滤一般用于结构化的数据上，也就是通常不用于使用了分词的数据上，通常都会用在数值类型和日期类型的数据上。</p><ul><li>例子<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// range，gte是不小于，lte是不大于，eq是等于,gt是大于，lt是小于</span>GET / index/type/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"字段名"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"gte"</span><span class="token operator">:</span> 比较值        <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token property">"lte"</span><span class="token operator">:</span> 比较值<span class="token punctuation">]</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"gte"</span><span class="token operator">:</span> <span class="token number">352</span><span class="token punctuation">,</span>        <span class="token property">"lt"</span><span class="token operator">:</span><span class="token number">400</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// term用于匹配字符串和数值型类型的数据（解决了range中没有eq的问题），但不能直接用于分词的字段。</span><span class="token comment">//【这个并没有那么简单，会后续再讲，直接匹配一些会分词的字段时，会匹配失败，</span><span class="token comment">//因为这时候这个字段拿来匹配的都是散乱的值，不是完整的原本的字段数据，所以下面用了不分词的数值型的字段来演示】</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"term"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"字段"</span><span class="token operator">:</span> <span class="token string">"搜索值"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"term"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token number">352</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//terms</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"字段"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"搜索值1"</span><span class="token punctuation">,</span><span class="token string">"搜索值2"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"352"</span><span class="token punctuation">,</span>        <span class="token string">"400"</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>filter与bool</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>              <span class="token property">"lte"</span><span class="token operator">:</span><span class="token number">300</span>              <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"bool"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"must"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"match"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Story"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>              <span class="token property">"lte"</span><span class="token operator">:</span><span class="token number">300</span>              <span class="token punctuation">&#125;</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>        <span class="token punctuation">&#123;</span>          <span class="token property">"term"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>            <span class="token property">"publish_date"</span><span class="token operator">:</span> <span class="token string">"1994-02-01"</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>constant_score</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /douban/book/_search<span class="token punctuation">&#123;</span><span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"constant_score"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"gte"</span><span class="token operator">:</span> <span class="token number">352</span><span class="token punctuation">,</span><span class="token property">"lt"</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// boost设置filter提供的相关度score值</span>GET /douban/book/_search<span class="token punctuation">&#123;</span><span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"constant_score"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"filter"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"book_pages"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"gte"</span><span class="token operator">:</span> <span class="token number">352</span><span class="token punctuation">,</span><span class="token property">"lt"</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"boost"</span><span class="token operator">:</span> <span class="token number">1.2</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>过滤通常用于过滤结构化数据，也就是那些不分词的数据，</li><li>其中range用于数值范围过滤，term用于字符类型的数据或数值类型的数据的值是否相等</li><li> terms是term的复数版。过滤也支持bool拼接多个条件。</li><li> 过滤提供的相关度分数是一个常数，默认是1。</li></ul><h3 id="文档的聚合"><a href="#文档的聚合" class="headerlink" title="文档的聚合"></a>文档的聚合</h3><p>mysql有聚合函数，es也可以聚合。  </p><p>ElasticSearch中常见的聚合分析函数有terms（分组函数）、avg（平均数）、range（区间分组）、max（求最大值）、min（求最小值）、cardinality（获取唯一值的数量）、value_count(获取值的数量，不去重，可以得出多少个值参与了聚合)</p><ul><li>例子<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 按性别分组</span>GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"groud_by_express"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"book_id"</span><span class="token punctuation">,</span>        <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">10</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">//求年龄的平均数</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avg_of_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 求年龄的最大值：</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"max_of_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"max"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 把年龄[15,17]的分成一组，把年龄[18,25]的分成一组</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"range_by_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span><span class="token punctuation">,</span>        <span class="token property">"ranges"</span><span class="token operator">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">&#123;</span>            <span class="token property">"from"</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>            <span class="token property">"to"</span><span class="token operator">:</span> <span class="token number">17</span>          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>          <span class="token punctuation">&#123;</span>            <span class="token property">"from"</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>            <span class="token property">"to"</span><span class="token operator">:</span> <span class="token number">25</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// 获取不同的年龄数：，比如有年龄[1,2,3,3,4,5],得到的结果是5，因为3只算一次</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"get_diff_age_count"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"cardinality"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="其他语法"><a href="#其他语法" class="headerlink" title="其他语法"></a>其他语法</h4><ol><li>先查询后聚合<pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"lilei1"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>   <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avg_of_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>先过滤后聚合<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 先获取年龄大于15的，再求平均值</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"range"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"gt"</span><span class="token operator">:</span><span class="token number">15</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>   <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"avg_of_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>聚合函数嵌套<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 先按性别分组，再获取年龄平均值</span>GET /people/test/_search<span class="token punctuation">&#123;</span><span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"groud_by_express"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"gender"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"avg_of_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"avg"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>聚合+排序<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 先按性别分组，再按分组的年龄平均值降序排序，order中的avg_of_age就是下面的聚合函数的自定义名称</span>GET /people/test/_search<span class="token punctuation">&#123;</span><span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"groud_by_express"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"gender"</span><span class="token punctuation">,</span><span class="token property">"order"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>  <span class="token property">"avg_of_age"</span><span class="token operator">:</span> <span class="token string">"desc"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"avg_of_age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"avg"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><blockquote><p>aggs是与query同级的，使用聚合函数需要自己定义一个外层的聚合函数名称，<br>avg用于求平均值，max用于求最大值，range用于范围分组，term用于数据分组。<br>分组可以与条件搜索和过滤一起使用，aggs是与query同级的，聚合函数也可以嵌套使用。</p></blockquote><h3 id="文档的分页、排序"><a href="#文档的分页、排序" class="headerlink" title="文档的分页、排序"></a>文档的分页、排序</h3><p>分页</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 从第一条开始，获取两条数据</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"from"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token comment">// 可以先查询，再分页</span>GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"lilei1"</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>   <span class="token property">"from"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>排序</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">排序处理：【sort与query同级别，是一个数组，里面可以有多个排序参数，参数以<span class="token punctuation">&#123;</span><span class="token property">"FIELD"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token property">"order"</span><span class="token operator">:</span><span class="token string">"desc/asc"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>为格式】GET /people/test/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>   <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>      <span class="token property">"age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"order"</span><span class="token operator">:</span> <span class="token string">"desc"</span>      <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这小结主要讲使用from和size分页，使用sort排序</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> es </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>es02-es的概念-索引和文档</title>
      <link href="/2021/12/23/es02-es-de-gai-nian-suo-yin-he-wen-dang/"/>
      <url>/2021/12/23/es02-es-de-gai-nian-suo-yin-he-wen-dang/</url>
      
        <content type="html"><![CDATA[<h2 id="es02-es的概念-索引和文档"><a href="#es02-es的概念-索引和文档" class="headerlink" title="es02-es的概念-索引和文档"></a>es02-es的概念-索引和文档</h2><p>es的安装在很久之前的文章已经完成，这里不再讲述。<br>这节将涉及index、type、document的增删查改相关的内容。<br>index就像sql中的库，type可以理解为类型，7.0以上的es已经不用type了，document就像sql中的表。</p><h3 id="索引-index"><a href="#索引-index" class="headerlink" title="索引 index"></a>索引 index</h3><h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 语法：</span>PUT <span class="token operator">/</span>索引名<span class="token punctuation">&#123;</span>    index的配置（primary shard的数量等）<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>例子</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 例子（带配置信息的话以配置信息创建）【请不要复制这个注释！】</span>PUT /product<span class="token punctuation">&#123;</span>    <span class="token property">"settings"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"index"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>            <span class="token property">"number_of_shards"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>            <span class="token property">"number_of_replicas"</span><span class="token operator">:</span><span class="token number">1</span>          <span class="token punctuation">&#125;</span>     <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在上述的例子中：number_of_shards是主分片的数量；number_of_replicas是副本分片的数量(这里提一下，number_of_replicas副本分片的数量是面向主分片的，所以这个值为1时代表每一个主分片有一个副本分片)。</p><p>在插入一个文档的时候，如果index还没有创建，那么会自动创建，这时候index的一些配置会采用默认的配置，默认的主分片数量是5，副本分片数量是1</p><h4 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h4><ol><li>查看单个索引<br>语法：GET /索引名<br>效果：返回指定索引的信息</li></ol><p><img src="/2021/12/23/es02-es-de-gai-nian-suo-yin-he-wen-dang/es02-01.jpg" alt="es02"></p><ul><li>mappings：是索引中存储的数据的结构信息，由于上图的索引product中并没有存储document，而且我们也没有指定，所以也为空。mappings定义了文档的字段的数据类型和搜索策略等信息。</li><li>settings：索引的配置信息</li></ul><ol start="2"><li>查看所有索引<br>命令：GET /_cat/indices?v<br><img src="/2021/12/23/es02-es-de-gai-nian-suo-yin-he-wen-dang/es02-02.jpg" alt="es02"></li></ol><h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><p>语法：DELETE /索引名【支持同时删除多个索引，以逗号分割，如DELETE /testindex1,testindex2】<br>语法例子：DELETE /product<br>返回结果：【当acknowledged为true的时候代表删除成功</p><h4 id="修改索引"><a href="#修改索引" class="headerlink" title="修改索引"></a>修改索引</h4><p>修改索引主要是修改分片数量、mapping、分词器，由于mapping和分词器。<br>如下，相关的maping,分词器后面会涉及到。</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">PUT /product/_settings<span class="token punctuation">&#123;</span>  <span class="token property">"index"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token property">"number_of_replicas"</span><span class="token operator">:</span><span class="token number">2</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="关闭索引"><a href="#关闭索引" class="headerlink" title="关闭索引"></a>关闭索引</h4><p>关闭索引是为了避免修改索引的配置时他人进行文档读写。关闭索引后，就只能获取索引的配置信息，而不能读写索引中的document。有时候也用于关闭一些无用的索引来减少资源消耗。</p><p>关闭索引：POST /索引名/_close<br>打开索引：POST /索引名/_open</p><h4 id="索引别名"><a href="#索引别名" class="headerlink" title="索引别名"></a>索引别名</h4><ul><li>增加索引别名</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">POST /_aliases<span class="token punctuation">&#123;</span>    <span class="token property">"actions"</span><span class="token operator">:</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"add"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>                <span class="token property">"index"</span><span class="token operator">:</span><span class="token string">"索引名"</span><span class="token punctuation">,</span>                <span class="token property">"alias"</span><span class="token operator">:</span><span class="token string">"索引别名"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>查看索引别名<br>方法一：通过查看索引来查看索引别名:GET /product<br>方式二：通过命令GET /product/_alias</p></li><li><p>删除索引别名</p></li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json">POST /_aliases<span class="token punctuation">&#123;</span>    <span class="token property">"actions"</span><span class="token operator">:</span><span class="token punctuation">[</span>        <span class="token punctuation">&#123;</span>            <span class="token property">"remove"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>                <span class="token property">"index"</span><span class="token operator">:</span><span class="token string">"索引名"</span><span class="token punctuation">,</span>                <span class="token property">"alias"</span><span class="token operator">:</span><span class="token string">"索引别名"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>actions里面是一个数组，所以你是可以同时进行多个操作的</p><blockquote><p>有很多关于index的配置。由于也是一个比较大的知识点（需要一些前置知识，单独在这里讲的话会很空白），将会单独列出来。<br>index有个mapping配置，mapping定义整体的index的document的结构，和影响分词策略。由于会影响搜索，所以把这个归为搜索的分支知识点，将留到搜索篇再谈。</p></blockquote><h3 id="类型-type"><a href="#类型-type" class="headerlink" title="类型 type"></a>类型 type</h3><p>类型type也是用于存储document的逻辑结构，相对于index来说，type是index的下级，所以通常在面向有实际意义的数据时，index作为大类的划分，type作为小类的划分。比如如果把book书作为一个大类来建立index的话，那么书的类型(小说类、文学类、IT技术类等)就可以作为type。  </p><p>如果type的字段差别太大，那么就会导致mapping需要存储的字段过多。ElasticSearch维护组织后面发现这多个type的情况确实有点烦人。于是他们准备让一个index只放一个type了，在6.x版本中，一个索引下只有一个type，如果声明多个type，会被标记为过期，但是仍可以使用。7.0之后的版本将完全移除</p><h3 id="文档-document"><a href="#文档-document" class="headerlink" title="文档 document"></a>文档 document</h3><ul><li>文档的格式是json式的。<br>对于文档，有几个主要的标识信息：_index(插入到哪个索引中),_type(插入到哪个类型中),_id(文档的id是多少)，在插入一个文档的时候，这几个信息也是必须的。<h4 id="插入文档"><a href="#插入文档" class="headerlink" title="插入文档"></a>插入文档</h4><pre class="line-numbers language-json" data-language="json"><code class="language-json">PUT /index/type/idjson格式的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>例子<pre class="line-numbers language-json" data-language="json"><code class="language-json">PUT /douban/book/<span class="token number">4</span><span class="token punctuation">&#123;</span><span class="token property">"book_id"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token property">"book_name"</span><span class="token operator">:</span><span class="token string">"Other Voices, Other Rooms"</span><span class="token punctuation">,</span><span class="token property">"book_author"</span><span class="token operator">:</span><span class="token string">"Truman Capote"</span><span class="token punctuation">,</span><span class="token property">"book_pages"</span><span class="token operator">:</span><span class="token number">240</span><span class="token punctuation">,</span><span class="token property">"book_express"</span><span class="token operator">:</span><span class="token string">"Vintage"</span><span class="token punctuation">,</span><span class="token property">"publish_date"</span><span class="token operator">:</span><span class="token string">"1994-02-01"</span><span class="token punctuation">,</span><span class="token property">"book_summary"</span><span class="token operator">:</span><span class="token string">""</span>"  Truman Capote’s first novel is a story of almost supernatural intensity and inventiveness<span class="token punctuation">,</span> an audacious foray into the mind of a sensitive boy as he seeks out the grown-up enigmas of love and death in the ghostly landscape of the deep South.    At the age of twelve<span class="token punctuation">,</span> Joel Knox is summoned to meet the father who abandoned him at birth. But when Joel arrives at the decaying mansion in Skully’s Landing<span class="token punctuation">,</span> his father is nowhere in sight. What he finds instead is a sullen stepmother who delights in killing birds; an uncle with the face—and heart—of a debauched child; and a fearsome little girl named Idabel who may offer him the closest thing he has ever known to love.<span class="token string">""</span>"<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="查询指定文档"><a href="#查询指定文档" class="headerlink" title="查询指定文档"></a>查询指定文档</h4><p>后面要单独讲查询的类型son</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /index/type/id<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>例子</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /findpage_item_index/_doc/<span class="token number">1473111869246988296</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/2021/12/23/es02-es-de-gai-nian-suo-yin-he-wen-dang/es02-03.jpg" alt="es02"></p><h4 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h4><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token comment">// 全替换(覆盖)式更新：会使用新的json数据直接覆盖原有的【请不要复制注释】</span>PUT /index/type/idjson数据<span class="token comment">// 部分替换式更新：只会覆盖指定数据</span>POST /index/type/id/_update<span class="token punctuation">&#123;</span>  <span class="token property">"doc"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"需要修改的字段"</span><span class="token operator">:</span> <span class="token string">"修改值"</span>    <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token property">"需要修改的字段"</span><span class="token operator">:</span> <span class="token string">"修改值"</span><span class="token punctuation">]</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>例子</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">【全替换语句与插入差不多，所以不举例了】POST /douban/book/<span class="token number">4</span>/_update<span class="token punctuation">&#123;</span>  <span class="token property">"doc"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>    <span class="token property">"book_pages"</span><span class="token operator">:</span><span class="token number">241</span><span class="token punctuation">,</span>    <span class="token property">"publish_date"</span><span class="token operator">:</span><span class="token string">"1994-02-02"</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h4><p>DELETE /index/type/id</p><ul><li>删除后可以重新执行插入语句恢复数据<br>DELETE /douban/book/4</li></ul><h3 id="查询所有文档"><a href="#查询所有文档" class="headerlink" title="查询所有文档"></a>查询所有文档</h3><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /index/type/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token property">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>例子</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET /douban/book/_search<span class="token punctuation">&#123;</span>  <span class="token property">"query"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>    <span class="token property">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> es </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>es01-canal-由工作内容引入</title>
      <link href="/2021/12/22/es01-you-gong-zuo-nei-rong-yin-ru/"/>
      <url>/2021/12/22/es01-you-gong-zuo-nei-rong-yin-ru/</url>
      
        <content type="html"><![CDATA[<h2 id="es01-canal-由工作内容引入"><a href="#es01-canal-由工作内容引入" class="headerlink" title="es01-canal-由工作内容引入"></a>es01-canal-由工作内容引入</h2><blockquote><p>工作中用到了es,需求是将一些文章放到es里便于检索，对于如何从数据库同步数据到es有一些不同的选择，同事说用cannal来同步数据。<br>我之前只接触过mq发送到es,及logstash的方案，对于这种实现方案还没有试过。<br>那什么是cannal呢。</p></blockquote><h2 id="canal"><a href="#canal" class="headerlink" title=".canal"></a>.canal</h2><ol><li><p>canal是什么，官网上显示如下。</p><blockquote><p>canal，译意为水道/管道/沟渠，主要用途是基于 MySQL 数据库增量日志解析，提供增量数据订阅和消费。<br>这里我们可以简单地把canal理解为一个用来同步增量数据的一个工具。</p></blockquote></li><li><p>canal的工作原理就是把自己伪装成MySQL slave  </p></li></ol><ul><li> 模拟MySQL slave的交互协议向MySQL Mater发送 dump协议，  </li><li> MySQL mater收到canal发送过来的dump请求，开始推送binary log给canal，然后canal解析binary log，再发送到存储目的地，比如MySQL，Kafka，Elastic Search等等。<br><img src="/es01-%E7%94%B1%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9%E5%BC%95%E5%85%A5/es01-01.jpg" alt="es01"></li></ul><p>可以用canal来做  </p><ul><li>数据库镜像</li><li>数据库实时备份</li><li>索引构建和实时维护</li><li>业务cache(缓存)刷新</li><li>带业务逻辑的增量数据处理</li></ul><ol start="3"><li>搭建一个canal<br>前提：<blockquote><ul><li>jvm</li><li>mysql</li><li>mq es 等</li></ul></blockquote></li></ol><ul><li><p>去官网下载页面进行下载：<a href="https://github.com/alibaba/canal/releases">https://github.com/alibaba/canal/releases</a><br>在自己电脑上解压运行 canal.deployer</p></li><li><p>可以使用java客户端来操作canal</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.otter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>canal.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用客户端的demo</p><blockquote><p>搭建一个springboot项目，然后建立下面的类。</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CannalClient</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> BATCH_SIZE <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 创建链接</span>        <span class="token class-name">CanalConnector</span> connector <span class="token operator">=</span> <span class="token class-name">CanalConnectors</span><span class="token punctuation">.</span><span class="token function">newSingleConnector</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"example"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//打开连接</span>            connector<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//订阅数据库表,全部表</span>            connector<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">".*\\..*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//回滚到未进行ack的地方，下次fetch的时候，可以从最后一个没有ack的地方开始拿</span>            connector<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// 获取指定数量的数据</span>                <span class="token class-name">Message</span> message <span class="token operator">=</span> connector<span class="token punctuation">.</span><span class="token function">getWithoutAck</span><span class="token punctuation">(</span>BATCH_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//获取批量ID</span>                <span class="token keyword">long</span> batchId <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//获取批量的数量</span>                <span class="token keyword">int</span> size <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//如果没有数据</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>batchId <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        <span class="token comment">//线程休眠2秒</span>                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//如果有数据,处理数据</span>                    <span class="token function">printEntry</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">//进行 batch id 的确认。确认之后，小于等于此 batchId 的 Message 都会被确认。</span>                connector<span class="token punctuation">.</span><span class="token function">ack</span><span class="token punctuation">(</span>batchId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            connector<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 打印canal server解析binlog获得的实体类信息     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printEntry</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Entry</span><span class="token punctuation">></span></span> entrys<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span> entry <span class="token operator">:</span> entrys<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getEntryType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">EntryType</span><span class="token punctuation">.</span>TRANSACTIONBEGIN <span class="token operator">||</span> entry<span class="token punctuation">.</span><span class="token function">getEntryType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">EntryType</span><span class="token punctuation">.</span>TRANSACTIONEND<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//开启/关闭事务的实体类型，跳过</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//RowChange对象，包含了一行数据变化的所有特征</span>            <span class="token comment">//比如isDdl 是否是ddl变更操作 sql 具体的ddl sql beforeColumns afterColumns 变更前后的数据字段等等</span>            <span class="token class-name">RowChange</span> rowChage<span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                rowChage <span class="token operator">=</span> <span class="token class-name">RowChange</span><span class="token punctuation">.</span><span class="token function">parseFrom</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getStoreValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"ERROR ## parser of eromanga-event has an error , data:"</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//获取操作类型：insert/update/delete类型</span>            <span class="token class-name">EventType</span> eventType <span class="token operator">=</span> rowChage<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//打印Header信息</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"================》; binlog[%s:%s] , name[%s,%s] , eventType : %s"</span><span class="token punctuation">,</span>                    entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLogfileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLogfileOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSchemaName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    eventType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//判断是否是DDL语句</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rowChage<span class="token punctuation">.</span><span class="token function">getIsDdl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"================》;isDdl: true,sql:"</span> <span class="token operator">+</span> rowChage<span class="token punctuation">.</span><span class="token function">getSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//获取RowChange对象里的每一行数据，打印出来</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">RowData</span> rowData <span class="token operator">:</span> rowChage<span class="token punctuation">.</span><span class="token function">getRowDatasList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">//如果是删除语句</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>eventType <span class="token operator">==</span> <span class="token class-name">EventType</span><span class="token punctuation">.</span>DELETE<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getBeforeColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//如果是新增语句</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>eventType <span class="token operator">==</span> <span class="token class-name">EventType</span><span class="token punctuation">.</span>INSERT<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getAfterColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//如果是更新的语句</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    <span class="token comment">//变更前的数据</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------->; before"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getBeforeColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//变更后的数据</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------->; after"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getAfterColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printColumn</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Column</span><span class="token punctuation">></span></span> columns<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Column</span> column <span class="token operator">:</span> columns<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" : "</span> <span class="token operator">+</span> column<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"    update="</span> <span class="token operator">+</span> column<span class="token punctuation">.</span><span class="token function">getUpdated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>canal Adapter<br>为了便于大家的使用，官方做了一个独立的组件Adapter，Adapter是可以将canal server端获取的数据转换成几个常用的中间件数据源，现在支持kafka、rocketmq、rebitmq、hbase、elasticsearch，针对这几个中间件的支持，直接配置即可，无需开发。上文中，如果需要将mysql的数据同步到elasticsearch，直接运行 canal Adapter，修改相关的配置即可。  </p></li></ul><blockquote><p>canal 1.1.1版本之后, 默认支持将canal server接收到的binlog数据直接投递到MQ<br>本项目使用的即为canal 使用了mq发送数据来处理。<br>本质上和之前接触的没有太大的差距<br><a href="https://github.com/alibaba/canal/wiki/">https://github.com/alibaba/canal/wiki/</a><br>wiki写的很棒</p></blockquote><p> <img src="/es01-%E7%94%B1%E5%B7%A5%E4%BD%9C%E5%86%85%E5%AE%B9%E5%BC%95%E5%85%A5/es01-02.jpg" alt="es02"></p><p> 如上图所示</p><ul><li>3是mq消费者，取到数据后实例化为2所示dto类</li><li>4是一个接口，定义了一些同步的增删改查的方法，如果要实现基本上是一个表对应一个实现。</li><li>1会将4的实现类放到一个map中，key为实现类对应的表名。在3中根据消息的表名，调用这个map中的实现类处理数据。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> es </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sc-gateway-11-异常处理</title>
      <link href="/2021/12/18/sc-gateway-11-yi-chang-chu-li/"/>
      <url>/2021/12/18/sc-gateway-11-yi-chang-chu-li/</url>
      
        <content type="html"><![CDATA[<h1 id="sc-gateway-11-异常处理"><a href="#sc-gateway-11-异常处理" class="headerlink" title="sc-gateway-11-异常处理"></a>sc-gateway-11-异常处理</h1><p> 先上异常处理的步骤</p><h2 id="1-处理异常的步骤"><a href="#1-处理异常的步骤" class="headerlink" title="1. 处理异常的步骤"></a>1. 处理异常的步骤</h2><ol><li>抛出ResponseStatusException异常<blockquote><p>第一种就是抛出 ResponseStatusException异常，如下图所示。</p></blockquote></li></ol><p><img src="/2021/12/18/sc-gateway-11-yi-chang-chu-li/yichang3.jpg" alt="yichang3"></p><p>还需要在yml配置如下图<br><img src="/2021/12/18/sc-gateway-11-yi-chang-chu-li/yichang4.jpg" alt="yichang3"></p><p>这是因为DefaultErrorWebExceptionHandler.isIncludeMessage方法是这样的</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isIncludeMessage</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span> produces<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>errorProperties<span class="token punctuation">.</span><span class="token function">getIncludeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>       <span class="token keyword">case</span> ALWAYS<span class="token operator">:</span>           <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>       <span class="token keyword">case</span> ON_PARAM<span class="token operator">:</span>           <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isMessageEnabled</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">default</span><span class="token operator">:</span>           <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>       <span class="token punctuation">&#125;</span>   <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>会读取配置，然后按照配置文件的需求返回信息。  </p><ol start="2"><li>自定义异常，带ResponseStatus注解</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseStatus</span><span class="token punctuation">;</span><span class="token annotation punctuation">@ResponseStatus</span><span class="token punctuation">(</span>code<span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>BAD_REQUEST<span class="token punctuation">,</span>reason <span class="token operator">=</span> <span class="token string">"user-id不能为空"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestGatewayException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span><span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>返回的时候返回这个异常类</p><h2 id="2-源码分析"><a href="#2-源码分析" class="headerlink" title="2. 源码分析"></a>2. 源码分析</h2><p>spring-cloud-gateway 是基于spring-reactive技术的，没有使用servlet。spring-cloud-gateway 异常的处理也是由reactive的api完成的。</p><ul><li>配置类<blockquote><p>org.springframework.boot.autoconfigure.web.reactive.error 包下有一个类<br>ErrorWebFluxAutoConfiguration，这个配置类注入了两个重要的类。</p></blockquote></li></ul><ol><li><p>DefaultErrorWebExceptionHandler：这个类是ErrorWebExceptionHandler的实现类<br><img src="/2021/12/18/sc-gateway-11-yi-chang-chu-li/yichang5.jpg" alt="yichang5"></p></li><li><p>处理异常时，会通过FluxOnErrorResume调用到这个ErrorWebExceptionHandler的handle方法处理，该方法在其父类AbstractErrorWebExceptionHandler.java中，如下图，红框位置的代码是关键，异常返回内容就是在这里决定的：<br><img src="/2021/12/18/sc-gateway-11-yi-chang-chu-li/yichang6.jpg" alt="yichang6"><br>会发现此方法调用 DefaultErrorWebExceptionHandler 中的方法 getRoutingFunction</p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token class-name">RouterFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">></span></span> <span class="token function">getRoutingFunction</span><span class="token punctuation">(</span><span class="token class-name">ErrorAttributes</span> errorAttributes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token class-name">RouterFunctions</span><span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">acceptsTextHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token operator">::</span><span class="token function">renderErrorView</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andRoute</span><span class="token punctuation">(</span><span class="token class-name">RequestPredicates</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token operator">::</span><span class="token function">renderErrorResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>```  <span class="token keyword">this</span><span class="token operator">::</span><span class="token function">renderErrorResponse</span>如下所示```java    <span class="token keyword">protected</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">></span></span> <span class="token function">renderErrorResponse</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//构造返回的map对象</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> error <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//返回信息</span>    <span class="token keyword">return</span> <span class="token class-name">ServerResponse</span><span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getHttpStatus</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">BodyInserters</span><span class="token punctuation">.</span><span class="token function">fromValue</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>经过上述过程，可以知道。</p><blockquote><p>返回给调用方的状态码，取决于getHttpStatus方法的返回值<br>返回给调用方的body，取决于error的内容</p></blockquote> <pre class="line-numbers language-java" data-language="java"><code class="language-java"> <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">getHttpStatus</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> errorAttributes<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> errorAttributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> 可以发现 getErrorAttributes方法的返回值是决定返回码和返回body的关键！</p> <pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">ErrorAttributeOptions</span> options<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> errorAttributes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>STACK_TRACE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>EXCEPTION<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>STACK_TRACE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"trace"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>MESSAGE<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> errorAttributes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span><span class="token function">isIncluded</span><span class="token punctuation">(</span><span class="token class-name">Include</span><span class="token punctuation">.</span>BINDING_ERRORS<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        errorAttributes<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"errors"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> errorAttributes<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">,</span> <span class="token keyword">boolean</span> includeStackTrace<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> errorAttributes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"timestamp"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Throwable</span> error <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getError</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">MergedAnnotation</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResponseStatus</span><span class="token punctuation">></span></span> responseStatusAnnotation <span class="token operator">=</span> <span class="token class-name">MergedAnnotations</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span>TYPE_HIERARCHY<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatus</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">HttpStatus</span> errorStatus <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">determineHttpStatus</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> responseStatusAnnotation<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 </span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> errorStatus<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> errorStatus<span class="token punctuation">.</span><span class="token function">getReasonPhrase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">determineMessage</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> responseStatusAnnotation<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    errorAttributes<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"requestId"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleException</span><span class="token punctuation">(</span>errorAttributes<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">determineException</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span> includeStackTrace<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> errorAttributes<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">private</span> <span class="token class-name">HttpStatus</span> <span class="token function">determineHttpStatus</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> error<span class="token punctuation">,</span> <span class="token class-name">MergedAnnotation</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResponseStatus</span><span class="token punctuation">></span></span> responseStatusAnnotation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// 异常对象是不是ResponseStatusException类型</span>      <span class="token comment">// 如果是ResponseStatusException类型，就调用异常对象的getStatus方法作为返回值</span>      <span class="token comment">//  如果异常对象既不是ResponseStatusException类型，也没有ResponseStatus注解，就返回500</span>    <span class="token keyword">return</span> error <span class="token keyword">instanceof</span> <span class="token class-name">ResponseStatusException</span> <span class="token operator">?</span> <span class="token punctuation">(</span>    <span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span><span class="token punctuation">)</span>error<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">)</span>responseStatusAnnotation<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>INTERNAL_SERVER_ERROR<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">determineMessage</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> error<span class="token punctuation">,</span> <span class="token class-name">MergedAnnotation</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResponseStatus</span><span class="token punctuation">></span></span> responseStatusAnnotation<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">BindingResult</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>         <span class="token comment">// 异常对象是不是BindingResult类型</span>          <span class="token comment">// 如果是，就用getMessage作为返回值</span>        <span class="token keyword">return</span> error<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">ResponseStatusException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 如果不是BindingResult类型，就看是不是ResponseStatusException类型</span>        <span class="token comment">//// 如果是，就用getReason作为返回值</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span><span class="token punctuation">)</span>error<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 如果也不是ResponseStatusException类型，</span>        <span class="token comment">// 就看异常类有没有ResponseStatus注解，如果有就取该注解的reason属性作为返回值</span>        <span class="token class-name">String</span> reason <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>responseStatusAnnotation<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">"reason"</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasText</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> reason<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>             <span class="token comment">// 如果通过注解取得的reason也无效，就返回异常的getMessage字段</span>            <span class="token keyword">return</span> error<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> error<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>查看上面的源码，返回码来自determineHttpStatus的返回，<br>message字段来自determineMessage的返回。</li><li>返回的逻辑就是我们在第一节中的处理逻辑</li><li>1 抛出一个ResponseStatusException异常</li><li>2 自定义异常，带ResponseStatus注解</li></ul><h2 id="3-定制异常体的内容"><a href="#3-定制异常体的内容" class="headerlink" title="3. 定制异常体的内容"></a>3. 定制异常体的内容</h2><p>在第一节我们已经可以返回想要的状态码和异常信息，但是请看下图。<br><img src="/2021/12/18/sc-gateway-11-yi-chang-chu-li/yichang7.jpg" alt="yichang7"></p><ul><li>异常发生时系统固定返回8个字段，这就有些不够灵活了，在一些对格式和内容有严格要求的场景下，咱们需要能够完全控制返回码和返回body的内容，如下所示，只返回三个字段，每个字段都是完全为业务服务的</li><li>我们要通过编码定制异常发生时的返回信息，具体内容就只有code、message、data三个字段</li></ul><p>具体该怎么做呢？<br>Spring Cloud Gateway是基于WebFlux的，咱们之前处理异常时用到的HttpServletRequest在Spring Cloud Gateway中并不适用，因此，不能用ControllerAdvice和ExceptionHandler的手段来处理全局异常</p><blockquote><p>1 做个新的类继承DefaultErrorWebExceptionHandler，覆盖其renderErrorResponse方法，新的renderErrorResponse方法中，按照实际业务需要来设置返回内容，没错，这就是咱们的思路，不过还要细化一下，最终具体的步骤如下：</p></blockquote><blockquote><ol><li>新增一个异常类CustomizeInfoException.java，该类有三个字段：http返回码、业务返回码、业务描述信息</li><li>在返回异常的代码位置，使用CustomizeInfoException类来抛出异常，按照实际业务场景设置CustomizeInfoException实例的各个字段</li><li>新增MyErrorWebExceptionHandler.java，继承自DefaultErrorWebExceptionHandler，重写了renderErrorResponse方法，这里面检查异常实例是否是CustomizeInfoException类型，如果是，就从其中取出http返回码、业务返回码、业务描述信息等字段，构造返回body的内容，异常实例若不是CustomizeInfoException类型，就保持之前的处理逻辑不变；</li><li>新增configuration类，用于将MyErrorWebExceptionHandler实例注册到spring环境</li></ol></blockquote><ol><li>新增异常类CustomizeInfoException.java</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizeInfoException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * http返回码     */</span>    <span class="token keyword">private</span> <span class="token class-name">HttpStatus</span> httpStatus<span class="token punctuation">;</span>    <span class="token comment">/**     * body中的code字段(业务返回码)     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> code<span class="token punctuation">;</span>    <span class="token comment">/**     * body中的message字段(业务返回信息)     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>修改RequestBodyRewrite.java的apply方法，这里面是在处理请求body，如果检查到没有user-id字段，就不将请求转发到服务提供方provider-hello，而是返回错误，这里的错误就用CustomizeInfoException类来处理：</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// 如果请求参数中不含user-id，就返回异常</span>           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">"user-id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>               <span class="token class-name">CustomizeInfoException</span> customizeInfoException <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomizeInfoException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 这里返回406，您可以按照业务需要自行调整</span>               customizeInfoException<span class="token punctuation">.</span><span class="token function">setHttpStatus</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>NOT_ACCEPTABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 这里按照业务需要自行设置code</span>               customizeInfoException<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">"010020003"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 这里按照业务需要自行设置返回的message</span>               customizeInfoException<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">"请确保请求参数中的user-id字段是有效的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>customizeInfoException<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>异常处理类DemoErrorWebExceptionHandler.java</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">ErrorProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">ResourceProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>error<span class="token punctuation">.</span></span><span class="token class-name">DefaultErrorWebExceptionHandler</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>error<span class="token punctuation">.</span></span><span class="token class-name">ErrorAttributes</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">MediaType</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">BodyInserters</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>function<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ServerRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>function<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ServerResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizeErrorWebExceptionHandler</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultErrorWebExceptionHandler</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token class-name">CustomizeErrorWebExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ErrorAttributes</span> errorAttributes<span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span> resourceProperties<span class="token punctuation">,</span> <span class="token class-name">ErrorProperties</span> errorProperties<span class="token punctuation">,</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>errorAttributes<span class="token punctuation">,</span> resourceProperties<span class="token punctuation">,</span> errorProperties<span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">></span></span> <span class="token function">renderErrorResponse</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// 返回码</span>        <span class="token keyword">int</span> status<span class="token punctuation">;</span>        <span class="token comment">// 最终是用responseBodyMap来生成响应body的</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> responseBodyMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 这里和父类的做法一样，取得DefaultErrorAttributes整理出来的所有异常信息</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> error <span class="token operator">=</span> <span class="token function">getErrorAttributes</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token function">getErrorAttributeOptions</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 原始的异常信息可以用getError方法取得</span>        <span class="token class-name">Throwable</span> throwable <span class="token operator">=</span> <span class="token function">getError</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 如果异常类是咱们定制的，就定制</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>throwable <span class="token keyword">instanceof</span> <span class="token class-name">CustomizeInfoException</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">CustomizeInfoException</span> myGatewayException <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CustomizeInfoException</span><span class="token punctuation">)</span> throwable<span class="token punctuation">;</span>            <span class="token comment">// http返回码、body的code字段、body的message字段，这三个信息都从CustomizeInfoException实例中获取</span>            status <span class="token operator">=</span> myGatewayException<span class="token punctuation">.</span><span class="token function">getHttpStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            responseBodyMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> myGatewayException<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            responseBodyMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> myGatewayException<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            responseBodyMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 如果不是咱们定制的异常，就维持和父类一样的逻辑</span>            <span class="token comment">// 返回码</span>            status <span class="token operator">=</span> <span class="token function">getHttpStatus</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// body内容</span>            responseBodyMap<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token class-name">ServerResponse</span>                <span class="token comment">// http返回码</span>                <span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span>                <span class="token comment">// 类型和以前一样</span>                <span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span>                <span class="token comment">// 响应body的内容</span>                <span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token class-name">BodyInserters</span><span class="token punctuation">.</span><span class="token function">fromValue</span><span class="token punctuation">(</span>responseBodyMap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>配置类DemoErrorWebFluxAutoConfiguration</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>scgateway<span class="token punctuation">.</span>exception<span class="token punctuation">.</span></span><span class="token class-name">CustomizeErrorWebExceptionHandler</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">ObjectProvider</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">AutoConfigureBefore</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">ResourceProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">ServerProperties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span></span><span class="token class-name">WebFluxAutoConfiguration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>error<span class="token punctuation">.</span></span><span class="token class-name">ErrorAttributes</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>error<span class="token punctuation">.</span></span><span class="token class-name">ErrorWebExceptionHandler</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span>codec<span class="token punctuation">.</span></span><span class="token class-name">ServerCodecConfigurer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>result<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">ViewResolver</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token annotation punctuation">@AutoConfigureBefore</span><span class="token punctuation">(</span><span class="token class-name">WebFluxAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizeErrorWebFluxAutoConfiguration</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">CustomizeErrorWebFluxAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span> serverProperties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties <span class="token operator">=</span> serverProperties<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//这里复制ErrorWebFluxAutoConfiguration 注入DefaultErrorWebExceptionHandler </span>    <span class="token comment">//的方法。然后改成返回CustomizeErrorWebExceptionHandler即可</span>    <span class="token comment">//因为springboot版本的不同，代码会有改变，要跟着版本走。</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">ErrorWebExceptionHandler</span> <span class="token function">errorWebExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ErrorAttributes</span> errorAttributes<span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span> resourceProperties<span class="token punctuation">,</span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewResolver</span><span class="token punctuation">></span></span> viewResolvers<span class="token punctuation">,</span> <span class="token class-name">ServerCodecConfigurer</span> serverCodecConfigurer<span class="token punctuation">,</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">CustomizeErrorWebExceptionHandler</span> exceptionHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomizeErrorWebExceptionHandler</span><span class="token punctuation">(</span>errorAttributes<span class="token punctuation">,</span> resourceProperties<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>        exceptionHandler<span class="token punctuation">.</span><span class="token function">setViewResolvers</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">)</span>viewResolvers<span class="token punctuation">.</span><span class="token function">orderedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        exceptionHandler<span class="token punctuation">.</span><span class="token function">setMessageWriters</span><span class="token punctuation">(</span>serverCodecConfigurer<span class="token punctuation">.</span><span class="token function">getWriters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        exceptionHandler<span class="token punctuation">.</span><span class="token function">setMessageReaders</span><span class="token punctuation">(</span>serverCodecConfigurer<span class="token punctuation">.</span><span class="token function">getReaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> exceptionHandler<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>为什么自定义的CustomizeErrorWebExceptionHandler类会生效呢？  </li><li>因为原来的配置类中ConditionalOnMissingBean注解存在，所以我们自定义的注解生效后，这个DefaultErrorWebExceptionHandler 会被自定义的替换掉。<br>一些逻辑也会走父类的逻辑，因为我们只重写了一个方法。<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>    value <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token class-name">ErrorWebExceptionHandler</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    search <span class="token operator">=</span> <span class="token class-name">SearchStrategy</span><span class="token punctuation">.</span>CURRENT<span class="token punctuation">)</span><span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">ErrorWebExceptionHandler</span> <span class="token function">errorWebExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ErrorAttributes</span> errorAttributes<span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span> resourceProperties<span class="token punctuation">,</span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewResolver</span><span class="token punctuation">></span></span> viewResolvers<span class="token punctuation">,</span> <span class="token class-name">ServerCodecConfigurer</span> serverCodecConfigurer<span class="token punctuation">,</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">DefaultErrorWebExceptionHandler</span> exceptionHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultErrorWebExceptionHandler</span><span class="token punctuation">(</span>errorAttributes<span class="token punctuation">,</span> resourceProperties<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>    exceptionHandler<span class="token punctuation">.</span><span class="token function">setViewResolvers</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">)</span>viewResolvers<span class="token punctuation">.</span><span class="token function">orderedStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    exceptionHandler<span class="token punctuation">.</span><span class="token function">setMessageWriters</span><span class="token punctuation">(</span>serverCodecConfigurer<span class="token punctuation">.</span><span class="token function">getWriters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    exceptionHandler<span class="token punctuation">.</span><span class="token function">setMessageReaders</span><span class="token punctuation">(</span>serverCodecConfigurer<span class="token punctuation">.</span><span class="token function">getReaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> exceptionHandler<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sc-gateway-10-修改请求响应体</title>
      <link href="/2021/12/18/sc-gateway-10-xiu-gai-qing-qiu-xiang-ying-ti/"/>
      <url>/2021/12/18/sc-gateway-10-xiu-gai-qing-qiu-xiang-ying-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="10-sc-gateway-10-修改请求响应体"><a href="#10-sc-gateway-10-修改请求响应体" class="headerlink" title="10.sc-gateway-10-修改请求响应体"></a>10.sc-gateway-10-修改请求响应体</h1><h2 id="1-修改请求响应体的几种做法"><a href="#1-修改请求响应体的几种做法" class="headerlink" title="1 修改请求响应体的几种做法"></a>1 修改请求响应体的几种做法</h2><ol><li>可以自己写一个全局过滤器，获取请求体，修改请求体。但对scg所使用的非servlet技术会比较陌生。</li><li>ReadBodyPredicateFactory里面缓存了request body的信息，于是在自定义router中配置了ReadBodyPredicateFactory，然后在filter中通过cachedRequestBodyObject缓存字段获取request body信息。</li><li>官方推荐的做法是 ModifyRequestBody ，ModifyResponseBody  </li></ol><ul><li>官方推荐的3是1的简化版本，在06中我们也知道了  </li></ul><ol start="25"><li>ModifyResponseBody  </li><li>ModifyRequestBody<br>可以修改响应体和请求体，那具体该怎么做呢？  </li></ol><h2 id="2-修改请求体步骤"><a href="#2-修改请求体步骤" class="headerlink" title="2 修改请求体步骤"></a>2 修改请求体步骤</h2><ol><li>在代码配置路由的时候，调用filters方法，该方法的入参是个lambda表达式</li><li>此lambda表达式固定调用modifyResponseBody方法，咱们只要定义好modifyResponseBody方法的三个入参即可</li><li>modifyRequestBody方法的第一个入参是输入类型,第二个入参是返回类型</li><li>第三个是RewriteFunction接口的实现</li></ol><p>我们要写的就是RewriteFunction接口的实现</p><ol><li><p>接口实现</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>function</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>reactivestreams<span class="token punctuation">.</span></span><span class="token class-name">Publisher</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>rewrite<span class="token punctuation">.</span></span><span class="token class-name">RewriteFunction</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestBodyRewrite</span> <span class="token keyword">implements</span> <span class="token class-name">RewriteFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">RequestBodyRewrite</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>objectMapper <span class="token operator">=</span> objectMapper<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 根据用户ID获取用户名称的方法，可以按实际情况来内部实现，例如查库或缓存，或者远程调用     * @param userId     * @return     */</span>    <span class="token keyword">private</span>  <span class="token class-name">String</span> <span class="token function">mockUserName</span><span class="token punctuation">(</span><span class="token keyword">int</span> userId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"user-"</span> <span class="token operator">+</span> userId<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Publisher</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> body<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 取得id</span>            <span class="token keyword">int</span> userId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"user-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 得到nanme后写入map</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"user-name"</span><span class="token punctuation">,</span> <span class="token function">mockUserName</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 添加一个key/value</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"gateway-request-tag"</span><span class="token punctuation">,</span> userId <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"1. json process fail"</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// json操作出现异常时的处理</span>            <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"1. json process fail"</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置类</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">RequestBodyRewrite</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">ResponseBodyRewrite</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span></span><span class="token class-name">RouteLocator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span><span class="token class-name">RouteLocatorBuilder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">MediaType</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">,</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> builder                <span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"path_route_change"</span><span class="token punctuation">,</span>                        r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/change"</span><span class="token punctuation">)</span>                                <span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-></span> f                                        <span class="token punctuation">.</span><span class="token function">modifyRequestBody</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">RequestBodyRewrite</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">)</span>                                        <span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="3-修改响应体也是同样的套路"><a href="#3-修改响应体也是同样的套路" class="headerlink" title="3.修改响应体也是同样的套路"></a>3.修改响应体也是同样的套路</h2><p>接口</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>function</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>reactivestreams<span class="token punctuation">.</span></span><span class="token class-name">Publisher</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>rewrite<span class="token punctuation">.</span></span><span class="token class-name">RewriteFunction</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseBodyRewrite</span> <span class="token keyword">implements</span> <span class="token class-name">RewriteFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ResponseBodyRewrite</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>objectMapper <span class="token operator">=</span> objectMapper<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Publisher</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">String</span> body<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 取得id</span>            <span class="token keyword">int</span> userId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"user-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 添加一个key/value</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"gateway-response-tag"</span><span class="token punctuation">,</span> userId <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"2. json process fail"</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"2. json process fail"</span><span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>配置类<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">RequestBodyRewrite</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>changebody<span class="token punctuation">.</span>function<span class="token punctuation">.</span></span><span class="token class-name">ResponseBodyRewrite</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span></span><span class="token class-name">RouteLocator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span><span class="token class-name">RouteLocatorBuilder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">MediaType</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilterConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">,</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> builder                <span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"path_route_change"</span><span class="token punctuation">,</span>                        r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/change"</span><span class="token punctuation">)</span>                                <span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-></span> f                                        <span class="token punctuation">.</span><span class="token function">modifyRequestBody</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">RequestBodyRewrite</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">)</span>                                        <span class="token punctuation">.</span><span class="token function">modifyResponseBody</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ResponseBodyRewrite</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">)</span>                                        <span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="4-异常处理初探"><a href="#4-异常处理初探" class="headerlink" title="4. 异常处理初探"></a>4. 异常处理初探</h2><ol><li><p>修改请求或者响应body的过程中，如果发现问题需要提前返回错误（例如必要的字段不存在），代码该怎么写？</p></li><li><p>我们修改请求body的代码集中在RequestBodyRewrite.java，增加下图内容<br><img src="/2021/12/18/sc-gateway-10-xiu-gai-qing-qiu-xiang-ying-ti/yichang1.jpg" alt="yichang1"></p></li><li><p>想告诉客户端具体的错误，但实际上客户端收到的是被Gateway框架处理后的内容  </p></li></ol><p>对于异常的探究接下来一篇文章会接着写</p>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-cloud-gateway-限流过滤器</title>
      <link href="/2021/12/15/sc-gateway-09-guo-lu-qi-xian-liu-guo-lu-qi/"/>
      <url>/2021/12/15/sc-gateway-09-guo-lu-qi-xian-liu-guo-lu-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="限流过滤器"><a href="#限流过滤器" class="headerlink" title="限流过滤器"></a>限流过滤器</h1><ul><li>在6中我们看到了很多过滤器，但没有这篇讲的这个。</li><li>RequestRateLimiter 限流，RequestRateLimiterGatewayFilterFactory生成。</li></ul><h2 id="1-关于限流"><a href="#1-关于限流" class="headerlink" title="1. 关于限流"></a>1. 关于限流</h2><ul><li><p>默认的限流器是基于redis实现的，限流算法令牌桶（Token Bucket Algorithm）,关于令牌捅的原理就不在此展开了，</p></li><li><p>装令牌的桶容量有限，例如最多20个，令牌进入桶的速度恒定（注意，这里是和漏桶算法的区别），例如每秒10个，底部每个请求能拿到令牌才会被处理：</p><p>  <img src="/2021/12/15/sc-gateway-09-guo-lu-qi-xian-liu-guo-lu-qi/lpt.jpg" alt="令牌桶"></p></li></ul><h2 id="2-使用RequestRateLimiter过滤器的步骤"><a href="#2-使用RequestRateLimiter过滤器的步骤" class="headerlink" title="2. 使用RequestRateLimiter过滤器的步骤"></a>2. 使用RequestRateLimiter过滤器的步骤</h2><ol><li>准备可用的redis </li><li>maven或者gradle中添加依赖org.springframework.boot:spring-boot-starter-data-redis-reactive</li><li>确定按照什么维度限流，例如按照请求中的username参数限流，这是通过编写KeyResolver接口的实现来完成的</li><li>配置application.yml文件，添加过滤器</li></ol><h2 id="3-实现"><a href="#3-实现" class="headerlink" title="3. 实现"></a>3. 实现</h2><ol><li>添加一个接口<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserInfoController</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/userinfo"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">userInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span>HELLO_PREFIX <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>xml新增<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-data-redis-reactive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li>application.yml<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: circuitbreaker-gateway  # redis配置  redis:    host: 127.0.0.1    port: 6379  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - name: RequestRateLimiter              args:              # 令牌入桶的速度为每秒100个，相当于QPS                redis-rate-limiter.replenishRate: 100                # 桶内能装200个令牌，相当于峰值，要注意的是：第一秒从桶内能去200个，但是第二秒只能取到100个了，因为入桶速度是每秒100个                redis-rate-limiter.burstCapacity: 200                # 每个请求需要的令牌数                redis-rate-limiter.requestedTokens: 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>指定限流维度的代码CustomizeConfig.java，</li></ol><ul><li>这里是根据请求参数username的值来限流的，假设真实请求中一半请求的username的等于Tom，另一半的username的等于Jerry，按照application.yml的配置，Tom的请求QPS为100，Jerry的QPS也是100</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>ratelimit<span class="token punctuation">.</span></span><span class="token class-name">KeyResolver</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Objects</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizeConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token class-name">KeyResolver</span> <span class="token function">userKeyResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> exchange <span class="token operator">-></span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-验证"><a href="#4-验证" class="headerlink" title="4. 验证"></a>4. 验证</h2><ol><li>确保redis已经启动，并且与application.yml中的配置保持一直</li><li>启动nacos（provider-hello依赖）</li><li>启动服务提供者provider-hello</li><li>启动gateway</li><li>为了模拟web请求，这里使用了Apache Benchmark</li></ol><ul><li><p>安装的话 linux下发行版里一般有</p><p>  <img src="/2021/12/15/sc-gateway-09-guo-lu-qi-xian-liu-guo-lu-qi/sc-gateway-09-%E8%BF%87%E6%BB%A4%E5%99%A8-%E9%99%90%E6%B5%81%E8%BF%87%E6%BB%A4%E5%99%A8apdab.jpg" alt="apqab"></p></li></ul><p>执行如下命令</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ab -n <span class="token number">10000</span>  -c <span class="token number">2</span> http://localhost:8081/userinfo/userinfo?username<span class="token operator">=</span>Tom<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>  <img src="/2021/12/15/sc-gateway-09-guo-lu-qi-xian-liu-guo-lu-qi/xianliu1.jpg" alt="xianliu"></p><p>可以看到，100个请求只成功了20个。  </p>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义过滤器</title>
      <link href="/2021/12/15/sc-gateway-08-zi-ding-yi-guo-lu-qi-da-yin-duan-lu-qi-xin-xi/"/>
      <url>/2021/12/15/sc-gateway-08-zi-ding-yi-guo-lu-qi-da-yin-duan-lu-qi-xin-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="自定义过滤器"><a href="#自定义过滤器" class="headerlink" title="自定义过滤器"></a>自定义过滤器</h1><h2 id="自定义过滤器的基本套路"><a href="#自定义过滤器的基本套路" class="headerlink" title="自定义过滤器的基本套路"></a>自定义过滤器的基本套路</h2><ol><li>新建一个类（我这里名为StatePrinterGatewayFilter.java），实现GatewayFilter和Ordered接口，重点是filter方法，该过滤器的主要功能就在这里面实现</li><li>新建一个类（我这里名为StatePrinterGatewayFilterFactory.java），实现AbstractGatewayFilterFactory方法，其apply方法的返回值就是上一步新建的StatePrinterGatewayFilter的实例，该方法的入参是在路由配置中过滤器节点下面的配置，这样就可以根据配置做一些特殊的处理，然后再创建实例作为返回值</li><li>StatePrinterGatewayFilterFactory类实现String name()方法，该方法的返回值就是路由配置文件中过滤器的name</li><li>String name()也可以不实现，这是因为定义该方法的接口中有默认实现了，如下图，这样在路由配置文件中过滤器的name只能是StatePrinter： <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">default</span> <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// TODO: deal with proxys</span><span class="token keyword">return</span> <span class="token class-name">NameUtils</span><span class="token punctuation">.</span><span class="token function">normalizeFilterFactoryName</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>在配置文件中，添加自定义的过滤器，该操作和之前的添加内置过滤器一模一样</li></ol><h2 id="2-过滤器实现"><a href="#2-过滤器实现" class="headerlink" title="2. 过滤器实现"></a>2. 过滤器实现</h2><ol><li><p>过滤器类</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>scgateway<span class="token punctuation">.</span>fliter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span></span><span class="token class-name">CircuitBreaker</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span></span><span class="token class-name">CircuitBreakerRegistry</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>vavr<span class="token punctuation">.</span>collection<span class="token punctuation">.</span></span><span class="token class-name">Seq</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span></span><span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">GatewayFilter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">GatewayFilterChain</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Ordered</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">reactor<span class="token punctuation">.</span>core<span class="token punctuation">.</span>publisher<span class="token punctuation">.</span></span><span class="token class-name">Mono</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span><span class="token comment">/** * 自定义过滤器 打印断路器状态 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StatePrinterGatewayFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GatewayFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span> reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">CircuitBreaker</span> circuitBreaker <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// 通过构造方法取得reactiveResilience4JCircuitBreakerFactory实例</span>    <span class="token keyword">public</span> <span class="token class-name">StatePrinterGatewayFilter</span><span class="token punctuation">(</span><span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span> reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>reactiveResilience4JCircuitBreakerFactory <span class="token operator">=</span> reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//反射获取CircuitBreaker</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>circuitBreaker<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">CircuitBreakerRegistry</span> circuitBreakerRegistry <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Method</span> method <span class="token operator">=</span> reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"getCircuitBreakerRegistry"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// 用反射将getCircuitBreakerRegistry方法设置为可访问</span>                method<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">CircuitBreakerRegistry</span> invoke <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">CircuitBreakerRegistry</span><span class="token punctuation">)</span>method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// 得到所有断路器实例</span>            <span class="token class-name">Seq</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CircuitBreaker</span><span class="token punctuation">></span></span> seq <span class="token operator">=</span> circuitBreakerRegistry<span class="token punctuation">.</span><span class="token function">getAllCircuitBreakers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 用名字过滤，myCircuitBreaker来自路由配置中</span>            circuitBreaker <span class="token operator">=</span> seq<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>breaker <span class="token operator">-></span> breaker<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"myCircuitBreaker"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">getOrNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// 取断路器状态，再判空一次，因为上面的操作未必能取到circuitBreaker</span>        <span class="token class-name">String</span> state <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token operator">==</span>circuitBreaker<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"unknown"</span> <span class="token operator">:</span> circuitBreaker<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"state : "</span> <span class="token operator">+</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 继续执行后面的逻辑</span>        <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>工厂类</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>scgateway<span class="token punctuation">.</span>fliter<span class="token punctuation">.</span>factory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>rrs<span class="token punctuation">.</span>scgateway<span class="token punctuation">.</span>fliter<span class="token punctuation">.</span></span><span class="token class-name">StatePrinterGatewayFilter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span></span><span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">GatewayFilter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">AbstractGatewayFilterFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span><span class="token comment">/** * 自定义过滤器工厂类 * 过滤器实现打印断路器状态信息 */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StatePrinterGatewayFilterFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractGatewayFilterFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span> reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"CircuitBreakerStatePrinter"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Object</span> config<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StatePrinterGatewayFilter</span><span class="token punctuation">(</span>reactiveResilience4JCircuitBreakerFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置yml文件</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: circuitbreaker-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - name: CircuitBreaker              args:                name: myCircuitBreaker            - name: CircuitBreakerStatePrinter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="ReactiveResilience4JCircuitBreakerFactory原理分析"><a href="#ReactiveResilience4JCircuitBreakerFactory原理分析" class="headerlink" title="ReactiveResilience4JCircuitBreakerFactory原理分析"></a>ReactiveResilience4JCircuitBreakerFactory原理分析</h2><ul><li>可能会奇怪为什么要有ReactiveResilience4JCircuitBreakerFactory</li><li>以及ReactiveResilience4JCircuitBreakerFactory的作用</li></ul><ol><li>在断路器实践中我们已经知道断路器是第三方库的作用，过滤器不过是个入口。</li><li>在SpringCloudCircuitBreakerFilterFactory.apply方法中，可见断路器功能来自名为cb的对象，而这个对象是在红框处由reactiveCircuitBreakerFactory创建的：<br><img src="/2021/12/15/sc-gateway-08-zi-ding-yi-guo-lu-qi-da-yin-duan-lu-qi-xin-xi/dlq1.jpg" alt="断路器"></li><li>最终跟踪到了ReactiveResilience4JCircuitBreakerFactory类，发现了一个极其重要的变量，就是下图红框中的circuitBreakerRegistry<br><img src="/2021/12/15/sc-gateway-08-zi-ding-yi-guo-lu-qi-da-yin-duan-lu-qi-xin-xi/dlq2.jpg" alt="断路器"></li><li>ReactiveResilience4JCircuitBreakerFactory 是一个bean,我们可以将这个bean注入我们自定义的过滤器，通过反射获取circuitBreakerRegistry。</li></ol><h2 id="3-一个问题"><a href="#3-一个问题" class="headerlink" title="3.一个问题"></a>3.一个问题</h2><ol><li>图绿框中的连续四个响应，对应的断路器状态都没有打印出来，要知道，咱们的过滤器可是要处理每一个请求的，怎么会连续漏掉四个呢？</li><li>其实原因很容易推理出来：断路器CircuitBreaker的filter先执行，然后才是咱们的CircuitBreakerStatePrinter，而处于开启状态的断路器会直接返回错误给调用方，其后面的filter都不会执行了</li><li>那么问题来了：如何控制CircuitBreaker和CircuitBreakerStatePrinter这两个filter的顺序，让CircuitBreakerStatePrinter先执行？</li><li>CircuitBreakerStatePrinter是咱们自己写的代码，修改StatePrinterGatewayFilter.getOrder的返回值可以调整顺序，但CircuitBreaker不是咱自己的代码呀，这可如何是好？</li><li>老规矩，看看断路器的源码，前文已经分析过了，断路器最重要的代码是SpringCloudCircuitBreakerFilterFactory.apply方法，如下图红框，生成的filter是GatewayFilter接口的实现类：</li><li>在RouteDefinitionRouteLocator.loadGatewayFilters方法中，如下图所示，由于CircuitBreaker的filter并没有实现Ordered接口，因此执行的是红框中的代码，代表其顺序的值等于i+1，这个i就是遍历路由配置中所有过滤器时的一个从零开始的自增变量而已：<br><img src="/2021/12/15/sc-gateway-08-zi-ding-yi-guo-lu-qi-da-yin-duan-lu-qi-xin-xi/dlq3.jpg" alt="断路器"></li></ol><blockquote><ol><li>回顾咱们的路由配置，CircuitBreaker在前，CircuitBreakerStatePrinter在后，所以，在添加CircuitBreaker的时候，i等于0，那么CircuitBreaker的order就等于i+1=1了</li><li>而CircuitBreakerStatePrinter实现了Ordered接口，因此不会走红框中的代码，其order等于咱们写在代码中的值，咱们写的是10</li><li><h1 id="所以：CircuitBreaker的order等于1，CircuitBreakerStatePrinter等于10，当然是CircuitBreaker先执行了！"><a href="#所以：CircuitBreaker的order等于1，CircuitBreakerStatePrinter等于10，当然是CircuitBreaker先执行了！" class="headerlink" title="所以：CircuitBreaker的order等于1，CircuitBreakerStatePrinter等于10，当然是CircuitBreaker先执行了！"></a>所以：CircuitBreaker的order等于1，CircuitBreakerStatePrinter等于10，当然是CircuitBreaker先执行了！</h1></li></ol></blockquote><ul><li>修改如下</li></ul><ol><li>StatePrinterGatewayFilter不再实现Ordered，这样就和CircuitBreaker的filter一样，执行的是上图红框中的代码，这样，在配置文件中，谁放在前面谁就先执行</li></ol><ul><li>对应的yml<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: circuitbreaker-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;account&#x2F;**          filters:            - name: CircuitBreakerStatePrinter            - name: CircuitBreaker              args:                name: myCircuitBreaker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scg断路器(CircuitBreaker)</title>
      <link href="/2021/12/08/sc-gateway-07-duan-lu-qi-circuitbreaker/"/>
      <url>/2021/12/08/sc-gateway-07-duan-lu-qi-circuitbreaker/</url>
      
        <content type="html"><![CDATA[<h1 id="sc-gat"><a href="#sc-gat" class="headerlink" title="sc-gat"></a>sc-gat</h1><h1 id="scg断路器-CircuitBreaker"><a href="#scg断路器-CircuitBreaker" class="headerlink" title="scg断路器(CircuitBreaker)"></a>scg断路器(CircuitBreaker)</h1><p> spring-cloud-gateway的断路器其理论如下。</p><ol><li>CLOSED状态时，请求正常放行</li><li>请求失败率达到设定阈值时，变为OPEN状态，此时请求全部不放行</li><li>OPEN状态持续设定时间后，进入半开状态（HALE_OPEN），放过部分请求</li><li>半开状态下，失败率低于设定阈值，就进入CLOSE状态，即全部放行</li><li>半开状态下，失败率高于设定阈值，就进入OPEN状态，即全部不放行<br>spring-cloud 断路器和spring-cloud-gateway 断路器不同</li></ol><p>spring-cloud-gateway使用spring-cloud断路器库，可以在过滤器中使用断路器的功能。  </p><ol><li>Spring Cloud Gateway内置了断路器filter，</li><li>具体做法是使用Spring Cloud断路器的API，将gateway的路由逻辑封装到断路器中</li><li>有多个断路器的库都可以用在Spring Cloud Gateway（遗憾的是没有列举是哪些）</li><li>Resilience4J对Spring Cloud 来说是开箱即用的</li></ol><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol><li><p>增加以下依赖</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-circuitbreaker-reactor-resilience4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置文件</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: circuitbreaker-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;account&#x2F;**          filters:            - name: CircuitBreaker              args:                name: myCircuitBreaker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置类如下，这是断路器相关的参数配置：</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>circuitbreakergateway<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span></span><span class="token class-name">CircuitBreakerConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span>timelimiter<span class="token punctuation">.</span></span><span class="token class-name">TimeLimiterConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span></span><span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>circuitbreaker<span class="token punctuation">.</span>resilience4j<span class="token punctuation">.</span></span><span class="token class-name">Resilience4JConfigBuilder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">Duration</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizeCircuitBreakerConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span> <span class="token function">defaultCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">CircuitBreakerConfig</span> circuitBreakerConfig <span class="token operator">=</span> <span class="token class-name">CircuitBreakerConfig</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//</span>                <span class="token punctuation">.</span><span class="token function">slidingWindowType</span><span class="token punctuation">(</span><span class="token class-name">CircuitBreakerConfig<span class="token punctuation">.</span>SlidingWindowType</span><span class="token punctuation">.</span>TIME_BASED<span class="token punctuation">)</span> <span class="token comment">// 滑动窗口的类型为时间窗口</span>                <span class="token punctuation">.</span><span class="token function">slidingWindowSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// 时间窗口的大小为60秒</span>                <span class="token punctuation">.</span><span class="token function">minimumNumberOfCalls</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 在单位时间窗口内最少需要5次调用才能开始进行统计计算</span>                <span class="token punctuation">.</span><span class="token function">failureRateThreshold</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token comment">// 在单位时间窗口内调用失败率达到50%后会启动断路器</span>                <span class="token punctuation">.</span><span class="token function">enableAutomaticTransitionFromOpenToHalfOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 允许断路器自动由打开状态转换为半开状态</span>                <span class="token punctuation">.</span><span class="token function">permittedNumberOfCallsInHalfOpenState</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 在半开状态下允许进行正常调用的次数</span>                <span class="token punctuation">.</span><span class="token function">waitDurationInOpenState</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 断路器打开状态转换为半开状态需要等待60秒</span>                <span class="token punctuation">.</span><span class="token function">recordExceptions</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 所有异常都当作失败来处理</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        factory<span class="token punctuation">.</span><span class="token function">configureDefault</span><span class="token punctuation">(</span>id <span class="token operator">-></span> <span class="token keyword">new</span> <span class="token class-name">Resilience4JConfigBuilder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">timeLimiterConfig</span><span class="token punctuation">(</span><span class="token class-name">TimeLimiterConfig</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">timeoutDuration</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMillis</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">circuitBreakerConfig</span><span class="token punctuation">(</span>circuitBreakerConfig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> factory<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>增加一个控制器</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/account/&#123;id&#125;"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">account</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">==</span>id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span>ACCOUNT_PREFIX <span class="token operator">+</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>启动网关和hello 工程</li><li>浏览器访问8081:/account/1,多次刷新。</li><li>会在控制台看到，返回状态码变成503,这就是网关的短路起作用了。</li></ul><ol start="5"><li>就是在circuitbreaker-gateway工程中添加一个web接口：作为fallback<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fallback</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 返回字符串类型     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/myfallback"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">helloStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"myfallback, "</span> <span class="token operator">+</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>application.yml配置如下，可见是给filter增加了fallbackUri属性：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: circuitbreaker-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - name: CircuitBreaker              args:                name: myCircuitBreaker                fallbackUri: forward:&#x2F;myfallback<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h2></li></ol><ul><li>gateway 本身没有实现断路器，但可以在过滤器里配置+第三方断路器，实现网关的断路器功能。</li><li>路由配置中指定了name等于CircuitBreaker，即可对应SpringCloudCircuitBreakerFilterFactory类型的bean</li><li>GatewayResilience4JCircuitBreakerAutoConfiguration中的配置，可以证明SpringCloudCircuitBreakerResilience4JFilterFactory会被实例化并注册到spring：<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayResilience4JCircuitBreakerAutoConfiguration</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ConditionalOnEnabledFilter</span><span class="token keyword">public</span> <span class="token class-name">SpringCloudCircuitBreakerResilience4JFilterFactory</span> <span class="token function">springCloudCircuitBreakerResilience4JFilterFactory</span><span class="token punctuation">(</span><span class="token class-name">ReactiveResilience4JCircuitBreakerFactory</span> reactiveCircuitBreakerFactory<span class="token punctuation">,</span><span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DispatcherHandler</span><span class="token punctuation">></span></span> dispatcherHandler<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpringCloudCircuitBreakerResilience4JFilterFactory</span><span class="token punctuation">(</span>reactiveCircuitBreakerFactory<span class="token punctuation">,</span> dispatcherHandler<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token annotation punctuation">@ConditionalOnEnabledFilter</span><span class="token keyword">public</span> <span class="token class-name">FallbackHeadersGatewayFilterFactory</span> <span class="token function">fallbackHeadersGatewayFilterFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FallbackHeadersGatewayFilterFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>当配置了CircuitBreaker过滤器时，实际上是SpringCloudCircuitBreakerResilience4JFilterFactory类在服务<br>而关键代码都集中在其父类SpringCloudCircuitBreakerFilterFactory中</li><li> SpringCloudCircuitBreakerResilience4JFilterFactory</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sc-gateway-06-filters</title>
      <link href="/2021/12/08/sc-gateway-06-filters/"/>
      <url>/2021/12/08/sc-gateway-06-filters/</url>
      
        <content type="html"><![CDATA[<h1 id="sc-gateway-06-filters"><a href="#sc-gateway-06-filters" class="headerlink" title="sc-gateway-06-filters"></a>sc-gateway-06-filters</h1><ul><li>在本系列三中，已经得到了。</li><li>RouteDefinitionRouteLocator核心方法中会获取配置文件中的FilterDefinition，转换成 GatewayFilter。</li><li>过滤器有两类，一种是默认的，所有的都的走。一种是给路由定义的。如下面所示的过程。<blockquote><ol><li>处理 GatewayProperties 中定义的默认的 FilterDefinition，转换成 GatewayFilter。<blockquote><p> 转换逻辑</p><ol><li>根据 filter 名称获取对应的 filter factory。</li><li>创建一个 config 类对象,产生的参数绑定到 config 对象上。</li><li>将 cofing 作参数代入，调用 factory 的 applyAsync 方法创建 GatewayFilter 对象。</li></ol></blockquote></li><li>将 RouteDefinition 中定义的 FilterDefinition 转换成 GatewayFilter。</li><li>对 GatewayFilter 进行排序。</li></ol></blockquote></li></ul><h2 id="内置的定义过滤器"><a href="#内置的定义过滤器" class="headerlink" title="内置的定义过滤器"></a>内置的定义过滤器</h2><ol><li>AddRequestHeader</li></ol><ul><li>AddRequestHeader过滤器顾名思义，就是在请求头部添加指定的内容<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - AddRequestHeader&#x3D;x-request-foo, bar-config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"path_route_addr"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Path"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/hello/**"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"filters"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"AddRequestHeader"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"x-request-foo"</span><span class="token punctuation">,</span>                    <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"bar-dynamic"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="2"><li>AddRequestParameter</li></ol><ul><li>AddRequestParameter过滤器顾名思义，就是添加请求参数</li><li>配置如下，服务提供方收到的请求中会多一个参数，名为foo，值为bar-config</li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - AddRequestParameter&#x3D;foo, bar-config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"path_route_addr"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Path"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/hello/**"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"filters"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"AddRequestParameter"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>                    <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"bar-dynamic"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>AddResponseHeader</li></ol><ul><li>AddResponseHeader过滤器就是在响应的header中添加参数</li><li>配置如下，客户端收到的响应，其header中会多一个参数，名为foo，值为bar-config-response：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - AddResponseHeader&#x3D;foo, bar-config-response<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"path_route_addr"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Path"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/hello/**"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"filters"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"AddResponseHeader"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>                    <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"bar-dynamic-response"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="4"><li>DedupeResponseHeader</li></ol><ul><li>服务提供方返回的response的header中，如果有的key出线了多个value（例如跨域场景下的Access-Control-Allow-Origin），DedupeResponseHeader过滤器可以将重复的value剔除调，剔除策略有三种：RETAIN_FIRST (保留第一个，默认), RETAIN_LAST（保留最后一个）, RETAIN_UNIQUE（去重）</li><li>配置如下，指定了两个header key的去重，策略是保留最后一个：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - DedupeResponseHeader&#x3D;Access-Control-Allow-Credentials Access-Control-Allow-Origin, RETAIN_LAST<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><ol start="5"><li><p>MapRequestHeader<br>MapRequestHeader用于header中的键值对复制，如下配置的意思是：如果请求header中有Blue就新增名为X-Request-Red的key，其值和Blue的值一样  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - MapRequestHeader&#x3D;Blue, X-Request-Red<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>PrefixPath</p></li></ol><ul><li>PrefixPath很好理解，就是转发到服务提供者的时候，给path加前缀</li><li>例如我这边服务提供者原始地址是<a href="http://127.0.0.1:8082/hello/str%E9%85%8D%E7%BD%AE%E5%A6%82%E4%B8%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%91%E7%BB%99%E7%BD%91%E5%85%B3%E9%85%8D%E7%BD%AEPrefixPath=hello%EF%BC%8C%E9%82%A3%E4%B9%88%E8%AE%BF%E9%97%AE%E7%BD%91%E5%85%B3%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E8%AF%B7%E6%B1%82%E8%B7%AF%E5%BE%84%E4%B8%AD%E5%B0%B1%E4%B8%8D%E9%9C%80%E8%A6%81hello%E4%BA%86%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%A6%82%E4%B8%8B%EF%BC%9A">http://127.0.0.1:8082/hello/str配置如下，如果我给网关配置PrefixPath=hello，那么访问网关的时候，请求路径中就不需要hello了，配置如下：</a><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;str          filters:          - PrefixPath&#x3D;&#x2F;hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="7"><li>PreserveHostHeader</li></ol><ul><li>PreserveHostHeader在转发请求到服务提供者的时候，会保留host信息（否则就只能由HTTP client来决定了）</li></ul><ol start="8"><li>RedirectTo</li></ol><ul><li>RedirectTo的功能简单直白：跳转到指定位置，下面的配置中，uri字段明显是一个无效的地址，但请求还是会被RedirectTo转发到指定位置去：  <pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.1.1.1:11111          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - RedirectTo&#x3D;302, http:&#x2F;&#x2F;127.0.0.1:8082&#x2F;hello&#x2F;str<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="9"><li>RemoveRequestHeader</li></ol><ul><li>RemoveRequestHeader很好理解，删除请求header中的指定值 <pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - RemoveRequestHeader&#x3D;foo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="10"><li>RemoveResponseHeader</li></ol><ul><li>RemoveResponseHeader删除响应header中的指定值<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - RemoveResponseHeader&#x3D;foo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="11"><li>RemoveRequestParameter</li></ol><ul><li>RemoveRequestParameter 删除请求参数中的指定参数<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - RemoveRequestParameter&#x3D;foo1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="12"><li>RewritePath</li></ol><ul><li>RewritePath非常实用，将请求参数中的路径做变换<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;test&#x2F;**          filters:          - RewritePath&#x3D;&#x2F;test&#x2F;?(?&lt;segment&gt;.*), &#x2F;hello&#x2F;$\&#123;segment&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="13"><li>RewriteLocationResponseHeader</li></ol><ul><li>RewriteLocationResponseHeader用于改写response中的location信息</li><li>配置如下，一共是四个参数：stripVersionMode、locationHeaderName、hostValue、protocolsRegex<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: rewritelocationresponseheader_route        uri: http:&#x2F;&#x2F;example.org        filters:        - RewriteLocationResponseHeader&#x3D;AS_IN_REQUEST, Location, ,<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>stripVersionMode的策略一共三种：<br>NEVER_STRIP：不执行<br>AS_IN_REQUEST ：原始请求没有vesion，就执行<br>ALWAYS_STRIP ：固定执行</li><li>Location用于替换host:port部分，如果没有就是用Request中的host</li><li>protocolsRegex用于匹配协议，如果匹配不上，name过滤器啥都不做</li></ul><ol start="14"><li>RewriteResponseHeader</li></ol><ul><li>RewriteResponseHeader很好理解：修改响应header，参数有三个：header的key，匹配value的正则表达式，修改value的结果  </li><li>下面的配置表示修改响应header中X-Response-Red这个key的value，找到password=xxx的内容，改成password=***<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;test&#x2F;**          filters:          - RewriteResponseHeader&#x3D;X-Response-Red, , password&#x3D;[^&amp;]+, password&#x3D;***<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="15"><li>SecureHeaders<br>SecureHeaders会在响应的header中添加很多和安全相关的内容，配置如下：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:          - Path&#x3D;&#x2F;hello&#x2F;**          filters:          - SecureHeaders<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>SetPath</li></ol><ul><li>SetPath配合predicates使用，下面的配置会将请求/test/str改成/hello/str，可见这个segment是在predicates中赋值的，然后再filters中拿来用：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      filter:        secure-headers:          disable:            - x-frame-options            - strict-transport-security      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;test&#x2F;&#123;segment&#125;          filters:            - SetPath&#x3D;&#x2F;hello&#x2F;&#123;segment&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="17"><li>SetRequestHeader</li></ol><ul><li>SetRequestHeader顾名思义，就是改写请求的header，将指定key改为指定value，如果该key不存在就创建：</li><li>和SetPath类似，SetRequestHeader也可以和predicates配合，在predicates中定义的变量可以用在SetRequestHeader中，如下所示，当请求是/hello/str的时候，header中X-Request-Red的值就是Blue-str：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      filter:        secure-headers:          disable:            - x-frame-options            - strict-transport-security      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;&#123;segment&#125;          filters:            - SetRequestHeader&#x3D;X-Request-Red, Blue-&#123;segment&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="18"><li>SetResponseHeader</li></ol><ul><li>SetResponseHeader顾名思义，就是改写响应的header，将指定key改为指定value，如果该key不存在就创建：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      filter:        secure-headers:          disable:            - x-frame-options            - strict-transport-security      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - SetResponseHeader&#x3D;X-Request-Red, Blue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="19"><li>SetStatus</li></ol><ul><li>SetStatus很好理解：控制返回code，下面的设置会返回500：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:            - SetStatus&#x3D;500<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="20"><li>StripPrefix</li></ol><ul><li>StripPrefix是个很常用的filter，例如请求是/aaa/bbb/hello/str，我们要想将其转为/hello/str，用StripPrefix=2即可，前面两级path都被删掉了：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      set-status:        original-status-header-name: aaabbbccc      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;aaa&#x2F;**          filters:            - StripPrefix&#x3D;2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="21"><li>Retry</li></ol><ul><li>顾名思义，Retry就是重试，需要以下参数配合使用：<blockquote><p>retries：重试次数<br>statuses：遇到什么样的返回状态才重试，取值参考：org.springframework.http.HttpStatus<br>methods：那些类型的方法会才重试（GET、POST等），取值参考：org.springframework.http.HttpMethod<br>series：遇到什么样的series值才重试，取值参考：org.springframework.http.HttpStatus.Series<br>exceptions：遇到什么样的异常才重试<br>backoff：重试策略，由多个参数构成，例如firstBackoff</p></blockquote></li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: retry_test        uri: http:&#x2F;&#x2F;localhost:8080&#x2F;flakey        predicates:        - Host&#x3D;*.retry.com        filters:        - name: Retry          args:            retries: 3            statuses: BAD_GATEWAY            methods: GET,POST            backoff:              firstBackoff: 10ms              maxBackoff: 50ms              factor: 2              basedOnPreviousValue: false<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="22"><li>RequestSize</li></ol><ul><li>RequestSize也很常用：控制请求大小，可以使用KB或者MB等单位，超过这个大小就会返回413错误(Payload Too Large)，<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: request_size_route        uri: http:&#x2F;&#x2F;localhost:8080&#x2F;upload        predicates:        - Path&#x3D;&#x2F;upload        filters:        - name: RequestSize          args:            maxSize: 5000000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="23"><li>SetRequestHostHeader</li></ol><ul><li>SetRequestHostHeader会修改请求header中的host值<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Path&#x3D;&#x2F;hello&#x2F;**          filters:        - name: SetRequestHostHeader        args:          host: aaabbb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="24"><li>ModifyRequestBody</li></ol><ul><li>ModifyRequestBody用于修改请求的body内容，这里官方推荐用代码来配置，如下所示，请求body中原本是字符串，结果被改成了Hello对象的实例：</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"rewrite_request_obj"</span><span class="token punctuation">,</span> r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">"*.rewriterequestobj.org"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-></span> f<span class="token punctuation">.</span><span class="token function">prefixPath</span><span class="token punctuation">(</span><span class="token string">"/httpbin"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">modifyRequestBody</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Hello</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MediaType</span><span class="token punctuation">.</span>APPLICATION_JSON_VALUE<span class="token punctuation">,</span>                    <span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">return</span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> message<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="25"><li>ModifyResponseBody</li></ol><ul><li>ModifyResponseBody与前面的ModifyRequestBody类似，官方建议用代码实现，下面的代码作用是将响应body的内容改为全部大写：<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">routes</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">"rewrite_response_upper"</span><span class="token punctuation">,</span> r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">host</span><span class="token punctuation">(</span><span class="token string">"*.rewriteresponseupper.org"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">filters</span><span class="token punctuation">(</span>f <span class="token operator">-></span> f<span class="token punctuation">.</span><span class="token function">prefixPath</span><span class="token punctuation">(</span><span class="token string">"/httpbin"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">modifyResponseBody</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>                    <span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="26"><li>TokenRelay 这个比较有用</li></ol><ul><li>在使用第三方鉴权的时候，如OAuth2，用TokenRelay可以将第三方的token转发到服务提供者那里去： <pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: resource        uri: http:&#x2F;&#x2F;localhost:9000        predicates:        - Path&#x3D;&#x2F;resource        filters:        - TokenRelay&#x3D;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>记得还要添加jar包依赖org.springframework.boot:spring-boot-starter-oauth2-client</li></ul><ol start="27"><li>设置全局filter</li></ol><ul><li>前面的例子中，所有filter都放在路由策略中，配合predicates一起使用的，如果您想配置全局生效的filter，可以在配置文件中做以下设置，下面的配置表示AddResponseHeader和PrefixPath会处理所有请求，和路由设置无关：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      default-filters:      - AddResponseHeader&#x3D;X-Response-Default-Red, Default-Blue      - PrefixPath&#x3D;&#x2F;httpbin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><hr><ol start="28"><li>CircuitBreaker</li></ol><ul><li>CircuitBreaker即断路器，咱们在单独的一篇中深入体验这个强大的功能吧</li></ul><ol start="29"><li>FallbackHeaders</li></ol><ul><li>FallbackHeaders一般和CircuitBreaker配合使用，来看下面的配置，发生断路后，请求会被转发FallbackHeaders去处理，此时FallbackHeaders会在header中指定的key上添加异常信息：</li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: ingredients        uri: lb:&#x2F;&#x2F;ingredients        predicates:        - Path&#x3D;&#x2F;&#x2F;ingredients&#x2F;**        filters:        - name: CircuitBreaker          args:            name: fetchIngredients            fallbackUri: forward:&#x2F;fallback      - id: ingredients-fallback        uri: http:&#x2F;&#x2F;localhost:9994        predicates:        - Path&#x3D;&#x2F;fallback        filters:        - name: FallbackHeaders          args:            executionExceptionTypeHeaderName: Test-Header<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sc-gateway-05-predicate种类</title>
      <link href="/2021/12/08/sc-gateway-05-predicate-lei-xing/"/>
      <url>/2021/12/08/sc-gateway-05-predicate-lei-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="sc-gateway-05-predicate类型"><a href="#sc-gateway-05-predicate类型" class="headerlink" title="sc-gateway-05-predicate类型"></a>sc-gateway-05-predicate类型</h1><ul><li>RouteDefinitionRouteLocator 中 根据 predicate 名称获取对应的 predicate factory，使用各种工厂类获取predicate。  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span> route<span class="token punctuation">,</span> <span class="token class-name">PredicateDefinition</span> predicate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">RoutePredicateFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> factory <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>predicates<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span><span class="token keyword">if</span> <span class="token punctuation">(</span>factory <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Unable to find RoutePredicateFactory with name "</span> <span class="token operator">+</span> predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"RouteDefinition "</span> <span class="token operator">+</span> route<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" applying "</span> <span class="token operator">+</span> predicate<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" to "</span><span class="token operator">+</span> predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// @formatter:off</span><span class="token class-name">Object</span> config <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configurationService<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eventFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bound<span class="token punctuation">,</span> properties<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">new</span> <span class="token class-name">PredicateArgsEvent</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinitionRouteLocator</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> route<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span><span class="token comment">// @formatter:on</span><span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">applyAsync</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>上面代码中，1处就是获取工厂类的过程。方法的最后获取AsyncPredicate 对象，然后组成route。  </li></ul><h2 id="predicate类型"><a href="#predicate类型" class="headerlink" title="predicate类型"></a>predicate类型</h2><ol><li>After  </li></ol><ul><li>对应工厂类 AfterRoutePredicateFactory</li><li>以下的工厂类都类似，只是前缀不同。  </li><li>After表示路由在指定时间之后才生效  <pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: after_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - After&#x3D;2021-08-16T07:36:00.000+08:00[Asia&#x2F;Shanghai]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>对应json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"after_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"After"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"datetime"</span><span class="token operator">:</span> <span class="token string">"2021-08-16T07:36:00.000+08:00[Asia/Shanghai]"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="2"><li>Before </li></ol><ul><li>Before表示路由在指定时间之前才生效<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: before_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - Before&#x3D;2021-08-16T07:36:00.000+08:00[Asia&#x2F;Shanghai]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"before_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Before"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"datetime"</span><span class="token operator">:</span> <span class="token string">"2021-08-16T07:36:00.000+08:00[Asia/Shanghai]"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="3"><li>Between</li></ol><ul><li>Between表示路由在指定时间段之内才生效，既然是时间段就是两个参数，注意它们的写法<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  application:    name: hello-gateway  cloud:    gateway:      routes:        - id: between_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            - Between&#x3D;2021-08-16T07:36:00.000+08:00[Asia&#x2F;Shanghai], 2021-08-16T08:15:00.000+08:00[Asia&#x2F;Shanghai]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"path_route_addr"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Between"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"datetime1"</span><span class="token operator">:</span> <span class="token string">"2021-08-16T07:36:00.000+08:00[Asia/Shanghai]"</span><span class="token punctuation">,</span>                    <span class="token property">"datetime2"</span><span class="token operator">:</span> <span class="token string">"2021-08-16T08:18:00.000+08:00[Asia/Shanghai]"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>Cookie</li></ol><ul><li>Cookie表示cookie存在指定名称，并且对应的值符合指定正则表达式，才算匹配成功<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: cookie_route        uri: https:&#x2F;&#x2F;example.org        predicates:        - Cookie&#x3D;chocolate, ch.p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"cookie_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Cookie"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"chocolate"</span><span class="token punctuation">,</span>                    <span class="token property">"regexp"</span><span class="token operator">:</span> <span class="token string">"ch.p"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="5"><li>Header</li></ol><ul><li>Header表示header存在指定名称，并且对应的值符合指定正则表达式，才算匹配成功</li><li>下面的例子要求header中必须存在X-Request-Id，并且值一定要是数字<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: header_route        uri: https:&#x2F;&#x2F;example.org        predicates:        - Header&#x3D;X-Request-Id, \d+<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"header_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Header"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"header"</span><span class="token operator">:</span> <span class="token string">"X-Request-Id"</span><span class="token punctuation">,</span>                    <span class="token property">"regexp"</span><span class="token operator">:</span> <span class="token string">"\\d+"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="6"><li>Host</li></ol><ul><li>Host表示请求的host要和指定的字符串匹配，并且对应的值符合指定正则表达式，才算匹配成功，可以同时指定多个host匹配表达式，下面的例子给了两个，其中第一个指定了端口</li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: host_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - Host&#x3D;test.com:8081,**.anotherhost.org<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"header_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Host"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"regex"</span><span class="token operator">:</span> <span class="token string">"test.com:8086"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="7"><li>Method</li></ol><ul><li>Method非常好理解，匹配指定的方法类型（可以有多个）<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: method_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - Method&#x3D;GET,POST<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"method_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Method"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                     <span class="token property">"methods"</span><span class="token operator">:</span> <span class="token string">"GET"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="8"><li>Path</li></ol><ul><li>Path很常用，匹配指定的方法类型（可以有多个）</li><li>配置文件，注意{segment}，表示该位置的真实值可以被提取出来，在filter中可以使用，这在后续的filter文章中会有说明：<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: path_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - Path&#x3D;&#x2F;hello&#x2F;&#123;segment&#125;,&#x2F;lbtest&#x2F;&#123;segment&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"path_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Path"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                     <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/hello/&#123;segment&#125;"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="9"><li>Query</li></ol><ul><li>Query匹配的是请求中是否带有指定的参数，也能要求该参数等于指定的值（正则表达式）才被匹配上  <pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: query_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - Query&#x3D;name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json">spring<span class="token operator">:</span>  cloud<span class="token operator">:</span>    gateway<span class="token operator">:</span>      routes<span class="token operator">:</span>      - id<span class="token operator">:</span> query_route        uri<span class="token operator">:</span> http<span class="token operator">:</span><span class="token comment">//127.0.0.1:8082</span>        predicates<span class="token operator">:</span>        - Query=name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"query_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Query"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                     <span class="token property">"param"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span>                    <span class="token property">"regexp"</span><span class="token operator">:</span> <span class="token string">"aaa."</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="10"><li>RemoteAddr</li></ol><ul><li>RemoteAddr很好理解，匹配的指定来源的请求<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: remoteaddr_route        uri: http:&#x2F;&#x2F;127.0.0.1:8082        predicates:        - RemoteAddr&#x3D;192.168.50.134&#x2F;24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"remoteaddr_route"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"RemoteAddr"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                     <span class="token property">"sources"</span><span class="token operator">:</span> <span class="token string">"192.168.50.134/24"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol start="11"><li>Weight</li></ol><ul><li>Weight顾名思义，按照权重将请求分发到不同位置<pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      routes:      - id: weight_high        uri: http:&#x2F;&#x2F;192.168.50.134:8082        predicates:        - Weight&#x3D;group1, 8      - id: weight_low        uri: http:&#x2F;&#x2F;192.168.50.135:8082        predicates:        - Weight&#x3D;group1, 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>json <pre class="line-numbers language-json" data-language="json"><code class="language-json"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sc-gateway-04-动态路由</title>
      <link href="/2021/12/07/sc-gateway-04-dong-tai-lu-you/"/>
      <url>/2021/12/07/sc-gateway-04-dong-tai-lu-you/</url>
      
        <content type="html"><![CDATA[<h1 id="sc-gateway-04-动态路由"><a href="#sc-gateway-04-动态路由" class="headerlink" title="sc-gateway-04-动态路由"></a>sc-gateway-04-动态路由</h1><h2 id="1-nacos方式的动态路由"><a href="#1-nacos方式的动态路由" class="headerlink" title="1 .nacos方式的动态路由"></a>1 .nacos方式的动态路由</h2><p>本节为自己实现一个动态路由，方式为nacos.<br>思路很明确  </p><ul><li>pom文件中引入依赖<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--nacos:配置中心--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!--nacos:注册中心--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><ol><li><p>写一个类继承RouteDefinitionRepository，实现其中很重要的方法。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * nacos动态路由类 ，详细原理见。 * RouteDefinitionRepository 继承了RouteDefinitionLocator , * 1.因此也会被纳入到CompositeRouteDefinitionLocator中。 * 2.然后经过RouteDefinitionRouteLocator，最终路由都被集成到CachingRouteLocator * 3.被RoutePredicateHandlerMapping所使用 */</span><span class="token annotation punctuation">@Slf4j</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosRouteDefinitionRepository</span> <span class="token keyword">implements</span> <span class="token class-name">RouteDefinitionRepository</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//通过此id和组，获取唯一配置文件，</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SCG_DATA_ID <span class="token operator">=</span> <span class="token string">"sc-gateway-routes"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SCG_GROUP_ID <span class="token operator">=</span> <span class="token string">"DEFAULT_GROUP"</span><span class="token punctuation">;</span>    <span class="token comment">//NacosConfigService 类，通过此类获取配置中心的路由。</span>    <span class="token keyword">private</span>  <span class="token class-name">String</span> serverAddr<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ConfigService</span> nacosConfigService<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ApplicationEventPublisher</span> publisher<span class="token punctuation">;</span>    <span class="token comment">//构造方法注入</span>    <span class="token keyword">public</span> <span class="token class-name">NacosRouteDefinitionRepository</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEventPublisher</span> publisher<span class="token punctuation">,</span><span class="token class-name">String</span> serverAddr<span class="token punctuation">)</span>  <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>nacosConfigService<span class="token operator">=</span> <span class="token class-name">NacosFactory</span><span class="token punctuation">.</span><span class="token function">createConfigService</span><span class="token punctuation">(</span>serverAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>publisher<span class="token operator">=</span>publisher<span class="token punctuation">;</span>        <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//给nacosConfigService添加监听器，当配置文件更新时触发。</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">//添加一个Listener，</span>            nacosConfigService<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>SCG_DATA_ID<span class="token punctuation">,</span>SCG_GROUP_ID<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                <span class="token annotation punctuation">@Override</span>                <span class="token keyword">public</span> <span class="token class-name">Executor</span> <span class="token function">getExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">//主要重写的方法，当配置更新后，发布一个事件，此事件会触发更新路由。</span>                <span class="token annotation punctuation">@Override</span>                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiveConfigInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    publisher<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RefreshRoutesEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"NacosRouteDefinitionRepository|addListener:error"</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//重写的主要方法，通过此方法刷新路由。</span>    <span class="token annotation punctuation">@SneakyThrows</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RouteDefinition</span><span class="token punctuation">></span></span> <span class="token function">getRouteDefinitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//构造方法中为ConfigService</span>        <span class="token comment">//获取注册中心上的配置。</span>        <span class="token class-name">String</span> config <span class="token operator">=</span> nacosConfigService<span class="token punctuation">.</span><span class="token function">getConfig</span><span class="token punctuation">(</span>SCG_DATA_ID<span class="token punctuation">,</span>SCG_GROUP_ID<span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//解析json JsonUtils是一个工具类，主要是使用了jsckson来将json对象化。</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RouteDefinition</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token class-name">JsonUtils</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token class-name">RouteDefinition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//返回</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span> routeDefinition <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span>  <span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">fromIterable</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RouteDefinition</span><span class="token punctuation">></span></span> route<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> routeId<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>写一个配置类，将上述注入为bean.  </p><ul><li>为了更便于管理，使用了注解，可以在配置文件中配置是否开启动态路由。</li></ul></li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token operator">*</span><span class="token operator">*</span> <span class="token operator">*</span> 将动态路由实现类注入 <span class="token operator">*</span> <span class="token class-name">ConditionalOnProperty</span> 当rrs<span class="token punctuation">.</span>sc<span class="token operator">-</span>gateway<span class="token punctuation">.</span>dynamicRoute 的enable值为 <span class="token boolean">true</span>时，此类才有效。 <span class="token operator">*</span><span class="token operator">/</span><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"rrs.sc-gateway.dynamicRoute"</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">"enabled"</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DynamicRouteConfig</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * @ConditionalOnProperty 当rrs.sc-gateway.dynamicRoute 的from 值为nacos ，此配置类才有效。     * nacos动态路由实现     */</span>    <span class="token annotation punctuation">@Configuration</span>    <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"rrs.sc-gateway.dynamicRoute"</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">"from"</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">"nacos"</span><span class="token punctuation">,</span>matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> nacosDynamicRoute<span class="token punctuation">&#123;</span>        <span class="token comment">//server在这里是因为不能在NacosRouteDefinitionRepository的构造方法中赋值。</span>        <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"$&#123;spring.cloud.nacos.config.server-addr&#125;"</span><span class="token punctuation">)</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> serverAddr<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Bean</span>        <span class="token keyword">public</span> <span class="token class-name">NacosRouteDefinitionRepository</span> <span class="token function">nacosRouteDefinitionRepository</span><span class="token punctuation">(</span><span class="token class-name">ApplicationEventPublisher</span> publisher <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NacosRouteDefinitionRepository</span><span class="token punctuation">(</span>publisher<span class="token punctuation">,</span>serverAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>配置文件</li></ol><ul><li><p>通用配置文件</p><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token comment">  # 默认开发环境</span><span class="token comment">#spring.profiles.active=native</span><span class="token comment">##### spring-boot-actuator配置 可以http访问网关，获取，修改路由。</span><span class="token attr-name">management.endpoints.web.exposure.include</span><span class="token punctuation">=</span><span class="token attr-value">*</span><span class="token attr-name">management.endpoint.gateway.enable</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span class="token attr-name">management.endpoint.health.show-details</span><span class="token punctuation">=</span><span class="token attr-value">always</span><span class="token comment">##### 允许bean覆盖</span><span class="token attr-name">spring.main.allow-bean-definition-overriding</span><span class="token punctuation">=</span><span class="token attr-value">true</span><span class="token comment">#nacos config配置</span><span class="token attr-name">spring.cloud.nacos.config.file-extension</span><span class="token punctuation">=</span><span class="token attr-value">yml</span><span class="token attr-name">spring.cloud.nacos.config.encode</span><span class="token punctuation">=</span><span class="token attr-value">UTF-8</span><span class="token attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token attr-value">127.0.0.1:8848</span><span class="token comment">#spring.cloud.nacos.config.namespace=dcd551ee-4c0a-46d4-bc74-7289a32909aa</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>bootstrap.yml</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: sc-gateway<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>application.yml</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">#项目配置，这一部分放nacos上也行，本地 application.yml也行,bootstrap.yml也行 随意。# 前面说了可以通过配置开启或者关闭（选择哪一种）动态路由。#还可以实现redis ，mysql,mongodb等方式存储，通过接口来调用，或定时任务半夜刷新。#直接给接口传字符串似乎也可以。rrs:  sc-gateway:    dynamicRoute:      enabled: true      from: nacos<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>nacos上路由配置文件 sc-gateway-routes</p></li><li><p>注意名字要和NacosRouteDefinitionRepository的文件id相同。</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"addr"</span><span class="token punctuation">,</span>        <span class="token property">"uri"</span><span class="token operator">:</span> <span class="token string">"http://127.0.0.1:8082"</span><span class="token punctuation">,</span>        <span class="token property">"predicates"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Path"</span><span class="token punctuation">,</span>                <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>                    <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/nacos/**"</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-一个问题"><a href="#2-一个问题" class="headerlink" title="2. 一个问题"></a>2. 一个问题</h2></li><li><p>一般来说，本地配置文件和配置中心的配置不同的项可以组合生效，不会覆盖。</p></li><li><p>在本地配置文件中配置了路由，又在nacos的配置文件上配置了路由，这两个路由不会组合生效，而是只会生效一个。配置中心的优先级要高一点。</p></li><li><p>思考了一下，因为路由是一个配置值，也即是同一个配置项。因此会覆盖。</p></li></ul><h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>03-spring-cloud-gateway-源码分析</title>
      <link href="/2021/12/07/sc-gateway-03-yuan-ma-jie-xi-zu-jian/"/>
      <url>/2021/12/07/sc-gateway-03-yuan-ma-jie-xi-zu-jian/</url>
      
        <content type="html"><![CDATA[<h2 id="03-spring-cloud-gateway-源码分析"><a href="#03-spring-cloud-gateway-源码分析" class="headerlink" title="03-spring-cloud-gateway-源码分析"></a>03-spring-cloud-gateway-源码分析</h2><ul><li>它们存在一个共同问题：路由配置变更后必须重启Gateway应用才能生效。这实在是不适合生产环境！</li><li>所以我们要实现动态路由  </li></ul><blockquote><p>了解原理最好的方法是读源码，因此我们可以从源码入手，了解它是如何工作的，这样知其所以然-&gt;知其如何然。可以不仅仅模仿网上的几种方法，还能实现其他的方法。 这篇文章和余下部分主要分析源码。  </p></blockquote><h3 id="1-启动过程"><a href="#1-启动过程" class="headerlink" title="1.启动过程"></a>1.启动过程</h3><p>首先观察配置类，配置类生效的步骤如下。</p><pre class="line-numbers language-flow" data-language="flow"><code class="language-flow">one<span class="token operator">=></span>start<span class="token operator">:</span> GatewayLoadBalancerClientAutoConfigurationtwo<span class="token operator">=></span>operation<span class="token operator">:</span> GatewayClassPathWarningAutoConfiguratio  th<span class="token operator">=></span>operation<span class="token operator">:</span> GatewayRedisAutoConfigurationfo<span class="token operator">=></span>end<span class="token operator">:</span> GatewayAutoConfigurationone<span class="token operator">-</span><span class="token operator">></span>two<span class="token operator">-</span><span class="token operator">></span>th<span class="token operator">-</span><span class="token operator">></span>fo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>GatewayLoadBalancerClientAutoConfiguration  </p><p>  初始化ReactiveLoadBalancerClientFilter类</p></li><li><p>GatewayClassPathWarningAutoConfiguratio<br>  用于检查项目是否正确导入 spring-boot-starter-webflux 依赖，而不是错误导入 spring-boot-starter-web 依赖。</p></li><li><p>GatewayRedisAutoConfiguration<br>  初始化 RedisRateLimiter<br>  RequestRateLimiterGatewayFilterFactory 基于 RedisRateLimiter 实现网关的限流功能</p></li><li><p>GatewayAutoConfiguration<br>  Spring Cloud Gateway 核心配置类<br>  初始化的bean如下</p><ul><li>NettyConfiguration</li><li>GlobalFilter</li><li>FilteringWebHandler</li><li>GatewayProperties</li><li>PrefixPathGatewayFilterFactory</li><li>RoutePredicateFactory</li><li>RouteDefinitionLocator</li><li>RouteLocator</li><li>RoutePredicateHandlerMapping</li><li>GatewayWebfluxEndpoint</li></ul></li></ul><ol><li>NettyConfiguration ，Netty 配置类。  </li></ol><blockquote><ol><li>创建一个类型为 java.util.Objects.Consumer 的 Bean 对象。该 Consumer 会将传入类型为 reactor.ipc.netty.options.HttpClientOptions.Builder 的参数 opts ，设置 opts 的 poolResources 属性。调用 PoolResources.elastic(“proxy”) 方法，创建 name 属性为 “proxy” 的 reactor.ipc.netty.resources.PoolResources 。其中 “proxy” 用于实际使用时，打印日志的标记。</li><li>创建一个类型为 reactor.ipc.netty.http.client.HttpClient 的 Bean 对象。该 HttpClient 使用 Netty 实现的 Client 。</li><li>使用 HttpClient Bean ，创建一个类型为 org.springframework.cloud.gateway.filter.NettyRoutingFilter 的 Bean 对象。  NettyRoutingFilter 的代码实现见后文。</li><li>创建一个类型为 org.springframework.cloud.gateway.filter.NettyWriteResponseFilter 的 Bean 对象。 NettyWriteResponseFilter 的代码实现解析见后文。</li><li>创建一个类型为 org.springframework.web.reactive.socket.client.ReactorNettyWebSocketClient 的 Bean 对象，用于下文 WebsocketRoutingFilter 的 Bean 对象创建。</li></ol></blockquote><ol start="2"><li><p>GlobalFilter</p><blockquote><ol><li>创建一个类型为 org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter 的 Bean 对象。</li><li>创建一个类型为 org.springframework.cloud.gateway.filter.ForwardRoutingFilter 的 Bean 对象。</li><li>创建一个类型为 org.springframework.web.reactive.socket.server.WebSocketService 的 Bean 对象。</li><li>创建一个类型为 org.springframework.cloud.gateway.filter.WebsocketRoutingFilter 的 Bean 对象。</li></ol></blockquote></li><li><p>FilteringWebHandler</p><blockquote><p>当所有 org.springframework.cloud.gateway.filter.GlobalFilter 初始化完成时( 包括上面的 NettyRoutingFilter / NettyWriteResponseFilter )，创建一个类型为 org.springframework.cloud.gateway.handler.FilteringWebHandler 的 Bean 对象</p></blockquote></li><li><p>GatewayProperties</p><blockquote><p>创建一个类型为 org.springframework.cloud.gateway.config.GatewayProperties 的 Bean 对象，用于加载配置文件配置的 RouteDefinition / FilterDefinition 。</p></blockquote></li><li><p>PrefixPathGatewayFilterFactory</p><blockquote><p>创建 org.springframework.cloud.gateway.filter.factory 包下的 org.springframework.cloud.gateway.filter.factory.GatewayFilterFactory 接口的实现们。</p></blockquote></li><li><p>RoutePredicateFactory</p><blockquote><p>创建 org.springframework.cloud.gateway.handler.predicate 包下的 org.springframework.cloud.gateway.handler.predicate.RoutePredicateFactory 接口的实现们。 </p></blockquote></li><li><p>RouteDefinitionLocator (3.0.x 版本 改为直接注入下面几个对象)</p><blockquote><ol><li>使用 GatewayProperties Bean ，创建一个类型为 org.springframework.cloud.gateway.config.PropertiesRouteDefinitionLocator 的 Bean 对象。</li><li>创建一个类型为 org.springframework.cloud.gateway.route.InMemoryRouteDefinitionRepository 的 Bean 对象。</li><li>使用上面创建的 RouteDefinitionLocator 的 Bean 对象们，创建一个类型为 org.springframework.cloud.gateway.route.CompositeRouteDefinitionLocator 的 Bean 对象。</li></ol></blockquote></li><li><p>RouteLocator</p><blockquote><ol><li>创建一个类型为 org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator 的 Bean 对象。<br>此处的 routeDefinitionLocator 参数，使用了 @Primary 注解的 CompositeRouteDefinitionLocator 的 Bean 对象。</li><li>创建一个类型为 org.springframework.cloud.gateway.route.CachingRouteLocator 的 Bean 对象。该 Bean 对象内嵌 org.springframework.cloud.gateway.route.CompositeRouteLocator 对象。</li></ol></blockquote></li><li><p>RoutePredicateHandlerMapping </p><blockquote><p>创建一个类型为 org.springframework.cloud.gateway.handler.RoutePredicateHandlerMapping 的 Bean 对象，用于查找匹配到 Route ，并进行处理。</p></blockquote></li><li><p>GatewayWebfluxEndpoint</p><blockquote><p>创建一个类型为 org.springframework.cloud.gateway.actuate.GatewayWebfluxEndpoint 的 Bean 对象，提供管理网关的 HTTP API .</p></blockquote></li></ol><h3 id="2-核心组件和工作原理"><a href="#2-核心组件和工作原理" class="headerlink" title="2.核心组件和工作原理"></a>2.核心组件和工作原理</h3><h4 id="2-1-基本组件"><a href="#2-1-基本组件" class="headerlink" title="2.1.基本组件"></a>2.1.基本组件</h4><ol><li>Route  </li></ol> <pre class="line-numbers language-java" data-language="java"><code class="language-java">   <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">URI</span> uri<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> order<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> predicate<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">></span></span> gatewayFilters<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> metadata<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>id，标识符，区别于其他 Route。  </li><li>destination uri，路由指向的目的地 uri，即客户端请求最终被转发的目的地。</li><li>order，用于多个 Route 之间的排序，数值越小排序越靠前，匹配优先级越高。</li><li>predicate，谓语，表示匹配该 Route 的前置条件，即满足相应的条件才会被路由到目的地 uri。</li><li>gateway filters，过滤器用于处理切面逻辑，如路由转发前修改请求头等。  </li></ol></blockquote><ol start="2"><li>AsyncPredicate  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token class-name">Publisher</span><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token keyword">default</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> other<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AndAsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">default</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">negate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NegateAsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">default</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">not</span><span class="token punctuation">(</span><span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> other<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NegateAsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">default</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">or</span><span class="token punctuation">(</span><span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> other<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrAsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>AsyncPredicate 定义了 4 种逻辑操作方法：</li></ol><blockquote><ol><li>and ，与操作，即两个 Predicate 组成一个，需要同时满足。</li><li>negate，取反操作，即对 Predicate 匹配结果取反。</li><li>or，或操作，即两个 Predicate 组成一个，只需满足其一。</li><li>not和其他的不同</li></ol></blockquote><ol start="3"><li>GatewayFilter</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GatewayFilter</span> <span class="token keyword">extends</span> <span class="token class-name">ShortcutConfigurable</span> <span class="token punctuation">&#123;</span><span class="token comment">/** * Name key. */</span><span class="token class-name">String</span> NAME_KEY <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">;</span><span class="token comment">/** * Value key. */</span><span class="token class-name">String</span> VALUE_KEY <span class="token operator">=</span> <span class="token string">"value"</span><span class="token punctuation">;</span><span class="token comment">/** * Process the Web request and (optionally) delegate to the next &#123;@code WebFilter&#125; * through the given &#123;@link GatewayFilterChain&#125;. * @param exchange the current server exchange * @param chain provides a way to delegate to the next filter * @return &#123;@code Mono&lt;Void>&#125; to indicate when request processing is complete */</span><span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">></span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-2-Route-构建的原理"><a href="#2-2-Route-构建的原理" class="headerlink" title="2.2 Route 构建的原理"></a>2.2 Route 构建的原理</h4><p>外部化配置是如何工作的？<br>Spring boot 遵循规约大于配置的原则，starter 模块都有对应的以模块名称作前缀，以 “AutoConfiguration” 后缀的自动装配类。同样的还有以模块名前缀，以Properties后缀的配置类作为支持。<br>Gateway 模块自动装配类为 GatewayAutoConfiguration，对应的配置类为 GatewayProperties。  </p><ol><li>GatewayProperties。<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * List of Routes. */</span><span class="token annotation punctuation">@NotNull</span><span class="token annotation punctuation">@Valid</span><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RouteDefinition</span><span class="token punctuation">></span></span> routes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/** * List of filter definitions that are applied to every route. */</span><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FilterDefinition</span><span class="token punctuation">></span></span> defaultFilters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>表明以 “spring.cloud.gateway” 前缀的 properties 会绑定 GatewayProperties。</li><li>用来对 Route 进行定义。</li><li>用于定义默认的 Filter 列表，默认的 Filter 会应用到每一个 Route 上，gateway 处理时会将其与 Route 中指定的 Filter 进行合并后并逐个执行。</li></ul><ol start="2"><li>RouteDefinition<pre class="line-numbers language-java" data-language="java"><code class="language-java">   <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span><span class="token annotation punctuation">@NotEmpty</span><span class="token annotation punctuation">@Valid</span><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PredicateDefinition</span><span class="token punctuation">></span></span> predicates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Valid</span><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FilterDefinition</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@NotNull</span><span class="token keyword">private</span> <span class="token class-name">URI</span> uri<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> metadata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span> order <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>定义 Route 的 id，2.x默认使用 UUID。3.x默认为0</li><li>定义 Predicate。</li><li>定义 Filter。</li><li>定义目的地 URI。</li><li>定义 Route 的序号。</li></ul><ol start="3"><li>FilterDefinition</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@NotNull</span><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">FilterDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>定义了 Filter 的名称，符合特定的命名规范，为对应的工厂名前缀。</li><li>一个键值对参数用于构造 Filter 对象</li></ul><ol start="4"><li>PredicateDefinition<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@NotNull</span><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">PredicateDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token class-name">PredicateDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">int</span> eqIdx <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>eqIdx <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ValidationException</span><span class="token punctuation">(</span><span class="token string">"Unable to parse PredicateDefinition text '"</span> <span class="token operator">+</span> text <span class="token operator">+</span> <span class="token string">"'"</span> <span class="token operator">+</span> <span class="token string">", must be of the form name=value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token function">setName</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> eqIdx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token function">tokenizeToStringArray</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>eqIdx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>args<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">NameUtils</span><span class="token punctuation">.</span><span class="token function">generateName</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>定义了 Predicate 的名称，它们要符固定的命名规范，为对应的工厂名称。</li><li>一个 Map 类型的参数，构造 Predicate 使用到的键值对参数。</li></ul><ol start="5"><li>RoutePredicateFactory  </li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span> <span class="token comment">// ①</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RoutePredicateFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">ShortcutConfigurable</span><span class="token punctuation">,</span>    <span class="token class-name">Configurable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span> <span class="token comment">// ④</span>    <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">C</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ②</span>    <span class="token keyword">default</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">applyAsync</span><span class="token punctuation">(</span><span class="token class-name">C</span> config<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// ③</span>        <span class="token keyword">return</span> <span class="token function">toAsyncPredicate</span><span class="token punctuation">(</span><span class="token function">apply</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// RoutePredicateFactory 扩展了 Configurable</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Configurable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> <span class="token function">getConfigClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ⑤</span>    <span class="token class-name">C</span> <span class="token function">newConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ⑥</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>声明它是一个函数接口。</li><li>核心方法，即函数接口的唯一抽象方法，用于生产 Predicate，接收一个范型参数 config。</li><li>对参数 config 应用工厂方法，并将返回结果 Predicate 包装成 AsyncPredicate。包装成 AsyncPredicate 是为了使用非阻塞模型。</li><li>扩展了 Configurable 接口，从命名上可以推断 Predicate 工厂是支持配置的。</li><li>获取配置类的类型，支持范型，具体的 config 类型由子类指定。</li><li>创建一个 config 实例，由具体的实现类来完成。</li></ul><ol start="6"><li>GatewayFilterFactory</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// useful for javadsl</span><span class="token keyword">default</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">String</span> routeId<span class="token punctuation">,</span> <span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">C</span> config <span class="token operator">=</span> <span class="token function">newConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">apply</span><span class="token punctuation">(</span>routeId<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">default</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">C</span><span class="token punctuation">></span></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">C</span> config <span class="token operator">=</span> <span class="token function">newConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token function">apply</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>GatewayFilterFactory 职责就是生产 GatewayFilter。</li><li>同样继承了 ShortcutConfigurable 和 Configurable 接口，支持配置。</li><li>核心方法，用于生产 GatewayFilter，接收一个范型参数 config 。</li></ul><h4 id="2-3-Predicate-示例"><a href="#2-3-Predicate-示例" class="headerlink" title="2.3 Predicate 示例"></a>2.3 Predicate 示例</h4><p>主要是观察一个Predicate是如何被读取的。  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  cloud:    gateway:      discovery:        locator:          lowerCaseServiceId: true          enabled: true      routes:        - id: admin-api          uri: lb:&#x2F;&#x2F;rrs-admin-api          predicates:            - Path&#x3D;&#x2F;admin-api&#x2F;**          filters:            - StripPrefix&#x3D;1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>那么生成的 PredicateDefinition 对象 toString() 方法返回结果  </p><blockquote><p>PredicateDefinition {<br>    name=’Path’,<br>    args={_genkey_0=/admin-api/**]}<br>}</p></blockquote><ol><li>生产谓语的工厂<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PathRoutePredicateFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractRoutePredicateFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PathRoutePredicateFactory<span class="token punctuation">.</span>Config</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Log</span> log <span class="token operator">=</span> <span class="token class-name">LogFactory</span><span class="token punctuation">.</span><span class="token function">getLog</span><span class="token punctuation">(</span><span class="token class-name">PathRoutePredicateFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> MATCH_TRAILING_SLASH <span class="token operator">=</span> <span class="token string">"matchTrailingSlash"</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">PathPatternParser</span> pathPatternParser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PathPatternParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">PathRoutePredicateFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">traceMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> prefix<span class="token punctuation">,</span> <span class="token class-name">Object</span> desired<span class="token punctuation">,</span> <span class="token class-name">Object</span> actual<span class="token punctuation">,</span> <span class="token keyword">boolean</span> match<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>log<span class="token punctuation">.</span><span class="token function">isTraceEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%s \"%s\" %s against value \"%s\""</span><span class="token punctuation">,</span> prefix<span class="token punctuation">,</span> desired<span class="token punctuation">,</span>match <span class="token operator">?</span> <span class="token string">"matches"</span> <span class="token operator">:</span> <span class="token string">"does not match"</span><span class="token punctuation">,</span> actual<span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPathPatternParser</span><span class="token punctuation">(</span><span class="token class-name">PathPatternParser</span> pathPatternParser<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>pathPatternParser <span class="token operator">=</span> pathPatternParser<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> <span class="token function">shortcutFieldOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"patterns"</span><span class="token punctuation">,</span> MATCH_TRAILING_SLASH<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">ShortcutType</span> <span class="token function">shortcutType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token class-name">ShortcutType</span><span class="token punctuation">.</span>GATHER_LIST_TAIL_FLAG<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Config</span> config<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">//1</span><span class="token keyword">final</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PathPattern</span><span class="token punctuation">></span></span> pathPatterns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>pathPatternParser<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>pathPatternParser<span class="token punctuation">.</span><span class="token function">setMatchOptionalTrailingSeparator</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">isMatchTrailingSlash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>config<span class="token punctuation">.</span><span class="token function">getPatterns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>pattern <span class="token operator">-></span> <span class="token punctuation">&#123;</span><span class="token class-name">PathPattern</span> pathPattern <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pathPatternParser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">;</span>pathPatterns<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pathPattern<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GatewayPredicate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">PathContainer</span> path <span class="token operator">=</span> <span class="token function">parsePath</span><span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRawPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">PathPattern</span> match <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pathPatterns<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">PathPattern</span> pathPattern <span class="token operator">=</span> pathPatterns<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>pathPattern<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>match <span class="token operator">=</span> pathPattern<span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>match <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token function">traceMatch</span><span class="token punctuation">(</span><span class="token string">"Pattern"</span><span class="token punctuation">,</span> match<span class="token punctuation">.</span><span class="token function">getPatternString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">PathMatchInfo</span> pathMatchInfo <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">matchAndExtract</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">putUriTemplateVariables</span><span class="token punctuation">(</span>exchange<span class="token punctuation">,</span> pathMatchInfo<span class="token punctuation">.</span><span class="token function">getUriVariables</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>exchange<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>GATEWAY_PREDICATE_MATCHED_PATH_ATTR<span class="token punctuation">,</span> match<span class="token punctuation">.</span><span class="token function">getPatternString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> routeId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> exchange<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>GATEWAY_PREDICATE_ROUTE_ATTR<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>routeId <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// populated in RoutePredicateHandlerMapping</span>exchange<span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>GATEWAY_PREDICATE_MATCHED_PATH_ROUTE_ID_ATTR<span class="token punctuation">,</span> routeId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span><span class="token function">traceMatch</span><span class="token punctuation">(</span><span class="token string">"Pattern"</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getPatterns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"Paths: %s, match trailing slash: %b"</span><span class="token punctuation">,</span> config<span class="token punctuation">.</span><span class="token function">getPatterns</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>config<span class="token punctuation">.</span><span class="token function">isMatchTrailingSlash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><blockquote><ol><li>返回一个GatewayPredicate 对象，test方法返回true则通过，请求可以按这个规则走。</li><li>PredicateDefinition 对象又是如何转换成 PathRoutePredicateFactory.Config 对象的？</li><li>这要涉及 RouteLocator 组件。</li></ol></blockquote><ol start="2"><li>RouteLocator<br>Route 的定位器或者说探测器，是用来获取 Route 信息的。<br>外部化配置定义 Route 使用的是 RouteDefinition 组件。同样的也有配套的 RouteDefinitionLocator 组件。</li></ol><p>RouteLocator </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RouteLocator</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span><span class="token punctuation">></span></span> <span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ①</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>RouteDefinitionLocator</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">RouteDefinitionLocator</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RouteDefinition</span><span class="token punctuation">></span></span> <span class="token function">getRouteDefinitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ①</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="3"><li>RouteDefinitionRouteLocator<br>RouteLocator 最主要的实现类，用于将 RouteDefinition 转换成 Route。<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RouteDefinitionRouteLocator</span> <span class="token keyword">implements</span> <span class="token class-name">RouteLocator</span> <span class="token punctuation">&#123;</span><span class="token comment">/** * Default filters name. */</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_FILTERS <span class="token operator">=</span> <span class="token string">"defaultFilters"</span><span class="token punctuation">;</span><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">Log</span> logger <span class="token operator">=</span> <span class="token class-name">LogFactory</span><span class="token punctuation">.</span><span class="token function">getLog</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">RouteDefinitionLocator</span> routeDefinitionLocator<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ConfigurationService</span> configurationService<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">RoutePredicateFactory</span><span class="token punctuation">></span></span> predicates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">GatewayFilterFactory</span><span class="token punctuation">></span></span> gatewayFilterFactories <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">GatewayProperties</span> gatewayProperties<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">RouteDefinitionRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinitionLocator</span> routeDefinitionLocator<span class="token punctuation">,</span> <span class="token comment">//1</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RoutePredicateFactory</span><span class="token punctuation">></span></span> predicates<span class="token punctuation">,</span> <span class="token comment">//2</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilterFactory</span><span class="token punctuation">></span></span> gatewayFilterFactories<span class="token punctuation">,</span><span class="token comment">//3</span><span class="token class-name">GatewayProperties</span> gatewayProperties<span class="token punctuation">,</span> <span class="token comment">//4</span><span class="token class-name">ConfigurationService</span> configurationService<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//5</span><span class="token keyword">this</span><span class="token punctuation">.</span>routeDefinitionLocator <span class="token operator">=</span> routeDefinitionLocator<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>configurationService <span class="token operator">=</span> configurationService<span class="token punctuation">;</span><span class="token function">initFactories</span><span class="token punctuation">(</span>predicates<span class="token punctuation">)</span><span class="token punctuation">;</span>gatewayFilterFactories<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>factory <span class="token operator">-></span> <span class="token keyword">this</span><span class="token punctuation">.</span>gatewayFilterFactories<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>factory<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>gatewayProperties <span class="token operator">=</span> gatewayProperties<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>routeDefinitionLocator 用于加载外部配置的RouteDefinitionLocator类</li><li>List<RoutePredicateFactory> predicates 加载谓语的工厂集合 </RoutePredicateFactory></li><li>gatewayFilterFactories ,加载过滤器的工厂集合 </li><li>GatewayProperties gatewayProperties ,外部化配置类。</li><li>ConfigurationService configurationService ，是一个用来</li></ol></blockquote></li></ol><p>该类依赖 GatewayProperties 对象，后者已经携带了 List 结构的 RouteDefinition，那为什么还要依赖 RouteDefinitionLocator 来提供 RouteDefinition？</p><blockquote><ol><li>这里并不会直接使用到 GatewayProperties 类中的 RouteDefinition，仅是用到其定义的 default filters，这会应用到每一个 Route 上。</li><li>最终传入的 RouteDefinitionLocator 实现上是 CompositeRouteDefinitionLocator 的实例，它组合了 GatewayProperties 中所定义的 routes。</li></ol></blockquote><p>在自动装配类中</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token keyword">public</span> <span class="token class-name">PropertiesRouteDefinitionLocator</span> <span class="token function">propertiesRouteDefinitionLocator</span><span class="token punctuation">(</span><span class="token class-name">GatewayProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PropertiesRouteDefinitionLocator</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinitionRepository</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">InMemoryRouteDefinitionRepository</span> <span class="token function">inMemoryRouteDefinitionRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">InMemoryRouteDefinitionRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Bean</span><span class="token annotation punctuation">@Primary</span><span class="token keyword">public</span> <span class="token class-name">RouteDefinitionLocator</span> <span class="token function">routeDefinitionLocator</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RouteDefinitionLocator</span><span class="token punctuation">></span></span> routeDefinitionLocators<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CompositeRouteDefinitionLocator</span><span class="token punctuation">(</span><span class="token class-name">Flux</span><span class="token punctuation">.</span><span class="token function">fromIterable</span><span class="token punctuation">(</span>routeDefinitionLocators<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>是RouteDefinitionLocator 的实现类，RouteDefinition 信息来自 GatewayProperties。</li><li>使用 CompositeRouteDefinitionLocator 实现，它组合了多个 RouteDefinitionLocator 实例。这给用户（开发者）提供了可扩展的余地，用户可以根据需要扩展自己的 RouteDefinitionLocator，比如 RouteDefinition 可源自数据库。  </li></ol></blockquote><p><strong>比如 RouteDefinition 可源自数据库。</strong><br><strong>这里就可以实现动态路由</strong></p><ul><li>一种是主动触发，更新路由，路由可以在数据库中，也可以在各种缓存中，也可以在直接返回一个文本文件。</li><li>二是事件触发，例如当nacos配置更新，自动更新路由。甚至自己写事件，当数据库特定表更新则更新路由。</li></ul><p><strong>RouteDefinitionRouteLocator核心方法</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span><span class="token punctuation">></span></span> <span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span><span class="token punctuation">></span></span> routes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>routeDefinitionLocator<span class="token punctuation">.</span><span class="token function">getRouteDefinitions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">::</span><span class="token function">convertToRoute</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gatewayProperties<span class="token punctuation">.</span><span class="token function">isFailOnRouteDefinitionError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// instead of letting error bubble up, continue</span>routes <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">onErrorContinue</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isWarnEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"RouteDefinition id "</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span><span class="token punctuation">)</span> obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">" will be ignored. Definition has invalid configs, "</span> <span class="token operator">+</span> error<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> routes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>route <span class="token operator">-></span> <span class="token punctuation">&#123;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"RouteDefinition matched: "</span> <span class="token operator">+</span> route<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> route<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">private</span> <span class="token class-name">Route</span> <span class="token function">convertToRoute</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span> routeDefinition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//2</span><span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> predicate <span class="token operator">=</span> <span class="token function">combinePredicates</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">></span></span> gatewayFilters <span class="token operator">=</span> <span class="token function">getFilters</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span><span class="token keyword">return</span> <span class="token class-name">Route</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asyncPredicate</span><span class="token punctuation">(</span>predicate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceFilters</span><span class="token punctuation">(</span>gatewayFilters<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>调用 convertToRoute 方法将 RouteDefinition 转换成 Route。</li><li>将 PredicateDefinition 转换成 AsyncPredicate。</li><li>将 FilterDefinition 转换成 GatewayFilter。</li><li>根据 ② 和 ③ 两步骤定义的变量生成 Route 对象。</li></ol></blockquote><ul><li><p>PredicateDefinition 转换成 AsyncPredicate</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">combinePredicates</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span> routeDefinition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PredicateDefinition</span><span class="token punctuation">></span></span> predicates <span class="token operator">=</span> routeDefinition<span class="token punctuation">.</span><span class="token function">getPredicates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>predicates <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> predicates<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token comment">// this is a very rare case, but possible, just match all</span><span class="token keyword">return</span> <span class="token class-name">AsyncPredicate</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>exchange <span class="token operator">-></span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> predicate <span class="token operator">=</span> <span class="token function">lookup</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">,</span> predicates<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PredicateDefinition</span> andPredicate <span class="token operator">:</span> predicates<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> predicates<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> found <span class="token operator">=</span> <span class="token function">lookup</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">,</span> andPredicate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>predicate <span class="token operator">=</span> predicate<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>found<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> predicate<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>调用 lookup 方法，将列表中第一个 PredicateDefinition 转换成 AsyncPredicate。</li><li>循环调用，将列表中每一个 PredicateDefinition 都转换成 AsyncPredicate。  </li><li>应用and操作，将所有的 AsyncPredicate 组合成一个 AsyncPredicate 对象。 </li></ol></blockquote></li><li><p>PredicateDefinition 都转换成 AsyncPredicate。过程</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">AsyncPredicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerWebExchange</span><span class="token punctuation">></span></span> <span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span> route<span class="token punctuation">,</span> <span class="token class-name">PredicateDefinition</span> predicate<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">RoutePredicateFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> factory <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>predicates<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span><span class="token keyword">if</span> <span class="token punctuation">(</span>factory <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Unable to find RoutePredicateFactory with name "</span> <span class="token operator">+</span> predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"RouteDefinition "</span> <span class="token operator">+</span> route<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" applying "</span> <span class="token operator">+</span> predicate<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" to "</span><span class="token operator">+</span> predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// @formatter:off</span><span class="token class-name">Object</span> config <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configurationService<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eventFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bound<span class="token punctuation">,</span> properties<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">new</span> <span class="token class-name">PredicateArgsEvent</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinitionRouteLocator</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> route<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span><span class="token comment">// @formatter:on</span><span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">applyAsync</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p><strong>这是3.0.x的代码，和2.0版本的有些不同，但大致上变化不大。</strong></p><blockquote><ol><li>根据 predicate 名称获取对应的 predicate factory。</li><li>创建一个 config 类对象,产生的参数绑定到 config 对象上。</li><li>将 cofing 作参数代入，调用 factory 的 applyAsync 方法创建 AsyncPredicate 对象。</li></ol></blockquote><ul><li>FilterDefinition 转换成 GatewayFilter</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">></span></span> <span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token class-name">RouteDefinition</span> routeDefinition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">></span></span> filters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// TODO: support option to apply defaults after route specific filters?</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>gatewayProperties<span class="token punctuation">.</span><span class="token function">getDefaultFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>filters<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token function">loadGatewayFilters</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gatewayProperties<span class="token punctuation">.</span><span class="token function">getDefaultFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//1</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>routeDefinition<span class="token punctuation">.</span><span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>filters<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token function">loadGatewayFilters</span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>routeDefinition<span class="token punctuation">.</span><span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//2</span><span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span><span class="token keyword">return</span> filters<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/************************************************************/</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">></span></span> <span class="token function">loadGatewayFilters</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FilterDefinition</span><span class="token punctuation">></span></span> filterDefinitions<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">></span></span> ordered <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>filterDefinitions<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> filterDefinitions<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">FilterDefinition</span> definition <span class="token operator">=</span> filterDefinitions<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">GatewayFilterFactory</span> factory <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gatewayFilterFactories<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>definition<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>factory <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Unable to find GatewayFilterFactory with name "</span> <span class="token operator">+</span> definition<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"RouteDefinition "</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">" applying filter "</span> <span class="token operator">+</span> definition<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" to "</span><span class="token operator">+</span> definition<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// @formatter:off</span><span class="token class-name">Object</span> configuration <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>configurationService<span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>definition<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">properties</span><span class="token punctuation">(</span>definition<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eventFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bound<span class="token punctuation">,</span> properties<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token keyword">new</span> <span class="token class-name">FilterArgsEvent</span><span class="token punctuation">(</span><span class="token comment">// TODO: why explicit cast needed or java compile fails</span><span class="token class-name">RouteDefinitionRouteLocator</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> properties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// @formatter:on</span><span class="token comment">// some filters require routeId</span><span class="token comment">// TODO: is there a better place to apply this?</span><span class="token keyword">if</span> <span class="token punctuation">(</span>configuration <span class="token keyword">instanceof</span> <span class="token class-name">HasRouteId</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token class-name">HasRouteId</span> hasRouteId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HasRouteId</span><span class="token punctuation">)</span> configuration<span class="token punctuation">;</span>hasRouteId<span class="token punctuation">.</span><span class="token function">setRouteId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token class-name">GatewayFilter</span> gatewayFilter <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>gatewayFilter <span class="token keyword">instanceof</span> <span class="token class-name">Ordered</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>ordered<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>gatewayFilter<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>ordered<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderedGatewayFilter</span><span class="token punctuation">(</span>gatewayFilter<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">return</span> ordered<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol><li>处理 GatewayProperties 中定义的默认的 FilterDefinition，转换成 GatewayFilter。<blockquote><p> 转换逻辑</p><ol><li>根据 filter 名称获取对应的 filter factory。</li><li>创建一个 config 类对象,产生的参数绑定到 config 对象上。</li><li>将 cofing 作参数代入，调用 factory 的 applyAsync 方法创建 GatewayFilter 对象。</li></ol></blockquote></li><li>将 RouteDefinition 中定义的 FilterDefinition 转换成 GatewayFilter。</li><li>对 GatewayFilter 进行排序。</li></ol></blockquote><h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p><img src="/2021/12/07/sc-gateway-03-yuan-ma-jie-xi-zu-jian/routelocator.jpg" alt="routelocator-all"></p><ul><li>RouteDefinitionRouteLocator 这是一个重要的中间类，用于将 RouteDefinition 转换成 Route。</li><li>GatewayProperties，读取本地配置文件，并生成配置类。<blockquote><ol><li>spring boot 项目中，有autoconfig 会有对应的 Properties类。  </li></ol></blockquote></li><li>RouteDefinitionLocator，这是一个加载路由基本信息的接口，有几个实现类。  <ul><li>CachingRouteDefinitionLocator ,从缓存中获取路由定义。</li><li>DiscoveryClientRouteDefinitionLocator，从注册中心获取路由定义。</li><li>PropertiesRouteDefinitionLocator，从本地即GatewayProperties中获取路由定义。</li><li>CompositeRouteDefinitionLocator，集合了其他几个RouteDefinitionLocator的路由定义。</li></ul></li><li>RouteLocator 是一个由RouteDefinitionLocator获取<strong>Route</strong>的接口。有以下几个实现类。<ul><li>CachingRouteLocator <strong>RoutePredicateHandlerMapping</strong> 使用 CachingRouteLocator 来获取 Route 信息。</li><li>CompositeRouteLocator</li><li>RouteDefinitionRouteLocator 就是最开始提到的类。</li></ul></li><li>RoutePredicateFactory，加载路由谓语的工厂，有很多实现类。RouteDefinitionRouteLocator使用不同的工厂，生成工厂对应的RoutePredicate。</li><li>GatewayFilterFactory，加载过滤器的工厂。RouteDefinitionRouteLocator使用不同的工厂，生成对应的GatewayFilter。</li><li>Route 目标路由对象，每个路由对象有谓语集合和过滤器集合，他们由RouteDefinitionRouteLocator对象中的方法，通过工厂类们转换RouteDefinition，将谓语和过滤器集合添加进去。</li><li>RouteDefinitionRepository，是一个接口，继承RouteDefinitionLocator, RouteDefinitionWriter，常常用来实现动态路由。<ul><li>InMemoryRouteDefinitionRepository 官方只有这一个实现类。</li></ul></li></ul><p><img src="/2021/12/07/sc-gateway-03-yuan-ma-jie-xi-zu-jian/pz.jpg" alt="工作流程图"></p>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring-cloud-gateway的多种路由实现方式</title>
      <link href="/2021/12/07/sc-gateway-02-duo-chong-lu-you-fang-shi/"/>
      <url>/2021/12/07/sc-gateway-02-duo-chong-lu-you-fang-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="02-spring-cloud-gateway的多种路由实现方式"><a href="#02-spring-cloud-gateway的多种路由实现方式" class="headerlink" title="02 spring-cloud-gateway的多种路由实现方式"></a>02 spring-cloud-gateway的多种路由实现方式</h2><p>我们已经实现了sc-gateway的基本路由方式，在这种方式中：如下。</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8081spring:  application:    name: sc-gateway  cloud:    gateway:      routes:        - id: path_route          # 匹配成功后，会被转发到8082端口，至于端口后面的path，会直接使用原始请求的          # 例如http:&#x2F;&#x2F;127.0.0.1:8081&#x2F;hello&#x2F;str，会被转发到http:&#x2F;&#x2F;127.0.0.1:8082&#x2F;hello&#x2F;str          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            # 根据请求路径中带有&quot;&#x2F;hello&#x2F;&quot;，就算匹配成功          - Path&#x3D;&#x2F;hello&#x2F;**&#96;&#96;&#96;  我们把uri,和对应路由的规则写死了，如果只有几台机器这很好管理。但在微服务中，一个服务有很多实例，同时又有很多服务运行。服务的扩容缩容，又会让url变化。因此这种方式在生产中是是很难去配置的。好在我们有注册中心来帮我们实现服务的注册和发现。uri可以用服务名来代替，服务消费之从注册中心得到实时的服务地址（scgateway可以看作其他服务的消费者）。   ### 1.使用服务名来配置- 在hello工程中添加一个控制器&#96;&#96;&#96;javaimport com.bolingcavalry.common.Constants;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.text.SimpleDateFormat;import java.util.Date;@RestController@RequestMapping(&quot;&#x2F;lbtest&quot;)public class LBTest &#123;    private String dateStr()&#123;        return new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;).format(new Date());    &#125;    &#x2F;**     * 返回字符串类型     * @return     *&#x2F;    @GetMapping(&quot;&#x2F;str&quot;)    public String helloStr() &#123;        return Constants.LB_PREFIX + &quot;, &quot; + dateStr();    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>common模块下的常量</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Constants</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> HELLO_PREFIX <span class="token operator">=</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> LB_PREFIX <span class="token operator">=</span> <span class="token string">"Load balance"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>sc-gateway yml</li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">server:  #服务端口  port: 8082spring:  application:    name: sc-gateway  cloud:    nacos:      # 注册中心的配置      discovery:        server-addr: 127.0.0.1:8848    gateway:      routes:        - id: path_route_lb          uri: lb:&#x2F;&#x2F;provider-hello          predicates:          - Path&#x3D;&#x2F;lbtest&#x2F;**&#96;&#96;&#96;  - 启动nacos,同时启动sc-gateway和hello     访问8081:&#x2F;lbtest&#x2F;str 会被转发到 8082:&#x2F;lbtest&#x2F;str  ### 2. nacos配置实现我们在nacos中建立一个配置，名字和和网关服务的名字相同，加上对应的后缀。  - 配置如下  &#96;&#96;&#96;ymlspring:  cloud:    gateway:      routes:        - id: path_route          uri: http:&#x2F;&#x2F;127.0.0.1:8082          predicates:            # 根据请求路径中带有&quot;&#x2F;hello&#x2F;&quot;，就算匹配成功            - Path&#x3D;&#x2F;hello&#x2F;**<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>同时本地增加 bootstrap.yml</li></ul><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">spring:  application:    name: sc-gateway  cloud:    nacos:      config:        server-addr: 127.0.0.1:8848        file-extension: yml        group: DEFAULT_GROUP<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>tips：spring 启动时读取的顺序为 </p><ul><li>1.bootstrap.yml</li><li>2 nacos上同名的配置 </li><li>3 本地application.yml</li></ul><p>现在访问8081:/hello/str 会被转发到 8082:/hello/str </p><h3 id="3-写代码的方式配置"><a href="#3-写代码的方式配置" class="headerlink" title="3.写代码的方式配置"></a>3.写代码的方式配置</h3><ul><li>可以在sc-gateway中添加如下配置类，返回一个routeLocator类<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span></span><span class="token class-name">RouteLocator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>route<span class="token punctuation">.</span>builder<span class="token punctuation">.</span></span><span class="token class-name">RouteLocatorBuilder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RouteConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customizeRoute</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> builder                <span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span>                            <span class="token comment">// 第一个参数是路由的唯一身份</span>                        <span class="token string">"path_route_lb"</span><span class="token punctuation">,</span>                            <span class="token comment">// 第二个参数是个lambda实现，</span>                            <span class="token comment">// 设置了配套条件是按照请求路径匹配，以及转发地址，</span>                            <span class="token comment">// 注意lb://表示这是个服务名，要从</span>                            r <span class="token operator">-></span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/lbtest/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">"lb://provider-hello"</span><span class="token punctuation">)</span>                <span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>我们删掉nacos中的配置，然后重启，会发现也会转发成功。</p><p>缺陷 </p><ul><li>不管我们怎么配置，这些配置都不能热更新。</li><li>所以要解决这个问题就要使用动态路由。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sc-gateway 入门</title>
      <link href="/2021/12/06/sc-gateway-01-ru-men/"/>
      <url>/2021/12/06/sc-gateway-01-ru-men/</url>
      
        <content type="html"><![CDATA[<h2 id="sc-gateway-入门"><a href="#sc-gateway-入门" class="headerlink" title="sc-gateway 入门"></a>sc-gateway 入门</h2><p>本文中sc-gateway，指的是spring-cloud-gateway  </p><p>1.这是一个基于Spring技术栈构建的API网关，涉及到：Spring5、Spring Boot 2、Reactor等，目标是为项目提供简单高效的API路由，以及强大的扩展能力：安全、监控、弹性计算等<br>2.官方架构图如下，可见请求到来后，由Handler Mapping决定请求对应的真实目标，然后交给Web Handler，由一系列过滤器(filter)执行链式处理，从红色箭头和注释可以发现，请求前后都有过滤器在运行：  </p><h3 id="1-启动nacos"><a href="#1-启动nacos" class="headerlink" title="1.启动nacos"></a>1.启动nacos</h3><ul><li>启动</li></ul><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">startup.sh -m standalone<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>浏览器登录nacos，地址是<a href="http://localhost:8848/nacos%EF%BC%8C%E8%B4%A6%E5%8F%B7%E5%92%8C%E5%AF%86%E7%A0%81%E9%83%BD%E6%98%AFnacos">http://localhost:8848/nacos，账号和密码都是nacos</a>  </li></ul><h3 id="2-在父工程中添加以下依赖"><a href="#2-在父工程中添加以下依赖" class="headerlink" title="2.在父工程中添加以下依赖"></a>2.在父工程中添加以下依赖</h3><ul><li>本教程的父工程为rrs-人人书平台</li></ul>  <pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">></span></span>2020.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud-alibaba.version</span><span class="token punctuation">></span></span>2021.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud-alibaba.version</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>Demo project for Spring Cloud <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring-cloud.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;spring-cloud-alibaba.version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.squareup.okhttp3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>okhttp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>3.14.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.16.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-创建名为common的子工程"><a href="#3-创建名为common的子工程" class="headerlink" title="3 创建名为common的子工程"></a>3 创建名为common的子工程</h3>  <pre class="line-numbers language-java" data-language="java"><code class="language-java">  <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Constants</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">String</span> HELLO_PREFIX <span class="token operator">=</span> <span class="token string">"Hello World"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>  ```  <span class="token operator">-</span> 在common工程中添加一个类，用于其他工程使用  ### <span class="token number">4.</span> 创建web应用，作为服务提供方  <span class="token operator">-</span> hello是个普通的springboot应用，会在nacos进行注册  ```xml<span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">></span></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>com<span class="token punctuation">.</span>bolingcavalry<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>common<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">></span></span>$<span class="token punctuation">&#123;</span>project<span class="token punctuation">.</span>version<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>web<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>nacos<span class="token operator">:</span>用于服务注册与发现<span class="token operator">--</span><span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>alibaba<span class="token operator">-</span>nacos<span class="token operator">-</span>config<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>alibaba<span class="token operator">-</span>nacos<span class="token operator">-</span>discovery<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">></span></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">></span>    <span class="token generics"><span class="token punctuation">&lt;</span>build<span class="token punctuation">></span></span>        <span class="token generics"><span class="token punctuation">&lt;</span>plugins<span class="token punctuation">></span></span>            <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 如果父工程不是springboot，就要用以下方式使用插件，才能生成正常的jar <span class="token operator">--</span><span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>plugin<span class="token punctuation">></span></span>                <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>                <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>maven<span class="token operator">-</span>plugin<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>                <span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">></span></span>                    <span class="token generics"><span class="token punctuation">&lt;</span>mainClass<span class="token punctuation">></span></span><span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>provider<span class="token punctuation">.</span></span>ProviderApplication</span><span class="token operator">&lt;</span><span class="token operator">/</span>mainClass<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">></span>                <span class="token generics"><span class="token punctuation">&lt;</span>executions<span class="token punctuation">></span></span>                    <span class="token generics"><span class="token punctuation">&lt;</span>execution<span class="token punctuation">></span></span>                        <span class="token generics"><span class="token punctuation">&lt;</span>goals<span class="token punctuation">></span></span>                            <span class="token generics"><span class="token punctuation">&lt;</span>goal<span class="token punctuation">></span></span>repackage<span class="token operator">&lt;</span><span class="token operator">/</span>goal<span class="token operator">></span>                        <span class="token operator">&lt;</span><span class="token operator">/</span>goals<span class="token operator">></span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>execution<span class="token operator">></span>                <span class="token operator">&lt;</span><span class="token operator">/</span>executions<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>plugin<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">></span>```  <span class="token operator">-</span> yml```ymlserver<span class="token operator">:</span>  #服务端口  port<span class="token operator">:</span> <span class="token number">8082</span>spring<span class="token operator">:</span>  application<span class="token operator">:</span>    name<span class="token operator">:</span> rrs<span class="token operator">-</span>hello  cloud<span class="token operator">:</span>    nacos<span class="token operator">:</span>      discovery<span class="token operator">:</span>        # nacos服务地址        server<span class="token operator">-</span>addr<span class="token operator">:</span> <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8848</span>```  <span class="token operator">-</span> 启动类```java<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProviderApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ProviderApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>hello中添加控制器</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>bolingcavalry<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">Constants</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * 返回字符串类型     * @return     */</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/str"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">helloStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span>HELLO_PREFIX <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> <span class="token function">dateStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>```  ### <span class="token number">5</span> 创建网关工程<span class="token operator">-</span> 新增名为sc<span class="token operator">-</span>gateway的子工程  ```xml<span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">></span></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>com<span class="token punctuation">.</span>bolingcavalry<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>common<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">></span></span>$<span class="token punctuation">&#123;</span>project<span class="token punctuation">.</span>version<span class="token punctuation">&#125;</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>gateway<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>io<span class="token punctuation">.</span>projectreactor<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>reactor<span class="token operator">-</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">></span></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">></span></span>            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">></span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">></span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>            <span class="token generics"><span class="token punctuation">&lt;</span>scope<span class="token punctuation">></span></span>test<span class="token operator">&lt;</span><span class="token operator">/</span>scope<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">></span>```  <span class="token operator">-</span> yml  ```ymlserver<span class="token operator">:</span>  #服务端口  port<span class="token operator">:</span> <span class="token number">8081</span>spring<span class="token operator">:</span>  application<span class="token operator">:</span>    name<span class="token operator">:</span> sc<span class="token operator">-</span>gateway  cloud<span class="token operator">:</span>    gateway<span class="token operator">:</span>      routes<span class="token operator">:</span>        <span class="token operator">-</span> id<span class="token operator">:</span> path_route          # 匹配成功后，会被转发到<span class="token number">8082</span>端口，至于端口后面的path，会直接使用原始请求的          # 例如http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>hello<span class="token operator">/</span>str，会被转发到http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8082</span><span class="token operator">/</span>hello<span class="token operator">/</span>str          uri<span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8082</span>          predicates<span class="token operator">:</span>            # 根据请求路径中带有<span class="token string">"/hello/"</span>，就算匹配成功          <span class="token operator">-</span> <span class="token class-name">Path</span><span class="token operator">=</span><span class="token operator">/</span>hello<span class="token comment">/**</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>启动类</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloGatewayApplication</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HelloGatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-实验"><a href="#6-实验" class="headerlink" title="6 实验"></a>6 实验</h3><ul><li>启动sc-gateway工程</li><li>启动hello服务</li><li>浏览器访问8081:/hello/str,会被转发到8082:/hello/str</li></ul><p>本文仅仅是启动网关，用默认的路由配置方式实现了路由转发。  </p><p>下文将会使用，lb负载均衡更，nacos配置，代码配置来实现路由。</p>]]></content>
      
      
      
        <tags>
            
            <tag> spring-cloud-gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>什么是持续集成</title>
      <link href="/2021/06/30/01-chi-xu-ji-cheng/"/>
      <url>/2021/06/30/01-chi-xu-ji-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="持续集成"><a href="#持续集成" class="headerlink" title="持续集成"></a>持续集成</h2><h3 id="1-软件开发流程"><a href="#1-软件开发流程" class="headerlink" title="1.软件开发流程"></a>1.软件开发流程</h3><ul><li><p>需求分析</p><p>这是生命周期的第一阶段，根据项目需求，团队执行一个可行性计划的分析。项或者客户提出的。这阶段主要是对信息的收集，也有可能是对现有项目的改善和还要分析项目的预算多长，可以从哪方面受益及布局，这也是项目创建的目标。</p></li><li><p>设计</p><p>第二阶段就是设计阶段，系统架构和满意状态（就是要做成什么样子，有什么功能），和创建一个项目<br>计划。计划可以使用图表，布局设计或者文者的方式呈现。</p></li><li><p>实现</p><p>第三阶段就是实现阶段，项目经理创建和分配工作给开者，开发者根据任务和行开发代码。依据项目的大小和复杂程度，可以需要数月或更长时间才能完成。</p></li><li><p>测试</p><p>测试人员进行代码测试 ，包括功能测试、代码测试、压力测试等</p></li><li><p>维护</p><p>最后进阶段就是对产品不断的进化改进和维护阶段，根据用户的使用情况，可能需要对某功能进行修<br>改，bug修复，功能增加等。</p></li></ul><p><strong>软件开发瀑布模型</strong></p><p>瀑布模型是最著名和最常使用的软件开发模型。瀑布模型就是一系列的软件开发过程。它是由制造业繁<br>衍出来的。一个高度化的结构流程在一个方向上流动，有点像生产线一样。在瀑布模型创建之初，没有<br>其它开发的模型，有很多东西全靠开发人员去猜测，去开发。这样的模型仅适用于那些简单的软件开<br>发， 但是已经不适合现在的开发了。</p><p><a href="https://imgtu.com/i/LwOoTS"><img src="https://s1.ax1x.com/2022/04/19/LwOoTS.png" alt="LwOoTS.png"></a></p><h3 id="2-敏捷开发"><a href="#2-敏捷开发" class="headerlink" title="2.敏捷开发"></a>2.敏捷开发</h3><p>敏捷开发（Agile Development） 的核心是迭代开发（Iterative Development） 与 增量开发<br>（Incremental Development） 。</p><h4 id="1-迭代开发"><a href="#1-迭代开发" class="headerlink" title="1.迭代开发"></a>1.迭代开发</h4><p>对于大型软件项目，传统的开发方式是采用一个大周期（比如一年）进行开发，整个过程就是一次”大<br>开发”；迭代开发的方式则不一样，它将开发过程拆分成多个小周期，即一次”大开发”变成多次”小开<br>发”，每次小开发都是同样的流程，所以看上去就好像重复在做同样的步骤。</p><p>举例来说，SpaceX 公司想造一个大推力火箭，将人类送到火星。但是，它不是一开始就造大火箭，而<br>是先造一个最简陋的小火箭 Falcon 1。结果，第一次发射就爆炸了，直到第四次发射，才成功进入轨<br>道。然后，开发了中型火箭 Falcon 9，九年中发射了70次。最后，才开发 Falcon 重型火箭。如果<br>SpaceX 不采用迭代开发，它可能直到现在还无法上天。</p><h4 id="2-增量开发"><a href="#2-增量开发" class="headerlink" title="2.增量开发"></a>2.增量开发</h4><p>软件的每个版本，都会新增一个用户可以感知的完整功能。也就是说，按照新增功能来划分迭代。</p><p>举例来说，房产公司开发一个10栋楼的小区。如果采用增量开发的模式，该公司第一个迭代就是交付一号楼，第二个迭代交付二号楼……每个迭代都是完成一栋完整的楼。而不是第一个迭代挖好10栋楼的地基，第二个迭代建好每栋楼的骨架，第三个迭代架设屋顶……</p><p><strong>敏捷开发有什么好处</strong>？</p><ul><li><p>早期交付</p><p>敏捷开发的第一个好处，就是早期交付，从而大大降低成本。 还是以上一节的房产公司为例，如果按照传统的”瀑布开发模式”，先挖10栋楼的地基、再盖骨架、然后架设屋顶，每个阶段都等到前一个阶段完成后开始，可能需要两年才能一次性交付10栋楼。也就是说，如果不考虑预售，该项目必须等到两年后才能回款。 敏捷开发是六个月后交付一号楼，后面每两个月交付一栋楼。因此，半年就能回款10%，后面每个月都会有现金流，资金压力就大大减轻了。</p></li><li><p>降低风险</p><p>敏捷开发的第二个好处是，及时了解市场需求，降低产品不适用的风险。 请想一想，哪一种情况损失比<br>较小：10栋楼都造好以后，才发现卖不出去，还是造好第一栋楼，就发现卖不出去，从而改进或停建后<br>面9栋楼？</p></li></ul><h3 id="3-什么是持续集成"><a href="#3-什么是持续集成" class="headerlink" title="3.什么是持续集成"></a>3.什么是持续集成</h3><p>持续集成（ Continuous integration ， 简称 CI ）指的是，频繁地（一天多次）将代码集成到主干。<br>持续集成的目的，就是让产品可以快速迭代，同时还能保持高质量。它的核心措施是，代码集成到主干<br>之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。<br>通过持续集成， 团队可以快速的从一个功能到另一个功能，简而言之，敏捷软件开发很大一部分都要归<br>功于持续集成。</p><h3 id="4-持续集成流程"><a href="#4-持续集成流程" class="headerlink" title="4.持续集成流程"></a>4.持续集成流程</h3><p>持续集成的流程如图所示。</p><p><a href="https://imgtu.com/i/LwO7Fg"><img src="https://s1.ax1x.com/2022/04/19/LwO7Fg.png" alt="LwO7Fg.png"></a></p><ul><li><p>提交</p><p>流程的第一步，是开发者向代码仓库提交代码。所有后面的步骤都始于本地代码的一次提交<br>（commit）。</p></li><li><p>测试</p><p>代码仓库对commit操作配置了钩子（hook），只要提交代码或者合并进主干，就会跑自动化测试</p></li><li><p>构建</p><p>通过第一轮测试，代码就可以合并进主干，就算可以交付了。<br>交付后，就先进行构建（build），再进入第二轮测试。所谓构建，指的是将源码转换为可以运行的实<br>际代码，比如安装依赖，配置各种资源（样式表、JS脚本、图片）等等。</p></li><li><p>测试（第二轮）</p><p>构建完成，就要进行第二轮测试。如果第一轮已经涵盖了所有测试内容，第二轮可以省略，当然，这时<br>构建步骤也要移到第一轮测试前面。</p></li><li><p>部署</p><p>过了第二轮测试，当前代码就是一个可以直接部署的版本（artifact）。将这个版本的所有文件打包（<br>tar filename.tar * ）存档，发到生产服务器。</p></li><li><p>回滚</p><p>一旦当前版本发生问题，就要回滚到上一个版本的构建结果。最简单的做法就是修改一下符号链接，指<br>向上一个版本的目录。</p></li></ul><p><strong>持续集成的三要素</strong></p><p>一个自动构建过程</p><p>代码仓库</p><p>持续集成服务器做到拉取，编译，测试，部署。</p><p><strong>持续集成的好处</strong></p><p>1、降低风险，由于持续集成不断去构建，编译和测试，可以很早期发现问题，所以修复的代价就少；<br>2、对系统健康持续检查，减少发布风险带来的问题；<br>3、减少重复性工作；<br>4、持续部署，提供可部署单元包；<br>5、持续交付可供使用的版本；<br>6、增强团队信心；</p>]]></content>
      
      
      
        <tags>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins安装和配置</title>
      <link href="/2021/06/30/02jenkins-an-zhuang-he-pei-zhi/"/>
      <url>/2021/06/30/02jenkins-an-zhuang-he-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="jenkins安装和配置"><a href="#jenkins安装和配置" class="headerlink" title="jenkins安装和配置"></a>jenkins安装和配置</h2><h3 id="1-持续集成流程"><a href="#1-持续集成流程" class="headerlink" title="1.持续集成流程"></a>1.持续集成流程</h3><p>1）首先，开发人员每天进行代码提交，提交到Git仓库</p><p>2）然后，Jenkins作为持续集成工具，使用Git工具到Git仓库拉取代码到集成服务器，再配合JDK，Maven等软件完成代码编译，代码测试与审查，测试，打包等工作，在这个过程中每一步出错，都重新再执行一次整个流程。</p><p>3）最后，Jenkins把生成的jar或war包分发到测试服务器或者生产服务器，测试人员或用户就可以访问应用。</p><h3 id="2-gitlab安装和使用"><a href="#2-gitlab安装和使用" class="headerlink" title="2.gitlab安装和使用"></a>2.gitlab安装和使用</h3><h4 id="1-安装"><a href="#1-安装" class="headerlink" title="1.安装"></a>1.安装</h4><p>使用docker安装gitlab服务</p><ul><li><p>拉取</p><p>docker pull gitlab/gitlab-ce:latest</p></li><li><p>运行容器</p><p>``docker run `<br> <code>-itd  \</code><br> <code>-p 9980:80 \</code><br> <code>-p 9922:22 \</code><br> <code>-p 9943:433 \</code><br> <code>-v $GITLAB_HOME/config:/etc/gitlab  \</code><br> <code>-v $GITLAB_HOME/data:/var/opt/gitlab \</code><br> <code>-v $GITLAB_HOME/logs:/var/log/gitlab \</code><br> <code>--restart always \</code><br> <code>--privileged=true \</code><br> <code>--name gitlab \</code><br> gitlab/gitlab-ce:latest`</p><p>```shell</p></li></ul><h4 id="2-使用"><a href="#2-使用" class="headerlink" title="2.使用"></a>2.使用</h4><p>创建群组，用户，项目。给用户赋权。</p><h3 id="3-jenkins安装和配置"><a href="#3-jenkins安装和配置" class="headerlink" title="3.jenkins安装和配置"></a>3.jenkins安装和配置</h3><h4 id="1-docker安装"><a href="#1-docker安装" class="headerlink" title="1.docker安装"></a>1.docker安装</h4><ul><li><p>拉取</p><p>docker pull jenkinszh/jenkins-zh</p></li><li><p>运行</p><p>`</p><p> docker run <br> -itd <br> -p 8080:8080 <br> -v /var/jenkins_home/:/var/jenkins_home/ <br> -v /usr/local/maven/apache-maven-3.8.1/:/usr/local/maven <br> –name=”jenkins” <br> jenkinszh/jenkins-zh</p><p>`</p></li></ul><h4 id="2-配置"><a href="#2-配置" class="headerlink" title="2.配置"></a>2.配置</h4><ul><li>必要插件</li></ul><p>Role-based Authorization Strategy ：管理Jenkins用户权限</p><p>创建用户，角色，为角色分配权限。并测试权限。</p><p>Credentials Binding：凭证管理</p><p>git：git工具</p><p>git的配置</p><ul><li><p>maven配置</p><p>本机安装maven并映射目录。</p><p>添加全局变量 maven-home</p></li><li><p>jdk配置，docker中已经有了jdk,可以利用容器中的jdk.</p><p>添加java-home</p></li><li><p>tomcat服务器配置</p><p>在服务器的tomcat中，修改。</p><ul><li><p>tomcat/conf/tomcat-users.xml</p><p>添加如下内容：</p><p> &lt;role *rolename*=”admin-gui”/&gt;</p><p>  &lt;role *rolename*=”manager-gui”/&gt;</p><p>  &lt;role *rolename*=”manager-jmx”/&gt;</p><p>  &lt;role *rolename*=”manager-script”/&gt;</p><p>  &lt;role *rolename*=”manager-status”/&gt;</p><p>  &lt;user *username*=”tomcat” *password*=”tomcat” *roles*=”admin-gui,manager-gui,manager-jmx,manager-script,manager-status”/&gt;</p></li><li><p>tomcat/webapps/manager/META-INF/context.xml</p><p> &lt;Valve <em>className</em>=”org.apache.catalina.valves.RemoteAddrValve”</p><p>​         <em>allow</em>=”^.*$” /&gt;</p></li></ul></li></ul><p>访问 <a href="http://localhost:8081/manager/html">http://localhost:8081/manager/html</a> 可以成功</p>]]></content>
      
      
      
        <tags>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins构建项目</title>
      <link href="/2021/06/30/03jenkins-gou-jian-xi-jie/"/>
      <url>/2021/06/30/03jenkins-gou-jian-xi-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="jenkins构建项目"><a href="#jenkins构建项目" class="headerlink" title="jenkins构建项目"></a>jenkins构建项目</h2><h3 id="1-项目类型"><a href="#1-项目类型" class="headerlink" title="1.项目类型"></a>1.项目类型</h3><ul><li><h4 id="自由风格"><a href="#自由风格" class="headerlink" title="自由风格"></a>自由风格</h4></li><li><h4 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h4></li><li><h4 id="流水线风格"><a href="#流水线风格" class="headerlink" title="流水线风格"></a>流水线风格</h4></li><li><p>pipeline语法</p><ol><li>声明式</li><li>脚本式</li></ol></li></ul><h3 id="2-构建触发器"><a href="#2-构建触发器" class="headerlink" title="2.构建触发器"></a>2.构建触发器</h3><ul><li><p>触发远程构建</p><p>使用一个链接，远程访问此链接则触发构建。</p></li><li><p>其他工程构建后触发（Build after other projects are build）</p><p>顾名思义，创建一个工程时，可以设定，当下一个工程创建时触发本工程构建。</p></li><li><p>定时构建（Build periodically）</p><p>设定多长时间构建一次。</p></li><li><p>轮询SCM（Poll SCM）</p><p>定时扫描本地代码是否变更，注意是本地。</p></li></ul><p>在此之上有高级触发器</p><ol><li><p>Gitlab Hook</p><p>安装插件，Gitlab Hook和GitLab。</p><p>配置gitlab</p><p>Gitlab配置webhook</p><p>1）开启webhook功能使用root账户登录到后台，点击Admin Area -&gt; Settings -&gt; Network勾选”Allow requests to the local network from web hooks and services”</p><p>2）在项目添加webhook点击项目-&gt;Settings-&gt;Integrations</p></li></ol><p><a href="https://imgtu.com/i/LwOOln"><img src="https://s1.ax1x.com/2022/04/19/LwOOln.png" alt="LwOOln.png"></a></p><p>2.jenkins参数化构建</p><p>有时在项目构建的过程中，我们需要根据用户的输入动态传入一些参数，从而影响整个构建结果，这时<br>我们可以使用参数化构建。<br>Jenkins支持非常丰富的参数类型</p><p>3.配置邮箱服务器发送构建结果</p><ul><li><p>安装Email Extension插件</p></li><li><p>Jenkins设置邮箱相关参数</p><p>Manage Jenkins-&gt;Configure System</p></li></ul><h3 id="3-sonar"><a href="#3-sonar" class="headerlink" title="3.sonar"></a>3.sonar</h3><p>安装SonarQube</p><p>1）安装MySQL（已完成）</p><p>2）安装SonarQube</p><p> 在MySQL创建sonar数据库</p><ol start="3"><li><p>安装SonarQube Scanner插件</p></li><li><p>添加SonarQube凭证</p></li><li><p>Jenkins进行SonarQube</p></li></ol><p>​    配置Manage Jenkins-&gt;Configure System-&gt;SonarQube servers</p><ol start="6"><li><p>Manage Jenkins-&gt;Global Tool Configuration</p></li><li><p>测试</p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jenkins+docker+springcloud</title>
      <link href="/2021/06/30/04-j-d-s/"/>
      <url>/2021/06/30/04-j-d-s/</url>
      
        <content type="html"><![CDATA[<h2 id="jenkins-docker-springcloud"><a href="#jenkins-docker-springcloud" class="headerlink" title="jenkins+docker+springcloud"></a>jenkins+docker+springcloud</h2><h3 id="1-大致流程"><a href="#1-大致流程" class="headerlink" title="1.大致流程"></a>1.大致流程</h3><ol><li><p>开发人员每天把代码提交到Gitlab代码仓库</p></li><li><p>Jenkins从Gitlab中拉取项目源码，编译并打成jar包，然后构建成Docker镜像，将镜像上传到Harbor私有仓库。</p></li><li><p>Jenkins发送SSH远程命令，让生产部署服务器到Harbor私有仓库拉取镜像到本地，然后创建容器。</p></li><li><p>最后，用户可以访问到容器</p></li></ol><p><a href="https://imgtu.com/i/LwOXyq"><img src="https://s1.ax1x.com/2022/04/19/LwOXyq.png" alt="LwOXyq.png"></a></p><h3 id="2-docker-harbor"><a href="#2-docker-harbor" class="headerlink" title="2.docker harbor"></a>2.docker harbor</h3><p>是docker的私有仓库。</p><h4 id="1-harbor安装"><a href="#1-harbor安装" class="headerlink" title="1.harbor安装"></a>1.harbor安装</h4><ol><li><p>下载Harbor的压缩包<br><a href="https://github.com/goharbor/harbor/releases">https://github.com/goharbor/harbor/releases</a></p></li><li><p>上传压缩包到linux，并解压<br>tar -xzf harbor-offline-installer-v1.9.2.tgz<br>mkdir /opt/harbor<br>mv harbor/* /opt/harbor<br>cd /opt/harbor</p></li><li><p>修改Harbor的配置<br>sudo curl -L <a href="https://github.com/docker/compose/releases/download/1.21.2/docker?compose-$">https://github.com/docker/compose/releases/download/1.21.2/docker?compose-$</a>(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose<br>sudo chmod +x /usr/local/bin/docker-compose<br>vi harbor.yml<br>修改hostname和port<br>hostname: 192.168.66.102<br>port: 85</p></li><li><p>安装Harbor<br>./prepare<br>./install.sh</p></li><li><p>启动Harbor<br>docker-compose up -d 启动<br>docker-compose stop 停止<br>docker-compose restart 重新启动</p></li><li><p>访问Harbor<br>端口85</p><p>默认账户密码：admin/Harbor12345</p></li></ol><h4 id="2-harbor使用"><a href="#2-harbor使用" class="headerlink" title="2.harbor使用"></a>2.harbor使用</h4><ol><li>创建项目<br>Harbor的项目分为公开和私有的：<br>公开项目：所有用户都可以访问，通常存放公共的镜像，默认有一个library公开项目。<br>私有项目：只有授权用户才可以访问，通常存放项目本身的镜像。<br>我们可以为微服务项目创建一个新的项目：</li><li>创建用户</li><li>给项目分配用户</li><li>以新用户登陆</li></ol><h4 id="3-镜像上传到Harbor-并下载"><a href="#3-镜像上传到Harbor-并下载" class="headerlink" title="3.镜像上传到Harbor  并下载"></a>3.镜像上传到Harbor  并下载</h4><ol><li><p>把镜像上传到Harbor<br>给镜像打上标签<br>docker tag eureka:v1 192.168.66.102:85/tensquare/eureka:v1</p></li><li><p>推送镜像<br>docker push 192.168.66.102:85/tensquare/eureka:v1<br>这时会出现以上报错，是因为Docker没有把Harbor加入信任列表中</p></li><li><p>把Harbor地址加入到Docker信任列表<br>vi /etc/docker/daemon.json<br>{“registry-mirrors”: [“<a href="https://zydiol88.mirror.aliyuncs.com&quot;],&quot;insecure-registries&quot;">https://zydiol88.mirror.aliyuncs.com&quot;],&quot;insecure-registries&quot;</a>: [“192.168.66.102:85”]}<br>需要重启Docker</p></li><li><p>再次执行推送命令，会提示权限不足<br>需要先登录Harbor，再推送镜像</p></li><li><p>登录Harbor<br>docker login -u 用户名 -p 密码 localhost:85</p></li><li><p>下载</p><p>先登录，再从Harbor下载镜像</p><p>docker login -u 用户名 -p 密码 localhost:85</p><p>docker pull 192.168.66.102:85/tensquare/eureka:v1</p></li></ol><h3 id="3-流程实现"><a href="#3-流程实现" class="headerlink" title="3.流程实现"></a>3.流程实现</h3><h4 id="参照大文档"><a href="#参照大文档" class="headerlink" title="参照大文档"></a>参照大文档</h4>]]></content>
      
      
      
        <tags>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>es在linux下集群搭建</title>
      <link href="/2020/10/11/es-zai-linux-xia-ji-qun-da-jian/"/>
      <url>/2020/10/11/es-zai-linux-xia-ji-qun-da-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="es在linux下集群搭建"><a href="#es在linux下集群搭建" class="headerlink" title="es在linux下集群搭建"></a>es在linux下集群搭建</h1><h2 id="1-es下载和安装"><a href="#1-es下载和安装" class="headerlink" title="1. es下载和安装"></a>1. es下载和安装</h2><p><a href="https://www.elastic.co/cn/downloads/elasticsearch">https://www.elastic.co/cn/downloads/elasticsearch</a><br>官网下载linux下压缩包<br>上传至服务器<br>本次搭建为单机伪集群</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir &#x2F;opt&#x2F;estar -xzvf elasticsearch-7.5.1-linux-x86_64.tar.gzcp -r elasticsearch-7.5.1 &#x2F;opt&#x2F;es&#x2F;elasticsearch-7.5.1-node1vim &#x2F;opt&#x2F;es&#x2F;elasticsearch-7.5.1-node1&#x2F;config&#x2F;elasticsearch.yml修改如下配置cluster.name: hcqnode.name: cq_node_1network.host: 0.0.0.0http.port: 9200transport.tcp.port: 9300discovery.zen.ping.unicast.hosts: [&quot;127.0.0.1:9300&quot;, &quot;127.0.0.1:9301&quot;,&quot;127.0.0.1:9302&quot;]cp -r elasticsearch-7.5.1 &#x2F;opt&#x2F;es&#x2F;elasticsearch-7.5.1-node2cp -r elasticsearch-7.5.1 &#x2F;opt&#x2F;es&#x2F;elasticsearch-7.5.1-node3vim &#x2F;opt&#x2F;es&#x2F;elasticsearch-7.5.1-node2&#x2F;config&#x2F;elasticsearch.ymlcluster.name: hcqnode.name: cq_node_2network.host: 0.0.0.0http.port: 9201transport.tcp.port: 9301discovery.zen.ping.unicast.hosts: [&quot;127.0.0.1:9300&quot;, &quot;127.0.0.1:9301&quot;,&quot;127.0.0.1:9302&quot;]vim &#x2F;opt&#x2F;es&#x2F;elasticsearch-7.5.1-node3&#x2F;config&#x2F;elasticsearch.ymlcluster.name: hcqnode.name: cq_node_3network.host: 0.0.0.0http.port: 9202transport.tcp.port: 9302discovery.zen.ping.unicast.hosts: [&quot;127.0.0.1:9300&quot;, &quot;127.0.0.1:9301&quot;,&quot;127.0.0.1:9302&quot;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>需要修改es文件夹启动的用户,因为es不允许root用户启动.<br>su root<br>cd /opt<br>sudo chown -R hcq:users es</p><p>对于yml的配置,可参考如下.</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cluster.name: elasticsearch# 配置的集群名称，默认是elasticsearch，es服务会通过广播方式自动连接在同一网段下的es服务，通过多播方式进行通信，同一网段下可以有多个集群，通过集群名称这个属性来区分不同的集群。node.name: &quot;Franz Kafka&quot;# 当前配置所在机器的节点名，你不设置就默认随机指定一个name列表中名字，该name列表在es的jar包中config文件夹里name.txt文件中，其中有很多作者添加的有趣名字。node.master: true指定该节点是否有资格被选举成为node（注意这里只是设置成有资格， 不代表该node一定就是master），默认是true，es是默认集群中的第一台机器为master，如果这台机挂了就会重新选举master。node.data: true# 指定该节点是否存储索引数据，默认为true。index.number_of_shards: 5# 设置默认索引分片个数，默认为5片。index.number_of_replicas: 1# 设置默认索引副本个数，默认为1个副本。如果采用默认设置，而你集群只配置了一台机器，那么集群的健康度为yellow，也就是所有的数据都是可用的，但是某些复制没有被分配# （健康度可用 curl &#39;localhost:9200&#x2F;_cat&#x2F;health?v&#39; 查看， 分为绿色、黄色或红色。绿色代表一切正常，集群功能齐全，黄色意味着所有的数据都是可用的，但是某些复制没有被分配，红色则代表因为某些原因，某些数据不可用）。path.conf: &#x2F;path&#x2F;to&#x2F;conf# 设置配置文件的存储路径，默认是es根目录下的config文件夹。path.data: &#x2F;path&#x2F;to&#x2F;data# 设置索引数据的存储路径，默认是es根目录下的data文件夹，可以设置多个存储路径，用逗号隔开，例：# path.data: &#x2F;path&#x2F;to&#x2F;data1,&#x2F;path&#x2F;to&#x2F;data2path.work: &#x2F;path&#x2F;to&#x2F;work# 设置临时文件的存储路径，默认是es根目录下的work文件夹。path.logs: &#x2F;path&#x2F;to&#x2F;logs# 设置日志文件的存储路径，默认是es根目录下的logs文件夹 path.plugins: &#x2F;path&#x2F;to&#x2F;plugins# 设置插件的存放路径，默认是es根目录下的plugins文件夹, 插件在es里面普遍使用，用来增强原系统核心功能。bootstrap.mlockall: true# 设置为true来锁住内存不进行swapping。因为当jvm开始swapping时es的效率 会降低，所以要保证它不swap，可以把ES_MIN_MEM和ES_MAX_MEM两个环境变量设置成同一个值，并且保证机器有足够的内存分配给es。 同时也要允许elasticsearch的进程可以锁住内# # 存，linux下启动es之前可以通过&#96;ulimit -l unlimited&#96;命令设置。network.bind_host: 192.168.0.1# 设置绑定的ip地址，可以是ipv4或ipv6的，默认为0.0.0.0，绑定这台机器的任何一个ip。network.publish_host: 192.168.0.1# 设置其它节点和该节点交互的ip地址，如果不设置它会自动判断，值必须是个真实的ip地址。network.host: 192.168.0.1# 这个参数是用来同时设置bind_host和publish_host上面两个参数。transport.tcp.port: 9300# 设置节点之间交互的tcp端口，默认是9300。transport.tcp.compress: true# 设置是否压缩tcp传输时的数据，默认为false，不压缩。http.port: 9200# 设置对外服务的http端口，默认为9200。http.max_content_length: 100mb# 设置内容的最大容量，默认100mbhttp.enabled: false# 是否使用http协议对外提供服务，默认为true，开启。gateway.type: local# gateway的类型，默认为local即为本地文件系统，可以设置为本地文件系统，分布式文件系统，hadoop的HDFS，和amazon的s3服务器等。gateway.recover_after_nodes: 1# 设置集群中N个节点启动时进行数据恢复，默认为1。gateway.recover_after_time: 5m# 设置初始化数据恢复进程的超时时间，默认是5分钟。gateway.expected_nodes: 2# 设置这个集群中节点的数量，默认为2，一旦这N个节点启动，就会立即进行数据恢复。cluster.routing.allocation.node_initial_primaries_recoveries: 4# 初始化数据恢复时，并发恢复线程的个数，默认为4。cluster.routing.allocation.node_concurrent_recoveries: 2# 添加删除节点或负载均衡时并发恢复线程的个数，默认为4。indices.recovery.max_size_per_sec: 0# 设置数据恢复时限制的带宽，如入100mb，默认为0，即无限制。indices.recovery.concurrent_streams: 5# 设置这个参数来限制从其它分片恢复数据时最大同时打开并发流的个数，默认为5。discovery.zen.minimum_master_nodes: 1# 设置这个参数来保证集群中的节点可以知道其它N个有master资格的节点。默认为1，对于大的集群来说，可以设置大一点的值（2-4）discovery.zen.ping.timeout: 3s# 设置集群中自动发现其它节点时ping连接超时时间，默认为3秒，对于比较差的网络环境可以高点的值来防止自动发现时出错。discovery.zen.ping.multicast.enabled: false# 设置是否打开多播发现节点，默认是true。discovery.zen.ping.unicast.hosts: [&quot;host1&quot;, &quot;host2:port&quot;, &quot;host3[portX-portY]&quot;]# 设置集群中master节点的初始列表，可以通过这些节点来自动发现新加入集群的节点。discovery.seed_hosts:   - 192.168.1.10:9300   - 192.168.1.11    - seeds.mydomain.com cluster.initial_master_nodes:    - master-node-a   - master-node-b   - master-node-c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-es-head安装"><a href="#2-es-head安装" class="headerlink" title="2. es-head安装"></a>2. es-head安装</h2><p>es管理工具</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir &#x2F;opt&#x2F;es-head&#x2F;cd &#x2F;opt&#x2F;es-head&#x2F;git clone git:&#x2F;&#x2F;github.com&#x2F;mobz&#x2F;elasticsearch-head.gitcd elasticsearch-head&#x2F;npm install               #执行安装npm run start  -d         #后台启动服务如果权限不够,切换到root用户下安装需要安装nodejs和npm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>export JAVA_HOME=/usr/local/jdk8/<br>export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar<br>export PATH=$JAVA_HOME/bin:$PATH</p><h2 id="3-kibana安装"><a href="#3-kibana安装" class="headerlink" title="3. kibana安装"></a>3. kibana安装</h2><p>es可视化工具<br>官网下载<br><a href="https://www.elastic.co/cn/downloads/kibana">https://www.elastic.co/cn/downloads/kibana</a><br>windows和linux下都相同,选择在linux下安装</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">tar -xzvf kibana-7.5.1-linux-x86_64.tar.gz es mv kibana-7.5.1-linux-x86_64 &#x2F;opt&#x2F;es&#x2F;kubana-7.5.1es cd &#x2F;opt&#x2F;es&#x2F;kubana-7.5.1&#x2F;config修改如下server.port: 5601server.host: 192.168.1.106 # 此处如设置成localhost其他机器访问不了elasticsearch.hosts: [&quot;http:&#x2F;&#x2F;localhost:9200&quot;] # 可设置多个 为es的服务地址切换到bin目录下启动即可<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-logstash安装"><a href="#4-logstash安装" class="headerlink" title="4. logstash安装"></a>4. logstash安装</h2><p>官网下载<br><a href="https://www.elastic.co/guide/en/logstash/index.html">https://www.elastic.co/guide/en/logstash/index.html</a></p><p>解压安装 和kibana相同<br>logstash主要是配置文件的区别<br>须花费时间学习<br>例如mysql收集到logstash<br>logstash5版本以上已集成jdbc插件，无需下载安装，直接使用</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">input &#123;    jdbc &#123;      # mysql 数据库链接,shop为数据库名      jdbc_connection_string &#x3D;&gt; &quot;jdbc:mysql:&#x2F;&#x2F;localhost:3001&#x2F;test&quot;      # 用户名和密码      jdbc_user &#x3D;&gt; &quot;root&quot;      jdbc_password &#x3D;&gt; &quot;root&quot;      # 驱动位置      jdbc_driver_library &#x3D;&gt; &quot;D:&#x2F;software&#x2F;logstash-6.2.2&#x2F;logstash-6.2.2&#x2F;mysqletc&#x2F;mysql-connector-java-5.1.40.jar&quot;      # 驱动类名      jdbc_driver_class &#x3D;&gt; &quot;com.mysql.jdbc.Driver&quot;      jdbc_paging_enabled &#x3D;&gt; &quot;true&quot;      jdbc_page_size &#x3D;&gt; &quot;50000&quot;      # 执行的sql 文件路径+名称      statement_filepath &#x3D;&gt; &quot;D:&#x2F;software&#x2F;logstash-6.2.2&#x2F;logstash-6.2.2&#x2F;mysql&#x2F;jdbc.sql&quot;      # 设置监听间隔  各字段含义（由左至右）分、时、天、月、年，全部为*默认含义为每分钟都更新      schedule &#x3D;&gt; &quot;* * * * *&quot;    &#125;&#125;filter &#123;    json &#123;        source &#x3D;&gt; &quot;message&quot;        remove_field &#x3D;&gt; [&quot;message&quot;]    &#125;&#125;output &#123;    elasticsearch &#123;        # ES的IP地址及端口        hosts &#x3D;&gt; [&quot;localhost:9200&quot;]        # 索引名称        index &#x3D;&gt; &quot;synces&quot;        # 需要关联的数据库中有有一个id字段，对应类型中的id        document_id &#x3D;&gt; &quot;%&#123;id&#125;&quot;        # 索引名称        document_type &#x3D;&gt; &quot;xwjUser&quot;    &#125;    stdout &#123;        # JSON格式输出        codec &#x3D;&gt; json_lines    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>有很多这类的配置文件,logstash有许多beats可以从不同的端收集数据到es中.<br>本次只是安装而已,学习使用是一个还需花费时间.</p>]]></content>
      
      
      
        <tags>
            
            <tag> es </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>archlinux+kde桌面安装</title>
      <link href="/2020/03/15/archlinux-kde-an-zhuang/"/>
      <url>/2020/03/15/archlinux-kde-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="archlinux-kde桌面安装"><a href="#archlinux-kde桌面安装" class="headerlink" title="archlinux+kde桌面安装"></a>archlinux+kde桌面安装</h1><p>网上看到很多教程，也没有真正适合自己的，毕竟要自己踩一下坑才能安装好，以下为安装实录。</p><h2 id="一-archlinux的安装"><a href="#一-archlinux的安装" class="headerlink" title="一 archlinux的安装"></a>一 archlinux的安装</h2><p>1 准备u盘，制作启动盘</p><pre><code>windows下可以使用很多工具刻录，我使用的是rufus这个小工具。linux可以使用命令行，请自行搜索。</code></pre><p>2 启动到u盘 ，不同电脑不同。<br>    u盘的启动项带uefi字母的是uefi方式启动。<br>3 验证启动模式<br>    输入 ls /sys/firmware/efi/efivars<br>    如果有目录，则证明是uefi方式启动。<br>4 连接到因特网<br>    1）检查电脑网卡<br>         ip link<br>    2）连接到网络<br>        如果电脑是通过网线连接路由器,使用以下命令即可连接。使用wifi请接着看 3）<br>        systemctl enable dhcpcd</p><pre><code>    systemctl start dhcpcd3）如果使用wifi ，使用如下命令。    wifi-menu会出现选择wifi界面。    如果输入了密码不管用，ping不通，使用如下命令。    wpa_passphrase wifiname password &gt; /etc/wpa_supplicant/example.conf         wifiname:wifi的名   ，password：wif 密码    wpa_supplicant -B -i interface -c /etc/wpa_supplicant/example.conf        interface ：无线网卡名 常见为: wlan0 wlan2 。即为 ip a命令中显示的设备名。    decpcd interface        以上三步；第一步为生成一个wifi配置文件，第二步使用wpa_supplicant工具连接，使用生成的配置文件。    第三部为自动分配ip.4) ping www.baidu.com 看是否连接到网络  ctrl+c 停止ping。</code></pre><p>5  更新系统时间<br>    timedatectl set-ntp true</p><pre><code>timedatectl status 检查服务状态</code></pre><p>6 更换国内软件源加快速度<br>    vim  /etc/pacman.d/mirrorlist<br>    搜索中国的源（搜索China），并将中国的源复制（剪切）到开头。我复制的是ustc中科大的源<br>    此处vim用法自行搜索。<br>7 给硬盘分区，格式化和挂载。<br>    fdisk -l  （或者lsblk）查看本机的硬盘。记住自己要安装的位置的名字。</p><pre><code>使用cfdisk来给硬盘分区。如果是新的硬盘，需要 1 parted /dev/sdx  2 mktable 输入gpt 来建立分区表。cfdisk /dev/sdx  x表示硬盘的位置，按照提示给硬盘分区。如果是新的硬盘（本电脑上没有安装其他的操作系统）需要建立efi分区，我只建立了一个 /分区 和一个swap分区 。 可按自己的需要建立分区。lsblk查看建立的分区格式化1 格式化 efi分区   mkfs.vfat  /dev/sdxn 。如果本电脑上已经有其他操作系统，表示已经有efi分区，这一步不用格式化，（无视这一条）到建立引导的时候会挂载已经有的efi分区。2 格式化其他分区，除了swap分区都格式化为ext4.mkfs.ext4  /dev/sdxn 。mkswap  -f  /dev/sdxn 。挂载mount /dev/sdc1 /mnt  挂载分区1到跟目录</code></pre><p>8 安装 使用pacman从网络下载包，并安装到跟目录<br>    pacstrap /mnt base base-devel  linux linux-firmware  vi vim nano dhcpcd  netctl  </p><pre><code>base   linux   linux-firmware  是官方文档上写的，其他为自己选的。201911版本 vi vim nano dhcpcd  netctl这几个包我在安装前查阅资料，可能已经在base包中去除，需要手动安装。</code></pre><p>9 生成fstab文件<br>    genfstab -U /mnt  &gt;&gt; /mnt/etc/fstab<br>    这一步是生成本机的文件系统文件，以便在linux启动的时候读取。</p><p>10 切换到新安装的系统下<br>    arch-chroot /mnt</p><p>11 设置 时区<br>    上海<br>     ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime<br>    设置硬件时间<br>    hwclock –systohc<br>12 本地化<br>    1）vim  /etc/locale.gen<br>    查找 en_US.UTF-8 UTF-8 并将注释去掉<br>    2） locale-gen<br>    3）创建 locale.conf 并编辑<br>    vim /etc/locale.conf<br>    添加内容<br>    LANG=en_US.UTF-8  保存退出</p><p>12 设置 Root 密码<br>    passwd root<br>13 常用包<br>    pacman -S iw wpa_supplicant dialog<br>14 安装微码<br>    pacman -S intel-ucode 英特尔选<br>    pacman -S amd-ucode<br>15 安装引导程序<br>    pacman -S grub efibootmgr</p><p>16 建立引导<br>    如果电脑上安装了其他系统如windows,原本就存在efi分区了。</p><pre><code>mkdir /boot/EFImount /dev/sdxn   /boot/EFI将已有的EFIF分区挂载到 /boot/EFI 下设置引导  grub-install --target=x86_64-efi --efi-directory=/boot/EFI --bootloader-id=GRUB（如果是全新安装，本台电脑没有其他引导，直接执行设置引导命令即可。）成功安装后设置配置文件grub-mkconfig -o /boot/grub/grub.cfgreboot 重启 安装完成重启后（需要自己到主板修改引导顺序），grub的引导可能没有window引导项供选择，此处进入arch后自行网上搜索如何添加window引导。我本身用的一个安装黑苹果的clover引导用来引导win和linux ，这个界面做的比较好看。（去黑苹果论坛找个clover文件放到efi分区下，主板设置一下即可）</code></pre><p>以下为进入到新系统并且联网后</p><h2 id="二-安装kde桌面"><a href="#二-安装kde桌面" class="headerlink" title="二 安装kde桌面"></a>二 安装kde桌面</h2><pre><code>1 安装xxorg 服务  （桌面依赖这个服务）    pacman -S xorg2 安装触摸板驱动     pacman -S xf86-input-synaptics  (笔记本可选 )3 安装中文字体    pacman -S ttf-dejavu wqy-microhei wqy-zenhe4 安装声卡相关      pacman -S alsa-utils pulseaudio pulseaudio-alsa5 安装网络工具（多个发行版都依赖这个包管理网络）    安装：pacman -S networkmanager net-tools     启动：systemctl enable NetworkManager              systemctl enable dhcpcd6 桌面及kde软件     pacman -S plasma kde-applications7 创建普通用户 并给用户提权    useradd -m -G wheel -s /bin/bash  xiaobai            #( 注释  xiaobai ：username)    passwd xiaobai  给小白设置密码     visudo 此命令会打开一个文件 搜索wheel 将有三个 &quot;all&quot; 的那一行注释放开 。保存。8 安装sddm （登陆桌面）    安装：    pacman -S sddm sddm-kcm    启动：    systemctl enable sddm进入桌面后即为安装常用软件和配置 9 更改桌面为中文：    1）vim  /etc/locale.gen    查找 zh_CN.UTF-8 UTF-8 并将注释去掉    2） locale-gen     10 添加cn源（可以下载国际源上没有的软件包）    vim /etc/pacman.conf    将multilib行和下面那行注释打开    更改custom 三行  。 注释打开    Server= https:/mirrors.utsc.edu.cn/archlinuxcn/$arch        保存后注销桌面重新登录11 安装输入法    搜狗bug比较多，我选择谷歌拼音。    sudo pacman -S fcitx-googlepinyin    sudo pacman -S fcitx-im  使输入法可以在多种环境下运行        sudo pacman -S fcitx-configtool  配置输入法        注销桌面重新登录 配置输入法，搜索google并使用。12 输入法环境变量配置    切换到登录用户目录    vim  .xprofile    编辑    export GTK_IM_MODULE=fcitx    export QT_IM_MODULE=fcitx    export XMODIFIERS=@im=fcitx                如果想在所有用户下添加可以在如下文件下添加    vim  /etc/environment    GTK_IM_MODULE=fcitx    QT_IM_MODULE=fcitx    XMODIFIERS=@im=fcitx至此kde可以基本使用了，kde桌面美化，常用软件请自行搜索安装。</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis基础</title>
      <link href="/2020/02/11/01-redis-ru-men/"/>
      <url>/2020/02/11/01-redis-ru-men/</url>
      
        <content type="html"><![CDATA[<h1 id="redis基础"><a href="#redis基础" class="headerlink" title="redis基础"></a>redis基础</h1><h2 id="1-redis入门"><a href="#1-redis入门" class="headerlink" title="1.redis入门"></a>1.redis入门</h2><h3 id="1-redis简介"><a href="#1-redis简介" class="headerlink" title="1. redis简介"></a>1. redis简介</h3><p>是什么,主要用来干什么,解决什么问题.<br>缓存,存放热点信息,解决热点信息的高并发磁盘io问题.<br>消息队列</p><h3 id="2-redis下载安装"><a href="#2-redis下载安装" class="headerlink" title="2. redis下载安装"></a>2. redis下载安装</h3><p>windows 下 去github下载windows版本<br>linux 官网下载源码,编译,安装.</p><h3 id="3-redis入门使用"><a href="#3-redis入门使用" class="headerlink" title="3. redis入门使用"></a>3. redis入门使用</h3><p>入门使用get命令 set命令<br>使用help命令查看get命令</p><h2 id="2-数据类型"><a href="#2-数据类型" class="headerlink" title="2.数据类型"></a>2.数据类型</h2><p>redis常用五种不同的数据类型,每一种数据类型的命令 都被官方分为一组,<br>redis官方共有14组命令.</p><p>redis存储的是：key,value格式的数据，其中key都是字符串，value有5种不同的数据结构<br>    * value的数据类型有如下五种：<br>        1) 字符串类型 string<br>        2) 哈希类型 hash ： map格式<br>        3) 列表类型 list ： linkedlist格式。支持重复元素<br>        4) 集合类型 set  ： 不允许重复元素<br>        5) 有序集合类型 sortedset：不允许重复元素，且元素有顺序</p><h3 id="1-字符串类型-string"><a href="#1-字符串类型-string" class="headerlink" title="1. 字符串类型 string"></a>1. 字符串类型 string</h3><pre><code>基本1. 存储： set key value       127.0.0.1:6379&gt; set username zhangsan      OK  2. 获取： get key      127.0.0.1:6379&gt; get username      &quot;zhangsan&quot;  3. 删除： del key      127.0.0.1:6379&gt; del age      (integer) 1  单指令多指令4. 存储多个： mset key1 value1 key2 value2 ....       127.0.0.1:6379&gt; set username zhangsan      OK  5. 获取多个： key1 value1 key2 value2 ....       127.0.0.1:6379&gt; get username      &quot;zhangsan&quot;  6. 获取数据字符个数： strlen key      127.0.0.1:6379&gt; del age      (integer) 1  追加7. 追加信息到原信息后面： append key  value    127.0.0.1:6379&gt; del age      (integer) 1  自增自减8. 设置数据指定增加 : 数据库集群自增    incr key      incr key increment      incrbyfloat key increment   9. 设置数据指定减少    decr key      decr key increment 设置key超时10. 设置key value 并设置超时时间    setex key seconds value 秒    psetex key milliseconds value 毫秒注意事项:操作后返回值1 表示成功还是失败(integer) 0  false(integer) 1 true2 结果(integer) 1 1数据未获取到 nil = null数据最大存储量 512Mb数值最大计算范围 long</code></pre><h3 id="2-哈希类型-hash"><a href="#2-哈希类型-hash" class="headerlink" title="2. 哈希类型 hash"></a>2. 哈希类型 hash</h3><pre><code>基本1. 存储： hset key field value    127.0.0.1:6379&gt; hset myhash username lisi    (integer) 1    127.0.0.1:6379&gt; hset myhash password 123    (integer) 1 2. 获取：     * hget key field: 获取指定的field对应的值        127.0.0.1:6379&gt; hget myhash username        &quot;lisi&quot;    * hgetall key：获取所有的field和value        127.0.0.1:6379&gt; hgetall myhash        1) &quot;username&quot;        2) &quot;lisi&quot;        3) &quot;password&quot;        4) &quot;123&quot; 3. 删除： hdel key field        127.0.0.1:6379&gt; hdel myhash username        (integer) 1 单指令多指令4. 存储多个： hmset key field value1 field value2 ....       5. 获取多个： hmget key field value1 field value2 ....       6. 获取数据字段个数： hlen key      7. 获取表中是否有字段： hexist key field  扩展操作8. 获取表中所有字段名火字段值：    hkeys key    hvals key   自增自减9. 设置数据指定增加 : 数据库集群自增    hincrby key  field   increment      hincrbyfloat key  field   increment     hdecrby key field increment </code></pre><p>​<br>​    注意事项:<br>​    hash的value只允许存字符串,不允许存其他的.<br>​    每个hash可以存2的32次方-1个键值对<br>​    不可将hash作为对象列表.<br>​<br>    购物车实现:<br>    设计一个购物车在redis中的存储模型</p><pre><code>hsetex key field value 设置一个key仅当 key不在的时候才去存,如果已经有key,则不存.抢购 秒杀:</code></pre><h3 id="3-列表-list"><a href="#3-列表-list" class="headerlink" title="3. 列表 list"></a>3. 列表 list</h3><pre><code>基本1. 添加：    1. lpush key value: 将元素加入列表左表       lpushx key value :当存在时            2. rpush key value：将元素加入列表右边        rpushx key value :当存在时    3. lset key index value: 设置某索引下的值        2. 获取：     * lrange key start end ：范围获取    * lindex key index :获取某个index下的值    * llen key :list的长度    * ltrim key start stop:修剪列表到指定范围        3. 删除：     * lpop key： 删除列表最左边的元素，并将元素返回    * rpop key： 删除列表最右边的元素，并将元素返回    * lrem key index value :删除某个索引元素    * blpop key1 [key2] timeout： 删除列表最左边的元素，并将元素返回,阻塞,直到有一个可用.    * brpop key1 [key2] timeout： 删除列表最右边的元素，并将元素返回阻塞,直到有一个可用.  消息队列4. 插入元素:    * linsert key befor|after pivot value注意事项  list存的数据都是string,最多lang有索引,但一般以栈的思想操作获取全部索引设置为-1可以对数据分页,通常第一页来自list,第二页加载时查找数据库.业务关注列表是新的在前 blpop ==  block lpop多路消息汇总合并 服务器日志汇总消息队列 日志汇总</code></pre><h3 id="4-集合-set"><a href="#4-集合-set" class="headerlink" title="4. 集合 set"></a>4. 集合 set</h3><pre><code>不可重复  基础1. 存储：sadd key value1 value2   2. 获取：smembers key:获取set集合中所有元素    3. 删除：srem key value1 value2:删除set集合中的某个元素            4. scard key :获取集合总量5. sismember key member :是否包含指定数据 随机获取6. srandmember key [count]: 随机获取指定数据   spop key 删除并随机获取一个集合中的元素    可应用于随机推荐信息集合计算7. 交并差    sinter key1 [key2]    sunion key1 [key2]    sdiff key1 [key2]8.求交并差并存储到指定    sinterstore destination key1 [key2]    sunionstore destination key1 [key2]    sdiffstore destination key1 [key2]9. 将制定数据从原始集合中移动到目标集合中    smove source destination member    同类关键信息检索注意事项:    不允许重读,添加的已有会失败    不能当成hash来用应用场景:    权限校验 交并    网站访问量统计 pv uv ip  pv=string 自增  uv ip =set的 scard key    黑名单 加入到set</code></pre><h3 id="5-有序集合-sortedset"><a href="#5-有序集合-sortedset" class="headerlink" title="5. 有序集合 sortedset"></a>5. 有序集合 sortedset</h3><pre><code>基础1. 存储：zadd key score member    2. 获取：zrange key start end  小-&gt;大 [withrank]        zrevrange key start end  大-&gt;小 [withrank]    条件获取         zrangebyscore key min  max [withscores] 小-&gt;大        zrevrangebyscore key max min [withscores] 大-&gt;小3. 删除：zrem key member        zremrangebyrank key start stop        zremrangebyscore key min max4. zcard key :获取集合总量5. zcount key min max :获取数量交并差6.  sinterstore destination numkeys key1 [key2]    sunionstore destination numkeys key1 [key2] 7. 获取索引    zrank key member     zrevrank key member 8. score值获取    zscore key member    zincrby key increment member 注意事项:score 是double值,有范围,也可能丢失精度.set结构+索引+score实现排行榜    top系列 score    投票排行    好友亲密度排行时效管理    投票失效    vip到期带有权重的消息队列</code></pre><p><strong>实例方案</strong><br>计次器   妙用最大值抛出异常，减少业务层运算量。<br>微信接收消息</p><h2 id="3-通用命令"><a href="#3-通用命令" class="headerlink" title="3.通用命令"></a>3.通用命令</h2><h3 id="1-key-命令"><a href="#1-key-命令" class="headerlink" title="1.key 命令"></a>1.key 命令</h3><pre><code>基础1. keys * : 查询所有的键2. type key ： 获取键对应的value的类型3. del key：删除指定的key value4. exist key: key是否存在randomkey:返回一个随机key时效性5. 设置过期    expire key seconds :设置过期秒数    pexpire key millisseconds:设置过期毫秒数    expireat key timsramp:设置过期时间戳    pexpireat key timsramp:设置过期时间戳 毫秒6. 移除过期    persist key : 移除过期时间 变为永久性7. 获取有效时间    ttl key :秒    pttl key : 毫秒查询key8.匹配key    keys pattern 按匹配字符匹配其他9.重命名    rename key newkey : 重命名    renamenx key newkey :重命名 newkey必须不存在10.排序    sort key pattern ,对key的内容排序</code></pre><h3 id="2-db-命令"><a href="#2-db-命令" class="headerlink" title="2.db 命令"></a>2.db 命令</h3><p>db是操作库的命令</p><pre><code>redis提供16个数据库,从0-15.  每个数据库是相互独立的.db基本操作1. 切换数据库     select index2. 其他    quit :退出    ping :pang 测试服务器链接    each message  与db相关操作1. 数据移动    move key db :移动key2. 数据清除    dbsize :获取大小    flushdb : 刷新清除当前db    flushall : 刷新清除所有db</code></pre><h2 id="4-jedis"><a href="#4-jedis" class="headerlink" title="4.jedis"></a>4.jedis</h2><ul><li>Jedis: 一款java操作redis数据库的工具. </li><li>使用步骤：  </li></ul><ol><li>下载jedis的jar包  </li><li>使用  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1. 获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2. 操作</span>jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3. 关闭连接</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li><p>Jedis操作各种redis中的数据结构</p><ol><li>字符串类型 string</li></ol></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1. 获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果使用空参构造，默认值 "localhost",6379端口</span><span class="token comment">//2. 操作</span><span class="token comment">//存储</span>jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取</span><span class="token class-name">String</span> username <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以使用setex()方法存储可以指定过期时间的 key value</span>jedis<span class="token punctuation">.</span><span class="token function">setex</span><span class="token punctuation">(</span><span class="token string">"activecode"</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">"hehe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将activecode：hehe键值对存入redis，并且20秒后自动删除该键值对</span><span class="token comment">//3. 关闭连接</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>哈希类型 </li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1. 获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果使用空参构造，默认值 "localhost",6379端口</span><span class="token comment">//2. 操作</span><span class="token comment">// 存储hash</span>jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token punctuation">,</span><span class="token string">"23"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>jedis<span class="token punctuation">.</span><span class="token function">hset</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span><span class="token string">"gender"</span><span class="token punctuation">,</span><span class="token string">"female"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取hash</span><span class="token class-name">String</span> name <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">hget</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取hash的所有map中的数据</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">></span></span> user <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">hgetAll</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// keyset</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> keySet <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keySet<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">//获取value</span>    <span class="token class-name">String</span> value <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">//3. 关闭连接</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>列表类型<br>list ： linkedlist格式。支持重复元素  </p><pre><code>     lpush / rpush       lpop / rpop       lrange start end : 范围获取   </code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java">    <span class="token comment">//1. 获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果使用空参构造，默认值 "localhost",6379端口</span><span class="token comment">//2. 操作</span><span class="token comment">// list 存储</span>jedis<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从左边存</span>jedis<span class="token punctuation">.</span><span class="token function">rpush</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//从右边存</span><span class="token comment">// list 范围获取</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> mylist <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mylist<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// list 弹出</span><span class="token class-name">String</span> element1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lpop</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//c</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>element1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> element2 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">rpop</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//c</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>element2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// list 范围获取</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> mylist2 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">lrange</span><span class="token punctuation">(</span><span class="token string">"mylist"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mylist2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3. 关闭连接</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>集合类型<br>set  ： 不允许重复元素<br>sadd<br>smembers:获取所有元素  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1. 获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果使用空参构造，默认值 "localhost",6379端口</span><span class="token comment">//2. 操作</span><span class="token comment">// set 存储</span>jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">"myset"</span><span class="token punctuation">,</span><span class="token string">"java"</span><span class="token punctuation">,</span><span class="token string">"php"</span><span class="token punctuation">,</span><span class="token string">"c++"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// set 获取</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> myset <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">smembers</span><span class="token punctuation">(</span><span class="token string">"myset"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myset<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3. 关闭连接</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>有序集合类型<br>sortedset：不允许重复元素，且元素有顺序  </p><pre><code>     zadd       zrange  </code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1. 获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果使用空参构造，默认值 "localhost",6379端口</span><span class="token comment">//2. 操作</span><span class="token comment">// sortedset 存储</span>jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">"mysortedset"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"亚瑟"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">"mysortedset"</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">"后裔"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">"mysortedset"</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token string">"孙悟空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// sortedset 获取</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> mysortedset <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">zrange</span><span class="token punctuation">(</span><span class="token string">"mysortedset"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mysortedset<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3. 关闭连接</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ul><li>jedis连接池： JedisPool  </li><li>使用：    <pre><code>      1. 创建JedisPool连接池对象        2. 调用方法 getResource()方法获取Jedis连接  </code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//0.创建一个配置对象</span><span class="token class-name">JedisPoolConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>config<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>config<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1.创建Jedis连接池对象</span><span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span><span class="token string">"localhost"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.获取连接</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3. 使用</span>jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"hehe"</span><span class="token punctuation">,</span><span class="token string">"heihei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4. 关闭 归还到连接池中</span>jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>连接池工具类  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JedisPoolUtils</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">JedisPool</span> jedisPool<span class="token punctuation">;</span>    <span class="token keyword">static</span><span class="token punctuation">&#123;</span>        <span class="token comment">//读取配置文件</span>        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">JedisPoolUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"jedis.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//创建Properties对象</span>        <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//关联文件</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//获取数据，设置到JedisPoolConfig中</span>        <span class="token class-name">JedisPoolConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>pro<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"maxTotal"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>pro<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"maxIdle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//初始化JedisPool</span>        jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span>pro<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"host"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>pro<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"port"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**        * 获取连接方法        */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Jedis</span> <span class="token function">getJedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>​    </p>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis高级</title>
      <link href="/2020/02/11/02-redis-gao-ji/"/>
      <url>/2020/02/11/02-redis-gao-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="redis高级"><a href="#redis高级" class="headerlink" title="redis高级"></a>redis高级</h1><h2 id="1-redis持久化"><a href="#1-redis持久化" class="headerlink" title="1. redis持久化"></a>1. redis持久化</h2><p>redis的持久化的方式有两种,rdb和aof,对应的是快照和日志,前者侧重内容,后者侧重记录方式.</p><h3 id="1-rdb持久化"><a href="#1-rdb持久化" class="headerlink" title="1.rdb持久化"></a>1.rdb持久化</h3><p>rdb方式:做的操作的步骤 ,存的快照.</p><pre><code>1.save命令  主动将快照保存 工作原理:会阻塞所有进程,不对外提供服务.2. bgsave 后台将快照保存,不会阻塞. 会生成子进程保存,不会使用主进程.3.持久化相关配置文件save seconds change如 save 300 1;表示300秒内1个发生了变化就持久化.save配置后是bgsave命令4. rdb的优缺点优点:* 快照方式保存,存的快* 恢复快缺点:* 无法实时持久化* 子进程消耗资源* 各个版本rdb文件格式不同,无法兼容.</code></pre><h3 id="1-aof持久化"><a href="#1-aof持久化" class="headerlink" title="1.aof持久化"></a>1.aof持久化</h3><p>记录操作的记录,记录的日志.<br>    1. aof开启<br>    appendonly yes<br>    2. aof策略<br>    appendsync :<br>    always 每条都记录<br>    no 系统决定<br>    everysec 每秒<br>    3. aof重写<br>    aof记录每一条指令,会造成冗余,因此会将若干条指令重写为结果指令记录.<br>    bgwriteaof: 手动重写<br>    4. 配置文件中开启重写<br>    auto-aof-rewrite-min-size size<br>    auto-aof-rewrit-percentage percentage </p><h2 id="2-事务"><a href="#2-事务" class="headerlink" title="2. 事务"></a>2. 事务</h2><p>redis单线程操作也会有数据安全问题,这里的事务和mysql中并发造成的不同,是一种客户端主观上的的数据问题.</p><h3 id="1-事务的基本操作"><a href="#1-事务的基本操作" class="headerlink" title="1.事务的基本操作"></a>1.事务的基本操作</h3><pre><code>1. 开启事务multi 开启事务后 后面的命令都加到事务中2 执行事务exec事务结束,同时执行事务.事务内的命令会加到一个任务队列中,结束时一起执行.3 取消事务diccard 终止当前事务,在multi和exec之间</code></pre><h3 id="2-事务的注意事项"><a href="#2-事务的注意事项" class="headerlink" title="2.事务的注意事项"></a>2.事务的注意事项</h3><pre><code>1. 如果命令有语法错误 事务会取消2. 如果命令没有语法错误,但不合规定(对数据类型用了另一种数据类型的指令),正确的执行,错误的不执行.此种情况需要程序员回滚,redis没有设计回滚.</code></pre><h3 id="3-事务的锁"><a href="#3-事务的锁" class="headerlink" title="3.事务的锁"></a>3.事务的锁</h3><pre><code>1.如何加锁watch key [key2...] 如果在执行exec前key发生了变化,终止事务.unwatch 取消所有对key的监视.2.分布式锁问题 当多个客户端想要操作同一个数据时?如超卖问题setnx  key value ;这个指令如果没有key返回成功,如果已有key返回失败.此为约定规范,需要在代码层面实现.3. 分布式锁的死锁问题锁是程序约定的,当一个程序加了锁后,突然挂了,此时没有解锁会有死锁问题.我们可以给锁加一个时效,当约定时间过去后锁自动失效.expire key seconds :设置过期秒数pexpire key millisseconds:设置过期毫秒数expireat key timsramp:设置过期时间戳pexpireat key timsramp:设置过期时间戳 毫秒</code></pre><h2 id="3-删除策略"><a href="#3-删除策略" class="headerlink" title="3. 删除策略"></a>3. 删除策略</h2><p>ttl可以查看,数据的状态.<br>所谓删除策略是,当删除指令发出后,因为cpu占用等问题并不会马上执行删除,redis如何删即为策略.</p><h3 id="1-何为过期数据"><a href="#1-何为过期数据" class="headerlink" title="1.何为过期数据"></a>1.何为过期数据</h3><pre><code>设置key时过期的数据</code></pre><h3 id="2-过期数据的存储结构"><a href="#2-过期数据的存储结构" class="headerlink" title="2.过期数据的存储结构"></a>2.过期数据的存储结构</h3><pre><code>内部有一个存储过期时间和keys地址的数据结构. 叫做expires.</code></pre><h3 id="3-三种删除策略"><a href="#3-三种删除策略" class="headerlink" title="3.三种删除策略"></a>3.三种删除策略</h3><pre><code>有三种删除策略1.定时删除 到点就删除,抢占cpu    内部有个函数,一直不停循环expires.2.惰性删除 到点不管,下次访问时检查是否过期,然后删除. 节约cpu,内存换cpu.    访问时循环expires3.定期删除 类似于gc.    * 服务启动时读取server.hz,    * 每秒执行server.hz十次serverCron()-&gt;databasesCron()-&gt;activeExpireCycle(). activeExpireCycle()每次执行250ms    * activeExpireCycle() 对每个expires逐一检测.    * 对每个expires检测时,随机挑选w个key检测.    * 若发现删除key&gt;W*25%,循环该过程.    * key&lt;W*25%,检查下一个.    * activeExpireCycle()执行时间到期,会记录当前db,下次从此db开始.    w配置文件中设置</code></pre><h3 id="4-逐出策略"><a href="#4-逐出策略" class="headerlink" title="4.逐出策略"></a>4.逐出策略</h3><pre><code>    何为逐出策略:注意和删除策略分开,删除策略是删除expires的,逐出是内存不足时强制的,可能波及无辜,删除expires外的数据.      redis 在存入新数据时,会调用ferrMemoryifNeeded()检测内存是否充足,如果不充足,需要删除一些数据清理内存空间.  maxmemory 默认全占有  manmemory-samples    每次选取待删除数据的个数。全表扫描占用时间,随机获取数据作为待检测删除数据. maxmemory-policy 达到最大内存后,对选出的数据删除的策略.    * 检测可能会过期的：设置了过期时间的    volatile-lru: 最近最少使用的(距离上次使用最远的)    volatile-lfu: 次数最少的    volatile-ttl: 将要过期的    volatile-randow: 任意选择    * 检测全库：不管是不是设置了过期时间    allkeys-lru: 最近最少使用的(距离上次使用最远的)    allkeys-lfu: 次数最少的    allkeys-randow: 任意选择    * 放弃驱逐    no-enviction 会内存溢出</code></pre><h2 id="4-redis-conf详解"><a href="#4-redis-conf详解" class="headerlink" title="4. redis.conf详解"></a>4. redis.conf详解</h2><p>见配置文件</p><h2 id="5-高级数据类型"><a href="#5-高级数据类型" class="headerlink" title="5. 高级数据类型"></a>5. 高级数据类型</h2><p>前面已经讲了五种基础数据类型.<br>高级数据类型只是为了解决单一的问题.</p><h3 id="1-bitmaps"><a href="#1-bitmaps" class="headerlink" title="1.bitmaps"></a>1.bitmaps</h3><p>存储的都为1和0<br>    1.bitmap的应用场景<br>    2.基础操作<br>        1.获取指定key对应偏移量上的bit值<br>         getbit key offset<br>        2. 设置指定key对应偏移量上的bit值,value只能是1或0<br>         setbit key offset value<br>    3. 交并或异或<br>        * bitop and destkey key1 [key2]<br>        * bitop or destkey key1 [key2]<br>        * bitop not destkey key1 [key2]<br>        * bitop xor destkey key1 [key2]<br>    4. 统计指定key中1的量<br>        bitcount key [statr end]</p><pre><code>bitmap 应用于信息状态统计 如电影是否被看过</code></pre><h3 id="2-HyperLogLog"><a href="#2-HyperLogLog" class="headerlink" title="2.HyperLogLog"></a>2.HyperLogLog</h3><pre><code>基数统计 基数:数据集合去重后的结果集合HyperLogLog做基数统计,运用了LogLog算法.  (不懂,了解吧)1.添加数据 pfadd key elemennt [ element ..]2.统计数据 pfcount key [key ..]3.合并数据 pfmegrge destkey sourcekey [key ..] HyperLogLog 应用于信息数量状态统计</code></pre><h3 id="3-GEO"><a href="#3-GEO" class="headerlink" title="3.GEO"></a>3.GEO</h3><pre><code>如分享位置后计算地图上两个点的距离.微信中查看附近的人1.添加坐标点geoadd key longitude latitude memeber [ 多个]2.获取坐标点 geopos key memeber [多个]3. 计算坐标点距离geodist key memeber1 member24.给一个坐标 求他附近某个范围的其他点georadius key longitude latitude radius(范围) m|km|ft|mi(单位)5.给一个点,求他附近某个范围的其他点georadiusbymemeber key member radius(范围) m|km|ft|mi(单位)6.获取指定点对应的hash值geohash key member [多个]</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis集群</title>
      <link href="/2020/02/11/03-redis-ji-qun/"/>
      <url>/2020/02/11/03-redis-ji-qun/</url>
      
        <content type="html"><![CDATA[<h1 id="redis集群"><a href="#redis集群" class="headerlink" title="redis集群"></a>redis集群</h1><h2 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h2><h3 id="1-何为主从复制"><a href="#1-何为主从复制" class="headerlink" title="1.何为主从复制"></a>1.何为主从复制</h3><pre><code>主从服务器</code></pre><h3 id="2-主从复制工作流程"><a href="#2-主从复制工作流程" class="headerlink" title="2.主从复制工作流程"></a>2.主从复制工作流程</h3><ol><li><p>建立连接  </p><p> 步骤:</p><table><thead><tr><th>序列</th><th>操作</th><th>master</th><th>方向</th><th>slave</th></tr></thead><tbody><tr><td>1</td><td>设置master地址和端口,保存信息.</td><td>2.收到指令响应对方接收信息的端口</td><td>&lt;–&gt;</td><td>1.发送指令:slaveof ip port</td></tr><tr><td>2</td><td>建立socket连接</td><td>4.</td><td>&lt;–</td><td>3保存master ip和port . 4.根据保存信息创建socket连接</td></tr><tr><td>3</td><td>ping pang定时器任务</td><td>6. 响应pang</td><td>&lt;–&gt;</td><td>5. 发送ping</td></tr><tr><td>4</td><td>身份验证</td><td>8. 验证授权</td><td>&lt;–&gt;</td><td>7. 发送指令:auth password</td></tr><tr><td>5</td><td>发送slave监听端口信息</td><td>10. 保存slave发来的端口号</td><td>&lt;–&gt;</td><td>9. 发送指令:replconlistening-port:port s端监听的端口号</td></tr></tbody></table><p> 三种方式建立连接<br> 1.slave端发送指令   slaveof ip port</p><ol start="2"><li>启动时加参数  –slaveof ip port</li><li>slave添加conf参数 slaveof ip port</li></ol><p> 连接断开<br> 客户端发送 slaveof nono</p></li><li><p>数据同步<br>步骤</p><table><thead><tr><th>序列</th><th>操作</th><th>master</th><th>方向</th><th>slave</th></tr></thead><tbody><tr><td>1</td><td>slave请求同步</td><td>2.执行bgsave,3slave首次连接创建命令缓冲区</td><td>&lt;–&gt;</td><td>1.发送指令:psync2</td></tr><tr><td>2</td><td>rdb同步数据</td><td>4.生成rdb发送给slave</td><td>&lt;–&gt;</td><td>5.接收rdb,恢复</td></tr><tr><td>3</td><td>部分同步数据</td><td>7. 发送复制缓冲区</td><td>&lt;–&gt;</td><td>6. 发送指令告知rdb恢复完成</td></tr><tr><td>4</td><td>slave恢复部分同步数据</td><td></td><td>&lt;–&gt;</td><td>8. 接收信息,恢复部分数据, 9. 发送指令完成同步</td></tr><tr><td>5</td><td>开始命令传播</td><td>10. 接收指令.响应,开始命令传播</td><td>&lt;–&gt;</td><td></td></tr></tbody></table><p> 注意事项<br> 1 master数量巨大,要避开高峰区加slave.<br> 2 缓冲区要设定合理,防止rdb同步阶段数据溢出,导致slave多次全量复制.<br> 3 master要留一部分内存给bgsave用.</p></li></ol><p>数据同步阶段部分复制是如何实现的  </p><pre><code>1. 一些概念      *服务器运行id:       运行时自动生成的随机40位16进制字符,在slave连接时,master会将runid发送给slave.    *主服务器的复制积压缓冲区:    是一个队列,用于存储服务器执行过的命令,传播命令时,master会将传播的命令记录下来,存储在缓冲区.    *主从服务器的复制偏移量      缓冲区的组成为偏移量(offset)和字节值两行组成.    master记录每个salve不同的偏移量,用来记录同步的位置.当然slave也会记录偏移量,2. 部分复制* 部分复制阶段的三要素    即为     runid 缓冲器 偏移量       或者说:    为了保证命令传播阶段不出错,不会数据丢失创造了这种方法,产生了这三个要素.    runid,用来识别唯一的服务.    缓冲区,防止数据传播丢失后有备份.    偏移量,出错后如何确定出错前的位置.m在发送rdb文件时会发送offset和runid,同时本地的offset会随收到的客户端命令而变化.1. s拿到offset和runid,发送一个请求.-&gt;psync runid offfset2. m接受到请求,对比发送的runid和offset.3. 如果offset不同则将缓冲区中不同的数据发送</code></pre><p>3.命令传播</p><p>当连接建立,数据同步之后.<br>master数据变更后,发送变更命令给slave叫做命令传播.   </p><pre><code>心跳机制:master心跳:指令: ping周期: 配置文件可以定义,默认10秒作用:检查slave是否在线slave心跳指令:replconf ack (offset)周期:一秒作用:汇报偏移量,获取最新数据变更指令最用:判断是否在线* 命令传播阶段出现了断网    *闪断闪联 忽略    *长时中断 全量复制    *短时中断 部分复制</code></pre><p>​        </p><h3 id="3-主从复制常见问题"><a href="#3-主从复制常见问题" class="headerlink" title="3. 主从复制常见问题"></a>3. 主从复制常见问题</h3><pre><code>1. salve频繁全量复制 -&gt;更改缓冲区合理2. master占用cpu过高,与slave频繁断开 -&gt;设置超时时间 repl-time3. slave与master频繁断开 -&gt;提高pin命令发送频度,慎用.4. slave数据不同步,不一致. 网络延迟导致-&gt;优化网络.</code></pre><h2 id="2-哨兵"><a href="#2-哨兵" class="headerlink" title="2.哨兵"></a>2.哨兵</h2><h3 id="1-什么是哨兵"><a href="#1-什么是哨兵" class="headerlink" title="1.什么是哨兵"></a>1.什么是哨兵</h3><pre><code>监控主从结构,当出现故障的时候通过投票机制选择新的master并将slave连接到新的master.哨兵的作用监控:不断的检查master和slave通知:机器出现问题,发送通知(哨兵间 客户端)自动故障转移:断开masterhe slave连接,选取新master,并通知其他slave连接到新的master,告知客户端.哨兵也是redis服务器,只是不提供数据服务</code></pre><h3 id="2-配置哨兵"><a href="#2-配置哨兵" class="headerlink" title="2.配置哨兵"></a>2.配置哨兵</h3><pre><code>sentinel.conf 文件redis-sentine sentinel.conf 即可启动哨兵开启三个server,一主两从.开启三个哨兵.杀掉主服务器进程.发现主服务器变了,且其他的从连接上了主.</code></pre><h3 id="3-哨兵的原理"><a href="#3-哨兵的原理" class="headerlink" title="3.哨兵的原理"></a>3.哨兵的原理</h3><pre><code>将哨兵理解为一个客户端,通过指令来操作其他redis服务器.1.监控 同步各个节点的状态信息     获取各个哨兵状态    获取master状态        runid        role        slave信息        其他哨兵    获取所有slave的状态        runid        role        master_host port        offset哨兵之间建立信道2. 通知    哨兵之间建立信道互相通知       3. 故障转移 内部投票:内部投票选出哨兵           如何投票?        竞选机制,谁越早通知谁票多,谁竞选次数多谁票多.    挑选:投票出的哨兵,来挑选新master.        如何挑选?        首先淘汰:            不在线的            响应慢的            与master断开时间久的.        接着以优先原则            优先级            offset            runid    挑选完后发送指令:        向新的master发送slaveof no one指令        向其他slave发送 slaveof 新master  ip port</code></pre><h2 id="集群"><a href="#集群" class="headerlink" title="集群"></a>集群</h2><h3 id="1-什么是集群"><a href="#1-什么是集群" class="headerlink" title="1.什么是集群"></a>1.什么是集群</h3><pre><code>1.集群就是使用网络将若干台计算机联通起来,并提供统一的管理方式,对外呈现单机的服务效果.2. redis可以启动多个节点后在任意一个节点上开启集群会自动分配主从</code></pre><h3 id="2-redis集群的结构"><a href="#2-redis集群的结构" class="headerlink" title="2.redis集群的结构"></a>2.redis集群的结构</h3><pre><code>1.数据是怎么存的    1. 通过算法设计,计算出key应该保存到额位置.      2. 将所有的存储空间切割成16384份,每台主机保存一部分,每份代表的是一个存储空间,不是一个key的保存的空间      3.按照key按照计算出的结果放到对应位置2.相互之间是怎么联系的    如果加了机器,会将存储空间(槽)分到新机器,这就带来通讯的问题,其他机器怎么知道新的槽的位置呢?    通过相互联系,记录每台计算机拥有的槽.    若有条消息,取key,到一个服务器上    一次命中,直接返回.    一次未中,则告知具体位置.</code></pre><h3 id="3-集群实现"><a href="#3-集群实现" class="headerlink" title="3.集群实现"></a>3.集群实现</h3><p>弄一个三主三从的集群</p><ol><li>复制六份配置文件 配置每一份的配置文件,增加.</li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 开启集群模式cluster-enabled yes# 每一个节点需要有一个配置文件，需要6份。每个节点处于集群的角色都需要告知其他所有节点，彼此知道，这个文件用于存储集群模式下的集群状态等信息，这个文件是由redis自己维护，我们不用管。如果你要重新创建集群，那么把这个文件删了就行cluster-config-file nodes-201.conf# 超时时间，超时则认为master宕机，随后主备切换cluster-node-timeout 5000# 开启AOFappendonly yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li><p>启动6个redis</p></li><li><p>任一节点上执行以下命令，执行完会出现日志，6台的主从关系都会显示。</p></li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">###### 注意1：如果你使用的是redis3.x版本，需要使用redis-trib.rb来构建集群，最新版使用C语言来构建了，这个要注意# 注意2：以下为新版的redis构建方式###### 创建集群，主节点和从节点比例为1，主从的对应关系会自动分配。redis-cli --cluster create ip1:port1 ip2:port2 ip3:port3 ip4:port4 ip5:port5 ip6:port6 --cluster-replicas 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以测试挂掉几台后依然可用,注意存取使用的是 redis-client -c</p>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis应用</title>
      <link href="/2020/02/11/04-redis-qi-ye-ying-yong/"/>
      <url>/2020/02/11/04-redis-qi-ye-ying-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="redis应用"><a href="#redis应用" class="headerlink" title="redis应用"></a>redis应用</h1><h2 id="1-redis缓存预热"><a href="#1-redis缓存预热" class="headerlink" title="1.redis缓存预热"></a>1.redis缓存预热</h2><p>问题 当redis中大量吞吐时导致宕机</p><p>如何解决呢</p><p>前置工作</p><pre><code>1 日常统计数据访问记录,翁吉访问频度比较高德热点数据,2利用lru数据删除策略,构建数据留存对队列,    storm和kafka配合</code></pre><p>准备工作</p><pre><code>将统计结果中的数据分类,根据级别,redis优先加载级别高德热点数据.利分布式多服务器进行数据读取,提高加载过程.</code></pre><h2 id="2-redis缓存雪崩"><a href="#2-redis缓存雪崩" class="headerlink" title="2.redis缓存雪崩"></a>2.redis缓存雪崩</h2><p>问题 短时间大量请求导致数据库崩溃 -&gt;导致redis崩溃  </p><pre><code>排查问题所在短时间内较多key失效,导致大量请求访问数据库,数据库无法处理,崩溃.redis一方面无缓存可用,无法处理请求,资源被占用.另一方面请求会越来越多导致崩溃.短时间范围内大量key失效,是原因.</code></pre><p>如何解决?  </p><pre><code>1. 页面静态化处理,数据静态化.2. 构建多级架构,nginx+redis+ehcache3. 对mysql优化4. 灾难预警5. 限流,牺牲客户端体验,让客户端发送假请求,一段时间后再恢复.1.lru和lfu切换,防止同时大量数据失效.2.数据有效期策略调整    比如设置热点的数据,使用不同的有效期.    过期时间可以加个随机值,防止同一时间大量失效.3.超热数据使用4.人工定期维护</code></pre><h2 id="3-redis缓存击穿"><a href="#3-redis缓存击穿" class="headerlink" title="3.redis缓存击穿"></a>3.redis缓存击穿</h2><p>问题 数据库崩溃 redis却没有崩溃 </p><pre><code>排查问题所在 单个key过期了,导致大量请求访问数据库,数据库崩溃.</code></pre><p>如何解决?  </p><pre><code>1. 预先设定2. 监控流量,设计长时间过期.3. 定时刷新,启动定时任务高峰期来临前,刷新有效期,4. 二级缓存</code></pre><h2 id="4-redis缓存穿透"><a href="#4-redis缓存穿透" class="headerlink" title="4.redis缓存穿透"></a>4.redis缓存穿透</h2><p>问题 数据库崩溃 redis命中率变低 </p><pre><code>排查问题所在redis中大面积未命中,出现不正常的url.无效数据导致redis中没有,数据库中也没有.这是外部不正常的现象,出现有人攻击服务器.</code></pre><p>如何解决?  </p><pre><code>1. 缓存null    如果查询结果为null,进行缓存,同时设定很短的过期时间2. 白名单策略 布隆过滤器3. 实时监控      检测redis命中率与null的数据对比.    超过5倍以上纳入重点排查.  4. key加密    问题出现后,情动防灾业务.</code></pre><h2 id="5-redis性能检测"><a href="#5-redis性能检测" class="headerlink" title="5.redis性能检测"></a>5.redis性能检测</h2><pre><code>性能指标    响应时间    每秒请求数    缓存命中率内存指标    已使用内存    内存碎片    由于内存限制被移除的key    被阻塞的客户端基本活动指标    客户端连接数    slave数量    最近一次主从交互后的秒数    key总数错误指标    客户端最大连接被拒绝的次数    key查找失败的次数    主从断开持续时间</code></pre><p>性能监控工具类<br>性能监控指令</p><pre><code>慢查询工具slowlog    get:获取    len:长度    reset:重制可在配置文件配置慢日志的记录条数和多慢才记录进来.slowlog-log-slower-than 100 #慢查询下限slowlog-max-len 100 # 设置命令对应的日子显示长度</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>垃圾回收</title>
      <link href="/2019/12/28/gc.la-ji-hui-shou/"/>
      <url>/2019/12/28/gc.la-ji-hui-shou/</url>
      
        <content type="html"><![CDATA[<h1 id="垃圾回收-GC"><a href="#垃圾回收-GC" class="headerlink" title="垃圾回收.GC"></a>垃圾回收.GC</h1><h3 id="1-垃圾判断算法"><a href="#1-垃圾判断算法" class="headerlink" title="1.垃圾判断算法"></a>1.垃圾判断算法</h3><h4 id="1-1-引用计数算法"><a href="#1-1-引用计数算法" class="headerlink" title="1.1 引用计数算法"></a>1.1 引用计数算法</h4><p>给对象添加一个引用计数器，当有一个地方引用它，计数器加1，当引用失效，计数器减1，任何时刻计数器为0的对象就是不可能再被使用的。<br>引用计数器无法解决对象循环引用的问题（A引用B，B引用A）</p><h4 id="1-2-根搜索算法"><a href="#1-2-根搜索算法" class="headerlink" title="1.2 根搜索算法"></a>1.2 根搜索算法</h4><p>通过一系列的成为GC Roots的点作为起始进行向下搜索，当一个对象到GCRoots没有任何引用链相连，则此对象时不可用的。</p><h5 id="1-2-1-GC-Roots"><a href="#1-2-1-GC-Roots" class="headerlink" title="1.2.1 GC Roots"></a>1.2.1 GC Roots</h5><ol><li>在vm栈中的引用</li><li>方法区的静态引用</li><li>方法区中常量引用的对象</li><li>jni（netive方法）中的引用  </li></ol><h5 id="1-2-2-方法区的回收"><a href="#1-2-2-方法区的回收" class="headerlink" title="1.2.2 方法区的回收"></a>1.2.2 方法区的回收</h5><p>商业化的虚拟机一般都会实现方法区的回收</p><ol><li>回收内容：</li></ol><ul><li>废弃常量</li><li>无用类</li></ul><ol start="2"><li>回收满足条件：</li></ol><ul><li>该类的实例都被回收</li><li>加载该类的类加载器被GC</li><li>该类的Class对象没有在任何地方被引用，如不能在任何地方通过反射访问到该类。<h3 id="2-GC算法"><a href="#2-GC算法" class="headerlink" title="2.GC算法"></a>2.GC算法</h3><h4 id="2-1-标记-清除算法-MS"><a href="#2-1-标记-清除算法-MS" class="headerlink" title="2.1 标记-清除算法(MS)"></a>2.1 标记-清除算法(MS)</h4>分为<strong>标记</strong>和<strong>清除</strong>两个阶段，首先标记所有需要回收的对象，然后回收所有需要回收的对象。</li><li><em>缺点：</em>*</li><li>效率较低 标记和清除的效率都比较低。需要扫描所有对象，堆越大越慢。</li><li>空间问题：回收后出现不连续空间，后续使用无法找到连续空间易造成再次回收。<h4 id="2-2-标记-整理算法-MC"><a href="#2-2-标记-整理算法-MC" class="headerlink" title="2.2 标记-整理算法(MC)"></a>2.2 标记-整理算法(MC)</h4></li><li>*原理**：标记过程一样，但后续步骤不是清除，而是令所有存活对象一端移动，然后直接清理掉这端边界以外的内存。</li><li>*缺点**：没有内存碎片，但移动(压缩)对象更加耗费时间，<h4 id="2-3-复制算法-Copying"><a href="#2-3-复制算法-Copying" class="headerlink" title="2.3 复制算法(Copying)"></a>2.3 复制算法(Copying)</h4></li><li><em>原理</em>**</li><li>将可用内存划分为两块，每次只使用一块，当半块内存用完了，仅将还存活的对象复制到另外一块上面，原有的一块直接清除。</li><li>每次回收都是回收一半内存，也不用考虑内存碎片问题。当需要堆中内存时，只需要移动堆指针，按顺序分配内存。</li><li><em>特点</em>*    </li><li>这种算法是内存会变为原来一半，比较昂贵。</li><li>在对象存活率较高的时候，效率有所下降。</li><li>hotspot虚拟机默认eden和survivor的比例为8:1，也就是每次有10%的空闲空间<h4 id="2-4-分代算法-GN"><a href="#2-4-分代算法-GN" class="headerlink" title="2.4 分代算法(GN)"></a>2.4 分代算法(GN)</h4></li><li><em>原理</em>*</li><li>当前都是采用分代收集，根据对象的不同的存活周期将内存划分为几块。</li><li>一般把堆内存划分为新生代和老年代，这样根据各个年代的不同特点采用不同的算法。</li><li>新生代每次cg都有大量对象死去，所以使用复制算法，只需复制少量存活的对象。</li><li>对于新生代，现代虚拟机使用这种算法：<br>  过程：eden执行复制算法，eden区满后会gc,还存活的对象复制到s1 survivor，当eden又满时，eden和s1 survivor中存活的对象将被复制到s2 survivor。如此循环。<br>  如果对象的复制次数达到16次(默认)，该对象就会被送到老年代中。<br>  但是也不是固定的阈值，如果达到某个年龄发现总大小已经大于survivor的50%,所以要动态调整阈值(否则会导致survivor空间不足)，让这些存活的对象尽快晋升。<br>  TargetSurvivorRatio=60 ,值为一个百分比，当对象占据survivor60时则调整阈值。<br>  UseConcMarkSweepGC,老年代使用cms算法。<br>  UseParNewGC,新生代使用UseParNewGC算法。</li><li>老年代：存放了经过一次或多次GC还存活的对象<br>  一般采用Mark-Sweep或者Mark-Compact算法<br>  有多重垃圾回收器可以选择，每种垃圾回收器可以看做一种GC算法的具体实现。根据具体需求选择合适的垃圾回收器。</li><li>永久代：<br>  并不属于堆，但GC也会涉及这个地方。<br>  存放了每个Class的结构信息，包括常量池，字段描述，方法描述。与垃圾回收器要收集的java对象关系不大。</li></ul><h5 id="tops-引用类型"><a href="#tops-引用类型" class="headerlink" title="tops:引用类型"></a>tops:引用类型</h5><p>Hostpot将引用分为四种：</p><ul><li>strong：strong为new 出来的</li><li>soft:内存不够时一定会被GC,长期不被引用也会被GC。</li><li>weak:一定会被GC,当被标记为dead时，会在ReferenceQueue中通知。</li><li>phantom:本来就没引用，当从堆中释放是会通知。</li></ul><h5 id="GC的时机"><a href="#GC的时机" class="headerlink" title="GC的时机"></a>GC的时机</h5><ol><li>Scavenge GC:<br>触发时机：新对象生成，Eden满了。<br>理论上Eden区大多数对象会在Scavenge GC回收，复制算法效率高，Scavenge GC时间短。</li><li>Full GC：<br>对整个jvm整理，包括Young,Old 和 Perm<br>触发时机：1 Old满了，2 Perm 3.主动system.gc()。<br>效率很低，尽量减少Full GC。<h3 id="3-垃圾回收器的实现和选择"><a href="#3-垃圾回收器的实现和选择" class="headerlink" title="3.垃圾回收器的实现和选择"></a>3.垃圾回收器的实现和选择</h3><h4 id="3-1-什么是垃圾回收器"><a href="#3-1-什么是垃圾回收器" class="headerlink" title="3.1 什么是垃圾回收器"></a>3.1 什么是垃圾回收器</h4></li></ol><ul><li>分代模型：GC的愿景</li><li>垃圾回收器：GC的具体实现</li><li>hotspot提供多种垃圾回收器，我们要根据具体应用的需要采用不同的回收器。</li><li>没有万能的垃圾回收器，每一种垃圾回收器都有自己使用的场景。</li></ul><h4 id="3-2-垃圾回收器的并行和并发"><a href="#3-2-垃圾回收器的并行和并发" class="headerlink" title="3.2 垃圾回收器的并行和并发"></a>3.2 垃圾回收器的并行和并发</h4><ul><li>并行：指多个收集器的线程同时工作，但是用户线程处于等待状态。</li><li>并发：指收集器在工作的同时，可以允许用户线程工作。</li><li>并发并不代表解决的gc停顿的问题，该停顿的步骤还是要停顿，比如标记垃圾时。但清除垃圾时可以并发执行。<h4 id="3-3-垃圾回收器"><a href="#3-3-垃圾回收器" class="headerlink" title="3.3 垃圾回收器"></a>3.3 垃圾回收器</h4><h5 id="1-Serial收集器"><a href="#1-Serial收集器" class="headerlink" title="1.Serial收集器"></a>1.Serial收集器</h5></li><li>单线程收集器，收集时会暂停所有的工作线程，使用复制收集算法，虚拟机运行在clent模式下默认新生代收集器。</li><li>在老年代采用标记整理算法。</li><li>可以添加jvm参数UseSerialGC配合PretenureSizeThreshold参数改变阈值，使得超过某大小的对象直接在老年代创建。<h5 id="2-Serial-old收集器"><a href="#2-Serial-old收集器" class="headerlink" title="2.Serial old收集器"></a>2.Serial old收集器</h5></li><li>单线程，使用标记整理算法，老年代收集器。<h5 id="3-parnew收集器"><a href="#3-parnew收集器" class="headerlink" title="3.parnew收集器"></a>3.parnew收集器</h5></li><li>Serial的多线程版本，除了多个收集线程外，其余行为包括算法，stw，对象分配规则。回收策略等都与Serial收集器一样。单cpu核心场景下，此收集器不会比Serial更好。<h5 id="4-parallel-scavenge收集器"><a href="#4-parallel-scavenge收集器" class="headerlink" title="4.parallel scavenge收集器"></a>4.parallel scavenge收集器</h5></li><li>是一个多线程收集器，复制算法。但他是以吞吐量最大（gc时间占总运行时间最小）为目标的收集器。<br>Parallel Scavenge（-XX:+UseParallelGC）框架下，默认是在要触发full GC前先执行一次young GC，并且两次GC之间能让应用程序稍微运行一小下，以期降低full GC的暂停时间（因为young GC会尽量清理了young gen的死对象，减少了full GC的工作量）。控制这个行为的VM参数是-XX:+ScavengeBeforeFullGC。这是HotSpot VM里的奇葩。<h5 id="5-parallel-Old"><a href="#5-parallel-Old" class="headerlink" title="5.parallel Old"></a>5.parallel Old</h5></li><li>老年代版本吞吐量收集器，多线程，标记整理算法。<br>MaxTenuringThreshold=5 进入到老年代的最大存活年龄</li></ul><p>+PrintTenuringDistribution </p><h5 id="6-cms"><a href="#6-cms" class="headerlink" title="6.cms"></a>6.cms</h5><ul><li>标记清除算法 Concurrent Mark Sweep</li><li>cms是一种以最短停顿时间为目标的收集器，使用cms并不能达到gc效率最高，但他能尽可能的降低gc时服务的停顿时间。</li></ul><ol><li>步骤：</li></ol><ul><li>初始标记：标记gcroots关联的引用，快速，暂停用户线程。</li><li>并发标记：gcroots关联的引用往下接着标记，不影响用户线程。</li><li>并发预先清理：</li><li>并发可能失败预清理：</li><li>重新标记：修正并发标记时变动的引用，较快速，暂停用户线程。</li><li>并发清除：清除垃圾，不影响用户线程。</li><li>并发重置：线程重置</li></ul><ol start="2"><li><p>缺点：</p></li><li><p>依赖cpu资源，处理时间短，但处理次数多。</p></li><li><p>无法处理浮动垃圾，有时虚拟机会使用备案，使用Serial Old收集器来重新进行老年代的垃圾回收。</p></li><li><p>空间碎片问题，</p></li><li><p>空间分配担保：<br>在minor gc之前，虚拟机会检查老年代最大可用连续空间是否大于新生代所有对象总空间。当条件成立，在minorgc之后大量对象如果还会存活，则需要老年代进行<strong>空间分配担保</strong>，把survivor无法容纳的对象直接进入老年代。如果老年代判断剩余空间不足(根据每一次回收晋升到老年代对象容量的平局值作为经验)，则进行full gc。</p><h3 id="4-内存泄漏及原因"><a href="#4-内存泄漏及原因" class="headerlink" title="4. 内存泄漏及原因"></a>4. 内存泄漏及原因</h3></li><li><p>对象定义在错误的范围</p></li><li><p>异常处理不当</p></li><li><p>集合数据管理不当</p><h3 id="5-安全点理论"><a href="#5-安全点理论" class="headerlink" title="5. 安全点理论"></a>5. 安全点理论</h3></li><li><p>枚举根节点：知道所有的根节点<br>hotspot使用一组成为OopMap的数据结构来达到这个目的。</p></li><li><p>安全点：</p></li></ol><ul><li>hotspot并没有为每条指令都生成OopMap，而只是在特定位置记录了这些信息，这些位置称为安全点，即程序执行时并非在所有地方都能停下来gc,而是在安全点才能gc.</li><li>安全点的选定不能太少也不能太多，选定安全点的标准是：“是否具有让程序长时间执行的特征”，例如方法调用，循环跳转，异常跳转。</li><li>对于safepoint,另一个需要考虑的是如何在gc时，让所有的线程都跑跑到最近的安全点停下来。<br>  抢占式中断：gc时先中断，若有线程没在安全点，则恢复线程跑到安全点上。(此方式已被淘汰)<br>  主动式中断：如果要gc,虚拟机设置一个标志，各个线程轮询这个标志，发现标志为真时就中断挂起。轮询的地方和安全点是重合的，另外在加上创建对象需要分配内存的地方。</li></ul><ol start="3"><li>安全区域：</li></ol><ul><li>安全点也有解决不了的情况，当线程休眠，没有给线程分配cpu时间，线程无法响应jvm中断请求，jvm也不太可能等待休眠结束。此时需要安全区域解决问题。</li><li>线程执行到安全区域，首先标识自己进入了安全区域，jvm在gc时不用管在安全区域的线程。当线程要离开安全区域是，要检查jvm是否完成了根节点枚举或整个gc,如果完成则继续执行，否则等待gc完成。</li></ul><h3 id="6-G1垃圾回收器"><a href="#6-G1垃圾回收器" class="headerlink" title="6. G1垃圾回收器"></a>6. G1垃圾回收器</h3><p>G1垃圾回收器是一种兼顾吞吐量和响应时间的垃圾回收器<br>G1回收器的堆结构和传统的堆结构有很大不同，传统堆结构各区域是大块分开，G1回收器堆内存的物理结构是无序的，堆空间eden,survivor,old区域是交织在一起的，并且区域的分类是会变化的。</p><h4 id="6-1-G1收集器的内存结构"><a href="#6-1-G1收集器的内存结构" class="headerlink" title="6.1 G1收集器的内存结构"></a>6.1 G1收集器的内存结构</h4><ol><li>将堆划分为大小相等的区域(regions),每个regions都有一个分代的角色。</li><li>对每个角色的数量并没有强制限定，也就是说对每种分代内存的总大小，可以动态变化。</li><li>G1可以高效执行回收，优先执行那些大量对象可回收的区域。</li><li>使用个停顿可预测模型，根据用户设定的停顿时间,g1会选择哪些region要清除，一次清除多少个。</li><li>g1从多个region中回收，放入一个regin中(复制算法)。<br>因为会根据用户设定的停顿时长gc，每次只收集少数的region，做到了间隔时间少，且使用copy算法，内存碎片少。</li></ol><h4 id="6-2-几个概念"><a href="#6-2-几个概念" class="headerlink" title="6.2 几个概念"></a>6.2 几个概念</h4><ol><li>分区：将整个堆分为大小相同的分区</li></ol><ul><li>原有的eden,survivor,old属于不同的块</li><li>eden,survivor,old只是一种逻辑概念。</li><li>优先回收垃圾最多区域(region)</li></ul><ol start="2"><li>收集集合(cset)：一组可被回收的分区的集合</li></ol><ul><li>存活的数据会被移动到另一个空闲分区</li><li>cset中的分区可以来自eden,survivor,old。</li></ul><ol start="3"><li>已记忆集合(rset):rset记录了其他region中对象引用本region中对象的关系。</li></ol><ul><li>gc时不必扫描整个堆，而是扫描rset即可。即为减少扫描</li><li>因为eden区gc时要全部扫描，所以只需记录老年代到新生代的引用即可。</li></ul><p>rset的两个作用<br>RSet究竟是怎么辅助GC的呢？在做YGC的时候，只需要选定young generation region的RSet作为根集，这些RSet记录了old-&gt;young的跨代引用，避免了扫描整个old generation。 而mixed gc的时候，old generation中记录了old-&gt;old的RSet，young-&gt;old的引用由扫描全部young generation region得到，这样也不用扫描全部old generation region。所以RSet的引入大大减少了GC的工作量。</p><p>标记出RootRegion指向O区的region，标记这些region是为了降低并发标记的扫描范围，因为并发标记需要扫描GCROOT引用或间接的所有对象，而这些对象一定是在RootRegion出发指向的Region中的。MIXGC中Y区本来就要全扫，所以这里再按照O区过滤下，这样就缩小了扫描范围。该阶段的操作为遍历O区region查询Rset是否有来自RootRegion的，（RootRegion是初始标记得到的）。</p><ol start="4"><li>STAB:</li></ol><ul><li>在并发标记阶段对快照标记</li><li>stab是g1 gc在并发标记阶段使用的增量式的标记算法。</li><li>并发标记时并发多线程的，但并发线程在同一时刻只扫描一个区。</li></ul><p><strong>拓展</strong><br><strong>card page</strong>：<br>通常将堆空间划分为一系列2次幂大小的卡页.<br><strong>card table</strong>:<br>一card张表，将region划分为小区域在这张表上。<br><strong>points-out</strong>：<br>指明我引用谁<br><strong>points-into</strong>：<br>谁引用我</p><h4 id="6-3-gc模式"><a href="#6-3-gc模式" class="headerlink" title="6.3 gc模式"></a>6.3 gc模式</h4><ol><li>YongGC：选定所有年轻代的region，通过控制年轻代region，来控制gc的时间</li></ol><ul><li>触发时机：eden区满了时</li><li>gc步骤：<ol><li>根扫描：静态和栈引用</li><li>更新rs:处理dirty card队列更新rs</li><li>处理rs:检测从年轻代指向老年代的对象</li><li>对象拷贝：拷贝存活对象</li><li>处理引用队列：软弱虚引用处理</li></ol></li></ul><ol start="2"><li>MixedGC:选定所有年轻代regin,外加根据global concurrent marking 统计出的若干高收益的老年代region，在用户指定的stw时间内尽可能的选择收益高的region。</li></ol><ul><li>触发时机：由一些参数控制，另外也控制着那些老年代regin会被选入cset</li></ul><ol start="3"><li>global concurrent marking：全局并发标记<br>执行过程类似于cms,但主要为MixedGC提供标记服务，并不是gc中的必须环节。<br>步骤：</li></ol><ul><li>初始标记：标记了从GCroot开始可以直接可达的对象。(在YongGC中进行，伴随着YongGC)</li><li>并发标记：GCroot对heap中的对象进行标记，标记线程与用户线程并发进行，收集region的存活对象信息</li><li>重新标记：标记在并发阶段变化的对象</li><li>清理：清空没有存活对象的region,将region加入到free list.</li></ul><ol start="4"><li>三色标记法：STAB中的算法</li></ol><p><strong>对象分为三种类型</strong></p><ul><li>黑色：根对象，或者该对象与他的子对象都被扫描过了(对象被标记了，且他的所有fieldd都被标记完了)</li><li>灰色：对象本身被扫描，但还没扫描完该对象中的子对象(field还没有被标记)</li><li>白色：未被扫描对象，扫描完成所有对象后最终为白色的为不可达对象，即垃圾对象。(对象没有被标记到)</li></ul><p><strong>satb步骤</strong></p><ol><li>开始标记时生成快照图</li><li>在并发标记阶段所有被改变的对象入队（若在此阶段改变引用，将原有引用指向的对象变为非白），主要是防止回收非垃圾对象。<br>在并发标记阶段可能产生漏标记，所以对于gray灰对象一处的引用标记为灰色，对于black引用新增加的引用标记为黑色。</li><li>可能存在浮动垃圾，将在下次护手</li></ol><p><strong>漏标记情况举例</strong><br>漏标只会发生在白色对象中，需满足以下两个条件。</p><ul><li>并发标记时，应用线程给一个黑色对象的引用赋值了白色对象</li><li>并发标记时，应用线程删除所有灰色对象到该白色对象的引用</li></ul><p>扫描全部的老年代对象，是因为ygc的时候，老年代的对象全都被看做gcroots了，需要在年轻代找被老年代任何对象引用的对象，这些对象都不应被清理。所以必须扫描所有老年代，进行你说的链式查找的过程。而如果有了rset就知道有些old区region中根本没有对年轻代对象的引用，直接就可以跳过这个region了。</p><p>[参考]<br><a href="www.bilibili.com/video/av75247289">深入理解JVM 虚拟机</a><br><a href="https://www.bilibili.com/video/av68551933">垃圾收集器|g1收集器</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jvm内存模型</title>
      <link href="/2019/12/28/jvm-nei-cun-mo-xing/"/>
      <url>/2019/12/28/jvm-nei-cun-mo-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="jvm内存模型"><a href="#jvm内存模型" class="headerlink" title="jvm内存模型"></a>jvm内存模型</h1><h2 id="1-虚拟机栈"><a href="#1-虚拟机栈" class="headerlink" title="1.虚拟机栈"></a>1.虚拟机栈</h2><h2 id="2-程序计数器"><a href="#2-程序计数器" class="headerlink" title="2.程序计数器"></a>2.程序计数器</h2><p>程序计数器和虚拟机栈是线程私有的</p><h2 id="3-本地方法栈"><a href="#3-本地方法栈" class="headerlink" title="3.本地方法栈"></a>3.本地方法栈</h2><p>主要用于处理本地方法栈</p><h2 id="4-堆"><a href="#4-堆" class="headerlink" title="4.堆"></a>4.堆</h2><p>对象的存储空间，jvm管理的空间最大的一块内存。</p><h3 id="4-1-堆空间划分"><a href="#4-1-堆空间划分" class="headerlink" title="4.1 堆空间划分"></a>4.1 堆空间划分</h3><pre><code>堆空间可以划分为新生代和老年代，与之相对的有Eden空间，From Survivor空间和ToSurvivor空间。new 对象的步骤1. 在堆内存中创建对象实例2. 为成员变量赋初始值3. 将对象的引用返回堆内存分配内存两种算法1. 指针碰撞：堆中内存空间由一个指针分割，一侧为使用，一侧为空闲。    对应的gc算法 ：serial parnew 2. 空闲列表：堆中内存已使用和未使用空间交织在一起，有一列表记录空间使用状况。new 对象时会在空闲列表里分配内存，同时修改列表。对象的结构1. 对象头2. 实例数据3. 对齐填充访问对象的方式1. 使用句柄的方式2. 使用直接指针的方式 </code></pre><h2 id="5-方法区（元数据区）"><a href="#5-方法区（元数据区）" class="headerlink" title="5.方法区（元数据区）"></a>5.方法区（元数据区）</h2><p>命令行工具：jmap jstat jcmd<br>图形化工具：jmc jhat jv </p><h2 id="6-运行时常量池"><a href="#6-运行时常量池" class="headerlink" title="6.运行时常量池"></a>6.运行时常量池</h2><p>方法区的一部分内容</p><p>但</p><h2 id="7-直接内存"><a href="#7-直接内存" class="headerlink" title="7.直接内存"></a>7.直接内存</h2>]]></content>
      
      
      
        <tags>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jvm字节码</title>
      <link href="/2019/12/27/jvm-zi-jie-ma/"/>
      <url>/2019/12/27/jvm-zi-jie-ma/</url>
      
        <content type="html"><![CDATA[<h1 id="jvm字节码"><a href="#jvm字节码" class="headerlink" title="jvm字节码"></a>jvm字节码</h1><h2 id="jvm字节码一般结构"><a href="#jvm字节码一般结构" class="headerlink" title="jvm字节码一般结构"></a>jvm字节码一般结构</h2><p>使用javap -verbose 命令分析一个类，得到的是一个类字节码的魔数，版本号，常量池，类信息，类的构造方法，类的方法信息，类变量与成员变量等信息。当然也可以<strong>配合jclasslib这个idea插件来学习字节码内容</strong></p><ol><li>魔数：.class字节码的前四个字节即为魔数。魔数为固定值：0xCAFEBABE</li><li>版本号：魔数之后的四个字节即为版本号，前两个字节为 minor version 次版本号，后两个字节为  major version 主版本号。</li><li>常量池：主版本号之后的即为常量池入口,常量池是可变的，不确定的。可以将常量池看做类文件的资源仓库。常量池中主要存储两类常量：字面常量和符号引用。字面常量如文本字符串。符号引用：类和接口的全局限定名，字段的名称和描述符，方法的名称和描述符。<br>常量池由常量池数量和常量池表构成。<ul><li>常量池数量<br>常量池数量在主版本号之后，占据两个字节。</li><li>常量池表<br>在常量池数量之后。常量池数组中不同元素的类型结构是不同的，因此长度不同。但是每一种元素的第一个数据都是一个u1类型，该位置是标志位，占用一个字节，jvm在解析常量池时，会根据u1类型来获取元素的具体类型。</li></ul></li><li>类信息： <ul><li>类的访问修饰符(u2)</li><li>类的名字(常量池索引) </li><li>父类名字(常量池索引) </li><li>接口个数 </li><li>接口表</li></ul></li><li>成员变量：<ul><li>成员变量数(u2) </li><li>成员变量表(包含类变量和和实例变量)<ul><li>权限描述符 </li><li>名字索引 </li><li>类型描述符索引 </li><li>属性数 </li><li>属性信息 </li></ul></li></ul></li><li>方法<ul><li>方法个数(u2) </li><li>方法表<ul><li>权限描述符(u2) </li><li>名字索引(u2) </li><li>类型描述符索引(u2) </li><li>属性数(u2) </li><li>属性信息<br><strong>属性信息结构</strong><ul><li>属性类型索引(u2)</li><li>属性信息长度(u4)，本方法属性之后的信息长度</li><li>最大栈深(u2)</li><li>最大局部变量数(u2)，包含方法的参数和this。</li><li>操作码表长度(u4)</li><li>操作码表(u2,java虚拟机指令集)</li><li>异常表长度</li><li>异常表<ul><li>作用的开始行</li><li>作用的结束行</li><li>异常出现跳转行</li><li>异常名字索引</li></ul></li><li>属性表长度(u2)</li><li>属性表：属性表是code的属性，如linenumbertype，存储源代码和字节码行号对应关系。localvariabletable，存储方法中变量的类型，名字和描述。<ul><li>属性名索引(u2) </li><li>属性长度(u4)</li><li>属性数(u2)：表示有几个属性</li><li><em>linenumbertype属性内容结构：</em>*<br>{<br>   对应关系：u4类型，有多个，(u2-u2)表示字节码中行号和源代码行号的对应关系<br>}</li><li><em>localvariabletable属性内容结构：</em>*<br>{<br>   局部变量在字节码中开始作用的位置：u2类型<br>   局部变量在字节码中作用的长度：u2类型<br>   局部变量名称索引：u2类型<br>   局部变量描述符索引：u2类型<br>   局部变量localvariabletable中的索引<br>}</li></ul></li></ul></li></ul></li></ul></li><li>属性<ul><li>属性数量(u2) </li><li>属性表<ul><li>属性名索引(u2)</li><li>属性值<br>  属性值长度(u4)<br>  属性值索引(u2)</li></ul></li></ul></li></ol><p>jvm class文件是线性的，但可以尝试使用json理解字节码的结构，以下为json结构。<br><strong>开头*表示线性排序表示</strong><br><strong>属性带” x”表示可以有多个</strong></p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>    <span class="token property">"*Magic Number"</span><span class="token operator">:</span><span class="token string">"0xCAFEBABE"</span><span class="token punctuation">,</span>    <span class="token property">"Version"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"*minor version"</span><span class="token operator">:</span><span class="token string">"u2"</span><span class="token punctuation">,</span>        <span class="token property">"*major version"</span><span class="token operator">:</span><span class="token string">"u2"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"Constant Pool"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"*Constant_count"</span><span class="token operator">:</span><span class="token string">"u2"</span><span class="token punctuation">,</span>        <span class="token property">"*Constant_info"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token string">"类型众多，参照表格，基本结构为u1+n个字节。"</span>                    <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"Class info"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"*Access Flags"</span><span class="token operator">:</span><span class="token string">"u2，类的访问修饰符"</span><span class="token punctuation">,</span>        <span class="token property">"*This Class Name"</span><span class="token operator">:</span><span class="token string">"u2类名"</span><span class="token punctuation">,</span>        <span class="token property">"*Super Class Name"</span><span class="token operator">:</span><span class="token string">"u2 父类名字"</span><span class="token punctuation">,</span>        <span class="token property">"*Interfaces_count"</span><span class="token operator">:</span><span class="token string">"接口数"</span><span class="token punctuation">,</span>        <span class="token property">"*Interfaces_name"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"接口名有多个"</span><span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"Fields"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"*Fields_count"</span><span class="token operator">:</span><span class="token string">"u2,成员变量数"</span><span class="token punctuation">,</span>        <span class="token property">"Fields_info *x"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>               <span class="token property">"*access_flags"</span><span class="token operator">:</span><span class="token string">"u2,权限修饰符"</span><span class="token punctuation">,</span>               <span class="token property">"*name_index"</span><span class="token operator">:</span><span class="token string">"u2,变量名称索引"</span> <span class="token punctuation">,</span>               <span class="token property">"*descriptor_index"</span><span class="token operator">:</span><span class="token string">"u2,类型描述符索引"</span><span class="token punctuation">,</span>               <span class="token property">"*attribute_count"</span><span class="token operator">:</span><span class="token string">"u2,属性数目"</span><span class="token punctuation">,</span>               <span class="token property">"attribute_info *x"</span><span class="token operator">:</span><span class="token punctuation">[</span>                   <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>               <span class="token punctuation">]</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"Methods"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"*methods_count"</span><span class="token operator">:</span><span class="token string">"u2，方法数"</span><span class="token punctuation">,</span>        <span class="token property">"methods_info *x"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>                <span class="token property">"*access_flags"</span><span class="token operator">:</span><span class="token string">"u2,访问修饰符"</span><span class="token punctuation">,</span>                <span class="token property">"*name_index"</span><span class="token operator">:</span><span class="token string">"u2,方法名称索引"</span><span class="token punctuation">,</span>                <span class="token property">"*descriptor_index"</span><span class="token operator">:</span><span class="token string">"u2,类型描述符索引"</span><span class="token punctuation">,</span>                <span class="token property">"*attribute_count"</span><span class="token operator">:</span><span class="token string">"u2,属性数目"</span><span class="token punctuation">,</span>                <span class="token property">"attribute_info *x"</span><span class="token operator">:</span><span class="token punctuation">[</span>                    <span class="token punctuation">&#123;</span>                        <span class="token property">"*attribute_name_index"</span><span class="token operator">:</span><span class="token string">"u2,属性名索引"</span><span class="token punctuation">,</span>                        <span class="token property">"*attribute_length"</span><span class="token operator">:</span><span class="token string">"u4,属性长度,指之后数据长度"</span><span class="token punctuation">,</span>                        <span class="token property">"*max_stack"</span><span class="token operator">:</span><span class="token string">"u2,最大栈深"</span><span class="token punctuation">,</span>                        <span class="token property">"*max_locals"</span><span class="token operator">:</span><span class="token string">"u2,最大局部变量数"</span><span class="token punctuation">,</span>                        <span class="token property">"*code_length"</span><span class="token operator">:</span><span class="token string">"u4,操作码长度"</span><span class="token punctuation">,</span>                        <span class="token property">"code"</span><span class="token operator">:</span><span class="token punctuation">[</span>                            <span class="token string">"*code1"</span><span class="token punctuation">,</span>                            <span class="token string">"*code2"</span><span class="token punctuation">,</span>                            <span class="token string">"*...code为u1组成"</span>                        <span class="token punctuation">]</span><span class="token punctuation">,</span>                        <span class="token property">"*exception_table_length"</span><span class="token operator">:</span><span class="token string">"u2,异常表长度"</span><span class="token punctuation">,</span>                        <span class="token property">"exception_table"</span><span class="token operator">:</span><span class="token punctuation">[</span>                            <span class="token punctuation">&#123;</span>                            <span class="token property">"*Start_Pc"</span><span class="token operator">:</span><span class="token string">"u4,异常开始作用行"</span><span class="token punctuation">,</span>                            <span class="token property">"*Eed_Pc"</span><span class="token operator">:</span><span class="token string">"u4,异常结束作用行"</span><span class="token punctuation">,</span>                            <span class="token property">"*Handler_Pc"</span><span class="token operator">:</span><span class="token string">"u4,异常发生跳转行"</span><span class="token punctuation">,</span>                            <span class="token property">"*Exception_name_index"</span><span class="token operator">:</span><span class="token string">"u2,异常名索引"</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">]</span><span class="token punctuation">,</span>                        <span class="token property">"*attribute_count"</span><span class="token operator">:</span><span class="token string">"u2,属性数目"</span><span class="token punctuation">,</span>                        <span class="token property">"attribute_info *x"</span><span class="token operator">:</span><span class="token punctuation">[</span>                            <span class="token punctuation">&#123;</span>                                <span class="token property">"*attribute_name_index"</span><span class="token operator">:</span><span class="token string">"u2,属性名索引"</span><span class="token punctuation">,</span>                                <span class="token property">"*attribute_length"</span><span class="token operator">:</span><span class="token string">"u4,属性长度,指之后数据长度"</span><span class="token punctuation">,</span>                                <span class="token property">"*attribute_count"</span><span class="token operator">:</span><span class="token string">"表示有几个对应关系"</span><span class="token punctuation">,</span>                                <span class="token property">"attribute_info"</span><span class="token operator">:</span><span class="token punctuation">[</span>                                    <span class="token punctuation">&#123;</span>                                        <span class="token property">"*linenumbertype"</span><span class="token operator">:</span><span class="token string">"字节码和源码行号对照表，u4类型，有多个，(u2-u2)表示字节码中行号和源代码行号的对应关系"</span>                                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>                                    <span class="token punctuation">&#123;</span>                                        <span class="token property">"localvariabletable"</span><span class="token operator">:</span><span class="token string">"局部变量表"</span><span class="token punctuation">,</span>                                        <span class="token property">"*局部变量在字节码中开始作用的位置"</span><span class="token operator">:</span><span class="token string">"u2类型"</span><span class="token punctuation">,</span>                                        <span class="token property">"*局部变量在字节码中作用的长度"</span><span class="token operator">:</span><span class="token string">"u2类型"</span><span class="token punctuation">,</span>                                        <span class="token property">"*局部变量名称索引"</span><span class="token operator">:</span><span class="token string">"u2类型"</span><span class="token punctuation">,</span>                                        <span class="token property">"*局部变量描述符索引"</span><span class="token operator">:</span><span class="token string">"u2类型"</span><span class="token punctuation">,</span>                                        <span class="token property">"*局部变量localvariabletable中的索引"</span><span class="token operator">:</span><span class="token string">"u2"</span>                                    <span class="token punctuation">&#125;</span>                                <span class="token punctuation">]</span>                            <span class="token punctuation">&#125;</span>                        <span class="token punctuation">]</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">]</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"Attributes"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>        <span class="token property">"*attribute_count"</span><span class="token operator">:</span><span class="token string">"u2,属性数目"</span><span class="token punctuation">,</span>        <span class="token property">"attribute_table"</span><span class="token operator">:</span><span class="token punctuation">[</span>            <span class="token punctuation">&#123;</span>            <span class="token property">"*attribute_name_index"</span><span class="token operator">:</span><span class="token string">"u2,属性名索引"</span><span class="token punctuation">,</span>            <span class="token property">"*attribute_length"</span><span class="token operator">:</span><span class="token string">"属性值长度"</span><span class="token punctuation">,</span>            <span class="token property">"*attribute_index"</span><span class="token operator">:</span><span class="token string">"属性值索引"</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">]</span>    <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="synchronized-关键字"><a href="#synchronized-关键字" class="headerlink" title="synchronized 关键字"></a>synchronized 关键字</h2><ul><li><p>synchronized方法 在方法上加标识符</p></li><li><p>synchronized静态方法 在方法上加标识符</p></li><li><p>synchronized代码块 编译出不同两个指令集，在中间的表示为同步的代码块。</p><h2 id="静态变量和一般变量"><a href="#静态变量和一般变量" class="headerlink" title="静态变量和一般变量"></a>静态变量和一般变量</h2></li><li><p>静态变量和静态代码块的指令集都在clinit()方法中执行</p></li><li><p>实例变量的值和代码块都在init() 方法中执行</p><h2 id="字节码中的异常"><a href="#字节码中的异常" class="headerlink" title="字节码中的异常"></a>字节码中的异常</h2></li><li><p>jdk统一采用异常表的方式处理异常</p></li><li><p>当异常处理存在finally语句块时，现代化的jvm采取的方式是将finally语句块的字节码拼接到每一个catch语句块后面，有多超catch语句块，就拼接多少次。</p></li><li><p>方法后throws的异常会在method_info下生成一个异常数组</p><h2 id="栈帧和操作数栈，直接引用和间接引用"><a href="#栈帧和操作数栈，直接引用和间接引用" class="headerlink" title="栈帧和操作数栈，直接引用和间接引用"></a>栈帧和操作数栈，直接引用和间接引用</h2></li><li><p>栈帧是一种帮助虚拟机执行方法调用与方法执行的数据结构。</p></li><li><p>栈帧本身是一种数据结构，封装了方法的局部变量表，动态链接信息，方法的返回值和操作数栈等信息。</p></li><li><p>有些符号引用在类加载阶段或第一次使用时就转换为直接引用，另一些符号引用则是在每次运行期转为直接引用。这种转换叫做动态链接，在java中体现为多态性。</p></li><li><p>栈帧结构<br>{<br>  局部变量表<br>  操作数栈<br>  动态链接<br>  返回地址<br>  帧数据区<br>}</p><h2 id="重写和重载的不同"><a href="#重写和重载的不同" class="headerlink" title="重写和重载的不同"></a>重写和重载的不同</h2></li><li><p>分派：确定执行哪个方法的过程</p></li><li><p>静态类型：引用类型，不会被改变、在编译器可知。</p></li><li><p>动态类型：实例对象类型，会变化、在运行期才可知</p></li><li><p>静态分派：调用重载的方法。调用同一个类的不同的方法，编译后会指向不同的符号引用(方法的参数不同，确定不同方法)，这是显而易见的，从代码就可以看出方法调用的不同。</p></li><li><p>动态分派：调用重写的方法，若有两个父类引用指向不同的两个子类对象，编译后指向相同的符号引用，具体执行哪个实例方法是由jvm决定的。</p></li><li><p>invokevirtual：只要是调用public方法，编译后都是invokevirtual指令操作，</p><ul><li>invokevirtual指令执行的第一步 = 确定接受者的实际类型</li><li>invokevirtual指令执行的第二步 = 将常量池中类方法符号引用解析到不同的直接引用上</li></ul></li><li><p><strong>调用重载的方法也是invokevirtual指令，这是因为重载的方法也有可能会被重写，所有的public方法都采用invokevirtual指令，也是为了更好的体现多态，多态在jvm层面是由invokevirtual指令实现的</strong></p></li><li><p>动态绑定具体的调用过程为：</p><ol><li>首先会找到被调用方法所属类的全限定名</li><li>在此类的方法表中寻找被调用方法，如果找到，会将方法表中此方法的索引项记录到常量池中（这个过程叫常量池解析），如果没有，编译失败。</li><li>根据具体实例化的对象找到方法区中此对象的方法表，再找到方法表中的被调用方法，最后通过直接地址找到字节码所在的内存空间。<h2 id="栈指令集和寄存器指令集"><a href="#栈指令集和寄存器指令集" class="headerlink" title="栈指令集和寄存器指令集"></a>栈指令集和寄存器指令集</h2></li></ol></li><li><p>jvm是基于栈的指令集，基于栈的指令集主要的操作有入栈和出栈两种</p></li><li><p>基于栈的指令集可以在不同平台之间移植，基于寄存器的指令集是与硬件相关的。</p></li><li><p>基于栈的指令集的缺点在于完成相同操作，指令的数量多运行速度慢。基于寄存器的指令集速度则要快得多。</p><h2 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h2></li><li><p>在java基础中了解到了动态代理这种模式，在jvm层面，动态代理的意思是代理类的字节码是在运行期由jvm生成。</p></li><li><p>生成的代理类里面，最终还是会调用自己写的InvocationHandler实现类里面的invoke方法，</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>类加载和类加载器</title>
      <link href="/2019/12/03/lei-jia-zai/"/>
      <url>/2019/12/03/lei-jia-zai/</url>
      
        <content type="html"><![CDATA[<h1 id="类加载和类加载器"><a href="#类加载和类加载器" class="headerlink" title="类加载和类加载器"></a>类加载和类加载器</h1><h2 id="1-类加载过程"><a href="#1-类加载过程" class="headerlink" title="1. 类加载过程"></a>1. 类加载过程</h2><h3 id="1-加载"><a href="#1-加载" class="headerlink" title="1.加载"></a>1.加载</h3><h4 id="1-1-何为加载"><a href="#1-1-何为加载" class="headerlink" title="1.1 何为加载"></a>1.1 何为加载</h4><p>加载类的二进制数据<br>类的加载指的是将类的.class文件中的二进制数据读到内存中，将其放在运行时数据区的方法区内，然后在内存中创建一个Class对象，此Class对象用来封装类在方法区内的数据结构。<br>（jvm规范并未说明Class对象位于哪里，HosSpot将其放在方法区中）</p><h4 id="1-2-加载的方式"><a href="#1-2-加载的方式" class="headerlink" title="1.2 加载的方式"></a>1.2 加载的方式</h4><ol><li>从本地磁盘中加载class二进制文件</li><li>通过网络加载class二进制文件</li><li>从zip,jar等归档文件中加载</li><li>从专有数据库中提取class文件</li><li>源代码动态编译为class文件<h4 id="1-3-加载的注意事项"><a href="#1-3-加载的注意事项" class="headerlink" title="1.3 加载的注意事项"></a>1.3 加载的注意事项</h4></li><li>jvm允许类加载器在预料某个类将要被使用时就预先加载他，如果预先加载过程中遇到了class文件缺失或存在错误，类加载器必须在程序首次主动使用该类时才报告错误。</li><li>如果这个类一直没有被程序使用，那么类加载器就不会报告错误。<h3 id="2-连接"><a href="#2-连接" class="headerlink" title="2.连接"></a>2.连接</h3><h4 id="1-验证：确保类加载的正确性"><a href="#1-验证：确保类加载的正确性" class="headerlink" title="1. 验证：确保类加载的正确性"></a>1. 验证：确保类加载的正确性</h4></li></ol><ul><li>类文件的结构检查</li><li>语义检查</li><li>字节码验证</li><li>二进制兼容性验证<h4 id="2-准备：为类的静态变量分配内存（也是分配默认值的过程）"><a href="#2-准备：为类的静态变量分配内存（也是分配默认值的过程）" class="headerlink" title="2. 准备：为类的静态变量分配内存（也是分配默认值的过程）"></a>2. 准备：为类的静态变量分配内存（也是分配默认值的过程）</h4><h4 id="3-解析：将类中的符号引用转为直接引用"><a href="#3-解析：将类中的符号引用转为直接引用" class="headerlink" title="3. 解析：将类中的符号引用转为直接引用"></a>3. 解析：将类中的符号引用转为直接引用</h4><h3 id="3-初始化"><a href="#3-初始化" class="headerlink" title="3.初始化"></a>3.初始化</h3>为类的静态变量赋正确的初始值<h4 id="3-1-初始化时机"><a href="#3-1-初始化时机" class="headerlink" title="3.1 初始化时机"></a>3.1 初始化时机</h4>所有的Java虚拟机实现 必须在每个类或接口 被Java程序<strong>首次主动使用时</strong> 才初始化他们<h5 id="1-主动使用"><a href="#1-主动使用" class="headerlink" title="1 主动使用"></a>1 主动使用</h5>主动使用包含七种情况</li></ul><ol><li>创建类的实例</li><li>访问某个类或接口的静态变量，或对该静态变量赋值。</li><li>调用类的静态方法</li><li>反射 只有classForName  .class 和getClass（）都不会初始化</li><li>初始化一个类的子类（子类初始化父类也会初始化）</li><li>Java虚拟机启动时被标明为启动类的类（如包含main方法）</li><li>jdk1.7开始提供的动态语言支持</li></ol><h5 id="2-被动使用"><a href="#2-被动使用" class="headerlink" title="2.被动使用"></a>2.被动使用</h5><p>不是主动使用的都为被动使用</p><h4 id="3-2初始化步骤"><a href="#3-2初始化步骤" class="headerlink" title="3.2初始化步骤"></a>3.2初始化步骤</h4><ol><li>类没有加载和连接，先进行加载和连接。</li><li>类存在直接父类，并且父类没有初始化，那么先初始化直接父类，</li><li>类中存在初始化语句，那就依次执行初始化语句。 </li></ol><hr><p><strong>初始化代码示例</strong></p><ol><li>子父类<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader01</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//当打印str1时，根据主动使用时才会初始化得，Child.str1 使用的是父类的静态变量，不会初始化子类，子类静态代码块不会执行。</span>        <span class="token comment">//System.out.println(Child.str1);</span>        <span class="token comment">//当打印str1时，根据主动使用时才会初始化得，Child.str2 使用的是子类的静态变量，子类初始化父类也会初始化，子类和父类的静态代码块都会执行。</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Child</span><span class="token punctuation">.</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Papa</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> str1<span class="token operator">=</span><span class="token string">"im Papa"</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Papa 初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Papa</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> str2<span class="token operator">=</span><span class="token string">"im Child"</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Child 初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>常量<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader02</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Papa1</span><span class="token punctuation">.</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Papa1</span><span class="token punctuation">&#123;</span>    <span class="token comment">//常量在 编译阶段 会存入 调用这个常量的方法所在的类的常量池中。</span>    <span class="token comment">//运行时，Papa1.str1 并没有引用到Papa1类，因此Papa1没有初始化。</span>    <span class="token comment">//甚至可以将编译好的Child1的class文件删除，也不会影响程序运行。</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> str1<span class="token operator">=</span><span class="token string">"im Papa"</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Papa 初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>编译期常量和运行期常量<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>UUID<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader03</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Papa2</span><span class="token punctuation">.</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Papa2</span><span class="token punctuation">&#123;</span>    <span class="token comment">//UUID.randomUUID().toString() 运行时才会知道是什么，不是编译器常量。</span>    <span class="token comment">//运行时常量在运行时会使用类的静态常量。</span>    <span class="token comment">//运行时，Papa2.str1 引用到Papa2类，因此Papa2初始化。</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> str1<span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Papa 初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>创建类的实例 new对象<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>UUID<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader04</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//创建类的实例,会首次主动使用类。</span>        <span class="token class-name">Papa3</span> papa<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Papa3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Papa3</span> papa2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Papa3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Papa3</span><span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> str1<span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Papa 初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>接口的初始化<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>UUID<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader05</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//此处删掉编译好的class(不管是Papa5还是Child5)并不会出错</span>        <span class="token comment">//接口在初始化时，不一定要求父接口全部完成初始化</span>        <span class="token comment">//当真正使用父接口时，父接口才会初始化。</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Child5</span><span class="token punctuation">.</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Papa5</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token keyword">final</span> <span class="token class-name">String</span> str1<span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">interface</span> <span class="token class-name">Child5</span> <span class="token keyword">extends</span> <span class="token class-name">Papa5</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token class-name">String</span> str2<span class="token operator">=</span> <span class="token string">"papa5 初始化"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>初始化前准备阶段<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader06</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">//当调用getInstance（静态方法）会进行类的初始化</span>        <span class="token comment">//初始化前准备阶段会为静态变量分配内存，同时赋予默认值。</span>        <span class="token comment">//初始化阶段，会从上到下执行初始化赋值。</span>        <span class="token comment">//new 对象会调用构造方法。</span>        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"con1: "</span><span class="token operator">+</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span>con1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"con2: "</span><span class="token operator">+</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span>con2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> con1<span class="token punctuation">;</span>    <span class="token comment">//public static int con2=0;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> singleton<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> con2<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        con1<span class="token operator">++</span><span class="token punctuation">;</span>        con2<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>con1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>con2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>加载方式<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token comment">/** * classLoader.loadClass 不会初始化类 * Class.forName 会初始化化类 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader08</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ClassLoader</span> classLoader<span class="token operator">=</span><span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> loadClass <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token string">"jvmstu.classloader.Papa8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>loadClass<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"=================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"jvmstu.classloader.Papa8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>aClass<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Papa8</span><span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"papa load init"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-类加载器"><a href="#2-类加载器" class="headerlink" title="2.类加载器"></a>2.类加载器</h2>类加载器有三种<br>在虚拟机提供了3种类加载器，引导（Bootstrap）类加载器、扩展（Extension）类加载器、系统（System）类加载器（也称应用类加载器）<h3 id="1-加载器类型"><a href="#1-加载器类型" class="headerlink" title="1.加载器类型"></a>1.加载器类型</h3><h4 id="1-1-根加载器"><a href="#1-1-根加载器" class="headerlink" title="1.1 根加载器"></a>1.1 根加载器</h4>启动（Bootstrap）类加载器<br>启动类加载器主要加载的是JVM自身需要的类，这个类加载使用C++语言实现的，是虚拟机自身的一部分，它负责将 <JAVA_HOME>/lib路径下的核心类库或-Xbootclasspath参数指定的路径下的jar包加载到内存中，注意必由于虚拟机是按照文件名识别加载jar包的，如rt.jar，如果文件名不被虚拟机识别，即使把jar包丢到lib目录下也是没有作用的(出于安全考虑，Bootstrap启动类加载器只加载包名为java、javax、sun等开头的类)。<h4 id="1-2-扩展（Extension）类加载器"><a href="#1-2-扩展（Extension）类加载器" class="headerlink" title="1.2 扩展（Extension）类加载器"></a>1.2 扩展（Extension）类加载器</h4>扩展类加载器是指Sun公司(已被Oracle收购)实现的sun.misc.Launcher$ExtClassLoader类，由Java语言实现的，是Launcher的静态内部类，它负责加载<JAVA_HOME>/lib/ext目录下或者由系统变量-Djava.ext.dir指定位路径中的类库，开发者可以直接使用标准扩展类加载器。<h4 id="1-3-系统（System）类加载器"><a href="#1-3-系统（System）类加载器" class="headerlink" title="1.3 系统（System）类加载器"></a>1.3 系统（System）类加载器</h4>也称应用程序加载器是指 Sun公司实现的sun.misc.Launcher$AppClassLoader。它负责加载系统类路径java -classpath或-D java.class.path 指定路径下的类库，也就是我们经常用到的classpath路径，开发者可以直接使用系统类加载器，一般情况下该类加载是程序中默认的类加载器，通过ClassLoader#getSystemClassLoader()方法可以获取到该类加载器。 <h3 id="2-加载器工作模式"><a href="#2-加载器工作模式" class="headerlink" title="2.加载器工作模式"></a>2.加载器工作模式</h3></JAVA_HOME></JAVA_HOME></li></ol><p><strong>双亲委派模式</strong><br>双亲委派模式是在Java 1.2后引入的，其工作原理的是，如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给父类的加载器去执行，如果父类加载器还存在其父类加载器，则进一步向上委托，依次递归，请求最终将到达顶层的启动类加载器，如果父类加载器可以完成类加载任务，就成功返回，倘若父类加载器无法完成此加载任务，子加载器才会尝试自己去加载，这就是双亲委派模式。<br><strong>双亲委派模式的好处</strong></p><ol><li>可以避免类的重复加载，当父亲已经加载了该类时，就没有必要子ClassLoader再加载一次。</li><li>其次是考虑到安全因素，java核心api中定义类型不会被随意替换，假设通过网络传递一个名为java.lang.Integer的类，通过双亲委托模式传递到启动类加载器，而启动类加载器在核心Java API发现这个名字的类，发现该类已被加载，并不会重新加载网络传递的过来的java.lang.Integer，而直接返回已加载过的Integer.class，这样便可以防止核心API库被随意篡改。<h3 id="3-自定义加载器"><a href="#3-自定义加载器" class="headerlink" title="3 自定义加载器"></a>3 自定义加载器</h3>用户可以编写自定义加载器，用于个性化的加载。<h4 id="3-1-如何编写一个自定义加载器"><a href="#3-1-如何编写一个自定义加载器" class="headerlink" title="3.1 如何编写一个自定义加载器"></a>3.1 如何编写一个自定义加载器</h4></li><li>继承ClassLoader类</li><li>重写findClass方法和loadClassData方法 <ol><li>findClass 调用 loadClassData 返回class</li><li>loadClassData，加载二进制文件，是自定义的io操作，可以在网络或者各种介质中加载。实际上如何将二进制文件转换为类，是由native方法，也即jvm完成的。</li></ol></li></ol><p><strong>自定义加载器代码示例</strong><br><strong>注意</strong><br>因为类的双亲委托机制，在classpath下的类都会被父加载器加载，因此还是不会调用自定义的加载器加载。<br>将classpath下的ClassLoader01.class移动到自定义的path下，此时父加载器不能加载ClassLoader01，自定义加载器会开始加载。</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">jvmstu<span class="token punctuation">.</span>classloader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span><span class="token comment">/** * 自定义加载器 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassLoader09</span> <span class="token keyword">extends</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> classLoaderName<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> path<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> fileExtension<span class="token operator">=</span><span class="token string">".class"</span><span class="token punctuation">;</span>    <span class="token comment">//构造方法</span>    <span class="token comment">//系统类加载器作为父构造器</span>    <span class="token keyword">public</span> <span class="token class-name">ClassLoader09</span><span class="token punctuation">(</span><span class="token class-name">String</span> classLoaderName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>classLoaderName<span class="token operator">=</span>classLoaderName<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//指定父构造器</span>    <span class="token keyword">public</span> <span class="token class-name">ClassLoader09</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span> parent<span class="token punctuation">,</span><span class="token class-name">String</span> classLoaderName<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>classLoaderName<span class="token operator">=</span>classLoaderName<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPath</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>path <span class="token operator">=</span> path<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"ClassLoader09&#123;"</span> <span class="token operator">+</span>                <span class="token string">"classLoaderName='"</span> <span class="token operator">+</span> classLoaderName <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", fileExtension='"</span> <span class="token operator">+</span> fileExtension <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'&#125;'</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//重写findClass 方法</span>    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> <span class="token function">findClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">byte</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token operator">=</span><span class="token function">loadClassData</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">defineClass</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span>data<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//实现loadClassData 读取二进制文件。</span>    <span class="token keyword">private</span> <span class="token keyword">byte</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">loadClassData</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">byte</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">InputStream</span> inputStream<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ByteArrayOutputStream</span> baos<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span><span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> replace <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>replace<span class="token punctuation">)</span><span class="token punctuation">;</span>            inputStream<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>path<span class="token operator">+</span>replace<span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>fileExtension<span class="token punctuation">)</span><span class="token punctuation">;</span>            baos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> ch<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">!=</span><span class="token punctuation">(</span>ch<span class="token operator">=</span>inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                baos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            data<span class="token operator">=</span>baos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span><span class="token punctuation">&#123;</span>                inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                baos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ClassLoader09</span> loader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassLoader09</span><span class="token punctuation">(</span><span class="token string">"loader"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        loader<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">"C:/Users/13166/Desktop/test/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> aClass <span class="token operator">=</span> loader<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token string">"jvmstu.classloader.ClassLoader01"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> o <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-自定义系统类加载器"><a href="#4-自定义系统类加载器" class="headerlink" title="4.自定义系统类加载器"></a>4.自定义系统类加载器</h3><p>jvm允许将自定义的类加载器定义为系统（System）类加载器，只需添加jvm参数。（查看源码可见逻辑）</p><h3 id="5-线程上下文类加载器"><a href="#5-线程上下文类加载器" class="headerlink" title="5.线程上下文类加载器"></a>5.线程上下文类加载器</h3><p>双亲委托模型下，类数据是由下到上加载的，对于spi(服务提供接口)，java的核心库是由启动类加载器加载的，而这些接口的实现是由厂商实现的，由系统加载器加载。这样双亲加载模型就无法满足spi要求。<br>因此线程上下文类加载器就是解决这个问题的。父加载器加载的类，可以访问当前线程上下文类加载器加载的类，解决了父加载器加载的类不能访问子加载器加载的类的问题。</p><h3 id="6-类加载器的命名空间"><a href="#6-类加载器的命名空间" class="headerlink" title="6.类加载器的命名空间"></a>6.类加载器的命名空间</h3><h4 id="6-1-何为命名空间"><a href="#6-1-何为命名空间" class="headerlink" title="6.1 何为命名空间"></a>6.1 何为命名空间</h4><ol><li>每个类加载器都有自己的命名空间，命名空间由该加载器和该加载器的父加载器所加载的类组成</li><li>同一命名空间中，不会出现类的完整名字相同的两个类。</li><li>不同命名空间中，可以出现类的完整名字相同的两个类。</li></ol><p><strong>注意事项</strong></p><ol><li>子加载器所加载的类可以通过“引用”加载访问父加载器加载的类。（双亲委托）</li><li>父加载器所加载的类不可以通过“引用”加载本该由子加载器加载的类</li><li>没有关系加载器所加载的类是互相不可见的<h4 id="6-2-类加载器和命名空间的关系"><a href="#6-2-类加载器和命名空间的关系" class="headerlink" title="6.2 类加载器和命名空间的关系"></a>6.2 类加载器和命名空间的关系</h4>在双亲委托模型下</li><li>同一个命名空间的类是相互可见的</li><li>子加载器的命名空间包含所有父加载器的命名空间，因此子加载器加载的类是可以看见父加载器加载的类，父加载器加载的类则不可看见子加载器加载的类。 </li><li>如果两个加载器之间没有直接或间接的关系，则他们各自加载的类相互不可见。<h2 id="3-类的使用和卸载"><a href="#3-类的使用和卸载" class="headerlink" title="3.类的使用和卸载"></a>3.类的使用和卸载</h2>使用 加载连接和初始化的过程<br>卸载 内存中销毁类<br>一个类在何时结束生命周期，取决于类的class文件何时被销毁<br>java自带的类加载器会始终引用他们加载的类，因此不会卸载。自定义的加载器加载的类可以被卸载。</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> jvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mongodb安装和集群搭建</title>
      <link href="/2019/09/26/mongodb-an-zhuang-he-ji-qun-da-jian/"/>
      <url>/2019/09/26/mongodb-an-zhuang-he-ji-qun-da-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="mongodb安装和集群搭建"><a href="#mongodb安装和集群搭建" class="headerlink" title="mongodb安装和集群搭建"></a>mongodb安装和集群搭建</h1><h2 id="1-mongodb安装"><a href="#1-mongodb安装" class="headerlink" title="1. mongodb安装"></a>1. mongodb安装</h2><p>1.官网下载适合的包,本次下载红帽系tgz包,上传到linux.</p><pre class="line-numbers language-none"><code class="language-none">解压到合适的位置tar -zxvf mongodb-linux-x86_64.tgzmv mongodb-linux-x86_64  &#x2F;opt&#x2F;mongodbcd &#x2F;opt&#x2F;mongodbmkdir datamkdir logscd logs&#x2F;touch mongo.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>配置文件和环境变量<pre class="line-numbers language-none"><code class="language-none">mkdir -p &#x2F;opt&#x2F;mongodb&#x2F;confvim &#x2F;opt&#x2F;mongodb&#x2F;conf&#x2F;mongo.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>写入如下配置<pre class="line-numbers language-none"><code class="language-none">dbpath&#x3D;&#x2F;opt&#x2F;mongodb&#x2F;datalogpath&#x3D;&#x2F;opt&#x2F;mongodb&#x2F;logs&#x2F;mongo.loglogappend&#x3D;truejournal&#x3D;truequiet&#x3D;trueport&#x3D;27017fork&#x3D;true #后台运行bind_ip&#x3D;0.0.0.0 #允许任何IP进行连接auth&#x3D;false #是否授权连接<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>环境变量<pre class="line-numbers language-none"><code class="language-none">vim &#x2F;etc&#x2F;profile添加export PATH&#x3D;$PATH:&#x2F;opt&#x2F;mongodb&#x2F;binsource &#x2F;etc&#x2F;profilemongod -f &#x2F;opt&#x2F;mongodb&#x2F;conf&#x2F;mongo.conf即可进入mongo来操作数据库了<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="2-集群搭建"><a href="#2-集群搭建" class="headerlink" title="2. 集群搭建"></a>2. 集群搭建</h2><p>在 MongoDB 中,有两种数据冗余方式,一种 是 Master-Slave 模式（主从复制）,一种是 Replica Sets 模式（副本集）。<br>还可以水平分片,可以存储大数据.</p><h3 id="2-1-主从复制"><a href="#2-1-主从复制" class="headerlink" title="2.1 主从复制"></a>2.1 主从复制</h3><ol><li><p>机器环境</p></li><li><p>168.1.111</p></li><li><p>168.1.112</p></li><li><p>主从配置文件</p><p> master－node节点配置</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">port&#x3D;27017bind_ip&#x3D;0.0.0.0 #允许任何IP进行连接dbpath&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;datalogpath&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;log&#x2F;mongo.loglogappend&#x3D;truejournal&#x3D;truefork&#x3D;truemaster&#x3D; true        &#x2F;&#x2F;确定自己是主服务器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> slave－node节点配置</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">port&#x3D;27017dbpath&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;datalogpath&#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;log&#x2F;mongo.loglogappend&#x3D;truejournal&#x3D;truefork&#x3D;truebind_ip&#x3D;0.0.0.0 #允许任何IP进行连接source&#x3D;192.168.1.111:27017      &#x2F;&#x2F;确定主数据库端口slave&#x3D;true               &#x2F;&#x2F;确定自己是从服务器<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>主从数据同步测试</p><p> 启动主从数据库<br> 在192.168.1.111 数据库中登录</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mongouse test-msfunction add()&#123;     var i &#x3D; 0;    for(;i&lt;20;i++)&#123;        db.persons.insert(&#123;&quot;name&quot;:&quot;wang&quot;+i&#125;)        &#125;    &#125;add()db.persons.find()#slave-node节点查看#首先开启rs.sleveok() 可以让从机可以查看rs.slaveOk();show dbsuse test-msdb.persion.find()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>在主从结构中，主节点的操作记录成为oplog（operation log）。oplog存储在一个系统数据库local的集合oplog.$main中，这个集合的每个文档都代表主节点上执行的一个操作。<br>从服务器会定期从主服务器中获取oplog记录，然后在本机上执行！对于存储oplog的集合，MongoDB采用的是固定集合，也就是说随着操作过多，新的操作会覆盖旧的操作！</p><p>主从复制的其他设置项<br>–only             从节点指定复制某个数据库,默认是复制全部数据库<br>–slavedelay       从节点设置主数据库同步数据的延迟(单位是秒)<br>–fastsync         从节点以主数据库的节点快照为节点启动从数据库<br>–autoresync       从节点如果不同步则从新同步数据库(即选择当通过热添加了一台从服务器之后，从服务器选择是否更新主服务器之间的数据)<br>–oplogSize        主节点设置oplog的大小(主节点操作记录存储到local的oplog中)</p><p>slave-node从节点的local数据库中，存在一个集合sources。这个集合就保存了这个服务器的主服务器是谁</p><h3 id="2-2-副本集-Replica-Sets"><a href="#2-2-副本集-Replica-Sets" class="headerlink" title="2.2 副本集(Replica Sets)"></a>2.2 副本集(Replica Sets)</h3><p>意思是一个副本集由多个主机组成,一台主机,多台备机,当主机宕机后,备机会投票选择一台作为主机.</p><p>传统的主从模式,需要手工指定集群中的 Master。如果 Master 发生故障,一般都是人工介入,指定新的 Master。 这个过程对于应用一般不是透明的,往往伴随着应用重新修改配置文件,重启应用服务器等。<br>而 MongoDB 副本集,集群中的任何节点都可能成为 Master 节点。一旦 Master 节点故障,则会在其余节点中选举出一个新的 Master 节点。 并引导剩余节点连接到新的 Master 节点。这个过程对于应用是透明的。</p><ol><li><p>机器环境</p></li><li><p>168.1.111   master-node(主节点)</p></li><li><p>168.1.112    slave-node1(从节点)</p></li><li><p>168.1.113   slave-node2(从节点)<br>MongoDB 安装目录:/opt/mongodb<br>MongoDB 数据库目录:/opt/mongodb/data<br>MongoDB 日志目录:/opt/mongodb/log/mongo.log<br>MongoDB 配置文件:opt/mongodb/conf/mongo.conf</p></li><li><p>配置文件编写</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">port&#x3D;27017bind_ip &#x3D;192.168.1.111                 &#x2F;&#x2F;这个最好配置成本机的ip地址。否则后面进行副本集初始的时候可能会失败！           dbpath&#x3D;&#x2F;opt&#x2F;mongodb&#x2F;datalogpath&#x3D;&#x2F;opt&#x2F;mongodb&#x2F;log&#x2F;mongo.logpidfilepath&#x3D;&#x2F;opt&#x2F;mongodb&#x2F;mongo.pidfork&#x3D;truelogappend&#x3D;trueshardsvr&#x3D;truedirectoryperdb&#x3D;true#auth&#x3D;true#keyFile &#x3D;&#x2F;usr&#x2F;local&#x2F;mongodb&#x2F;keyfilereplSet &#x3D;hcqmongodb #同一副本集这个配置相同<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>master-node主节点进行配置<br>首先启动三台机器上的mongodb</p></li></ol><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mongovar config&#x3D;&#123;    _id:&#39;hcqmongodb&#39;,    members:[        &#123;_id:1, host:&#39;192.168.1.111:27017&#39;&#125;,        &#123;_id:2, host:&#39;192.168.1.112:27017&#39;&#125;,        &#123;_id:3, host:&#39;192.168.1.113:27017&#39;&#125;    ]&#125;rs.initiate(config)rs.status()#&#123;&quot;set&quot; : &quot;hcqmongodb&quot;,&quot;date&quot; : ISODate(&quot;2020-01-03T17:20:48.733Z&quot;),&quot;myState&quot; : 1,&quot;term&quot; : NumberLong(1),&quot;syncingTo&quot; : &quot;&quot;,&quot;syncSourceHost&quot; : &quot;&quot;,&quot;syncSourceId&quot; : -1,&quot;heartbeatIntervalMillis&quot; : NumberLong(2000),&quot;majorityVoteCount&quot; : 2,&quot;writeMajorityCount&quot; : 2,&quot;optimes&quot; : &#123;&quot;lastCommittedOpTime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;lastCommittedWallTime&quot; : ISODate(&quot;2020-01-03T17:20:34.903Z&quot;),&quot;readConcernMajorityOpTime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;readConcernMajorityWallTime&quot; : ISODate(&quot;2020-01-03T17:20:34.903Z&quot;),&quot;appliedOpTime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;durableOpTime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;lastAppliedWallTime&quot; : ISODate(&quot;2020-01-03T17:20:34.903Z&quot;),&quot;lastDurableWallTime&quot; : ISODate(&quot;2020-01-03T17:20:34.903Z&quot;)&#125;,&quot;lastStableRecoveryTimestamp&quot; : Timestamp(1578072033, 2),&quot;lastStableCheckpointTimestamp&quot; : Timestamp(1578072033, 2),&quot;electionCandidateMetrics&quot; : &#123;&quot;lastElectionReason&quot; : &quot;electionTimeout&quot;,&quot;lastElectionDate&quot; : ISODate(&quot;2020-01-03T17:20:32.697Z&quot;),&quot;electionTerm&quot; : NumberLong(1),&quot;lastCommittedOpTimeAtElection&quot; : &#123;&quot;ts&quot; : Timestamp(0, 0),&quot;t&quot; : NumberLong(-1)&#125;,&quot;lastSeenOpTimeAtElection&quot; : &#123;&quot;ts&quot; : Timestamp(1578072022, 1),&quot;t&quot; : NumberLong(-1)&#125;,&quot;numVotesNeeded&quot; : 2,&quot;priorityAtElection&quot; : 1,&quot;electionTimeoutMillis&quot; : NumberLong(10000),&quot;numCatchUpOps&quot; : NumberLong(0),&quot;newTermStartDate&quot; : ISODate(&quot;2020-01-03T17:20:33.425Z&quot;),&quot;wMajorityWriteAvailabilityDate&quot; : ISODate(&quot;2020-01-03T17:20:34.894Z&quot;)&#125;,&quot;members&quot; : [&#123;&quot;_id&quot; : 1,&quot;name&quot; : &quot;192.168.1.111:27017&quot;,&quot;ip&quot; : &quot;192.168.1.111&quot;,&quot;health&quot; : 1,&quot;state&quot; : 1,&quot;stateStr&quot; : &quot;PRIMARY&quot;,&quot;uptime&quot; : 1224,&quot;optime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;optimeDate&quot; : ISODate(&quot;2020-01-03T17:20:34Z&quot;),&quot;syncingTo&quot; : &quot;&quot;,&quot;syncSourceHost&quot; : &quot;&quot;,&quot;syncSourceId&quot; : -1,&quot;infoMessage&quot; : &quot;could not find member to sync from&quot;,&quot;electionTime&quot; : Timestamp(1578072032, 1),&quot;electionDate&quot; : ISODate(&quot;2020-01-03T17:20:32Z&quot;),&quot;configVersion&quot; : 1,&quot;self&quot; : true,&quot;lastHeartbeatMessage&quot; : &quot;&quot;&#125;,&#123;&quot;_id&quot; : 2,&quot;name&quot; : &quot;192.168.1.112:27017&quot;,&quot;ip&quot; : &quot;192.168.1.112&quot;,&quot;health&quot; : 1,&quot;state&quot; : 2,&quot;stateStr&quot; : &quot;SECONDARY&quot;,&quot;uptime&quot; : 26,&quot;optime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;optimeDurable&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;optimeDate&quot; : ISODate(&quot;2020-01-03T17:20:34Z&quot;),&quot;optimeDurableDate&quot; : ISODate(&quot;2020-01-03T17:20:34Z&quot;),&quot;lastHeartbeat&quot; : ISODate(&quot;2020-01-03T17:20:48.706Z&quot;),&quot;lastHeartbeatRecv&quot; : ISODate(&quot;2020-01-03T17:20:46.912Z&quot;),&quot;pingMs&quot; : NumberLong(0),&quot;lastHeartbeatMessage&quot; : &quot;&quot;,&quot;syncingTo&quot; : &quot;192.168.1.111:27017&quot;,&quot;syncSourceHost&quot; : &quot;192.168.1.111:27017&quot;,&quot;syncSourceId&quot; : 1,&quot;infoMessage&quot; : &quot;&quot;,&quot;configVersion&quot; : 1&#125;,&#123;&quot;_id&quot; : 3,&quot;name&quot; : &quot;192.168.1.113:27017&quot;,&quot;ip&quot; : &quot;192.168.1.113&quot;,&quot;health&quot; : 1,&quot;state&quot; : 2,&quot;stateStr&quot; : &quot;SECONDARY&quot;,&quot;uptime&quot; : 26,&quot;optime&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;optimeDurable&quot; : &#123;&quot;ts&quot; : Timestamp(1578072034, 1),&quot;t&quot; : NumberLong(1)&#125;,&quot;optimeDate&quot; : ISODate(&quot;2020-01-03T17:20:34Z&quot;),&quot;optimeDurableDate&quot; : ISODate(&quot;2020-01-03T17:20:34Z&quot;),&quot;lastHeartbeat&quot; : ISODate(&quot;2020-01-03T17:20:48.708Z&quot;),&quot;lastHeartbeatRecv&quot; : ISODate(&quot;2020-01-03T17:20:46.939Z&quot;),&quot;pingMs&quot; : NumberLong(0),&quot;lastHeartbeatMessage&quot; : &quot;&quot;,&quot;syncingTo&quot; : &quot;192.168.1.111:27017&quot;,&quot;syncSourceHost&quot; : &quot;192.168.1.111:27017&quot;,&quot;syncSourceId&quot; : 1,&quot;infoMessage&quot; : &quot;&quot;,&quot;configVersion&quot; : 1&#125;],&quot;ok&quot; : 1,&quot;$clusterTime&quot; : &#123;&quot;clusterTime&quot; : Timestamp(1578072034, 1),&quot;signature&quot; : &#123;&quot;hash&quot; : BinData(0,&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA&#x3D;&quot;),&quot;keyId&quot; : NumberLong(0)&#125;&#125;,&quot;operationTime&quot; : Timestamp(1578072034, 1)&#125;#<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可以发现副本集已搭建完成<br>在从机上执行<br>rs.slaveOk()</p><p>添加两个管理员账号,一个系统管理员:root 一个数据库管理员:hcq<br>db.createUser({user:”root”,pwd:”root”,roles:[{role:”root”,db:”admin”}]})<br>db.createUser({user:”hcq”,pwd:”121056”,roles:[{role:”userAdminAnyDatabase”,db:”admin”}]})</p><ol start="4"><li>开启登录验证<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir &#x2F;opt&#x2F;mongodb&#x2F;keyfilecd &#x2F;opt&#x2F;mongodb&#x2F;keyfile&#x2F;openssl rand -base64 21 &gt; keyfilecat keyfilechmod 600 &#x2F;opt&#x2F;mongodb&#x2F;keyfile&#x2F;keyfile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>在其他从机上执行<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir &#x2F;opt&#x2F;mongodb&#x2F;keyfilevim &#x2F;opt&#x2F;mongodb&#x2F;keyfile&#x2F;keyfile输入主机上得到的keyfile E4ypGGWzXP7tF77QW+b8ZgXDsPrQchmod 600 &#x2F;opt&#x2F;mongodb&#x2F;keyfile&#x2F;keyfile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>修改conf文件<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vim &#x2F;opt&#x2F;mongodb&#x2F;conf&#x2F;mongo.conf...auth&#x3D;truekeyFile&#x3D;&#x2F;opt&#x2F;mongodb&#x2F;keyfile&#x2F;keyfile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>杀掉各个服务器上mongodb线程<br>重启mongod服务</li></ol><p>mongo -u root -p root</p><ol start="5"><li>测试<br>在主机上执行以下代码</li><li>1 同步<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">use test-msfunction add()&#123;     var i &#x3D; 0;    for(;i&lt;20;i++)&#123;        db.persons.insert(&#123;&quot;name&quot;:&quot;wang&quot;+i&#125;)        &#125;    &#125;add()db.persons.find()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>会发现同步到从机上了</li></ol><p>5.2 关闭主服务器,从服务器是否能顶替<br>mongo 的命令行执行 rs.status() 发现 PRIMARY 替换了主机了<br>5.3 关闭的服务器,再恢复,以及主从切换<br> a:直接启动关闭的服务,rs.status()中会发现,原来挂掉的主服务器重启后变成从服务器了<br> b:额外删除新的服务器 rs.remove(“192.168.1.113:27017”); rs.status()<br> c:额外增加新的服务器 rs.add({_id:0,host:”192.168.1.113:27017”,priority:1});<br> d:让新增的成为主服务器 rs.stepDown(),注意之前的 priority 投票<br>5.4 从服务器读写<br> db.getMongo().setSlaveOk();<br> db.getMongo().slaveOk();//从库只读,没有写权限,这个方法 java 里面不推荐了<br> db.setReadPreference(ReadPreference.secondaryPreferred());// 在 复 制 集 中 优 先 读<br> secondary,如果 secondary 访问不了的时候就从 master 中读<br> db.setReadPreference(ReadPreference.secondary());// 只 从 secondary 中 读 , 如 果<br> secondary 访问不了的时候就不能进行查询</p><h3 id="2-3-分片集群"><a href="#2-3-分片集群" class="headerlink" title="2.3 分片集群"></a>2.3 分片集群</h3><ol><li><p>何为分片<br>Sharding cluster是一种可以水平扩展的模式,在数据量很大时特给力,实际大规模应用一般会采用这种架构去构建。sharding分片很好的解决了单台服务器磁盘空间、内存、cpu等硬件资源的限制问题，把数据水平拆分出去，降低单节点的访问压力<br>即多个复制集组成一个逻辑数据库<br>使用场景：<br>1）机器的磁盘不够用了。使用分片解决磁盘空间的问题。<br>2）单个mongod已经不能满足写数据的性能要求。通过分片让写压力分散到各个分片上面,使用分片服务器自身的资源。<br>3）想把大量数据放到内存里提高性能。和上面一样,通过分片使用分片服务器自身的资源。</p></li><li><p>分片的好处<br>1）减少单机请求数,将单机负载,提高总负载<br>2）减少单机的存储空间,提高总存空间</p></li><li><p>分片的组成<br>分片集群主要由三种组件组成:mongos,config server,shard<br>mongos  (路由进程, 应用程序接入 mongos 再查询到具体分片)<br>config server  (路由表服务。 每一台都具有全部 chunk 的路由信息)<br>shard  (为数据存储分片。 每一片都可以是复制集(replica set))<br>图例见<br><a href="https://docs.mongodb.com/manual/sharding/">https://docs.mongodb.com/manual/sharding/</a><br><a href="https://www.cnblogs.com/nulige/p/7613721.html">https://www.cnblogs.com/nulige/p/7613721.html</a></p></li></ol><p>分片集群的搭建由于比较占用机器,本机就不搭建了.查阅官网学习.</p>]]></content>
      
      
      
        <tags>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>fastdfs 搭建和配置</title>
      <link href="/2019/09/22/fastdfs-an-zhuang-he-pei-zhi/"/>
      <url>/2019/09/22/fastdfs-an-zhuang-he-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="fastdfs搭建"><a href="#fastdfs搭建" class="headerlink" title="fastdfs搭建"></a>fastdfs搭建</h1><h2 id="1-fastdfs的安装"><a href="#1-fastdfs的安装" class="headerlink" title="1 fastdfs的安装"></a>1 fastdfs的安装</h2><ol><li>编译和安装所需的依赖包<pre class="line-numbers language-none"><code class="language-none">yum install make cmake gcc gcc-c++ libevent <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>安装libfastcommon<pre class="line-numbers language-none"><code class="language-none">解压.&#x2F;make.sh.&#x2F;make.sh install;libfastcommon 默认安装到了&#x2F;usr&#x2F;lib64&#x2F;libfastcommon.so因为FastDFS主程序设置的lib目录是&#x2F;usr&#x2F;lib，所以需要创建软链接,或者复制.ln -s &#x2F;usr&#x2F;lib64&#x2F;libfastcommon.so &#x2F;usr&#x2F;lib&#x2F;libfastcommon.soln -s &#x2F;usr&#x2F;lib64&#x2F;libfdfsclient.so &#x2F;usr&#x2F;lib&#x2F;libfdfsclient.so<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>安装fastdfs<pre class="line-numbers language-none"><code class="language-none">cd ~&#x2F;devfile&#x2F;fastdfs&#x2F;FastDFS.&#x2F;make.sh.&#x2F;make.sh install输出如下##mkdir -p &#x2F;usr&#x2F;binmkdir -p &#x2F;etc&#x2F;fdfscp -f fdfs_trackerd &#x2F;usr&#x2F;binif [ ! -f &#x2F;etc&#x2F;fdfs&#x2F;tracker.conf.sample ]; then cp -f ..&#x2F;conf&#x2F;tracker.conf &#x2F;etc&#x2F;fdfs&#x2F;tracker.conf.sample; fimkdir -p &#x2F;usr&#x2F;binmkdir -p &#x2F;etc&#x2F;fdfscp -f fdfs_storaged  &#x2F;usr&#x2F;binif [ ! -f &#x2F;etc&#x2F;fdfs&#x2F;storage.conf.sample ]; then cp -f ..&#x2F;conf&#x2F;storage.conf &#x2F;etc&#x2F;fdfs&#x2F;storage.conf.sample; fimkdir -p &#x2F;usr&#x2F;binmkdir -p &#x2F;etc&#x2F;fdfsmkdir -p &#x2F;usr&#x2F;lib64cp -f fdfs_monitor fdfs_test fdfs_test1 fdfs_crc32 fdfs_upload_file fdfs_download_file fdfs_delete_file fdfs_file_info fdfs_appender_test fdfs_appender_test1 fdfs_append_file fdfs_upload_appender &#x2F;usr&#x2F;binif [ 0 -eq 1 ]; then cp -f libfdfsclient.a &#x2F;usr&#x2F;lib64; fiif [ 1 -eq 1 ]; then cp -f libfdfsclient.so &#x2F;usr&#x2F;lib64; fimkdir -p &#x2F;usr&#x2F;include&#x2F;fastdfscp -f ..&#x2F;common&#x2F;fdfs_define.h ..&#x2F;common&#x2F;fdfs_global.h ..&#x2F;common&#x2F;mime_file_parser.h ..&#x2F;common&#x2F;fdfs_http_shared.h ..&#x2F;tracker&#x2F;tracker_types.h ..&#x2F;tracker&#x2F;tracker_proto.h ..&#x2F;tracker&#x2F;fdfs_shared_func.h ..&#x2F;storage&#x2F;trunk_mgr&#x2F;trunk_shared.h tracker_client.h storage_client.h storage_client1.h client_func.h client_global.h fdfs_client.h &#x2F;usr&#x2F;include&#x2F;fastdfsif [ ! -f &#x2F;etc&#x2F;fdfs&#x2F;client.conf.sample ]; then cp -f ..&#x2F;conf&#x2F;client.conf &#x2F;etc&#x2F;fdfs&#x2F;client.conf.sample; fi##服务脚本在：&#x2F;etc&#x2F;init.d&#x2F;fdfs_storaged&#x2F;etc&#x2F;init.d&#x2F;fdfs_trackerd配置文件在（样例配置文件）:&#x2F;etc&#x2F;fdfs&#x2F;client.conf.sample&#x2F;etc&#x2F;fdfs&#x2F;storage.conf.sample&#x2F;etc&#x2F;fdfs&#x2F;tracker.conf.sample命令工具在&#x2F;usr&#x2F;bin&#x2F;目录下的：fdfs_appender_testfdfs_appender_test1fdfs_append_filefdfs_crc32fdfs_delete_filefdfs_download_filefdfs_file_infofdfs_monitorfdfs_storagedfdfs_testfdfs_test1fdfs_trackerdfdfs_upload_appenderfdfs_upload_filestop.shrestart.sh因为FastDFS服务脚本设置的bin目录是&#x2F;usr&#x2F;local&#x2F;bin，但实际命令安装在&#x2F;usr&#x2F;bin，可以进入&#x2F;user&#x2F;bin 目录使用以下命令查看 fdfs 的相关命令：cd &#x2F;usr&#x2F;bin&#x2F;ls | grep fdfs因此需要修改FastDFS服务脚本中相应的命令路径，也就是把&#x2F;etc&#x2F;init.d&#x2F;fdfs_storaged和&#x2F;etc&#x2F;init.d&#x2F;fdfs_trackerd 两个脚本中的&#x2F;usr&#x2F;local&#x2F;bin修改成&#x2F;usr&#x2F;bin：vim &#x2F;etc&#x2F;init.d&#x2F;fdfs_trackerd手动修改或者使用查找替换命令进统一修改：:%s+&#x2F;usr&#x2F;local&#x2F;bin+&#x2F;usr&#x2F;bin  vim &#x2F;etc&#x2F;init.d&#x2F;fdfs_storaged使用查找替换命令进统一修改：:%s+&#x2F;usr&#x2F;local&#x2F;bin+&#x2F;usr&#x2F;bin至此fastdfs的trackerd storaged都已经安装好,且可以通过修改过得脚本管理服务.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-fdfs搭建集群"><a href="#2-fdfs搭建集群" class="headerlink" title="2 fdfs搭建集群"></a>2 fdfs搭建集群</h2>fdfs的集群搭建主要是通过配置文件<br>接下来就是通过修改配置文件来搭建集群.<br>为节省资源架构如下<br>机器名|ip|安装软件</li></ol><p>-|-|-<br>tracker01 |    192.168.1.111 |    FastDFS,libfastcommon,nginx,fastdfs-nginx-module<br>tracker02 |    192.168.1.112 |    FastDFS,libfastcommon,nginx,fastdfs-nginx-module<br>storage01 |    192.168.1.111 |    FastDFS,libfastcommon,nginx,fastdfs-nginx-module<br>storage02 |    192.168.1.112 |    FastDFS,libfastcommon,nginx,fastdfs-nginx-module<br>客户机1  |   192.168.1.111  |   Fastdfs_client<br>使用虚拟机搭建,搭建完一台后,复制虚拟机更改配置文件即可.</p><ol><li><p>配置tracker</p><pre class="line-numbers language-none"><code class="language-none">cp storage.conf.sample storage.confcp tracker.conf.sample tracker.confvim &#x2F;etc&#x2F;fdfs&#x2F;tracker.confdisabled&#x3D;false               &#x2F;&#x2F;启用配置文件port&#x3D;22122                   &#x2F;&#x2F;tracker 的端口号，一般采用 22122 这个默认端口base_path&#x3D;&#x2F;fastdfs&#x2F;tracker   &#x2F;&#x2F;tracker 的数据文件和日志目录 # the method of selecting group to upload files# 0: round robin# 1: specify group# 2: load balance, select the max free space group to upload filestore_lookup&#x3D;0              &#x2F;&#x2F;采取轮巡方式选择要上传的组进行存储，默认2 选择最大空闲空间的组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置storage</p><pre class="line-numbers language-none"><code class="language-none">vim &#x2F;etc&#x2F;fdfs&#x2F;storage.conf#需要修改的内容如下disabled&#x3D;false                          &#x2F;&#x2F;启用配置文件group_name&#x3D;group1                       &#x2F;&#x2F;组名（第一组为 group1，第二组为 group2）port&#x3D;23000 # storage服务端口（默认23000,一般不修改）base_path&#x3D;&#x2F;fastdfs&#x2F;storage # 数据和日志文件存储根目录store_path0&#x3D;&#x2F;fastdfs&#x2F;storage&#x2F;data # 第一个存储目录tracker_server&#x3D;192.168.1.111:22122 # tracker服务器IP和端口tracker_server&#x3D;192.168.1.112:22122 # tracker服务器IP和端口http.server_port&#x3D;80 # http访问文件的端口(默认8888,看情况修改,和nginx中保持一致)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>配置Client</p><pre class="line-numbers language-none"><code class="language-none">vim &#x2F;etc&#x2F;fdfs&#x2F;client.conf#需要修改的内容如下base_path&#x3D;&#x2F;fastdfs&#x2F;clienttracker_server&#x3D;192.168.1.111:22122 # tracker服务器IP和端口tracker_server&#x3D;192.168.1.112:22122 # tracker服务器IP和端口根据以上配置,建立文件夹.mkdir -p &#x2F;fastdfs&#x2F;clientmkdir -p &#x2F;fastdfs&#x2F;storagemkdir -p &#x2F;fastdfs&#x2F;storage&#x2F;datamkdir -p &#x2F;fastdfs&#x2F;tracker开放以上端口,多开放几个万一有用呢.firewall-cmd --zone&#x3D;public --add-port&#x3D;22122&#x2F;tcp --permanentfirewall-cmd --zone&#x3D;public --add-port&#x3D;23000&#x2F;tcp --permanentfirewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanentfirewall-cmd --zone&#x3D;public --add-port&#x3D;8888&#x2F;tcp --permanentfirewall-cmd --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp --permanent<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>安装nginx和FastDFS-nginx-module<br>安装nginx是为了使用http访问文件服务器上的文件<br>FastDFS-nginx-module是ngixn的插件,当访问的文件未及时同步时,可以自动请求组内的其他storage.</p><pre class="line-numbers language-none"><code class="language-none">首先cp &#x2F;usr&#x2F;lib64&#x2F;libfdfsclient.so &#x2F;usr&#x2F;lib&#x2F; mkdir -p &#x2F;var&#x2F;temp&#x2F;nginx&#x2F;client tar -zxvf FastDFS-nginx-module_v1.16.tar.gz cd FastDFS-nginx-module&#x2F;src vim config 修改config文件将&#x2F;usr&#x2F;local&#x2F;路径改为&#x2F;usr&#x2F; fastdfs-nginx-module 的配置文件默认地址为&#x2F;etc&#x2F;fdfs&#x2F;mod_fastdfs.conf如果没有,可以复制一份到&#x2F;etc&#x2F;fdfs&#x2F; 目录下cd nginx-1.8执行以下,最后一行为mod源码所在位置..&#x2F;configure \--prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx \--pid-path&#x3D;&#x2F;var&#x2F;run&#x2F;nginx&#x2F;nginx.pid \--lock-path&#x3D;&#x2F;var&#x2F;lock&#x2F;nginx.lock \--error-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log \--http-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log \--with-http_gzip_static_module \--http-client-body-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;client \--http-proxy-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;proxy \--http-fastcgi-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;fastcgi \--http-uwsgi-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;uwsgi \--http-scgi-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;scgi \--add-module&#x3D;&#x2F;home&#x2F;hcq&#x2F;devfile&#x2F;fastdfs&#x2F;fastdfs-nginx-module&#x2F;srcmake make install至此nginx和mod安装完成,可以通过nginx访问上传的文件.修改nginx配置文件vim &#x2F;usr.local&#x2F;nginx&#x2F;conf&#x2F;nginx.confserver&#123;        listen      80;        server_name 192.168.1.111;        location &#x2F;group1&#x2F;M00&#123;                root  &#x2F;fastdfs&#x2F;storage&#x2F;data;                ngx_fastdfs_module;                &#125;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>复制虚拟机搭建集群<br>修改storage的group为group2</p><pre class="line-numbers language-none"><code class="language-none">vim &#x2F;etc&#x2F;fdfs&#x2F;storage.conf#需要修改的内容如下group_name&#x3D;group2                       &#x2F;&#x2F;组名（第一组为 group1，第二组为 group2）vim &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.confserver&#123;s        listen      80;        server_name 192.168.1.112;        location &#x2F;group2&#x2F;M00&#123;                root  &#x2F;fastdfs&#x2F;storage&#x2F;data&#x2F;data;                ngx_fastdfs_module;                &#125;    &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>启动 </p><pre class="line-numbers language-none"><code class="language-none">sudo &#x2F;etc&#x2F;init.d&#x2F;fdfs_trackerd startsudo &#x2F;etc&#x2F;init.d&#x2F;fdfs_storaged start所有Storage节点都启动之后，可以在任一 Storage 节点上使用如下命令查看集群信息：&#x2F;usr&#x2F;bin&#x2F;fdfs_monitor &#x2F;etc&#x2F;fdfs&#x2F;storage.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>测试</p><pre class="line-numbers language-none"><code class="language-none">在任意机器下执行上传文件&#x2F;usr&#x2F;bin&#x2F;fdfs_test &#x2F;etc&#x2F;fdfs&#x2F;client.conf upload pic&#x2F;p1.jpg (此种方式不会轮训上传)返回如下group_name&#x3D;group2, ip_addr&#x3D;192.168.1.112, port&#x3D;23000storage_upload_by_filenamegroup_name&#x3D;group2, remote_filename&#x3D;M00&#x2F;00&#x2F;00&#x2F;wKgBcF4E08iAWJ4kAAfNHkhMyWo887.jpgsource ip address: 192.168.1.112file timestamp&#x3D;2019-12-26 10:37:44file size&#x3D;511262file crc32&#x3D;1212991850example file url: http:&#x2F;&#x2F;192.168.1.112&#x2F;group2&#x2F;M00&#x2F;00&#x2F;00&#x2F;wKgBcF4E08iAWJ4kAAfNHkhMyWo887.jpgstorage_upload_slave_by_filenamegroup_name&#x3D;group2, remote_filename&#x3D;M00&#x2F;00&#x2F;00&#x2F;wKgBcF4E08iAWJ4kAAfNHkhMyWo887_big.jpgsource ip address: 192.168.1.112file timestamp&#x3D;2019-12-26 10:37:44file size&#x3D;511262file crc32&#x3D;1212991850example file url: http:&#x2F;&#x2F;192.168.1.112&#x2F;group2&#x2F;M00&#x2F;00&#x2F;00&#x2F;wKgBcF4E08iAWJ4kAAfNHkhMyWo887_big.jpg或者&#x2F;usr&#x2F;bin&#x2F;fdfs_upload_file &#x2F;etc&#x2F;fdfs&#x2F;client.conf pic&#x2F;p1.jpg (会采用轮训上传的方式)返回如下group2&#x2F;M00&#x2F;00&#x2F;00&#x2F;wKgBcF4E8tuAEh8XAAfNHkhMyWo607.jpg&#x2F;usr&#x2F;bin&#x2F;fdfs_upload_file &#x2F;etc&#x2F;fdfs&#x2F;client.conf pic&#x2F;p1.jpggroup1&#x2F;M00&#x2F;00&#x2F;01&#x2F;wKgBb14E-AaAfkntAAfNHkhMyWo582.jpg启动nginx通过http访问需要修改插件的配置文件vim &#x2F;etc&#x2F;fdfs&#x2F;mod_fastdfs.confbase_path&#x3D;&#x2F;fsatdfs&#x2F;treackertracker_server&#x3D;192.168.1.111:22122 tracker_server&#x3D;192.168.1.112:22122 url_have_group_name&#x3D;true  #url中包含group名称 store_path0&#x3D;&#x2F;home&#x2F;fastdfs&#x2F;fdfs_storage   #指定文件存储路径 实际上因为架构的问题,这个插件是没有作用的,一个组内有多台storage才有作用.&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx遇到了一个nginx无法启动的问题,查看nginx的错误日志解决掉.nginx启动后通过本地浏览器访问即可查看上传的图片.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker的端口映射探究</title>
      <link href="/2019/07/16/docker-de-duan-kou-ying-she/"/>
      <url>/2019/07/16/docker-de-duan-kou-ying-she/</url>
      
        <content type="html"><![CDATA[<h1 id="docker的端口映射探究"><a href="#docker的端口映射探究" class="headerlink" title="docker的端口映射探究"></a>docker的端口映射探究</h1><p>使用docker部署了tomcat，并吧宿主机的8080端口映射到docker的8080端口。现在来探究一下是如何映射的。</p><ol><li><p>tomcat的端口映射<br><img src="data:image/png;base64,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2MIF31bXVLdH9gtn+r/9djvU1dXW1tZAs1sB4DNXQERGXTN66nvvTpny9mmnn5108bfzPpg2tamxoU+fvvfc89Bf/jL/xx+/r6/ftPMuu3315RcAhgwZdu/dtxNy2mlnL/3xh9HX/K24uGjb7XZQpin7xo6naTI1h0diID1Vv3bgsHWV0p+rcencNP5nyoA6TQngv57jyhNWadDmag+H6U4ULy6FruiCpLISAVBe3jeTya6oWLb7HnuVl5dXVVUOHLD1fM22HVDVj9OY3fbYq3d5n6qqqoEDBn077xtPPgHFXL5i+W577FXep09lVeXAAYO++fprZeklswD6lPfJZLLLli/bfY+9ynv3qaqqHDBg0LfzvhFBEITFxSXZoiJncsjncz8ZMvSA5SuW7bzLbo3NTSuWL1fhly9butsee/Z2wg+a/+03n3/26b5D91+2fOkuu+7W2Ny0fNny8j59M5lsxcoVu++xV3l536qqqoEDB83/9msAgIgONqEAn839uFfv8ltuvX1tVeU77775yZzZUZQH8Plnnw7Zb//ly5ftsssfGpubli9bVt6nTyaTXbFi+e577FVe3qeqqnLgwEHz533z+WefDtnvgOXLl+28c4zZN5PJrlixbPc99yrv07eqqnKrgVt/O89dP+y9z9CGhoYF334NwdIfvj/vnFNOPuXM/v3733/XWDICKZAzz75wl133uPziczbWVu+1975BEOjviG+11aC/XXxWaa+yx557ZcG8/2xYv87Nun4qpl6DkRpZKQbG6B4Y0IobQc4xQDZs3nzV5Re8/v4nN13794Xz5x182JEP3TOhfmPdH/bc5/MvPoMJhh1w0IRxN//4w/dnnHL8qaefM2DgwLvuGAvd7BQEo0bf9MOC+df+/ZJ9Dzp0zK3jzzjtBEAa6jePvOSCN6bNGXPDqIUL5h9y8OGL588797yL/rDbHn+58MyNG+v23meIyWaQy8376j9T33mroaG+b5++jzz5z7NPO/7H75ecftJRp5x53sCBW9054Vbq+AGgObroWNICiKoJAQQi0I3yljQGxo1PiawYdznrLAQCEBOIkNYSVqjWAPTOQXFxEcl8lDci2WympaWpU0kJgFde/dctY68fe/tNUT4/5rpxQRAUlxSTzOdzMWaJYr426ZZxo8feMSbKR2OuG5++z9WpU5fh513y5LMPxyX/nvzC30aNeO3Nl4eff0k2my0uKSKZzyfclSaAdDAQUECAefcL86kaQLWhO5V+/QaU9y5/Z8prbW2tr77xrxh18qsv3TL2urG3q5xj/Rag9AjXUwJJyiZA6tAXbBHaV6YpbxF+ihQBqsu6F1BTV22trdu0cX31+o11tT26lwKYNfvDYUMOBLDD4F8HQbDou/mJGRwdAOzapdtvf7PT5NcmRfnok7mzq2s3/P63uwCoraumZd2mug3V6zdurC3tXgrgwGFHPPPCY7V1NVGU/+SzWXrLoihbdM2VNzz58Ivjb/7fLl269es7MEVfDxJlV69e+eczj3lnyhvwggjgpmR/Vt67z69/9T9PPftoW1vbmqpVX37z2e5/2AtAZKPevfuU9SpvbmlZ9N2ClE0d/VT63s68uuuGgNVjn1i0w1eD5om8n+AFMP4l2pApIkSe8nObidMw7YMpJL/48rPaWr1k1SY85ugT33znlQLUgs4XQCKbj3Vf6LtSICYIJ0561tooivLr1q8DjLrnMUed+OY7k3/K4wTo0qXLb3/z+5dfm5TP5z6dO7u6tvp3v9sZ4IHDDnlu4tN1dbVRFH06d47eZyvOFo26cvTjDz839uY7O3fp2q/vgJhOChJjHnv0iW++PRmQxCyOu/vo2qXrb3/z+8mvTcrn8598Nru6tvp3v90ZYE1dtbVR3aa6DdXr6jbW9ujeA4IDhh327MQn6upqoij6dO7sXC4HSFG2eNSVNzz50MT77n+iS7dufQdslSctLd2eSGvz+XwuT+0o4tQzz570wrNiJAiMiAHw73+/WL9587x533z99ZdDh+0P7yJqcJ9sAcBrr/yb5OyPPtywfh0I0u8W0VhpCZ12XN7i3NJ7J/03U113A9SaTp06Dz//kiefeQSwRETk1IZ+J5vt329gee8+b7/7Wltb6yuvT4ISpxRli6658ronHn5u7E23d+7StV/f/gBmzZkxbMj+AHYYvGMQBIu+Wwgwb/O9e/fu1ausqaVJ7+oUgtcYKMoWjbryuice/ufYm+/q3KVr3779jQn23mPI629OzuVy02e8v2nTRoBdtONefymXz33y2Zzq2urf/XYnNYMjpHTpBgs0QgGunv4jXdgR0uTiBr5btEM7gsRvru+UCpVrLAegVe1Ah3PcxBX6A9ehAKZ/+D4tamtqvl+yZLfd90qSXLdryEkKiACdO3UeftGIJ554WJ3BaUC3yQBA//4Dy8v7vP3W621tra+8ovORAFKcLbrmmuuefOqFcePv7ty1a/9+/UHO/OjDYcMOgGCHX/06CIJFi+ZDo2KfPmW9y5tbmhct/Bb0+S68+M6XCdBl6V7ONJJuTtANygIVP65X7dTp3Z+WeyRntlSbmH4K0uZMWhYAtan/UHsl/kUA7lLEJSe5vBEpymabm11ykpDyB8XFSXJSlM02tzSWdCreooSepqYx2ZbmppKSYgAqkG9BkEVFWZK5XM6IhJmwubmppKSYJCirVlacfOKRb7/1GiAKTz356L77DX3tjan/uPaGB++/u6WlRZHzkcuXmpubikuKafnkk4/sO2S/195475p/XP/A/Xe3tDSrSLl8zohkspmWlkZtS1DpQ5w1q2uqn3/uqfPPO/211ybvv//BTz4z8YgjjwHgub93zbU3PHj/Xa2tLSmDIFukpusEyJNPPOLkHH3jA/fd1dLS4rjnNAfLNjer6aCudOwJJ73x2r/UnQhoXAWQ7uADDzny6Scfrq2tiaz9ePZHGr0BTHvvTZB11euXLJy/5z7DVBMTXzQCAtFk3r/pzhk3wCgm/hqrOkt19XprbV1dzfp1a+tqqktLSyGYPm3KgYceKUH4m9/8LgiChQvmCUAvnMCytQUtzd1LOu200y4vvvhsBMye9dGGDRt23uUPQm5YXxW1ttTW1qyvqqqtrenRo5S5tkMPP/qJxx+uqanOR/k5c2bmc3kBiopLbrh53Iv/fuPeB5/o0q3bgIGDEIiI6H4Y5zoCUPN0gSUiKxC9Q0tAXILh/ZykMUKBtZHAikFg9Cl6FKHAYQIgBBARhiFFRIzAP16wpaVFRDoVF1dWra6p3lBc3Km5pQWQL778rGJVxfIVy+576J6+fftvPWib5uZmESkpLvGYJS0tzYD9/D9zV65asWL5j/c/dGffvgO23nobECDCMHPt1WNmzflo9pyPVF6Azc1N69dXTfr3cxCz6y67tTS3JjQ3bCgu7tTS0uKETi0yuFHuOiUNjiwAIk9YwPToXlrf2BDZCGB9w+Z8Pq+oX3w5t2LViuUrlt6ncg7aJk3o/wIdxQAQC9Ku6P8/oMNHcwpLawIDYObsD/fec98wzA4dcsDMOdMtI/UPHQLaDkD37qXW2k2bNgIQSE1tdY/Snp4mNHBbRkqzZ2lPv1fbDdFsNjtm9PjpM94bftkZF4w4tW5jbVjwswBxF+hLAERR3h/7EZpYggBLS0sB3HfXY089MvGpR17cZafdunbtAsjzE5+qr9901/gHn370pQP3PyzVRD+o35zzJU5Cj0OCqUla8a1/aZUFIv0yQCop17aaVxGAk9kRJxl/c+Anuv4ngADB7bcbPKDfgFlzZrSvBqDhTADg+YlPb67fdNf4+5969MUD9z/E6QDUbaxta0u2qKlg22+7w4B+A2Z9/FFHkeKGvt/rtLy2trq0R0+CpaU9166tdEgAgGy26IbRt06fMe3iy84bPuLsjakuToKIMywAbL/dDv0d97g2RQ6E575x00Ytqq2t1h2f3usI0trIBAZkTxXJgwBFmaIbR497/4N3Tzr5hGOPP6qmplpMEFnk84wiCw2aqioBYsff/GbQoG3enzpFjPtSEoDqDRuUYHV1TY8ePQnN/V3KAN9BXktxkwsJgm5LI2gJCwFSSywKzkO81+noMzHNMAyuvXrMzNnTZ8153zJH5sg8qT+T7q6FenTvXt9Yn7d5AA0N9RqsstnsjaNvnT7j/b9cdu6FI852I44ya9aMvfbcJwwz+w0ZNnPOTBXwn85t7nvq0YkHDjsklk2jJQE9KMpmbxx92/QZ0y6+9LwLR5ylNDt36hyGYd1G5yF1G2sBdO/eo7Djanr06AkosfjfW4oRSdE8L7aNcvWo8DK4CmdaJK4rWg44+7pjffNWjmOIq43Vcy9fDfhucUfabYm76LF1m+iSZqQFKUDD5nrl29BY3717N+uuGV3E0OZKLciE/xg9ZubMGbNnz1RxKfqCW4QT9ijtUd/QkKelQOcjCjJF2Rtvuu2D6dOGX3TO+RecUVdXGwQByI9mfLD33kOCMBg6bNjMjz60jAj73LNP1G/edNe9jzz93MsHHnQ4QBDKB/DGd6ZTYwKIxSQYCwxRm4vRa1HfAQTo0neloRYkYUmo0lqRXDskrQGkLZm2aUdIkOBG2BaQqW8uOSkpqaxcXb1hQ0mJJicJ+ByBLS0uOamqXF29YX1JcaeW5hYl0k4apVlSUlxZuXrD+vUlJZ2aFRPOUK4VrU94iivXrF6/bl1xcafmpiYbRdZaS+byedJJH4bhbePuemXySycce9gN1189cuS1gwZt3exFqlzjhG9paQnCYOzYu155+aXjjz3s+uuuHjny2oFbbdXc3CQiJUVFlZWrq9evK1bhybvvfeTt9z56e8rMt9+b9c57szPZIgAgbRRVVCxbsXyZAH3K+4aZzG3j7nxl8r9OOO7wG64fNXLk6EGDtm5pbnHCV66JTReG4dhxd73y8ksnHHv4DdddPfKq0VtvvXVzszfymtXV6zcUF8cGwfY7DB4wYKuZH00nABgThG5YAxS9ay0kevbqta6q0o1P8VEUaNi8Wb2toWFTaWlPvXzUdXZj9FJSL9XiadCtPQvg7oqL8YxidxOQmrEEQSAi06dPGzLsgEw2e8BBB384fRotATq6pIFBGLI406OszFq7qaEeYQjamuoNPXv2ovVfc6Jla4uN8kEYGAl69epVVbnauQStBYqKisfdfu/Ud986+9TjTzvpqNqamkwQALDWiqVYK7SiKhj9AgBEjNHFJEFoITaSKB8IDEQkkCB0LyMgTWQDEyAITZgJRIwxJsyYIGMgxn9lOMhkg6ISmEBpG0gIYEP1+lwuN2DAoNsmjGlobOjXt9/KVRVpp8/n22wUCbChel0ulxswYKvbJtxY31jfr2//ipUrAADUUa2YBkLQGIz827UVFctf/NezhUPIjzkbZTLZauU+cKvbJoypb2zs17ef0iS0B2L8OFjQVyZ7pHwq5iLsxk11XTp1NiawNurSpVvHb7RE+byNIqOTvIaqAgn/G5BCpdoBCwWOj/9LUPyfoe88vnJtZeXaNbvtsueQvfcfe8f1sUwkRYR6KQhu3FRrjOnevbvOyr16lm3aWBeGGaXk2NHRrK2r7dunf2XVal+LsrJyS878eLpAOnfu1qu0V+pBHxZifA85Tfv3G3jX+Aeeef7xaR++FxMhrYqkBqmuWd/a1jr80jOttQAh0Glo0+ZNDz56L3DvvnsPHfnXa2fNnm7d10esCIg8EHm9YnXVXO1OHaSMyFQWrshJSkr9gouzgv6wcUxHPZFwfH8R6P498WOPPundqW/GV5IA2trasmEWgDGmc2d9HCc2b9700KP3PgTss9fQkVf8Y+bsGaq77hIBAGh/EpBjj/7TO4U0AeTyORMEsYibNtUZY7p3L9WLt549yzZuqoPr4r5VVWtiHcvKepOY/fFHADp37tKztJcJXNzM5XMSBKmrHQFw7NF/enfqm/l8zp2ryox87CYgmzZtNMb06F6qTHv2LNu4sS7MhA7bv4sIvddVOa8DgbLe5ZZ88823Wlvy3bp2Ku9dDpEosm1525bLEyZvEQ9gipx21rmT/z0pn4/S1/m9ynoDAFlW1mvB/G+tJaipCwWxw/re0lOBQEhogmQtbWQDS8TDKW7Q/lhE83ISoAlk5N+uX7Hixxf+9ZgaBBDAAAQI7/J1m+q6dOpijFhru3btEYYhwN69y0noFx46d+7Sq7SXH+9VlWsr/7Drbvvuvd+4O24iIoFs2lz30KP3PASz715Dr7zimplzPtRb2CpSLGZZWR8Ssz+eAUrnLl10FDc2Nebz+dLSXmr5Ht17APAd12PjRnWbXvFFoFNEAKp5/KljEhvDI3vb+I7yczsAWG99V6Zm117x+GDcS+4/ZuOTt0LQUlclAhBxWgaoDAAI29rWAiAMAoAETGDa2lppQKBH754MrIXt3qNH3fw6mkgDV2oBEgCMMVddPbqiYvnEfz+PAIDutiOgLwFIK7WbN3bp3FkCY63t2qVrGIbWoKxPH0vMnD2DQJcuXXv17GWMELayclVl1Zrd/rDHkCHDbrv1etAKsGlj3YP33QVw3yHDRo66YeZH79tI8w6oN3t20EM6O8VDwV1u6bFDKzCmdVO4O3UH4q0nEIgAItAYnoA/SQnw86D+QriQQiSDogAIYMOGdZoe3HrLDQ0NDf369V9ZsSLGyGSyuVxbGnPgwK1uueWGhsaGfv18ciIAJJPJ5Npy2mrDhvW5XG7gVlvferOjWbFyhbcXM2EmyueElrTr163N5XJbDRw05sZ/NDTU9+vff8WKZaAlOKD/Vvfc98jTTz467f0pEA4cuFWfvn2nTXknstHihQtWrqr4/U47vz/1nVwuN3CrQbfcfF1DQ32/fv0rKpY7zKnvWnLJd4tXra7Yeec/TH3vbSf8TaMbGjb369e/omIFaUdecREgVMcTEUq2pGTfIcMOOeyIgQO2mvb+eyOvvKymesM222zXp0/fD96fEkXRd4sXrVpdsdNOu0513Le+5Zbr6xPuA/v07TvtvXciaxcvWrhqVcXvd9r1vSlv5XK5AVsNuuWm6+ob6vv1H1BRsUL94fgT/vz2m6/mcjkxgYhxTkIrYhAYwMASQG1NTZ9+AyorVwECGD9ZoGfv3upmpT3Lvv36S0KjvUvToUPbBCAtaUQsLUgIEQQwAayLpQQgbm5JQgMgIgjCyrWVa9as2nPPfYbtf9CN149yjkSSkRGxrTkjRkQ21tUZY7qX9txYV2sgvcrKatavyxQXizGSzTq/JCHGFBXV1NT0HzCwctVKI0IIwb59+tLywylvwdpuvcvKynoHQRCIQIwOjsAECAKVzQpcrCAAa/N5NjfRMKSRTFayIYzRkIJ8FNECMNZIGAaERQQlG4ZibdSWs4wkzJhsVkxowiAAbC6Xz+eE1oDMtbXN/eLjE0/4c2tr61F/PK6xqXHRdwu6de2235D9e/QoLS3tecG5I+o21lasWpHL5eZ+8cmJJ5zS0tpy9JHHNzY1Lv5uQbeu3YcOOaBHj56lpT0vOO+Suo21K1YtA+zlI65qbGx4buKTmUw2k8mKSLeu3Y4/9s9lZeVdu3Y79uiTevUsW/zd/LZc29wvPj7x+FNaWpuP/uOxjU2Ni7+bD6e6Dmn69a1IDMNMYAIxYjKZQAyJSH+pCoC7aEO0unJ5bV3NkUcck8kUnXDsSQAAdOvabeiQA3r0KO3p5axYtYIAkY7vCSj7WIjCk/8rxM3akehILg6ChVUFsbHgZNbsD8864/y2ttZly38ERCACqaur3XrgNqFx24QaGjYvXrLgpBNOD8Ng3732Ky/rM3+hfhkoJpVMhx/NnnremRf1LO0VBOE+ew3LZDK1tdVF2eyvf/U7Y8Jzz7won88XFettR6mtq9164NahSS/JS7wPPlXI2rraQQO3DowL1tU11Ut+WHzW6edns0WZTOb3v925X99+JPfcfZ9ePcsAtLW2NTc393wg1wAAIABJREFUW2tVqdq6ukEDtw4MCLdKVAhSaBY9LTAUQCS7F8TtmVG16f4BISOLNqItfm6PbxLpsRt47V8dwRWWlvbae499p0x9OyWVrK5ctffe+4Vh5tijTowvh/bcfZ+ePcsItLW1et3T4NRhTPP9t11q5CvXrV/btXOXAf230rKGhvrFSxaefMJpYRjuu/fQ8rLyBQvmCfDR7GnnnHlhj9JSEwT77LVfJpOpra3JZjM77vgbY8zZZ16Q6mKuX1/VtXOX/v0HAFQ2paU9995j3ylT33KsvaZ1SRcLIPUN9YuXLDzphFPDMLPPXkPLy8oXOK/zIHFbfjR72rlnDi/1XpfNZGtqNmQz2R0H/06MXHrplblcrrikxMJCWFNTs/3g7YMwpAhFrKCsvHz/Aw6aPPlfcU+QJHDyn0/t3Knzb3+306677jZ71swzzjhz8mtvlPXq9eaUafsN3f/6m2+9dfwdKkkqO3dZo96ZIkla6qp/gUupS+T9S70lT7RR2ojosouvamiof2biI9lMUSZTLG4lycYUSNLa1WtW1NZVH3X4cZlM5oRjTgJAsKamOpvN/OpXvxEj55x5YT6fL3Y3+jFr1odnnX5eW1vrsuU/ACTsnrvv3bNnGYDWxG0SJnHv1NZWZ7OZHX/1PyaQc87QLi6x1n72n09POO6kwJihQw7Qh4O5jjv+1DAM9917v/Ky8gUF39/QgOn2GAEQCFwMVXbqlElX+ANNbhMTanqYkhECgctJE+fQA0HSQb4qRRka+eICACppOrwrDVGOGzfWrVu39rBD/1hSUrzrrn8oL+/z3fffUQjBMUcfX9ypaPDgHXb81a+/+GquLrJRaN36untdfumVDQ31z77wRCYTZrKhGHHpu1h1D8ACdvXqlbW1NUcdeUwmkz3hhJMACFFTXV2Uzfx6x/8JTHDeORfm8/mikmLV/6MZ0845Z3hba+vypT+oZffae0jPMo2Krc1NTdZar0p8uSB+0SE+SF/JQv2YVMGgpnP2SlvRtdEbREmpvjlsdxVG9+8hbuxAxUqXtAN69wEQJ2hxAQRAri03d+7Hfzr51NbWlqOPOa6xqVG3FQEYPPhXL7/67uFHHK2nubY2j9l69DHHNzY1LlqomzCxw+BfTX713SP+eJSKmMu1zf3045NOPrW1teWYY49vbGpcvGg+AJI7DP7V629OPeKIo1SyfD7/6SezTz71jLaW5uOOO7GpsWHRwvkAQBojxcXF2WyWtNZy3bq1uVzbQYccDmCbbbffbrvBK1csa21p+fTTOX86+bTW1pZjVKQF365PYW677eDtthu8amVFLpeb6zFV+IUL5+nggOtLAKDg2ONOPOywI9979+0Lzjt94gvP1lRXE1i/YV0u13bQwYeLyLbbDd52u8GrVlXkcmq6U1pbWo9R0y38dt36dblc28GHHqGY220/eGXFilwu9+mnc07+8+mtba3HqpoL5gHo2bNs732GvvvOmyKB298iAqCupnbQoG2CIPTphsyYPuX8C0f07FkWBsGQoQdkMhntw+P+dFqnLl1+9evf7vib338x92MxAh2oIuocYkRETBAEgT6bkuJ8NdZeL4r9Nal6lbOHAEIRkNOnvXfB8EtaW1t//H4JSQJWpKamdtDW24pts/mWiLmNm2oXLJh3+mnnZMNw6LAD+/TpO/+brwRiNIMXkeJiMQZgxPyH094dPvzS3r17ZzLZofsdEEa2uqoyW1T02513zYThhRdfkc/nOnXqbCASBrV1tdsO3jGTLdK7CgIxkECtBk06rJFAaEQCiqExBJjPST5iLietbWKtDY2N8vm2NkaECWCE0BvGgIDWUgx0uYH6+DVQxC1OP/7UQyOv+McLz7y8dl3VnfeOtdaKCU4+8bS/X35NW1vrD0uX3Dru+lwuB+CJpx668oprJj7zytp1VXfee2tk82Jw8omn//3ya9vaWr9f+t0t4/6Ry7V169b9kAP/COCwg49UFldfd/mqVRV7/GGv004+KwzDlasqxt1xY3VNNYDHn3rwyiuuTdFMbyeFT5gA4LBDjrz0oiv1+OADj3j0yfvenvKqC5pQXKPj/457bh01cszZp18w9YN36upqCIgxBRqNvz6Xdxfl/3dw8nSAxLHaFSFeFmkX5tqDV2RL4BsSojwE4Kw5M847+y+T/v18ysVl7uczDzrw8Oeeeo3WXnTZ6U3NTXffP+7yEVdPfPr16poN4+8a09Cw2ZFKwJGf+NIzmUzxg/c8HQbhoiULPvvP7LZc68OP33PdqFsBTJ32zqw507cdtN1XX38O4LPPZx904GHPPfUqrb3osrOam5sBrlpdcfKZR9tIFwIFIMG5n8856MBDn3/qZWvtRZed3dzcfOe9Yy86/9KnH3kxCIKlK354+NF7AA7ebocRw6/oVNJpQ82Gu+4b643JuZ/NOuiAQ55/6k3a6MLLTmlubpJEZp261dmRUkozY+cesSMR1ISNMCIELEQEonmJn+/ppzrAIYvA+ndAJG083zXuM5U04Kg/Hjfn05mbNm9y9QSAl1958R9X3TjxmVdef2ty1do1Ktf22w++ePjlTvf/HQewkHCi3VF/PGbOp7M2b9rkStz1lzQ3Nz37whN3jH0gkwlHXXf5iorl994//rIRI194+pXqmurxd9+sX0598aVnM2HRA/c8EQbB4iWLPv/y01xL8yNP3D/66jEAp34wZdacGdsM2varr74AbFNz47MvPHGno/nXFRXLVaPNmzd5mZxWcz+ffeCBhz331GRro79cdm5zc9O990+4bMSVLzw9ubqmevzdNzU0bnIdpu0YZwN48aVnspmiB+55MgzCxUsWfv6fTxs2199xx9g777wLwMuTX54y5d0dBu/w8ezZEJkxY/oxxx039cPZjKITjjuysbHh5FNO+2Da1Lq6WqWscwCAb77+6o233wsz4e3jb6tcvapHjx4DtxqUCTODBm3dqUunst69O5V0pjczhaAQEHpolwMKLSO4PrQAmSSkBAgE2pXduvU49KCjABx+yDFaPXL0xUuWLPSYSFyEdvzdN1x71dhzzvjLe9Peqq2rAaSlpfnhx++7btRNAKZ+8M6sOR9uPWjrL7/6AuCsjz8875yLJr38nGct22+3w8XxkPnfcZ6FdzUPzS3Njzx+3+hRYwBMnTZl1uwZ2w7a5quvP3/siQdGX3PTi8+/9p+vPl9RsUwvG++9//bLRlz5wjMvV9dUT7jrVv2RDQ9EvNlCtS3g49UD0FGIONV37677BQLquhwBUkTgusXhxQMBQiXjdFQk7T//5jEKhqinkFAW3HHPuIuHX3raKWfWbax79PEHNmxYR4kAfv/Dkice+Wc+l7//4Xuqa9dTCECctI5v927dDz34jwAOP/QopTzyH5ctWbIIAkCos5Jrhwl33vaPUTeee/YFU6a+W1tbQ6C5pfnBh++7fvQYAO+9P2XmzA+32Wa7r/7zGcBZsz684MJLJk18xlPg4ME7jLj0b51KOm+oXn/X7bfEuiB95IDizKgmEMWhkhJNjKgB0zVwGglAH0oBbQZxsYWAs7xr4zA9eMvoh2OaqtLyNDgeSt3zTKTSWgCPP/rglVddO3HSq2urqu64/dZ4XSOfj1qamlpbWpyyHvPFSa+sXVt1x+23xZi5fL6lqamlpSWm/dijD468+toXX3p1bVXV7bffZi0BkMzlc81Njc3NzbFNHn3kgatGjf7X5HeqqirHjxujkxrJlSsrTjzu8HwUqc0aGurH3zbm7PMvuujiyxvqN0964dl533xJ4LGH77tq1PWTXnpj7drK2yfcbG3U1Ng4fuxN55w3/KKLL2uor5808fl533xF2Ecfuf+qUde9+K831lZV3jHhZhtFKgDh7/yQAF5/bfLkyfFX+whAgKbGxgnjbz37nAuG/+UST/NrCB9/9IErrxqtat4x4RYb2abGxgnjbj773AuHX3xZw+bNk154bt68ryB47JH7r7r6ukkvvb52beXt42+OSAiOOfb4ObM+3Lx5EwS+VwHBp5/MOuiQw/754qu0dvg5pzQ11k987olstuiBx/8ZBsGiBfPmzpmh0n6/eNGTE9/I53L333VrdfV65ws6Ao04vdwFu4i1AqHRwa3RADqECRHqKASoLwKa74PAjOnvX3zJFc8/+4TzJULAj2d/dNhhR0x+f4610TknH9vY1Dhh7A0jr75h8hvvV6/fcPOYaxuamjTUi4jjpEB57qnHstmiR556MQyDhfPnfTLrw+bmpgfuGX/LhHsBvPvWazM+eH+b7baf+/EsE8ons2Yc+sejJr06hTY698w/NTW3iLszZiEQY4wxtlORyVuKlzof2dYWZEtoDI3orhnb2kbSIJRMKGJoGeXyoFOf1iKejEghaIwcedwBAJxl0wfuM7ZZjKCnSkdHSLpKaxUEfpTTlaertLlblwLgj13/eKbt+CbH7iSZPRRZ4EKY8c93Qwf5twgx5s+DSvhToIyoR1uqEhSI8otSdSADIGkmADKZzD+ffvnKay5bXblCd5h4GRyWAHEu66eUpGZLDBIh6Rdj1JjiapU+Cg2bPkgoIGERN0GMoyV0+421RHdGAOL+AAFp0Qbk09Kmnt+nfa2kE8HiySe+qedB3dKxg9uOJYQl8wBEDEAvEgEKAtFfNYYBTDqf8AfupN1VRCaTeeaxSdeNuapi1fJ2yCkoaOIhPi1sJcyEWU+zwskpPi/aMrSn74+cHQQo5CIpo7Wnm8lkn3nspevGjKxYtcKXORy1lycVE9RaJQhveR23aeKatImIIa2NuLm2oamhBVbyUaR7cY1ANCPxbFSBbLbo3fem/2X4uT8u/UGg8wMsNVehw4ReeBG+0Emb0p60AoGICYwxEgTGhCbMmGwmU1RUHBQFUZhHahHdaxGrKkAAOk0TT3asBIBalVTVnVyAQHRdCiKB/s5uR/sohWwmfOHpV/9+zSVrKlcmorv3gktWXx7L6y420jJ7d3Xw1KMv3Dr+xhUVS73Mng7VZGnkRIeYhaaJrg3hg7+/wkz4xyLEHiig1mutIxhLkBpxCgkFfxYjUNHp5vefgZgICZLU27nPPP7ShLtv/e67RbGRvNN5dQqoxkRAUoQQuPmbIjA6jAiDxDYC6EWKqNIEBG4rLcgwk3lx0pt/v+KiNatXptiIDvOUIQhn2aREHdhJLj5JKgCvlMpFZy5ARNMmbR53AlXq9oYUE1D01mvc5TqYnEgpOR0UktD9x76PRADCqjSK25EAAKgrCjrW+3MRKM202AW8Y5UTsFb3t0ckAxEjVOsRKpi7GFA5CepmZk+WTgkQIgIR9SiIIIAA0IUB1zUEVHEAVCK0jray03f1SkAjgwYbCQL9tdG0ho5UbAIXljwZuA5SOq6AqkWqoWvlLJPJZJ974eVrR/2tomJ5uhwek4DQwlrQaswViCVp82qu5/71zoRbrv1u4beKrDKLD4/GGOsUUzWsEO7H7aLIQmgCgYB5/3t3BOjUptAENAGNUcLZbPbVN6ddctE5q1ZWpHrWwO8nFGshYgMRul/GkcAII4lgQ4ErUwVoAgNCt7J7U0KspbMhRUT3BMNaBqEBLCwkoI2EFBNQSGvFGOjj20UoBtaCsEIRkchGNs8gg1ybkcAGIiCbmxlZhGFYXCSQfFsb83mSAkoQmOJOCAKxkc3lo1yOtNYYXYNPNAbahXSVP9YiBuoSlPORVN/6dy2PW1qAhPaB2ouABSFiXO5ONVf8SoM71XmknSelwEmigQgSC1ag0pbgFxFiaMexHfwMHQEKTeWOlGDHYwVnxi2BQzv4oMNXrlqxpnIVHGqCLwmawNsfgO/jjpTbyU8ioi63CQSBNozjViHEujktWKCtFsYKphi5qUkpFwChs7BeRViCqaAJ5ag8vGpOAF+oOHEm6vj6UBTja7miufY+mPp3piSUdNtYGlfqS1x5Wa/ek/79zxWrlgNIz4paCyCR9OdAEVQSlPXqPenlf1asWuGppQn4kkLBtgg6zajxU+FZ5YlfKnRi+d4Jd4WOvDuqk5QooY4YCjoHGCDXkm9tagMR2YhWUygk1tOJ0p2gT58+jz/2yNIffxQRFyMIUOAyaR83qJHB09I+FlHtBXGwFQACnR10LZVgBBiXbTt1CDgWsToCCzEkgEicsnqdKQDS6buzuSC+bUjqbK5+mN6WFgNJHHzgEStXrVhTmeR2zixEEvGclomZhSB0YbgdcNDArSNr11Su2mXn3UVk1aoV7oq6Y0fFqqcKCsFjtOPj5NKPVCMvJwGItu0oIQDQlYv7T5U7M2pPxewJgZsGUuhpUIJ0neJYqHgCGBFJXasLAIgl9f5wO/AsRIlYEIDRyzlAKHDflnPgzSr0Jyq7+iIPPfTIlRXL16xe5crVME4X19azZAf1xPe9/llxGhGIa4jYUFpFDddM0UvGnBo5aaSlWwI3swg8QQfKPgVaWVgGgWOj5U7nn4SC+vaYqpVy0VyrEHxjL6VoJID/cFWxMEmBCARG4kjjOoTOfx3Jgi52NLTMiBB0fPWNBQPNRTEq5TjQOSDd1OrOCEdF/IHXHU4oQJynxc20lNogoeWtaACU9y6fNPG5Cv+tAyXkUEWnMoL6nUdfLyJ0o0nB4ycnFB0PpKVuoSFpABtZ3wkGwgBuNYXxEpsjIgRoTJK+AwL88Y/HVixftnrlCkDnKWrqIFEEWslkbCCA6J6bSCBGwAjWWkjUmjNhRkzgMlISJPN5QiTMAGQgxkLEUGih8gMCC+iuGQsGMBEoAoGAjNraJJ9HcVEQhFaxQRpAd80DNhMYBLC02axIEFjLXCszRTBRkM0izFiBAXI2CsMs8hHCQI0VteVsrg3Uq0qG3jAAhOlwkHRn3B0eVB7vFO0cLIWf6rfE6XykAAnrR1YICMRrCgAmZgOoRxTKkwjlvNMxU0w46ToIs0X4qSrxzXUya1f7CxATde06RtoCSFNPFP8piG3x6IPPZrPZ8XeMSVGgnxdjUEX0FXfKFlloObWbqN8MFut3TzK+rUEI3CvNrKO1Y0YSp1O+WhmBAh9o0pUEVBUC1GtmwKSCQwyKGuffjp13ZtJ5skoLOJliZAsIKBQL+O/aKhcah+5iswXQ0d23BIwVr1q75p331sSlqm4hxCaKD9pBgcoEKtdWVk15PV3oId1cZd4CwZicHnh3SYtBIg+Bu5EJAAI6hMq1ayoLuXuC7dzOFavWvlAAJhNJIbjJkXlQGjY1RZEFmOzX8PIJFM+3IipWrly5cqKSBp1GAgiEsKSLyQIINUJLTI3QCUuDsggAWhGIPitBNJUTSCBJFFAV9Ng7CUgCYgW6G9oSFIQ6J1ElUxw4f/eWF3FR0RICm6fQSJGIxM4Ss3v8oRey2aKxE26g2wmtEqmDxr0V24mgPwPanfpeYLfu3a64dFRJcXF1TfXt99ycj/zeQtoUGrzJXXsBEI/SGLbUt6IYBFRCig/vAADXGzHQq9MBlIp2rD/XjwICHlTglEAxlhOHQnVx5w/uwQYAdH01ICz9w6ng+tflB+hgEP+FGQrE/TI6IgtLMXCnGjxJWMCtdzPFFCIkHnvyxWxRdtwt1wOuRwnnmEo8lkc/2+mu38SNz0BQGysFkqBLQABAIC6oiu8JzzPumURhwA0TLU4ihLOFm3T1XKCEFTcNXn41R0GVAy9fXJnSUjQWAVC8dgZwpaljlaMjmgMX2kQEIqLzjc74dMPVqe6MI+q9BEirD0QX0Ys9vYgUwIUyAKA6DvyXJEALpjSjnqRjkuqnphUvu6fmjlQvRRdHAc7sKcTYUomZCoaowN+pShWCgKmsqlzz1usw2smJnzhuAoG7waPPdNKGCnB4gNKl5y8CnXGdMUWPdcuQrhVaQIxQb1pJLKAjQxGIwISQQARCS+D5Sa9ns0VjrrvKdZyypxjRJXUr+bwRg8DQaiYOIC+AhdhcLsy1RrDIFgsBoRVBZI0l9aHNectcZMNATACIWNVM7SsSGAAUidrakMkIdLiJRLrwJNZlLgIClnrNIKHRiC+wxgQAaMAwNEEgkY3IABQYI4ENMpLNIMwwMG5hRa8AAQGEkCOPPwAUIPE3CDt0ZwHQvbmu8o7taxIs8eUCXUDVl9Ndp+dARK8ifK0D1w0eXJXvRwCOcQKEJBEEAETijTRa3I7mT4JATfSLIADpRhroGcVsUlyl42kaCNcnqYqOFlBoR14t40QonHI0iOgLvgvQgXI7cLX69U1Cl51clZFQEKSur6RgMkjoxyUKsfCFCK4pC1DSrUSQaES67S4xiM+fYoiFgZdHg0tSGB8BSOZUt42HgED06Xh6p1IgcDMGjQAigQZrpQagkKmebhnSFb5BTKEdEPAaFPKKLVjIFIQtLJK4vatPQepEDUKIAQ1gvZ8IHLUUwy2CCN0kBO9vCnT//lhE4BzdDRkAKByzIESkqbGpbu0mEWMtrbUktbUKpbr7DwCgSzUAkJpUeF/XO/UuUjmDOCoEHD+/04CwEBMGRsAwQBAaMRIGQSabzRaVSNbawBJWEPjHXhWAn+ACAIQ+pSdjkBExJIg26IzjNBZAdEaCkLAisIhAKzAiGUHgd3Opcn5mhDOrdpOkLeH+U9b1bf2ptnS2cWRcbbqhQ4iP4HJHJ7NiA6JEXN5C0A8VcXLrp9bEJAsFTHBcqafsu8g18nmbupFHJnStKr629/LqietYLw4QIxBO7gImAEGQTMT5KUg0EYAgYYUWIhAhrI88AEVsBgjA1HVLAqopCBFaoRWbB6kxNrG0Ar2BtbRQVwAQgbilRCeXiNvv4bAIb1YBRIQQnTeTURwjw5WKJMZXsgREjMuFALWW4ymirqJD0Ns4kVUEpI7TlLOo/5KgJbdo/C0U/SI4vuq8sawKqqYvVAtE+bxqbFw2brVeBKDAOPWd4CRp6RJcEdF36OxAiPGmgugLsNSbDHREXYKufSICiHHcdDFbcbWLKHBWj5+tp6ZzneOLVEKnu/gy0ontwKsAak7qBXFapPpN9dESqiBxf9KIoY0Q5dwqnM0zikimbnwQAiEpzg9prdHVcHj3sJHTFaLxUU0AERKwFvqrpgKKYRDqr5aCVqySiD2UcA/VIGiNBLQRbR55K2FIAC2tLMoExpCECWGtzbVCjAkzEhiCtISu9QBiDPQ+rLVCUkRtYSAaWDSn125BcyszgQgAI7SWkVhBEERNTRIGpqhEhPmmZikuoaXRThaRKLK0CEOhqBsx12ZpTZhxwZ8kI1prglBjqMDYXJttaY1gGZjQ94T2oD8QPQDgbAlX5DBSxzFauoAAUoEC6SbU8cRATe+Jd6Dy34KXzb0JoM6gVQnfNycnP2cdw7EnHdq+6P8Ajnjszl6YWAunVDKafkI/2XKVVw1IzCg65OISZUeCAAuzCq1yDRNDFJDtCIkuBN24doXUJyIbCeA2hSNFqp1UMaQ5q+P7EimsjcG1NkCejDT8erHb4ceniZCxyr5qC0BAnHFI5CgRaDRnUkumCDo0PWVB9hmziDF/jmkafIM0fix5qqBdSQHEbQWAWxlKQcotfwbUMfT2IGK5pED9n6XjVzG9oIlUhF4XGZeOpMhsaYr21WRLQ7PejVXTiwiJVGLhDsVLDyb8k0Itd4UC0Ed5Bw5T22mVmCAIjEFgJAgQGLeeLiAZwQo0ROtiOYSIvBcJANHUxMU3gRAgEcVsSJ1uRbnHs5WrhdWJD9CLIjezOs3SnSD6FlfEOvhD/+EQSF1vTkrStQXHcUN33JF5AbjRQAgIAhK7tEAHus5NP0fC/YOINXPKOHA8Eg9Ia6dJerurKd+CgKiJNdcs8EGXM7gXAFVBvT8OUkh7l57H7wLE8UAg1OzZ/SyJak6BUCz0Ug1Uw7QjRXjeAJwNHf2UwL5aPzpWABAjIupgDgiI1ZFEPXfjQOiGFZx6SaNEPG8XPxFQBy5FdBVDYvRkePs23rc7CKrKEVAPFlWfWpPgqBTxwf8vUCCFHzeFoGXi1iMAwE2mmpMDFJd8J6qSSAKZG9ygUEREtASJ+NrB1PmF0JlEYq8WQL0uyUYVEd74ygUCH1xUK82FE/fRA9H4wY76OrdXDlTiri1Bve7Q7x0pCASaScetbELSuoFC0AJGs1+RhKZWAiokoAPGEgY6NlPcYwRxpYSaAkbXPgIJQ30aui93gjoSjokAgEYQIpCA2QyNwFpmw0AzYwE0SJvQZLMRaKieqI2o3WDUimEAipBCWkFEayyQt1FWJJdjJgzE2EwoIkLYXFtkI8lmJJu1LS2WNjRZCKwxplMn0hrmbVskYYgw1DkGEIDqWCYM9cKPNi/GQGAQIDAExQJiIDRhiBJEUUQy9Oo6cH7g7OGKClH0LC4hNeKRgCRu5IID4o6IQaOF6ENDRQB8dcwhnTdu2nH2ZyksAGBgagb277m60rinmnhwhAmoIE4J+r4XX6h8C6X//xIcZ0G7UZS2RxoKu8K9J6YGVOs0mq6YWoAEO/ScePu3m+F+EpRHYYHScRaGu2Z3cS0lTMcDFJISwMWoDlVb7CSS1vr1JBfnEjGQnuM9dCxpD17BWAZqGBPQB65QYCF5UK0nPkpr8PQibEHiX+buwWES8GbUkphsO+LJqYqQ5uSm4DiXKoD/ViQCqTToJ7lvCQSOt4rmIAkFLhNNE/lpgkJGyLe2Gf3in95+1OWwZLzrBwER+OlU4w0B30sO34mhBSqnrqYAgEt3BE4LTUyEJtD1F52JExUJCCTWKBkCrpYAQAsJIEZAiAVARkBACr0zOzUIpJzY/WAQSYiIFWQ0PY0TBg9OeA9a6wTQjFHLCYJ0CAkNqj5Js8LyDvQVvKYdQOI3pLmkCuOzpDZdFatHgPTrnP8NOD1BuAlXi+PWfkOJQB8Cm46Q/lincSdcuzCdkjg2C0H4iU4lDfSpke4OoZDOPVxjgoLIpQwA3OylkHQ//QD2Y5lImQYotN/PgXg9VDv1H52NCzgJTrtvAAAgAElEQVS7j4QPU+X+XJOxWBUIQJIu9UrwEEdoAn4gANDhJXCXpgBS/uywUqQg0Csuj0NAEtMoxn8PyWBoD6qKO9IPQmB0dRYCWIgIRPVyNnRVgBoCri+VhMDhqXE8nrcKtVar4rACZ3vR1h7VTUqJx7pUNzGyQwVSxiEAxrOViKjE/s2d6V0O0WsV//0MgQB6kwF6YwFuSDnqJECKIwF6BWkJiEBgrdtYAQBxUy8c43zQ6QdouI51VBUFoIijn3IVQkRMSBNCYvYCcdcWAiROAxJ6n8AaI8rAWEKMDQNYgKC1mlQzA9h8QKLwKgUCWlrdNdMawYhArH45VQWwEJKRhURWKGEgQJRrs63NYi0ACTImkwEtjRGBoURGJGJESCajK/wWFGutIUETESIQAwLWMh9JCOq2eWtprUiglgEBMQIroPt1FdcZ8Bb4BVANHDR377r4oCEAgly+c23dgMXfl9RtcvUuXdMTujd1Vo13bn0GcJ5hXTUAoGLX39UM7F9aWdV+98QWIGZEaHx1USZW7v8NcD3unMmptgV2sbG2UFcAiVXjPvH+3Q7iQj1Io8V2gO9QPVXZOpJKgO7N06FSaNfEkoDkAE0yVE4nrWJ4NnFDz931iKL8Aljm0qx1yKeA1DABeIZxdbpQD9qDAAAJ67ZDiAAkKe7XXt2yscMS+BRtS7S2DD+DmygFtbAAKq4U6Onbd6SToqAnPg8thAK0n4W4rR6oOyUj8efBXx9KYRNnfCIPUBAgecRKO3BMVQ3S0kJdV3wyIyAoGmRFQzwBKYjw+q+D0hP0dQI1bTw3AIg/naAiYkQEgREREUHyAQNYK3kLa9yir5JxX1UEYs0sQZHArTzTEvqTW5IklA78PA4CeYu8pW5AF5EATIVGNYYgEbwAHBG1mP+3cM0YYziIJ2EATmhvgHTZfwlqTwKE+MTW8Uz6CTqE4Hx0i1oAIFzQVgunK/QjufRCYnTlrZHAl0GZqq4krN6C8Io5fZ0kSY5HJ6fD8bzS8rpKgWoohox/3RkaMf3eJ8XS5uqWMc2YI9TqsWgUqJ+LJxDL6t91Tk1JmgJxjHylk7aQnQCaqbm6RFNxuISIxESMfmUvoSLKR/XybWN53NCEiggQegEegwDaa94/PYWkHnG5drinnar4ZdAW6oKpuUKZw+fEDs/VicCIaFarNnDSijOAwIcSJEvfTp5EXl+qAYWkpnRapSqIR3OMQDUrCHVV+nVwAeCW6t0rcRd4YTwk1nYcFMktm5MEhSSVkTMMIDAGIm4IK4FUh2srADqG1TldHUgIJIBYkKKDNJHI32QQMj1MnRt7Gnqo1SSVpnULJQREDE3AMHAdAn3TVk5FQXK1ST+qmc8hihCENghAirWAgQkFkebiGqZ990IAS7oLOf1yLcjWNhrRJzwCEAjDQDLGiLDECOCulmzEfBtJSCBGLKwJQinyopIUGDFBmLG60BLlYMRaIhfBCMXAeNsZMZlQ29l8hHzOWhsUGe1eG+UhIpaEjb/JSqbixU+CM7nHEt/ZQEl9Q6apeXN5WWOvnv/zwUeZ5hYAJCBQyxKA8xDq9Yu3fSE47xRI8tg2h0QXEwpctgBctZ6oRr6TfxESYZywafW2BK5O3H9y8NOgOisv6piFdplXLUUhWTjXqUDoRNMDtUJyii1xd5iesxTOju1biTL1dAGBc7wYR5uAJCRSgv4xiwk1h1RQGB87HP8eF2qRH3i0gL4gHWZ0b46YuEpbQMpXKRRgelT6r+oScIGHQjASkKSIIf085Yg5SxAQx3QLQOCnqhwUSOroEMmYKNSknV7pceobJEwJIDYjXKGvd+eC9kMoJqkEf074dtIABKh+6W8IukJP1KqdBUiek+h8KpEfgN4rdT8HISKkG/FxdHWnQrruJ5WvHug4AfRUIA7fsRNB2rQqM1xHCgxERAzEGGMgBjBCwBgRIzSWJg/CulWGAKJ/BqQICbrtbUIwAjJgTocwaQUiEhq37qVW0jwvT1pK3jJH3UUNgZtuRX8zm04FAG42VOmTT0FKd1fho0MaB0CBZ3hwdRowC0GtU1guBMV1r2ilAEjilZ6p0G5GUq56AdYORISEjZFdyIHaNxZXW7pO8zKnx3JHyrrpmESEJIt0kgDww8SLndRuEZRD3FB93hJ5LxOJWPe0MAKIujsIQGNKXBW7ZGIbodM2hlgsJ0F84tsC8D8+TydJPFs6LnTeBXEcUp2RUHLaaRnciBHtboH4JCsWw5FVPZx3JhIqkPCxDU5hP4CdPB40BjunS0YvPOX/Azh+OlqTpNfXQUWC+jEhmv6JiAHcs9jhlqsUnwBIfbaPqBq+XJUjjbibZrHVNC6pCaDYjqu6hHXLBhAwRlMLeRoQp4IXFe5DJUoMozXxmUs/HYYIqVO7c3fHCeK2pwsgcKaH+ga1RKmQUHFUfQhIIa0iGwENrI4FB4TEJDXYkRBdHIdTQRUgSAkIQGAkgJNUaEkjAmEQIHC/j+QE12HkTEGN8BBPzx0aa63kcpDABNCNODABSaHVZ6EKAL/W66SihRiDAKFuYjE2ELGEiDHGCkT0l5XEgoxsYEKIAaxIAGPEBAj/n97erMm25Lrv+/1z71N1bze6G2hMbIAEJIIUSHGmQlLYijDDDCukCA8vUoQ/gT+JP4gj/OwIPTj84Af7wSHbckgkBQgcAQogBjYGsomx+1ads/Ovh//K3PtUVQ/gg9etW7Uzc+Wac+Ww99lnUR5kF1Lr53uE2tKSic73mzvL2u/PLF7ajbcNmtZFtK5eD/K2hk3vl/N927qXZljMZvuy+bTirV0ua5kvRkF/9Tu/9Pr/++V2/56H3gMbiAWAV7/9vU9/6U++/fmf/8u///m3fvZTn/zyV99+/cPf+LVffue1V9e786f++Muvf+Mb2D/+6Gvf+LVfuXv1FfX+4W/95Wf+4ItyiBm2r/3Wb7z12Z/9zBe+tNydv/qPfiuU//1//U+Bz/2bf/fam99559VXvv4bv/rORz58eufFG3/yZ69/41v3z26/9M//q4/+xTdfvPqhF6986KN/8a2f+9Ifz+DYxXx/eIz5uOYJSDg/CbPhEUYoC2Qu7M8UOhnnATZ002t9APvcmctSM72e4DnUKGsMgSfHHRI547pLLS96GlINmjIZ0TIsYOVtQkecgfqAxVMIE8os9paD29HssfHwYaQ+JPQIHvBNzZTHHu+OqNwE2b2IWNbOmNxjCSqfBR5fXHG8rr0W5rHS43JOno+knxXp/Ki9QOBjGn0ET3J4jB86uRo59yHMSo8ffNhuGeyts+XrbEVHJ7EKXDlzd0d+G5ZlkcSWu9gV54DdRwZ3hkKxr8k53At5rnRrRpKAh1qMIxsD8XpW8EKqCdb20hbQeOCyO4VoIItGaEfdLNnHrInzXTFC+ZjjqSmf/9m6N7u7BleW/kNRBIi+r+lBmeKjZnmmIBq6Lhk2OF6nWLYZNcfCEe0IWZXpUX1gbK1KZK4xw9FDtlm5i1J/h8a2hVGYBksD6SiBqeA8uvRolAfSTmq5Jt4eZnxEfq8ERot02MgkFXssNRBNcinszhS9nJbSCMoQNFxvjVIhkBqOEUbTTP5HmOKbPeJT6/wXgHS0UtCvStVum8T9JGWOdpJaPaMLob1TKtWrnl3ZqLXbsyQrlKMKewPJORliRWCn8B6wo5k9NnbbHGA2j0gqiJbu5At0dmE5Et0JRp8myEGl7UxSdqertULS0XKFEsVGTXg56lYwpfEaDoFema3GIQ9wTekuiV7qqLAEtGpM7A7xiphJfMYX7NrvEZJOIlgNwqcri+MjK1THFwwKaSmOIsfSrj3TEbysLMu4/xbTVHjZdXMg8RKJoqWhdctcoDXZveO2rv18EaY15eAlQSjo3a2ZpZ1W22TQWpbazU3futpi1Exf64XB3s56+4Vvb9rtrenbqkUvCTrOxqwM2iSU5ZTgYjdMk25vl23bbpd2swqBjXnnxWVd1LuM2kpbTm3t211zb9AbfufO2yZ335/B2SWUiQ0//twnv/Y//Jf99sSTED/Gl6X3Fbz25neBt199dbu9+fJ/9g/PLz1/44/+7NmPf/K13/61n3zkNeOv/4Pf7Denn/v3X/zUH/6RTAkNmDc//wtvffZnP/WlP/nYV7/+8vf/5u/8/hde/pvvA5/5wh/+nd//4vPv/7Av65//5//oxWuvfeLL/1G9f+23f+Ptj7wWGf76M5/+8F9++5Xv/fV3P/fZ77/xyYQIHOjX758Wouax767ybrkBE/tBnyO4rDdFXFUDttt99LXp2LjbWWhuplfwhoz7OKgeChpAIJrIfdLdvNjY5FnbKwHrwti1qgiXCFlrptFlUhNg9865+777fu7tH8HDIDmQmjIEkikcfav1aG9nwM9eeor4e0Po22zj9vdgBAyn2ORsFVvaNw+F8sHg2l7v0maK4Cja2PbORqNR4+dILli7HfInCWgg5iI4R4u9myIR4qq8F56AYBvseho4+CJ2plfo+dL7ubueCRaizux3+kKtLcvNIkgoBnURTZY6FQS2GQPCjPmQA62jqilkMsuVKRFqjlLl2Za1e5Mkqa3Ladt69+ZlQ5C4F5JDI6XSQsch0DF2dFzsxcju3ZfeOzK6oE3qqIZ2pADA5P0L9QROgYRte47f8XPl7h39qjQET0N4DYwjZqqHRjB+H9BHpYvOsL0fcTSj194Ug5cXU5MykvL6nXSY1riGMntCKpacIs/xYcj1kHCXoIr7+qys9xhcwkqqQ5agZ3hW9AhGk+TULKJBww23LMqvWRhKoI5zNtMN2LGMuLpncOg6dbuqeheoABS0MmcJSq17BNkVH7okxjIXGOxRHXoZgbtzlFZKqKo+iEdhV9UkmYp4Y1dhXg26767du8AQBqg8Fo8dEQ7iVEv0EZDxvye9qJ6/YlDLaJWk1tRaQyqzlehWtqNhUCEymQ63K1Fk9y2vHLGNbYwEOR1Pn0GjQLAPkcPqtqSN+eYlzngZSgRLILB777jTu/vmvuEeTEqlPkjhEj7NZZialVtjWSNnkAN7AKVfUueMiGHFkC59pNz/RLg1LydrqVM8O6mxWEQ5MPQhrjG2jOVtXbi56X3ztrW29q1r2zifOw3T5S7cWn3niLvc7e5+6ecX2/2Lfv+iuQMNa7soRrzvyum+5dsTp3XD2OuGmry0tiwtr8h0By+nU2stbva2qYm7e7/zNqv87GbdnI++t0wg67q2VWr9/u5yubNsxTdsNGmBqNZ8s7Ksq+0f/NZnvvu7vxKDeF3uPvHqN//7f/yZ//lfp2bAlVPGxTGkMLTzBfBp/cEnP7HdnN744lc++s1vv/a9t/7od//J33z6jZfeequ35tYsvfrmdz761a8N5/L2h1/98cc++vrXv/HJL38FtZu3X7z+9W/+4BMf/8lHPvz6N95slwv4B5/42P2zZ5/6oz/95J9+5bXvfOdP/4t/8jef/tTHv/JV4JW/+utP/tl/vH/p+fff+OT3P/Hx1/7y2xWbued1Lec1RJd3Q3hQn+KsfNB3xN/7wRQp4yJr90EtU4UPNVCjIL3SWlSwoOYqAIOUP2Gh6nxwmSe1MfAJQoeOPPWwzdgZH/G007dt2NIuG5pqL87OHNXfwM6UIeqh7HMIVsLaE04uNKT620MW7lbOz0xNI3sSh47zaFC3PTbPc+X0AZkfVD7C42rPX0VeiQzt1Y9A100plpWv3frAgO9GMC0HtKJ1QHh/CIkOKusxvhEMbMwm7oXFyRLOUmTyMIjGzfPb+5/cU16JRWgoU4kN9eURZSaBlZFwResgvMccOoJZiWJJOLNIKlt9z0hramqYtjadcOuoyy2MAjVUZ8kVSNT4bWJFgKG5Ttwl2vlyoUXgLXE1N9xgsC0kcxlf2WGDVFIX7Fcx5FDxagaNsLXkK/scmo+x8gg0ezyGTCN1DQzsh/CY5XAFZUBmHIBcz07ae2xM0X1FRzBuzhdzH6Wd18KKmmEXuVU7sKvF8BVEu7KPR0XpajBGWwSzO7VUbzCl6CYBa0DIyge0UwytoVEFui1dLf7SyBE110XgSvwjBmTIHU2SldOwS0kyIBWpcSqcfS3YGTk9VhhkNLRI3Th0xIMEk71Exm6Rxvg6noESV5Xh03al4QeBI0nj6wGRynAByXYNfqpMU3NbmnvmGiK4PQeL8yvrb3ovD09Jd0vYXUbKxx8drTkYSsQkCYtMlL3W7oNdSDLkZgy8PUCijYNS7RlWoeu+uXcpHijK6V76DcmKUJTbSU/VJkze442iiGXx1mBDzpaUykqid8YCvSQNlA4ikVBGVYVqO7GekIjkHifuAwov9i8R69oZ4Mva1Ng2lnxaVZK8LDkWB8U8qgM78l5LNbW2ZrXdnW+JkVrzIrQsm7fLxSBbrWmzWnNDHtp6vKKnd42P0urStwVJWhbf3jZJmzuXHBC1mzXMHCmXtbWTl4Xt4vNFbVFbG/a2eZgp+78V/PKXv/3GO5fo/8Nf/vT9Rz/04d/7KrtJYrJRNCCePnB1P61AO1/un90C3/z1X/7mr/9y2s4vvwT83B984Ru/+etf/+3fxH7961//zO//Xlr7emrn848/8bG+armE1YwZhfnl2S1w+5OfALc/ehu4v32WYD29uAfdvLgHtmfzBoIo3x4mjQ8E4hhkzNIDmxybHkJqH3Md/Y17TigncZPlwQK4LPyIQM0HFXeCMc4rpU8/eRfMoxjUaxU8TtlrRitzmVZr1n2dL8oZWaIRTDD07k2Ql2GLNrKdFJEzzJ6AOLekziHursSV+mWlCFs5qmpUIfIeMLgUi/puxdlFuxDRSMUHsDdVso6yk+JA3suz9d3hgZjHHgYSBaYEeg+lHgsziw+apqHSRHQrKA7vwujY6QquNQ0TR+hA7+MYLxgWWNA3u0nNS3Uz0+YJ0+cvv/TiRy+280VCoqmh1vvW2egzstORsRJL/nwMMm5Kph6sQCMasny3UNOyttZoC0tbltZkWKHBqVvpLRAWZJphzIlpyi2FhHqHvKAskWZICLlzQd3d+RKxIaYoXcpByQAV6akaFwUCcBb7Vahptyw9u0qjd+YHhi6HMChM0sZQI6UnTTvIRDtcOBOzFKFYDqrEcaXpcEstaYQthHNTvig5tF0S1aA4yLoTn7C3CllzrT/FmmhVP2AYU2LPWQd0Uu2x+wqyUbLhJGXHgrKxwmXIEwzBMBqYYwYaG1Ij6ZGXgKMuoPFT9YeLdA414v+9yDApqgis2vytSKk46EYmi9HBcTAz7MYaxK/lKYYVlBNZHPUbCoV+WlyCPAGlDpOLQX5gMNc0NTHYBd9DPH9dNMfzJTvhiuIhiRg0jZCEmYxtkCQJd8DOYtEQCiJieRt0Q9ND8hHwu9wDbGZEmAhSlwxxx/6A7BTsWUHxDa6jcYkmyuI7rlJSrndrjAtV/kvZiOXkS9/9EmldGTMVw1qDFCLbQ8IwBjLLSjtpWcFTo7KWQ+hARICscZJTZ7e9bdh2nqGXs19jyT3e2g+4z2TpuM3g1tSapLiX0yrBskqts7Xeu/vlfG5L66dlaVxenFlP6mDTGqipyX07X9rp1IHt0s263rC5nW68NDrKYeXlsvVLO930phbJDbe3arhpaetlu/f9eesbN6u3jrvO92rQvdosP7p7+Y+/BdD45r/4h5/5n/6vV1Mc5pleLlcC5cy4rdCEvv/GJ4DnP/rxzYs74I0/+fOX//otAHy6uxN69Tvf+5X//f948crLb/79X3rrs5/92J9/5fkPfgA8//73P/2FL3zld37n25//xU/94ZeLTWIgBbPe3QN3L78sdP+hl4GbF3cJlBcfegn8zisvA8v9fckW6fCeGZ+AJ+qj2/HicDkqHsGDhifoTlt5M66T4H0vVMe92X0Dg8aQpZQwzGjHJBdpR68OhgwcahhXZXVKMQEMOCsjAOXJmeDtA2dXSPN6MIpwPYtj+dRq4VOjeNqOWTUrHMpRbNxP2uHI90AkhTl9VEVpe6zcQaSDfclD9oN0WB9zPDAyL65J2oLWRqoNTPUH0yt5PhDsnpxQ16PqSPNdVIOnWE+RJguza5p0fL1LPCpR6AGDrhQ9QqEdkqmFbOc5pWTzNNZUZS7doBtxGhZI/lRmhGVdP/SRV+5+ckciWIjW++V8f98xdOyeOyhgIyHRhxNNhb6pJz1tIpMkY5e4otbubVnauuZH66K15ZAG3PrNnZZtBFuXG0hSDoBNiEXMZoq03WEzMpvR4Xb4NG2emuuSRMPYNW1LAgmjbm9S270xjVzkZnaM7mO8pjbdhtFnl0FjrwqIocrusgnXyMVKwdrFO2IU+qHXnkwYmRDnsyhTEUkWqJJ2uXE4DQ4EDyG3w+MqQ83tRx30RP+ZriBLmZ3j6DeMt5+waGqfvaQ5nBNKspvGnZbIkqYD9wNbCI9d1BEWD2EKAgN3dqqLA4NcGjo5Hqji0EhEl2qaOu2qcDDPMEhZNPIeVdiNklhiT9b2UL3SwXtCeimxttdW/0KZpoxQhXKQHGdSqxaM45oh/4FGioBtuZ7WCCcRd0NEKsRFjYw+8mhWRk9hDkuUVxtSpSlTd9o9PksTuXCYk/NblV9U1ALX47Ou5x8DqkC0o+dw7qzF3UY1iMmQyxVj+EWL5ISDA45QiAAyyyp3tvPQ/yCZZqwdRJeuBkyiU0KNZaUtGot7JaaGobC7uwS9V4swre7OombTN9umeeutGbUs1undwkLdeU0QKiWRxjFINFASkujZBphaozU3bqRl0dIw6+kG0S8XObOO3DBCi6Vm9dOySKBYvNn9fOnbGTUt0rrQe1tX3d4IsdjqvPNOu72xFhm1xeTDs7YWBJKXcYs21nX35//HfwW69pXza1Y+dKQF/PBnPv7Oq6/88BMfWy6X17/+Zutezue3PvMpbRehtz/y6qvf+d7zH/zoa//4t17+67+5eeftfKtW2+oDi227vPzWd1/7y2999xd+4fW/+Nbzn7wNPr1zD7z5S7/w0g9++KHv/tUr33vr9OLuO3/vc31Zv/+pn8F+/ZtvRoS3P/zhr/2DX3/nw68Br775PXCJXeDD+Pxbwuz/UP33gZg33edn1/Lk6zyAD0mbDg1WsxxJVCPXOlVZY8wDoRRdDyq7GiaLKlTH+nHdv26HpckgRg3HPVqKaM1zBuqBpWxOkNZ8YAOSOoTGCD6CQmcxl+uj8YnpQhqCjMoJwyHp9+5gsM/mPHVKykSo1I86yo8Gr9xYgG5vKF+Q/kCTR3o9CRNrylk2MUg8NcTeVakjR0eeIfCEB2YEbG9G9ahuOXXI8DQjAMpSHA66B/GSu2yVGrt3Ln18HLkQDlqZczdNqg+2Rk/J7qiZfvvSraTzO2c2W5bUtJxuTttl2zZ52xr0PmdYwItk17rYtiSJbktseRoA3DsCYWRwN43bdVkWLYvWRevSlqUtrUnL5otO3asPD7greogGyiZ8WkAssjqX7s1WUxervUjZDcZkJj8yRghjOmpqzd4g+43qIXom0yw3hpmvrI3H9REmdkLjCdD8VfCIxjU8ppNJjhi0aibTpyiP8TVrd9E92itfWMhZ+MZoZfhpm0nkSqhRKNrTPsc2KEmqcti7QrQkOfBgVpdym8nLHnK0XwhW0EpLQ4wvmmnltZLnSHwOqhLwIG9QH426Sj9Ol4Q2eKyyPDEGy1QGkvgPAqj+78ZyxM9qRuEohVN+sJPwBx2PLbWU5dO1TgXRZ1wXr9lyha19dE9ij8E7xWMQDh4TMnzgiBzVRm5jN0smVcjZecU49oh32+6dpJghmiTy/pB5CBXzDOkz3EeQ+Wg7TM1yBRU9IOrcAcZgI3KkMOMYQ4jHvyFgO8Nn1EaMeVGCIQ4RofqV+uoWhLB2nbWMDkEs3r2t6pvckRI12GX/oQHBjv2HC+3ssjtae1ulldG30OtZw5yzWwg7vyj9hpvdsVv3tjRbbeu9WYJFuKnnxWi4d1/utSy0NVuy0sMxkpCQ1NRa61pAvtz77m6D9dnzdropwfJHtDXvaRCG88VNbVkwzaitW986m5bWt42+schuy7rSmpXHKvP+EDqoybc3qHkR7RZosPVNz561dem96+7eIp+6hfJRVIjHZ9IApphQqClXL+CdVz50/+zZa9/9qzf+8M9OL14Av/iv/+23fuXz3/l7n0N69sMf3v7wx8bt7vzdX/z5883N6f7uU1/6Dzc/+nGdCNiGn/nDL/7wjTe+9Zu/+rn/+/8DfeyrX/vxx17/3t/9jJs+929+77U3v/u5/+fffuM3f/U7v/B3b168+Pl/98XnP/hBHtf5yJvfvnvp+f1Lzz/+53/xkW9/N0oAoKug+dtDhASuTPF+IIg1N9OT98c6tc+0MY1pLHeri6UcMcBQo3g/QcGGummECn0kpb3fEUQNfaUAOAexAmdo9INIkGExA6NQnwSPhZo7Z3lrnFwvmhxdith0itOa/Qy1fN/JTRkPvwMR9yjLEfMxGLLe2pfvmRYPKdgumpkvGywiH2kSWGpY10z/VvBE96rSvDzqsXN8YJAJe78BJfODamOwuZiLWOVFEuy5793HyoHjTnX82SO1xKulLRvEzE3Bi1gWdHPu9MYztFRU20EyqOn2+e3S2t3bd5kQQ1pNDa1atkvv7moCmqTG1u062RY0uzeD2tb71i35tNbG2N3dDpfWFomlaV3aumhdl6XVQzfr2u5PP2le+1iojcCQsem4Wx0cD9iGxc6YymOXiMXZrNQUbepuVS8XTZmoBUFNugZap9PzLcgxX0bp3m1ONcxFflmq7Dm4JHSnFoFCOpRmIUgT06NZtjmO4CscIHngilTVH7QVxIZjfBVxoT0ODRmVO0767RQpnQZMWSYYoM4dd7mGqNUhSLt8h6bRukNOYebecW8dHWwl0Q15TQ5foxGlQwwlxoxLCiDhJvLoVsGB20FHU7E32g/NWWYBCfVDLw1+TlojnY6H84UqHoYAABsUSURBVLVgZzJOMbwG2yylBj2Pe3ptIOTYu3RWBs0xyTi/diWvQQwzCphhcQjYYJVfgTCqv4bphakxdqk8LRD7MNwTENDy8adRowY5sjWuMYoEm0JNooy5izCJSipTQ4goQKtYyphIx7JzuGv6L1rMYxQHq5BqdgqqRfSqLvHaQB2xWXR262ASBnXqhmrZEXwM5YjywrSdgW5lCcpy48tdcfbgPLqAovyUPlu1kkeLl4WWl8/0gzUigIGcboMsupt7XvGpBmhx73iz6VqsxrZhL1YN2eQvG3CT1lN0VGsYpPyoCeqatvS2LHbHvpx9uSynGzXN/bvttrTes2kZ+kpqrWOJS+u21s3n+7t2e9sul227eF2X25scWbXuTdvihW5aE+jSvd60zUIbtExJy8qiBDE3a3fXP/tvf6cYljHLp2XvcvGhOWYEMLiy+d6UVhsLuTaj0hzk5Dgqx5nkvCzdDRloTbfSghV/DtZllcFfko3vn91+6Z//7kf/4huf/YP/MHmV8AVxS/tf/5f/c68b8N/9y3/6sAqmslPVIngQYYIPaNf1SQ3dnHPcbnqO4WMfgAxgA86+S7TGrXTDMS0VRIZrJmKoPOWKzfH1uAwMkwK287nVUY3tDXWxiNVQc1UtUyaLKy6BOFoWNLSAbUtq3IhFEm4kJzy0lMB5smVESyB2PcJBiQnjcuj+ZC8BcUT3PTTcoWXhd4VvM12DpUWs0KFJDbemVbUnuQIdhPupwXNmAgbtR+SMKbwj/wf6GqiRd2ysGmXcZf0BVn3LUkP5/DTF5ymYgZKhfZTh+Kh3WHffd84j1IMtRqAm1DGoNZaWx2kAWTTbTeruCNN98f2P77bzlo/2b30rL0m9c7lstjG9nGd3zw9NCbl7G7aTspCWIzWA1pvl+fPbm1N7drOeTlrqVfD2sm3rxdDbNj+rBUnbcXh3xt/Q3e72ghu64Ja1fm0Co3et/JIKQnTOhVUK6WHnRajppilfnVaYR1eN6BFW+g+RJmKwC4u4b2/d2VfUCJysfuwea1VNUXeGc0uPKd4u5oEAJB8eK3q8HEkGrlS/SryqhoHmIel1w7y8YkqYCizXPnGn6XAyzjUqhrpiEQIE0XRzcdXPR7fSOxQK/5hbAfUTPuEGrgCIy6Y8AkuQYaC8zv5A7hpmr7EYMuwjy9Ox9XestlEifLbkuY6JLyQjVM4emqcJVWTu6hXYERxA13k+LpDnmToU+UNAJJAnuaq0TXYTxWx4s0pVN7k5v+wh3wFG9D4QenZP/S6B8HYxc2Njeq8Dr4IDWxg6SaqEIRIwgCWhhsHdkVBSPmyDXWHkbgRCvS2IyrVlGUdfKc9nh/KuyxQnIWfXfmNoF4Qh0u7uA0qg/JzA0qDrg32ictVMMIx01rTde7tQE08HypIGcFMeFgds9z6Fl5fVbXzbRnUUe0jlcgpsttx2jbzGuHdvF9Tc1Gi6nLu7Tidnc9m33FoqOpLzzuxht4wOCymMWz3Mw9ZYut3dmxapJRgc5w7dldQx0o7s7e5O7rz0sm31vtm+eyHBsqq17Dv6+ezzPa1Ji08Lthosp9a9sS1uXkqc2G/r/bJdvG0rQPkjFzvEuqNuNg0npLaqKyMcWxNuAl9lw7FtKX2TVqqc2ePgHg2+s2Z4moE1Ccz6IcZhCVuu+WmgEvOBvYvOvkeNx3Y2gQhgbO7N1rnYeSvcEAwASUP41Od644EbdogxJ5RQFTyD70AZ4QTpeAAXZsZntRmQMqiikeKs3UODy4jRg6CpE0NIo27o3C862cuBxj4SAbC95RGaQ6Ue2WAo9QCGDHHB027OJFAsWk1y8GgZYGSzh182mVjoAk2sZlOZRYBiRBjXDwh+MJjOOcquofFecWj2ke1eC8O2Y7IuKGERzfVILqBcG8lzKT+6PIKEfsxxVU3fXWqwTNbMqci/6mOib8QTYHr3pSFpSfoVjCW+QW1tt6882+63y4u77bzV+URbgL51uN+23u2lNejedMli3mB3uGSIxqnWpbte0GwjGfetu/fTaT3dtNZyr4CtbVs720ZWn+ZWyeyo4hJ0mLebTDmiIeN8n4DyiL5x7Z10DPWZYGe5fgvG2xI6gDyrvSOW7Us8SrhZmoM1v4M2BgulR9XtGHtMDshCYpRms4dpJXDxGpHyAB7U2J19ZhBSVHnI+SE8JsxU4lgomOpFvmSziZHCYU02xLnmUqYEjA/hPcQdSpf6Q5DUTdk8XrNTdX7EByMSEKb6XCtlRv0AgSo+87+Eqn6FUszC15KRRmbPiC6vSbW8OQg+udVoVia/iFHsgqq9xx4jhVt8XOk3tIKRDnvoVoc0GcgaOwzBji6mJB1w6A9UFhxkD4Fa/FNfmSEoePQC2ajtC2533IcIB7SiIVRyQg8fgDECbUhqSu3eMXgTX2QaqoZ5MUEg1DjMzBUmw8OQC4dq1LItcB/uJdL27MAHM4l9EBeh3S97fAb/yDWJKLqI7mXFVu+d3pzbhteLDROLuSc5GuFWX9tU88AYUVMIQV0G37ay0U3BDdM7KNOSZdZTQ4VmS0vivwTpm5eFHp1lmzxj0wRSW9Tq003QYksl29UmPK9JMLUixGBZ8bu7u903jNyFLNG3tp76ona/bWyLbENrnFa11eQAC6l1wbbx4sXWpJsbrWvPU/u2LhfT6c4KPhYByicHqKgcjnvYfKhJ/8cgHSIrNVFzRFlIxC31LLLQCKHqAoxUa2AG2Fj5xaBijOph9EmeJ8H19HZ+OODpXXpQdEO4nFf1xvYFdVvQO/eQYZ89ZqJGJJlFy2s2RqbbDmFGnwl6rIqvTbXDg9r0S+BXzT6ay8LDXAPqTAXKvCCGZEHf8ZWNXJyL499t8yadGitegDF4Zq/NXFxHcSHyJLxb/VDrifbo0qzL2CRUzbRpiXrVZYAor0lgnLTSO2pDfleXJ3j/FHAkcJTlveAQNjvzazHeSyhRoy8/AkM3rZ6PR6hD3R2qEVkdOUiZjkoqpYZM7+7GBltjbx82NVLyuYJcGqHefS+vrb6CNPT3DKBF67OlnZ71c/e9t35xd56iYdGiZQHk3nHu9Vib3Wk9RzOhJgHCdrfZLPDS1NSUXNzUaG7b1i5b7gi545HrpSQlG+i9b6YP+yni2gYL1x5PpuasZjIiOmxDPwJHm8agVSGBjPNIkjjkarL8CntPGoPkhEFs4FTZMCSD0fvAO7DTvap+ouJh+V1BUO41HllxcLaEBtcaot7FepqJIFaiMELwSrdBqoHMfFQvlCdZPWGCIU0JaOKLa5wpbAlDDYQhtks2AWRqUOLxwGxeVleH6pRIjPmg/heUdHkiy1cHZDWAJJKMhzwV002SnSOJyeyxSEfpNWLyINVACWShVpdFeRJ1ETqID1ypU5wqLoTsno+HGkDOWGP+LdIKRgVQlNylAkppPJLVQdOZcdInhbnssXF378IuIqNPCX6llBjCEg1E1Rjbh2U3U8hY1YpeFc3TkkOh6SPA3bMBZjVSUHfw/BUo+fdyqVIG3cFUshtyFL9IMdJH9XJp4rSVuMuKL7Kt7jER7DxcgLtsa3FbaGtcu8s82V+LB0TVTCGUJlbfMFtbSxBXWrTBpm8S+RCmkBva1NqSN+nR8XbhcqYtrGtbF9qCpOziwLhfLrpc+mltFlJvaggs8NbpXWpacqO+A4J2e2ujizk1d3tZ1Ddovmmrcd8433tZdfOsSRfs89aQ7bX77I2+2eius52wLrZkzpeGba8zXna7PARFfY3/ozIQQ9fy7oPBtEb6zqAePiMjdo9GV2sVGUIDNy/ufutf/W+pTM2kcgTj/+Zf/K4qwQUz1OQx7FOV9vdSRoOHQVl62u5mg0v3pgR+XgpZemTbNgkIRDJK1QUiW4fuLBkpQxwxHoArV86WiS3KxD7WDi6PC5FqL4zWMfaqWkiij1Q4WBtjxo9xZmiziW56nqjxOMEBxWg50zqI97eCiPDIccamW1syTGWXtEyUad+SS0MZAdmWS83RQjK5pTAU//8XJsuD1w5ifGA7HroZGGfzG/WkUCMGMI+dkw6apovx01Q+dS3IjpChhnCeX6IoOeM9DjrN4XgUTyxtbVq6T9adzndnuze109JYMd29S+ryQrM78kLbLr33MU2YTJCgxJvtZV3WU1uWJrdmbeult0t3j4JTvprdkpDA5Gb6NIMl+jjcsgw9D4+JrNRkzs64BuKlcWVilMDRLTZJHt1s2faA8eGhntGvNCKCVlVBIv7aFTARhgTl5QPt9wURs1bfGtcHmBUlV5VncrhG6iDUuEp4E2bdVeMIwZ04lELjr3PlqploR2n1lIECQ2YDSfKD/AFGfi86gtjlwCNJujO+5vnIfpffoNJpJtfy0M4zfg4MBW3Z40UcIBuN6VoVmdWlBsOQVMWOPcCLfNAAFTbpcYgoIUu5TVSSMtNCbTMzT+TX7P0ElLQPmx2Bs2rVECbiTqkmqkJgJ7Kzi0H3tUP1HiV7/Peozlo0PDzwoXwxe1upclQwxgmJARI2iQksFBKFYZOeQMk3RmXaJ9qeN4ei1dRjDqQooBh/SgVkfJaLDEXM0+1Byp947JimU1menSKmOhfRgmkO1FhWLt1D/SOY7liq2xJt0bIW5iAAJdAoAMayopmL9VCq2VtTl2wa2BauAxSMzWVT33x7S75pG3tdQOaiy8WScA7OpZVlod6FoJoQbV3u+/19vyhDSM+eeT21rPlac4nvhurTUzlPX5qhy+pd2+be1ehLo9t54RjjLJ7uvnmR2yKkZdV66uezvG1bb+upnRbuzu759EWdwb8PCBHyw4MTaiarGNiDVod0XuYbpdgyF1eOgYrtwk8oB8tUnAiOMqSp6gFG0hpwxSE3imNjohcioyFCpcEJoinzI6g47rhnYdd9MWew1HrHbE0LQ/pwGaIWCR5U7JDFwVQtXR/odQA5uz3Y+c22UZqcUjGKRXqOmIcsRIZIEzLjJqAMpobPJsV2D5RxUQb7XmxmW3QjTnZmlEyHHZAqrY6k8FCMAzzU8BqOrcKgvP/nKNs0L+wGeBDXxCDGICkju4Mck0znPOz208OBwlHK9yVcOpgxZD44OPh7lhz13Yh70WBpdeirgyxHnQfThAQJggyHKYyAOSWVPQ06uyLK7BPk1t2bECew1bGEcv81I1RIS1ueL7plvbjf0y8AtvK6sN6zSlZ9o19rfeOydbptqyUkaNIqUFtP6+3Nup7EymW9o1F2zTf10GqhGYVMxprriOE6rMoqlRry6SPTRT7etIXmUJaKuqJZ1plkoOwWzGxBJYFQU409hdTe5SFoNLoi+UE71HAoRSZ+wVG/94L3xdsRklfH1HvF0cnPqrvVE66l9oPMPLL50PSoZgIsH+OpzxxfcwSOVhr1gYdFc4GeqEijQSjjaHqeGhJ2Fad4MhbNo/tDh9SqzLWZwaWM63ogRf/oUr8VQcrRRzEkpQmQyESOS5FmaY7E/Khm4RLPGXwlqSeH4jNFDu7Aql+5sBnT7LVnDzC6HppNBbxwt4177hC67pwX0xFLgPZ0wm6y1FSxRB3Xe5uvRvSBgCFDdbIclp/UMob3LoSmBCjTm5An7+BWX2wwtewEKeUSRojcfJi0KcpDCBkwah4SpAKos6drW4QFNtOOs0NJHqQikdpqLROXMjEdB2FIH2PoTVpWX+7rfiaUUdjJGrmd3BaBsLRzhrLXgIODAO9SCdRt3FremL5Zgk434+FQBwWr26swAsvqBlnNS8OorYCXBaufz601t9bPL5Z1tZq1GOnSLaNGz/c9TQYxpW3bnU73WRu+vdXW27ZdZKn55iSxZFbSqmdLbgtgmeZ1bVvnfK+bGy6bb2+Ul9WA2qJ17W7I/ZLn4IcfEihDEo/rslCFbxm9JQuDx207D7fESXAwvfbaYUmg9uepS8LaOdrOK9h2fLKKchAm8dEKMd3gFnEhLk+PY78hLwBZnFHNQ8jSabITIW1Mr8c/6pOpYbMZImJgJEKXuaohKUkc8uZoS3b24cgt1RwkP2hRkSOTbSlGY9xXU2FOpepXC9O8eSa+zsnl6JhzvuRym26Ahjb7bAPdFuM1eaPX8eJYlOlwf/G2iKZ8w/yWPc9BUM3sQPkrcLxOayoftVnQ60E6QL37gnstfWBGwzXxKcUoEtUtDKuQXWGgESrRPTKPvk/DA+mfhvfBiKen4h0or9Wj+UPsKyiRx0WtidNQdWakVDMGhQV256LDqzMFI7gihg11GOI+wrkeoannUoJWS0/meMZAd32SuJQSNu4+g6Rl3KXFyoQSM0vCdC29NVjd3l5tjFpn27qUWX7pdPfuxWq0pW1brzPysTyRtK7t9uZ0c7ucnlu395VDKRwq25TF8D5IbdcwLdsebQixuWt+6LqIFTX7PgfMVOora+Mx7KNhKqHyj4OygesRIaxqK7RERximx06EEqNSRdWIaIFri4KFoB3edm8PF8zhU9IcINKp9Qh1rL0GDbkMjlAQWQ6SmdpR0KRYPjboQ6t4b+8yNU3VHt6Fbsfch7oDPOg9odTK5xBcXZPqVbOVYAg3568hfxShRi2AJNldWuz5xCC7zwrrKIZN7ShNhtkOSnMFapnGhlh2sIe42XUfdURw6puEZGFvkAiMYjbkQeBRP6N9mmpYoFjtoyViSOwij9rRK2kkMMiNul30uk40CpFRJ1wEkxiyAinxPJTPdVGKPuAYYE/ZAtu5TTexgViCCsF0igBQNCThDrZVjiDBCXiYoRtifIEl4RxJUJRNKa5iXuKPKWw0Ff0Uy8SI0sXVcYO8zhJAY2gJ2RkHMUIRhVJ00EtFqmY95ePyqDAmN3wwFtpT2aAKqqnGsKwg3b/T7UKV1NoYJ3JrbgssHeOybA5bwrjoT8fiGHrsg7uh9W53tWXrvW8XcF4+wXbnrfvmuaRm9WXRRl76aTsUVjeQlyWh5WUV1mXzii8XLytNumxeVrIJk3w6ydaycroBMJd3fiJ3q+nmZkECI9FFs7q2i+/PG531pKUhq6tfNjDbxrPncu+2G2wXzhf3jvvldNPaSoPnz/c9DejmpJwJZbcBscu0PkCF9KhznBeYa2vHRbPpwMTMaA5CnX9TcQ/UYcYRFLa2NpyhWw27Nw2TVkWaYJCcUAF5pVTpAcyhfNWU6vaEOsjYdNzre2qw2UyPq6jf4wBSwlv8mCU+O+8p6rTDDtHetXZ8IHxg2Fy5lg96qF4ak5/xHDMeKSvDzdFsssgfidx6woZC65g6WO1C0mI3dGcLNB6j1LUlr2FwNuDzxmaeaXx0Vbu1geSGHf2DQIQf2AmfqNXtjSTYwiy9jmY9+hjSEUgfifmFCUfDDpXeB1T/YRfwcSkYgoTR0zCUkMFYxijKtSsDwIPr0prkYzuddsQRaVLhCLIpVYZnrNkMWQ6hpKdBP7c46p/gDJd+5VaYfpn2tsgYRzXQDWAuHTduxmPfHSzy+qAF6L7AOcGDaE3uktTp0NhYTt3b5g5apC7R8aK2GNEqvqRl0em0nE7LcuPl2aWPPVqm2yFpCVtBDvaw52h0jBcjDcjYtAUbNjQpWB7khsKRJn8mvwdQQ7znrQUPsEYeoLLhFQw90ODuUgLHtlOTzDemiVaf+qBksj1YP4CRoYcqLoVm3WwNlxLD84sCHops6EmkuKFGhXfOjAKd4jChlxmAyCsDfcxTJdUOIXVd9xhGu6SZAIeigZTivRHYO5S3hzmMbUsJ1EMLcLTWDmnN2Kj2Ha38ftT7KajmWqscZW+mttYgGMukQdQeSafiyqMxrIpcDajQCMYTIqVXxXHVX2M9kL7qTKSwsjKIhPMiVwdJwrr6pd5JlMVuGHLQN1k5DW3jpbQn5rOPCZfy9NAUNamOi0sICiZzIcuI2DfTKggnGjSoHnpLUIsfg8ipQxWBwfFhxyn5XoVDSjnXL4SdVIEGrRhZ6DDeSghAqngrv4CU+aCMHBBQblEct7R+c6v7u9wNE3LPSLBb621NXSSzIXdg29h3YluWmFJ1g43p9V17tmmLjfq2bN2y5S6v9tJ737qWtQuf1k5Xv+CubvVNy7KdTq0j1HNiJXVJp0WNeqLd8NIz276/p198umm3zyRLzUg23W059e2yLKu0AF1u3UY6ndx7v1ya1JaT1pts6+zN5ztknW6h98vZl225fdY303v2fvStn+97Y719mZYwLuO63Jpp0tOBBSmPaB91++8r70dBzdrpyPcAM0jF9hUXY2WOvUl5UInBQBmYR7CZTh0jGchdk4lcopl8n+KsmRp718jUc0sjyRpwz7NKro8xFcMwGOfTib1xd8+YDosBPPJHQEMAZxgctIoSxkZHCR/BNF76xn4oE15kMDns6VcOcdBCfPayDdi6YJdspUKKAJ2Ot6YVbsc7xYepi/S7CmyQBc129z2ALC352vpptCv8dys9LMJBpaJh5wOyw0eOBOAHnTUzz0OSqWoMN2m32EHQJ2BwuMqCHwB26WfNkMmuLYTHI304Puv0ES2Dr6OmM/cxpamIfWCAgIaKQQh00531dZFZRAvhJPCKMWNsNnSWbw2wmepGJDqY2TBNk1XCIURt8gFUWrZPYS1hW1v3mfpQ8iIkqZKa1GQvzTab+ibXvZf6Kl1DwqxJktZV69pOp6WtfdNFXkqtsnMkoXhrWv4ImUlD2pXEXNYVzZKd58QkFin7kEClhAiW6BxNE2P638bmAm2sKA5oI3sCyHiWrhBdb1DJiHjwEykiU9aXWTfnDsxDwY7g+jUtzMQXEBtOAlaCapTT4FGcNal1znqUGxc7PLCVGLnSGHWzzyNBiCTsvwOTzgOCDyBN2e0wolWT1GPiRx4DFKmEj7G+4zpKPJTFwJ5GZsdxEcxIlPopHbkYCj6QyaBub6AxXdQkOxGioZnE954HCV3/ixCRKfxCYbfPwVJpSnkm4Eea4z0dhfYgmdwHU9maR6OyRn1qBrGi5CyOBmUT3TPh2aNe4BzPVWdBmMnAXHwrsu1j8MAstEc5R2AgldRNWAc37VDaMTqoCFaDhrFh2jJCXZuwpHDRmVaDdEvtXpcG5bdQzRg4mkotrcLDmomfJ+lMhrYtraxd53sK0zZWc1vRguq4aIKTUoc4TS73jimtfCHI61nUjBC2m6Jak1pvi9vitcWOunTdX5BRs8hrZzidrASV3CSGMnmAX23Bm+tp+g0t69pBkruJa5p0c9O8OlY1SHkmp3ezdbXVi9TYLvd0t9ONl1W3zyXUFgudbr323pq02t0baqvaQltorWUDBs7xm6b3+E/7JGtuLH2u6gAAAABJRU5ErkJggg==" alt="avatar"></p></li><li><p>查看iptabls规则<br><img src="data:image/png;base64,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K/78zz/xsY9+9pLPTH0/n/e85375S1/8xpVXfObTFz/h8Y9vjDHGV/7FKy772qX/94rL33vue+K9f6c98pGP/Jev/tOqVasAzJ0799z3nPONK6/40he/cMaTnwxgzZrVX/3Kl1/0whecccYZX/3Kl7/6lS8PDQ0BWLx48YUf+uCVl1922dcuffnLDv8z6cdz5tOedtPNN285JCVr7dq127dv379//9077k4pSZJUHeSpT3nKZZdf3u12jz56yaxZMz//hS+klL74xS/NHB094fjjD9vykLtN54wn/8ZXvvSlKy+/7Olnngng+OOOu/yyr8fQi//8xSv+/A1nvf5IY7/vLOHHTsiOHTsOHBg78YQTDjX26dPnlxiq0aAwxVYoBgTk3GE9YdV4ThOuJDhk5iGZAIfXguUwqNiGSGXmDr1mHpO7x2GPA7JSVppXwSuaEV7LlFwp56xADgW1QxasQnTkActDlksCcLoJ7rIAM3pVWzcjiElwsMrseEwySQY3MkQXSKgjdZMmU6hSqB1JViVmNP5HFyCYYJmkA6DESmaW28ELoAC7OeQsJw0K8MJg5gURzUF13brZAlVYNuVANPVHAZNUyTKYRRCuoF7NJbcmSt84nQ+qSAfloXJmUIARhAciUgW9MC8tlyY2gfimJ8CgtmVrpC163ljIo6kkSDfLrSCjNw2mrxMF8LCHnfiKV77qnWe/64XPf34IAcD162549Wte+/vPf8E7z37Xn/3pnwwPDwP4xlVX/eFLXzqlOaZYtnTpWW9801+97e0vetELi+In7EgEYPGixcesXHnn1junLDHGJz3x18fGxrZs/gmrBQ5tuXjx4pTS3Xf3ROG27dunhOyD5Gtfv+wpv3nG1Mfly5Z1u90pBfbjWbx4MYCdO++Zbl+06PVveONb3/a2P37pH82ZPQfAX7zizzbfsfmFL37JJZdc8oazXt/8/T4sh5355z3vuSefdPIrX/2aF774JVdccaWZ3X777QcOHDj5lFOaBo99zGO++c0jBl4XLFiwaOHCtdddd9vttzcB9NHR0QUL5t94073cloc1/kTu+4r/H3tvHmZXVaX/v+/a+5xbVZmTyojMYTYKisz0r8EREUEaWxAcGlqRQduBQSYRlRkR/SrzEEBxAhQZkgASCDZDKyiTEEAMgSSQeayqe8/Z6/39cSpFqFSFRIna7f08yfPcu8+ezt6n7n3v2mvtvTb89re/23233WKM73zHOzo6O2f8eUZ/iQMHDjzggP1/+rPXnArWwEYbbvjpw4845tjPn3D8caNHjQLwu989ctgnPvmve7/7y1857rRTTxk8eDCAIz/7mZ132umQQw977/s/8Ktf3VqZciveNmHCN8/4+pePO+75558HcM7ZZy1atOh9H9jnv774pa+eeOK4ceOmT392v/0PuPa66++666799j9gv/0PqJxDPnPEEdOnP/vu975v/wM+8tBDD/VUuJYMHjz4E4cdeuVVV/dK//yxx95z912XXPyD4044YdGiRT3pMYQP7rPPbbfdDgCCKo+dlVRPZh85+2erLbc67JOf/OKXvnzC8ceNGzfu6WeeWbJ48bt22qm6+u69954y5c7+7n31UcIbDciMF2dUWr9JkyZNKqucQy5JSJYrGwLLvKxLJQQqAZZiK+lCkEg4vIRK2SDPB4m5lACKNaYuNhYhNeglzGQ5VQQvg3fJyyKlulPyBDhQOIuCnQWAGJgArUh5ZxkbQkqxnpjFNCCqLXczNZwZYFAeFeCBEuAwQEEg5EBL1JBMteAWFCADYkQ0jwYjCScVqIwwQ6BqQQOD59a93h2C8qDWWBkrKXJASDkruyaLhEC1hgTIRJEihcqXNRHVtvmWswQIpAwu0GXJqx0ITCKhwO7d+AlGwoBIZaZIkXRWMpMW4EA9hVIAoCrYCxAqM6pLULWjqVGC6BAMEJREAYa+YucnT57S1dX1+BNPNBqN9vb2V199tSXPj//KlzfYYAOSAwYOHDN27PPPPde72Eruve8+SbNmvZzKcsTwEWswU51+2mmCWmq1e6ZOnXb//dWa+49v+BGAuXPnnnjSKR0dHVXOI4/87BGHH169PuW004pGsXrOWi1f1cBWr9fbWruP8fwreeyxxz535GdHjRpdvR06dOjSZcuq19/77neHDB50480333rrba8VWIWBAwb0eZrlPfdOlbRw4cJnn33une98xwMPPrjdttued/4FZVk++NBDhxxyyFvfut3DD/9P72L9s9f/96/fv/jiSog8uPJLfdq0+/fcffff//7347fYIoTwx6effl2ZVdjpXTtOf/bZer3+xJNPvmvHHe/+9a8HtA0AsHx5951W9JlY0WuOZs6cidWm+HUF3oirJ177jTNO/8gB+3d1dZ13wQWV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M0f8R0tL66TJk/tsaPjw4V/8wrFv3W67xUuWXnvddfdNux/AWrY+fvPN+qzzIx/Z/8Mf2m/I4EFz58279trrH3z4YQDbbL31sUcfde999314vw/VarWLL73s3vumDRky5PTTTt1i/OYP/89vhw4Z8pOf//x3v3tk9S7111Cv/qw/+pzNPu9ozJjRX/zC57fcYou58+Zdetnlf3js8XXq/OrF0Vfr61Tnu/fe6/BPf7q9fcTBh35i0aJFVeJVl1/663um7rzzTiOGD//Jz36+6pbsrasc/bWeqA4o2nabbV559dVvf/vC6uj5m37+s29+68w/PPYYgDsnTzrq6GNiFi8477yBAweGGHd617sAHPzxQ1esWNGrtvXHuHHjvv6108aPH59SuunmX1x62WVV4tp0/k8vvDBhwoQTjz9+yp13/vtHD2ptbT3/gm9PufPOGOOxxxy97wc/GGN87PHHjzv+hLIs29vbTzn5pB22337R4sUXX3zJXXff3asnTdaJ8ePHn3H66aPHjL7jjtce7D4HefUp3mqrLft86j64zz7HHnPMqFEj37/PBxcs6D6P96af/+yOSZP23GOP9vb2idded+NNNwE45JCDP/bv/z50yJBXXn31kksuvW/atHWqs78HbPWGmjT5yyEBCaLXiUQvRcFqUgBkqot5UCkGB0prATJBMTWA0lRkaHSiRQpmZbB6pgTKYZXBT4olKzdPkTAJQALR7dlooJMOxchS8IbVSm/khHkBQxaUotfr6HLLInIwyd1QeKg0WQ7AUCRzaFD0QiylYCykGmFMLgYoVIdggisjewTRBSNMdJfRCBfQSARoQSTUHcCUBlYbygugFzKSggjUzAMJEoJBIAWoJKO3AQJKyVyZmcgCZLLMVJdKNxpqTCZUgyIQUqXIq2oAU9UqIZBkJecBwox0B9QtT1WVSy4zCHAo9vr+JrnRhht+9aSThw0b9r2LvvPcs88tWLggBIsx7vD2tx1/3Fe+dfbZr8yZDeCznzvqwI8cOG7cmO//4OKqbGtL7VOHHTZjxotf+/oZLbXapptuugZxYMYtxm9x3AnHb/iWt5zx9dOfmT79pZdfWr58+c477/T73/8ewL/sued3v/f/Zs2a1WdDp51y0pw5cz59+BHt7SPPO+fsGTNenDv31bVsvb86n3lm+rT7pnV0dIwaNfqC8845+tjPL1++PK/lG2+80ciR7Z87+hiSI0a0t7bU/uvzx7z80ktfP+OMPffc4wvHHvuLW37ZZ5f6a+i1rqxn+pzNPu/ohOO+8sKfXjjzrLPfteOOp5926meO/Nw6dX714itWrFi99XWq84EHHnjggQduvvHnLbW8Jw/NNt9ss5NOPmXcuA0uOP/cadOmFUXx+nLrkTO+fvozTz/zX1/80p577HH+eefut/8By5Yt650JmD792f32P+DTn/rUhhu+5ZvfOrP35fXPZ444Yvr0Z4886ujWlpYtt9yySlzLzldsttmmI0YM3/8jB5rZqFGjABz52c/svNNOhxx62OLFi/9lzz2rEzLOOfusmTNnvu8D+4wZM+aaq6566o9/XJtTQ5v0Ccmzz/zWL355y0033/yZ//zP1tbWKr3PQV59ivt76u6YNOmOSZMefvCBnpSKzTfb/D+O+M+NN974umsn/urWWxuNxu9+98itt962fPnycePGXTfxmt8f9Id1qrO/B2z1hlYt1aTJusCeF/QGlEABNSAn6uYFmSUzU8PUoDymzmQK3kF00T2JUhTphkxeY3JzR4AssJBig7FQgJhbXTDJcusovKWhWIKicsmqfZEQyRQlZybCkYrSkFIIKmSBqXS4oGQFYao2gbcG3BIhpxFSkiFJDC30GBOFws2YMsJJE7DSxChWez/B6IWzAQ0J5iF5YukK7qWsREjJSM+Dg156SAkSMzoNAqLJIF9ZrQuNkg7LXdG8M1lnmSOrRzoBebe6rbS/yZMMQQZAMKIy2zYSYrBo1VJ8ZTqtlDskM5NBoioNDSpVltNKaJOEqkb68BO9596pkhYuXPjss8+9853vqBLHb7756V877bvf+39rOL4cQPLUPrJ9xIj2zq6uPz79dO/Lr2fS5MkrVqx4Zvr0p59+esd3vgPAtGn377n77gDGb7FFCKG/GkaOHLX1Vltdfc3EoijmzJn96O8frYqvU+ur05Lnx3/ly5dfesmZ3zxjwMCBY8aOrdIthB/d8GN3TynNnfuqme28006/vOVXRVHcc8/UJUuWoP8u/d3pczZ73VF1DvuNN99cluWDDz00f8HCt751u9dXsybWULzP1v9K7r3vPkmzZr2cynLE8BG9L683Bg8evMP22189cWJRFPdMnTp33rw3647edJKn0WNGjx49uqOzs7J3rmvnLYRLLr3M3cuy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6VWM8+bNO+pLR555+mknHP/t1QweXGfddS88/7wLzvvJj3548oc++MHx0oIZM2Ye+cUvnHv2WScc/+2NN36i996Ob3zjd0888dyzz/rG17621lprpbundphZln3+c589+KCDSH7zuOMuPP+88cvWW201e9bsdP3cs8865utf23ST1c1XfN449LDDjjzq6OdifCHw8Y99bFXTP5qvTpi58MJk8uTJ3/7mcb+64fpzzjrrFa94xaqbJ/D8ew4MDFx91ZVz5855Vs9/Qp77AXn+PXsnbvVssskmt9x04777vDfdfOlLX3rLTTfefONvFlx+2ec+85lUXfa0xrXWXPOWm2685aYbf3XD9Wecdurmm20G4NhjvpGM45df3XD9Pu/9z5O+/73xZ/zAAe//7oknAvjVDdffctONN/3m1z/76UXjO3DO2WdNvPubdtxx/I7/E97x9rcfdNCBq1qfH8h3vvOdBx50kOjmkBloQifEZsngECUiGp3Ot75t930P+HCASyZZBAETCHhgFGBU8Axi9FwKpayNkPLyEkqE6BWyzNkEEGERbCE0UZTMXOYKAL52zLd23/M/255T5mIkAztz587+1ndOufb6X59x7sWbvHa+gyIc+TveufsFF1/xy5tu/fGZ56+5zvr10lpRr3r1q6+8+S97vPeAtnfnDx117Mm77bW/XFGE1HZC7A9lgAWD0c3lhMEA5QaDjAhGpOgjRJBEFggoBzKDMQoQUDVYUDAYBXnbQ6SE4FKKbpLsuMAUlCVEAARDEsYCjOMxTgEdZ4wgxbQwHrRUAUpSiM5SFGhUCIAooIySYISk6HRBWNnZfvq0af19fQDmzJ49ZcqUWbNmTZ06dfLkyTNnzpw5Y8ac2bPNum2NZ8yYMTIyMjY21my1vvudE8a7YU8aGpo0adK/vPzlP/rhD/M8L4rCzObMnp3neW1wcOqUKX191Tlz5iTnsuzUG/WxevfSqNdjWQKoVqsnHv9tM8uyrH8ln/7kJ+uNxt7v3WfBggUf/+hHQwgA9tt330azuYrxkIMP/uOdd757z72++93vHfKhg1c/XnK3d+/xqU9/ttpX/fThn0ox1w8fcvDjCx//z332vfDCi/7ro4elBv5v2GH7t//f/3vcN7+553v2Pu2M08OEAlYzO/TDh7SarW+fcIIkAN/69vHveNeu6XLd9d2WqLvvseee79n7F1df818f+2it1h0K0GP1kEwzZoYmDZEcv/kPhGSqeJ4ydUrapYkF0C8oPnbYYfVG4w07vunCiy76ytFHT6y6XoXn33On//N/fvvb36VZuKv3/CfkuR+Q59+zd+JWzxbzN//zn/+8xRZbTDRuufU2+73/gP6B/m8ed2z6lnkm49bbbvf6Hd7ws59f8pUvHz1p0tBhH/3YZvO32Gz+Fo1G44APHLjZ/C223na7004/Y/asWVtusQWANdZYY9d3vesbxx6T7r73e/eZv+VWn/7MZ/faa69tt9kmGY/4whfTg2w2f4vLLr88Gf+HDAwMjO/z84oAYHBggCQheptlIwrRSTkipJwwgcZIemVgAAwl2VDeUiUio9wZABXsVKzTRrYCRR1Fg5U2MiJkctGTHusgtJC5MlfIEZPGoiwiT+2NkkZLPYgCkbGdMwYhk3/ys0c/8vAjb33zjmee9uMjvvT1yYM1k3bZZac9937fEUd85vWv3+qEE45h1ge3zLTZ5tv85e4/vXb+dp1oAgWSMlOReRE8D8hMWUAe3IKQQregu7vkzk532jsMbvBSasfgUIBnVAY382quamAUREJuAgCj1XJZECSYmYEk0+uEMqMRoINOCBBFQkZl9MJoxsyYBwhyMAQGOLxb27BSFTJGdxeALMAYAZEOhugyAylANGG8i1NCQLPZWrx48bKlS1esWLFixYrFixePjI5Wq9Xx915RFDOmT3/4kUc22WTjP//lL7/81a+TfeHChffcc88GG6x/y+9++/NLLm232yGE5cuX33f//SnOOmXKlIH+/uQ8rmu7kCkd/7rXvfZPd999yWWXA1i6dCnJ/r6+7bbb9ic/OW/fffa5/Ior+vqqL3/5RlmW/cd//PtPzjt/ohHA2muv9Zvf3Ojut/3hD51OZ9bsWU96lifTabcfeujB4775rXlrr73RhhtOmTJlow03PPPsc0ZHR69YsGB4eHiTjTcG8LZd3nbW2WffedddzWbzd7/7/X0TyhX232+/2mDtq1//euryDSDG2FnJuFHuzWbzsssvL4pizty543d/HnjrW9/ynRNPOOO0U4895ph/f81rVt38AqZWq332058+5EMHz5w583377vPlo760/ktesqrT88ukSZO+ddxxR3z+c7Nnz/7oYR/54Q9O2mjDDVd1egGQ5/nWW2/1wx+e8pFDDz3v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BymAgTAYFQCElgFOzQyMAANIoZkBNHiYA/qcKYSGECcFAGZq1OCDVZJCaNNTwZiiUCFiZWbmlQ7wRKbqmLsZwpQFMnSsaehFOlELTxeAKjwMNEC8Qs1EFJCgazA8tQAAzdToNdQ9HN9qprSelujVV19Tr9fvvOuuZrO5ePHiZ555ppgkHz/qyI033phkX6Xygg03fOD++7uztXD9DTeY2RNPPO6zbNHwoqefebqbY434/e9//6EP/svSpRt0Ej91/PEGKxYKv/jlL2+86abFrZMd1huVvr5ar+2tv7j+l2Y2Ojp6333377rrS3916607bL/9l04+JcuyW2+7bf/9999xxx1+/ev/7s62erx6z78/+ytfGRsbA9A2r2+88aZXvfKVd9xxx7KttnLOBUdmT7xs993+eN99jUbjrrvv3n233a697rq+ch+A6empTraexIAPfvBfDjn44HB97PHHP/roo1igz3kZngtXXvmDZ559Vpx719vf/snjjzv8I0eUymVx7oUbb/RP//LBLbfc8tOfPP6++x544onHv/Gtb5/wmU+9/W1vrdfrXzrllHAi+urQpfmf/fznPUddT30CWLbllu/5h3d/4YsnPfTgQwA23HCjnXfa+bCPHN5sNh959JFbbr3lVa981WVXXAYAZgxPiyAN9OqzdMMNX7DR4iVPPf30HXfcHmblMNsScOHQE0C8D5OU817m7x7RWEuLyv9+1MdPPPuLzerc8vRrX/Wa2Xrtv+/7LVpBfVQMcfDjH//4SaecnFM81SsNVIYt5QAko4cSoKJFJNtlGiQYcwAMV1xxxdTk1J2333nHHf+z56v+7tLLL73qqqve9Po3/OpXt+y444udc7f/zx0AvPfthYiApRtssPNOOx32kcPrjfqDD664+Vc37/HyPR559JEsS5cuXbJkydKnn34q5O3E7PRMtVoFYLBwrmc42bR9vuma18TbrkqDhSyqXnVukSRPNdVMAbSX+xsdYtMsBehVfT6oLIgNztEsS7MsQz79LbgHz2ENSatBsEPn7sRh8TGXYmhbAmYgEJwNRq+AkDA1M2PI89xYh7q1mxquO2rSKWWtSv3/OuYaQSA0r93uTrRU0knmfB3kPUfAcnNq/dGV/U+U1gN5O1rGHNC7kI7xuCaY5s6reeoJGg0DCIAFh2jwgwpgZgbmJeTX7WxBh3PiWlpt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7MOHHvbhQ8P1hRd958ofzDvncl1BkXe9451HHH54s9m8/4EHPvv5E4Mz7IKvff3II4645OKLJiYmzj3vvOCaPfmUU9/73vcecsjBM9PTl19+xRqOHUAvzfccdavTZ8Ctt932ilfscfihh37kyI9+4uj/OPboYy+75JIoipb/8Y+nnnoqgP7+get+cd2+++579VVXe5+97/0feOrpp3bYfvujPvrRvr6+p595+j+OOVpEBgcGQRLYdNNN93nLPjffckuxUKz2D3jvp6Ymi8WSOJmZmSmVypWo781vejOAfffZN9ThfR94/3333w/Yvvvse+FFFyGfqq1YLO6z9z4A9n7zWwLn+w85+I47bn/H299x3DHHBsob3vCGL5500i9++cs99/y7Y48+JhDf9MY3nnLaaZdc8p3wUdU3G03nIqBRqfSb2e23337l974fx/Epp5761NNPBbarr7nmyI8eedHFF09PT5WKpUJSGB0bvfa6n++991uuuPxyn6V7v3VfA0760skf+tAHr/npVVEUP7DigVNPO01Vt9lm649/7GPlcjkoBID36pz09w+85jWv+clPfwJweGjRxOSE976QFLqecJKksGrVs0ODw5NTkzCUiqW02SyX+yYmJ1Q1iqJSsSQiExMTi4YXTU1P9ZX7Go3GzOyM977RaFT6+rIsq3fEyHehXC6HTd5eNRiFXhVgHMXh1uWcExHnXKlUqjfqhULnPhwCqNVrxULRRVGxWKrV65GLpqamisXSxMS4AdVKdXxivFqpAhCR6ZkpM4XBe18oFEkwb68xbMa3XG4oPS+GyP8xp7Qm9Nbnjvvu84a/QBGrR5dG/nJYTanhi9juj7WB5b8thLy58dUStE4Sc7QtyJZ0awvPCfM7r51GdJj3bd7OOhqCcWbBIgKRZ++QnwsCQUiwIFqJZoCBEmgEwE670RgcXe1Gtw1MMpfLICTkbufLt0IZiQ5nroVazdW/I0svCDSCmbmUUmAm9IB6JJmy4LyDWYguYmrmAGvCicFbJC6LNPE0R4OJhYVwo9EZzVkGY9MKGVCSusFokikzD1UDTQSZhxoix4IaSBGQmgmYqXMSdNeaD8QrGEwZilcfiZipAJGIp4h4yyBiqbKZoehERCWclGQA6NWUGlPUDGEV3gC61OBoCZlSlUhAIZogPSKhitbhYtMIADWYzarqCIU5ALm1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S6mqkgBEClUm8ijLkhQW6rZAeaQeuQpzHCgUTj4+O70UbvrIXXaB8v2mrrI0c7NPUJi85SgAqEDZXSaQxyVCJnsFBvfOl0qlSrnc7XT//dxPfP266w868DFBGH7i3PN++MMfbt60ycUBsM+++5x+yslve/s7rE1POuGEYrHIxvzpIx4B4HVveGO3292wYeNrj37NbrvtFsfxV6/62n98djXP7Y973MGvPfq1lUrxQ2ed+5Wrrt51t90/evp7n/WPL45TLYTmlS9/SaVUvOrqrx37pmOrlRKxufqSRzDR4a84Kk7b3szssW855oA/3b/RbF500adu/OY3AQxyt9ZeedXXPv3pT09mCQDYfY/d3/aWtzjmH/XIRwI45nWv73a7z3zm3x72jGdUK5Wt27Z/6lOfcl7T995nnyNe8YobbrzxsGf8TRiG53z8EzfceGO1Wv3Xt77lYXvs8b2bb65Vq5+/9NJbbvn+7Ozsq1915P777TdgaaWMJvh56HDO2Wfd+M1vPWL//cKocPHFF3/jhhuwQok2bNj4mlcfudeee27dtv3cc8/94Y9+9KCYX54c03J/UDT/8i/+4kUvfOH8/NxLX/byej0773zmGR++7rrrH3vQgXNzcxd//pIrx25vnwLjecycJIm1ttvtFgslt5+SCIB2Oh3DXKnWdowcDCeQc41urU2SpFatbdu+DQQQ7bTTTu96xzsfsf/+99533+kfOP2m79xUb9S/eMml737Pcd+7+XsArr36mlceccTMzMx733N8uVw2nnfgox/DzM/7p38UFdeNVdUYY9iIapoknc5St9dx+Q54WDPcaAAAxjPsvPopNm7c+MHTTttrr71F5HMXX/zpz3wawObNm094//v232//+35938mnnPLd//yuiFzyuc+dePLJN3//FmZzzVVXv+nYY7//g1v222//1x/z2i9f+eXn/+M/RVF00sknfeWrVxpjjnr1qw996qFBEHz/v37w7uOOI8K6devf+Y53HPjoxywsLp5x5hlfvcpVhwIYMDYBUfE8Tx2gxvniAJBbDn8zdDpLxphKudLpdIxvjBhnjDTGuDuWct9cKiKe54mIqqRp2ul0er2e43jNILhCZhWah+a1MaCmroZUVXUt9bvXXnu/97jjN27aeMUVlw8C169b/653vvMxj37MwuLieeeff+3Xr+33+7OzsyefeMJee+5lrb3s8stP+8Dpe+2553vefZxrdX/2hD8TkRe++MXdbufpf/3017zq1evXr3va05+uTsiKi//js5ddftmTDnnSxo0bP37uuRd//mJmfuELX/iCf3p+rVq99777zjvvvK9e9dV99933g6d9wNE8+PEHA3jO8563tLT0t4cddszRx2zcuOHJhz51R+48ZaeddnrXO9+RNbCTT3Hj5xcvvfSKL1/xpEOetH79+k+ce+5nP/c5ACMS+k3xWxNYBlqN6KovBxj2xiHWlnIc0+hMwdqiuSjjPCznaHnImjDCgrq/mmuT7qczmboQctEps6OS03kwUgpF/sKJbXxAGBwyIkCFnELETsLq1CwPEAEB7JFaiEcWTvVRYWIVUSgxABhWJpupcaqxkm8sgwUMCFRDhiiYNTRKBCZyl4MqlIg8qCgMsZKqkooqYAVKgKrH7BmQqoi4ZImFT85YqCAySkwqAmUOCLkvUQBgqIISIZ8VcC6jKBU1HjknUgyIqlUidyhISYhS0b5QaBRQykVKEM4UW1EyEEuksbAhFcCNBtYpl5TXiJIFDFOuYpOoQsFQAeUm65F6hyM0DHFjDHEeywVr9jJLAhAxkWo+J2aaqFukA5SY99h999e94Y3M5lMXXvC6179xx8ION0Psv99+x775Te8/6aS7f/WrX9/3679/9nNeePjhO++y89vf/s5NmzYVChGAf/qH5/3yl7e//Z3visJw9913zzOdjr33fNibjn3zzjvt9J7j3nXHL2777k9+0W61Djn4wC9e/e1mJ/2LJ/7Zhz58xu2/vP3Q57zkzUcevnnzpjM/8lECKj76Be+09/7rtvt//ZJ/ftm6detPPvGEn/38F1u33r/G3G//5e3/csSRz37Ws7ds2XTGmR8ZhP/ox7dec821nU5nw4aNp5584quPOtr5hdl1111mZ2eOeNWriWh+fh2AI175L3fdedc73/XuQw554jFHHfX5Sy8F8OY3vfG+++4bZWmljH6X2LJ587Fv/dfZ2dkPffADt976E+d7aHmJXnvMUb/8n18e/973Pfagg976lmP/5YgjHxTzy5O79e6J3B8Uzeuuv/6666+/5GI3dQ2x2667vuVf37Zly06nnnLSNddeu/qN52EQpjbt9/vGeN1up1QsMZtut1suVVrtVuD7YRh1RpbmAcRxHEWFJE3TNO32ulEU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7uUve/lxx7+30WwCdOFFFz7+sY+7/trrisXi3b+6G0Cv3+t0Ozd95zudXvcLl37h85/73Pz8ujRNOp2lOO4z8+zMXLPVELFQFZFMjRjpmWuE5jMLEYVhWCqWi8USgL322vOiCy781je+efTRx7zn+Pe4yP/3Hf937733vv6a6179qte88dg3NRsNAOd8/JyDH3/wN669fsC8I5tj+PPfL/jkD3/84898+jPfuPb6Zz3rWSJWgbe87a2bNm268oqvXHPV1a98xSuHk3fG2nSEYeT4/N8CERljCERMzru7C3T++RXwhjM3RWGkqtamo977C1FBVKy1zpxWKBQ73W4YRiqiIu4+OYiKFc3UynzMdkMrMG02zZALYrlMJkV07FuPfcHzD//G168Lg2DbdufPQd/ytrdu3rzlUxdeeOnFF//zS//ZCfnhD9/3wgs++aVLv/CqI4884cQTB5lfd93XO93upZdccunnP1/JjdxEOOvss191xBFfvuyyf3ju85iZiOIkDoPQceAZb6nTee/73/fB00//2lev2rGw4ytXXrn3nns5qtdee81Sp3PN1ddce/U1pdKw4k459bTXv+51N33r2899znMAvP3tb997772uu/brr37Vq9/45jcPFkYeGApmVlUiYmZrbbvdMsYYY3r9Xqez5KykbupKk7TX66VJ0u11Wu3WTG1GxKZJAmhmIoOb+EVH5sByqVIql0ulUrFY9H0/iqLazCzIdR0ioFSqhGHotO0g8H3fL5UygwsAIpqpzQZBQERRGBUKRWPYzalEA+PmMDIAIvi+XyyVgsAvFou1ai0Igmq16vt+rTbjGa+cX9gx0SyiqNBqNbvdbhRFnue1l5a63S4ROwVk+fdAjrG2NNmwHAig8fwyzgctmWioMY6UaqyAjgqAjFTWEwgDa9noH9dbsh8TbI1kNgUj+WQBBIIIKFVDSpaIyTIEgIKskoBAqQeFWoUKGAAh831PSK06+2nCSAKWRNC3lIgzDQLsFE1rU3QtKanHJFZTIXfzUmLVEEJDHsOHstsZwBowfIPISyMWAzF+5q2JQQbMLAq4PZ4MYWaPodBUKdFsI6pHWRIieLlrUqvOGur0RXWn1gEiQECdBFZZVVlVFVayVwAAdWckNZN6VkFghYJVieAUUkOqmlWcglKFALFFoqxEikzBVwWgiVLfQhQi5P61glSg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2PXtm2+22R/uuWd4OiDn3JVKVVW12+3uJbm32+05d9117733rrvuOqMq0eVkH0lK6ZUbb/z1c84dajz7rDN/futtr5i5UbOv79JLLwsBN3Xq1H33+ej09db7+6OPfuMb37xj9uyhWYYy6iillPZ83x6ve+1ri6L4wz33nPDFE9d52cuOPvqovfb6cHYH8IH379nX13f21895WllD2GLWrAsu/O4nDvz4aqutFsW+/W1vv+jii7t3M5KNagSQcx45FMPG87Zf/GLFh27rrbeae++9g4OtMWOWnsI1Z86cePDYo491i+qm7OtrApC06aab7LLLLimlWbNm/eY3v8k5//CHP1RnhmAYo96OXd+x665ve9vECRPm//3RCy644C9/+QuAoij232/ft+y0U1EUv7/jjkMOPayqqm45m2+++Rc+99mPf+KgP/7xj1OmTDnqyCM223TTJxYsOPPMs6659toZM17+pRNPHD9+fCqKV225JYD37L7H4sWLp02b9tlPf2r69Ok550sv+/7Xzj67W+CKsN12r599550DA4Njx9bHQ4xqlNSVdDu8+c3XXHvt4OBgN/0nDz980sRJBxx4YHdIR+WN27/hmM9/fsKE8aecetoPf/SjDTfY4KtfPW2HHXascgbw8QM+NmbMmO9ffvmo3Rw5IACW0/d58+YtXLho5kYb3f6733WNPXr06PEc4q4shuqS0HYloizQV9CoekmiJJC0nB11rHVW2SUx1BpAMwmAE+auwazCwASH2hVb8LFFSlQGSWRBQBYSacSg5CIkF0AnmWBteEUkMEPNCFAU+4SMSajc22IGBRFqGCEHUJgligQkSFD9pKMd6yeKzkcHu+oPAEKJUh1LV+YBQAjAITq0+9NAl9TRsEQUTsSUuwh4kWjGtis7a5kJmIUAjVy1XZIx0aJz4cc1F7N7SYj0LJKEup/pkojk2VPq3IrujiUz6+uc5PnKV77ywIMOfvn66x915BFXXPFTAHfeOee66362ZMmSqVOnnnjC8XfdffeiRYtuuPHGG2688ZKLvhe5urzkxS/55JFHTZs27cQvnnDdz342qoKZNm1aVVXz58+Pp4/Mmzdt2rRRlegzMm3ttdddZ50bbrhx+IWVZ9q0tQE8+uijw+1rr334EUdOnjz5lJO/PGfOnMcef/yAj+1//333H3PscVtuscVhhx6y9z77xpKAkYw6Su99z7tfufHGBx1y6FNPPfWqLbc0sz/ed9+ihQtfuckmt99+O4Ctt9rqq6efMTTLUNZcc+paa63129tvv+/++7eYNeva666bNGnSmmtODcXZZVTjM/KPjef1199w0403feADHxhmf/+ee27/hu2KovjiSSc9+eSTI1NKmjNnzkUXXXTfffcdccQRxx9//HrrrXfnnXfWr/jRGHk7fv+73998081LliyZOnXNL514wrXXXffUU0/t/Z8f+T+vetV793jfggULXrvttkN99q/ceOMvfO6zBx1yyB//+EcAJxx/3IMPPvimHXZca621vnHeeXPuuuuee+bu/La3f/ADH3jxi180dBr9I3vtdc89c/feZ98xfX0vf/nLu/YV5Mc//smVP73y4x//+DMagyKlnXbc8bDDP9m17LvvvttsvdW73vPeZ/Q+znj5jPe9//3rvOxlZ55x+v/85jd3/+EPTy5YsOWrXnXbbbcBeMN2233ms59bVjdHDsjDDz+8/L7/6c9/mj59ek+J9ujRY5VBdxQJJEgUKQECFHtmakklusOVSSawXbkxpwRnqrIng5FyNyIZswNEYSgsXKRwqjQas5HKEOWOtlNQEbXBUojEUGECLDdIl/W7ckYj5SKlylkwJ6IwNpNaDoOMliVJNI4FGkWc2A4ABF2QK6algfDsEgyluVRIqutGBSCGp7V22pBACMzIHrkEAbUShAQSRnrY60t1BQqZaBREqpFYVWq15aQZsFRKwh1mdQmkF0lRXnZUOWK7Ug5CyQwQCUt1Z+SUvFNSdGzIufNdrrrq6oGBgTtmz261WlOmrDFv3vxmo3HIQZ+YNm0ayXHjx6+99tr33nvv8GwdbrzpJkl//etfc1Wtsfrqj8ybNzwF0Gw2hirUwcHBob60FeToo44S1NdsXn/DDTfdfPOUKVOGp1hJxo8bH8FTh3H9jTdIevzxx++994+zZs269bbbNtpww5O+9OWqqm77xS/e8553v+IVM3/5y18Nz7ZsXvfa1535ta898cQTAG77xS/CePMtt7xmm21uv/329ddfP6W0HAX5qi23nHvvvYODg3feeWco0XFjxwJYtGjR0GSjGoOPfOTDH/rgB+Pxpz/zmT8/+CBGjOfQ9CtCeHOHcfEll1x51VWv/7d/2+tDH7rzzjmhn4amJHnwoYc1yvKHP7gcwMyZ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m/bcY/fJkyenlLbeaquuRLv55pv32H33Vqt1//0PdBMPY7NNN12yZMl7dt/j3e/d/d3v3f2Xv/zVFrNmAbj8B5e/a7fdht3NUY0AUkplh5UNejAqZlaWZUpmtChz4oQJb9tllylTpkyYMH7nt7519dVXv/vuu0emTClNmjhxpx137Ba1xhprzJ07d1kyFCNuR7w+Xz5jhpm9f889q6oaM3YMgCt+esUB++83ZcqUoii2e/3rG41GZM85L1iw4LjjT/j00UdPnDhx/vy/z549e999PtpsNhuNxhZbzOqGuHr00cfWXWedoTMAr9122xe84AUABgcHlyxZ0pVia6211vnnnvvabesN78sipdRoNKLvjUYjvjWNagSw81vfMnv27IcffvhpRQA552OOPfY97373zJnDX6hDeec7/33cuHEzZ87cdNNNb/l5HT/ryiuv3G/ffQcHB2NlQjCsm8sakGX1HcBaa601YcL4OXfd1bX06NGjx3OLBKPKhJS8ldVuMzsBL5OT3QMkO4kBwijmTHeYLVVDJJORqJdpOijFOk4ZzXNsumflJFgYSiqZQG8mmIk0UWZIZDNxjMnoIrKzEluOypGAhqEgDDKgJApYAmRqlugzJrIgExF+WUCQaq0WvRBCHXY61HmsOkP9EyBBdtRmvT60U5gAgrWoBBTUZQodSdtBAEApCoXCD+0CZEBhIMWoRJTkcdIprZXV8hgTeCaEZE6CBjAWThiAWloD8TOeROuKgw76xKSJE//617+efMro4QAHBga+fs45hx96CIBrrr3ullt+/tKXvKQ7efrNb317//323eeje3/r29++6uprnpZzuZx66mkHHPCx8889Z/7f/37Sl0+O5Ywnn3Lqh/f6j3ft9s4FCxace+65IzcPLZ9nmR3A1Vdf89a37HT90/fr/PGP953x1dOqqvra2V8PV+Kpp5227z77fPP88x577PFu4wH09/f/13f++/hjjy3L4sijjv5TZ5532Chd+N3vlWXjKyd/uUjpD/fcE7EIANx8y88/8P73L2uRYjBr1ua//p//6eqAX/7qV7u/9z1fP+fcq66+Zvz4CcPu5qhGAPvtu89++9Zhs77z3xdc9v3vx+N/mDe+cfu9P/KRePz61//bueedf8ONN87afPN37fbOoigeeugvJ570pccee3xkynPOPe/6G27YdJNNukV9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Vlt99fQz7r//gVErOuTgg/72t799aK8PT5ky5YTjjpt7773z589fwdqXVeadd8657rqfLVmyZOrUqSeecPxdd98dhye9+MUvWm21Sfvstz/JOM77Pz/y4Qf//OBnPvu5bbd9zf777nvZ5ZdjtCYtq6J/JqPezZE9OuBj/5e9846Xqrr2+O+395mZ26jSEVFjwbwYuyYKKtbEhhoTQVETO/YaE0tssWDBXgG72Bsg0pQaK3axRg1YUbqXW2bO2b/3xzozXi+gmIfI0/k5H5xZZ+1yzpm585211977mA/e/+CfF1y42aab/vXUU44YcNT36vzixQ28mrXerE5JIYRfr7/+Hnvs4Zz7zW9+c9pppyVJMnz4cEkTJ02aNHnyg/ff16yt1bqt9rfTz+jSpcslAy9+8qmnlrbJ0A+hc885++233j7+hBN79ex56SUDd++z51dffdXcCXjnnXd377Pnnw86qFu3Vc//5wXND//wOuyQQ955590jBhxVWVGxzjrrmHEZO29ac801VlmlbZ+99nbOdejQAcARhx+2xeab99u///z587fu1cu2Hrj4ogtnzpy50+9+36lTp1uHDp3+5pvl1XD/a5G86IJ/PvLoYw89/PBhhx5aWVlp9iVe5MVv8dLedaOeeGLUE08890zz5R1+seYv/nLIod27d7/j9tuGjxiRz+enTXtxxIiRtbW1Xbp0ueO2W1/e55XvVefS3mCLN9S0VFllLaMiB0ckASK9Y8bLEY1Bke0LL2YoTzTANSShOmLGMwEIRV6EC1AItO03nUOBkCzZFEGGVXQUHPIFZDyzngkUEgAkZchnE9ILgkvgSAJpbUGRo3PI0rIt4R0iR0+RtoZU2hZgw91AMFZMITQYdAKkICYBdGRx8XkAtsKTMaglYaZcZxaW/ICU/URDVdgYOCXDWYViFNRmLJkZto49oABHAqFYD6xhAQLS7FuVeFokI2e5rmlcVpAC7Ky9S09SAEBBEEQ5EISsT0vME50waaKkuXPnvvfevzfZZBMz/mLNNc868wxDw2+6f0NJSNq1b7fKKqvUNzS8+dZbzQ9/U6PHjFm0aNHb77zz9ttv2+bpU6ZO7bnllgDWXntt7/3Samjfvv2666xz6223FwqFzz777OVXXrbi36v1xZXLZk856cQbr7/u/HPPqa6p6dy5s9md98Puude2Avriiy+c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XnoJyQ8+/HDLnr3s0f/AAxctWvT8Cy98Xcs3tewXeXl5Nr3F55937ksvvdR7+x0uvnjgeeeeYzuP/CTVq+dW7777bq9evZoat9629+FHDqiqrrr6qitLt3WJxm23236HnXYe+fioSwZe3KpVy1NO/avd3/r6+gFHHb1lz17bbrf9XXcP69yp09a9egFYZZVV+u6776Arr7Difz74kJ5bb3PWP84+8MADt+vd24znnf/P0vtk9JgxZvw/qrq6uun7c0UqgDU1LbwjyYIgMutDZaSMlLFZ8TG9Y5DqGlxFTY1zzEUu4+iJ+jyC6MTEBpbJTLrGEgMQQ40xFjVwft7V5pkvIB+rLq9YSgIsaBdC8I6AHODBBC6RCwKgjIP3QHHs+eSzL//i04/+sseWj949+IwLr6lp1dKDu+/d909/PmrQuaf0+93md9x0mffZIDQm3GKrbd5/983f9tpeQU70hohAAsTBBRGEbahp4CjBIpZBiBPECZOARAgWXKSRomDgWEJQQlCQQpBkaCrBSBcAjBEFGcmYCwm718EKmF9arQEmkSYdWGEAdEDG0VvYFmJpoN4akQCFAFmSK0EnIJ2+tXwURdHmm2/28MOPHHLwwWPGjq2srPjlL9dr7vSD6fu2XsjnP/7446uvuXa1bt3W69GjTZs2PdZd997776+trR07btzChQs33mgjAHv22fP+Bx548623GhoaXnrp5Q8//LBUw+GHHdaipsVlgwaVNjhJkqRQVMmoEBoaGkaPGZPNZrt27VoqvgK0++67XX/dtXfdcfsVgy7ffLPNmh9eidWiRYt/nHnm8ccd26FDh0MPOfjiCy9Y6xe/aO60YtWqVatrrrrqvHPP6dy586mnnHzr0CHr9ejR3GklUCaT2XbbbW699baTTzrpoYcfrqqq3HDDJQ+TrXhP51zfff909z33fKfnz0H217zpVnDbbdf79TfeGDf+yZIlSZKLB17y1ttvz5079+5hwzp26LDKKqtIyhf1u513Hjd+fGNjY6lIUy37RV5enk1vMYA11lhj4sRJIYTnX3ghn8+vuuoK/QO4ItWrZ88hQ29ZZ+21V1lllZKxkM9/+OGHZ59z7i/WXHODX//6W4whSerq6h586KFcLte9e/c4ju3+AigUCva8sbHxuutvOProo5xzhx966Pgnn3znnXdLxfP5/MuvvPL666/36LGuGUuV5PP5pe04uNNOO95z91233TL02muuPv+8cx975BELcvfr1/fRRx6e+NST994zbJuttwaw7rrrjHjs0YMOPGDHHXcc8dijIx571LY5iKLohOOPGzdm9IQnx195xaDSz5JNNtl4+KOPTJ44oV+/vk0abK611lrr7jvvHD9u7EknnlAydunS5eYbb3hq/Ljbb72lX79+ANZcc82nJkw69LDDd/79bmPGTZo8cVLHNjWRJx1juYIsbsg4YL31fvnY6An7//mI7Xbe7eFREx99YmKb1i022OBXk555PsoxcpLcIcf+9bSzzs15PjRq0oDj/jb4jocfeHT0zrvtHsehrqCoRfvzBg0e969XHh05vveOuzXEcN4HMISQdQRUSNSYV10cAHgyIiPKIKtl2w7r/XqTu4ZcvWDBvDGP3bdg/txNfrsNiD8ccOR9Q6565/UX6xctevHpyTPfe1OgArbeZrt7b7nuF2uv16rtKoWgJAg2xi8kCLZJqdEjDUaD7dFECSDpCCIEEPSulHcJkrS5+1YbAUc6OhICA9KlnSQUSyAAQmLPATq4dElUBaNXACmEEgEhGHgStjg/SaaRUucJB8NhgUiLFmHVeuccAAWEQCzfPNH27dtnMpn/zJix8cYbtW/f/vPPZ3XtsuL+7vx3rTc0NHz66adrrLF6ly5d4jgubfX0+axZXbp0adWqVceOHd58661vlAEA7L///htvtOGFF19cKBSaH1tMURRt13vb2tramTNX6Mqjb7wx/ZRT/9r/wIMuunjgUQOOLG3TuvJr4cKFZ5199ltvv71K27a5XO70M8966+23mzutWM2fP/+IAQNeefXVjh06VFRUHHr4Ea++9lpzp5VAnTt3zmaz/37//Z49t+rcufPHH3+yevfVmzsB+DE8t91mm6++qn355Ze/0/PnoNmz5wCwjdpNI0c+PnDpSTI91l13zpw5pb2XAETe7/L7348c+XgTr29o2S/y8vJseosBTJkydfvtt89kMlttuWXtokXvvvteyfOnpK5du6y66qpPP/PMW2+/3XOrrZodra+vnzFjxrrrfiNhbHFjJpPZbdddFi5c+MEHX8c7mumJ0aMbGhqOPOLwHXfc4fobbmx21KIqM2bMbGb/di1c+NXBhx72q//5nxEjRt51992/23lnANOmvdj/gAO33W77k04+5awzz2jZsuU777y7e589b7/jznHjxu3eZ8/d++y5aNEiAEccftgWm2/eb//+O+78u+HDR1gUH8Amm2yyb7/9Tj7l1GOPPnpp8XWSF13wz8dHjdp1t93z+UJpG7/DDjnknXfe3X7HnY4ccNSrr7wC4IMPPthxu22GDrlp7OiRO+2w7Q69t56zoDYJYKKMV3UUWueUy4TGWG++9Vbf3bcZdtvNT44Z+Yddtt5n123nL6h95fU3Fsybt9lmPevy7qsGbLv978eOGhkkCN1W637oAX8YcNiBZ511TscOnRPxsiuvWTh/zi69tzjhqENOO+Pcbt26hTixEKF3cJ65LCuyyDk4glAQBWebiXbpvkZcKHz88ccWCfz8k5ldu6/ZsvUqnbp2e+O1aRIkEEikQsBq3bp1WbX7q89Nfu/t13/ba7tAlH4ukMg4RE6CKBqGOhIQZGFSOMoxEPAeBBwYJIoCLZJrEU3SjqbxTkfSIpUCQTMba0KGo1aQBCk4pjVIKMVfHeygbJYXHc3HsFYEPEhKtArtAZgTCKQRVFIBIYQlvz/+O1VWVkiK49iRuVy2oaG+srKiudMPpv+69fqGhqqqqlwu25QpGxsbKysrqquqAJT2rmyqTTfZuLqmZs011mjKqYcdduhf/vxne/6Ps8+2X7R333UngC+++OLvZ5xZV1dXcl4BymWzp5x0YpcuXUhW19R07tz5vff+33wTkNxqyy0vHnhJ333/VFVV+dVXS7gLK1gkd9xhh5NOPmXAkUdUV1ctWLAy7mdoH4RCoWAfhLq6RVXFDcSbacV79uvX955702jZt3v+HLRw4cLa2trPZ81qaoyXsjhxTU3NySedeNmgQU2NPXv1rK9veOXVV5sam2rZL/Ly8mx6iwFccdVV11937YEH9K+vrz/t739vaGgoHfopaetevd6YPr2hoWHatGm9evZ8bPjwZg519fWLBwKaGidPmgjg008/PfjQw5b4jWOSdMUVVw4ZfPP1N9zY9DfJNVdfLaiyomLEyJFPjB5txr/97bSTTzrJnh9+xBHvf/BByb+pvpz9ZQhh7rx5n8+aVVNTs9GGGwKorKi46IJ/du/enWRNixbdunWbPn1685IAgF132fX8Cy6wzjw1YULJ/uCDD9XX178wbVpjY2PHjh0sW6OZVltttc6dO99///1xktxx551/PuhAsych6dipY8eOHesbGpp8wyoJCIGFJFRm6IlCIokukhdCoHfMeJGIg0g4IIANeYVATz7++PAdf7frxMmTf73BBt77F16cViggAI8+9rAHGhd88eYbr2y77TaTp07dcMONTzvusLiQnznzP88+PXnbrbd56P676guKvJMSD2YcIiJ4A0MUglBcZSmXrcznGz0ASWBjY0NlVVWLFi0AfLVggU1aSoBETIAtt9n+nemv1NfXv/HiM1ts2Xvc8PsEyqY3AR4uIASAhCA6qDjkDYgGmiIIMXgLn4JKECA6KkU+GTFC6WJS6Rr6dqz4X0qfAohEikBZa4QER1ccoofEFLqRlrE8UggwuIU8Edmy9gIE+tQ9lSQZp0KScxCX6x5L9fUNJCsrKj777LPZX86uqKhsaFjymNEPof+69cqKirq6usbGfNNMxGw2W1/fMHfePAA1NTULFiz4ugAA4Lx/XtBzq62OOmrASSefYsQJYNiwYc8++5w9n79gQYf27QHs3/8AH0UnnXD8zjvteMuttxUr+MGVzWZP//vfBg8Z+q+nnw4hDL75puhbE2f/Lxp40YVrr7126eW+/fYrFApLNJZefqc223TT1157/fkXXqhvqO+zxx533T2succKV6+ePZ9//oXJU6bU1df133//666/obnHSiD7IFRVVs6cOXPW57Oqqqrr65f89b+CPXv0WHe1bt3GjB33nZ4/H3366aezvkmiS1Qmk7lk4MVjxo4bN258U/seu+/++KilBkTxfS7ycvFsdoszmcwN1113+513jBgxcr31elxx+aDDDj/8gyYJTj8Z9ezZ84UXpgF44YVp/fr2XTyDvKqycnG+bGrceptto0zmgvPP23uvPQddceU3Hb+hV159NZ/PvzBtWlPjmf/4x1tvvbVgwQJJJeN11103ceIkez5n7tySvZmsiEJQCEHBRz6Xy115xaCBl1w6bvz4EMLjI0d8y3dHu3arfPLJJ82twNxii4VCoSK35KhQ2zZtFixcaL++Fi5cWPqCuPa6648+asBttwwFcNfdwyZOmoQ0UAdAWU9HxAGNCe6774H1N9gwrQ7YerNfNeQLi/JJIRGInGdjjFiCMGrEiHsffKT63DN3+f0uY554PCgY/9TOnx850LH2qwVtV2nXrl0HSXfcP9IoM5fLfTzjA0eISJKvoco7ZWjxQvri0DKphoaGbDaXdcZ+yGRz9Yvq5835EkBNq9az58wVlATUJaj02Kxn71enPQPp1Ree3X3fv0RRtrGQl1LoCwrG0wIACulAd8qXsANyRCAcmMBAEQ7GlJIhqEjAaNbeHaINqgtWY5FLBVAIshVHmZYlSk1bs4BsehUoi2/CjijtU4CUDtnD0TpSLEgIlL5+n9qT5Umis2fPLhQKq6666oUXD6xdtKhTp44zV+A2mP9d6xUVFV26dPnPf2Z8+tlnURR16NDBBug7d+o0YcLEhoaGWbO++OV66y3+SZs3d+7wESN69ezZr+++t99xpxkXLapb4ge+trZ28NBbrrj8sseGD58zZwkOP4TatWsnYcrUqQCqq6vbtmlTGjcpxLFb7C/LEo3LqNP+fnpz01KMy64Xpk2zv7avv/7G9OlvNj/8Y2jK1Kl2PadNe/Hll19pfnjl0Oeff57P51dfffUTTz7lq9raVVft2jQWks1mSz+cVrDnfv36PfDgg6Uvm2/x/PnozLP+sXDhd0TWnXP/PP+89//9/k03fz1vGkDbtm23/O1vL7v8G1FSLPPt+CE8m93i7qut1qVL5+GPDY+T5LXXXv/wPx9uuummPz0Sraqq2nijjTbeaKODDjwAQDab3XTTTSz1wlRZWdm9e/d3v5mZsLhx4cKFl14+6J6777rr7ru/+OLLJr7frQXz58+fP7+Z8auvamcV882WXSQ7deokYczYsQBatGjRoX370neHFIpEmGr27Dldu3adOfP7pQSY5s6b17JFC+99kiQtW7YsBYPmz59/wYUXAfjjPvuceMLxk6dMSZIkhRzSOeM/VTkcduA+SYBz9AyOdI5Zh/qgxlgAKWSIPOipWZ/O+Gjmf7brvc2OO/3u1BOOipzL5kSgY+eO/56OhGrTtv2cOc9/OeuzxsbGvXfp7alCEKCI9A6OglQQPKkgRCjNVI8cCAUhCZwx84Mok+nQddVZn34socuq3Z98/OHautrPP/nof3696Yz330+AOMg5tGjR4lcbbv6rDTff54AjAGSy2fU3/e20ZyaTIGFrjhKWCFoKIhoJCkxhlIaPSEfVBZAwAIVIwpFMIRO2hKd3sCxTGZ4CEAJFWK3GpAKNRq0VSkx/sUAS5dJzt9YhCEgEBzB1dHFQ5EFIVqPsvCBBJCkEyFBWy3XGUqFQeP6FF/bcs09jY+Ouu/y+rq7urSVlWP5A+r6tZ7LZrl27Hn/ssR99/PGbb701b968d959d98//rGmpmanHXds2bLlSy+/DODRxx790x//uF6PHpUVFRtusMEaa6xRqiGEcMONN+66yy6lyJ/3PlNU6aNr+uyzz1597bXddt21qfEH1dy5c7PZzLrrruucO6B//ziOcxU5OzRr1qya6upmK7ct0fgjSk1+Ny0t3X4Fq2mXVtotXvP5/KTJkw866MDGxsY//XGf2traV15JoXm9Hj0mT5q41557rnjPdu3abbP11g8+9LC5fYvnz0frrrvOsGF39933TyWL9z6bzXrvHF02m7XVP8484/Svvvrqmuuuy2az2Wy2xAG777br66+//umn3xj0XMbb8UN4Ln6LP581K5/P77rrriTXWWedddZZp+mMz5+MfrPFFosWLeq59TY2S33ChImlRbUy2ezqq69+3jnnfPDhh6UkiiUaTTNnznz2uef69f22KT7LriiK7D1Tei8to7788stcLrv++ut774895phCoVBZTMCYPXvOmmus0TREOuqJUccdc3S7du2iKNqud+/sYvHgb9GMGTO+/PLLff6wdzab7b//fiX71r16tW/fHkA+n6+vr7e//wLmzJ69ztprV2Vc5FGdRYscqrKojOg9cpHLRXQIQKiMUDd/9hprrl1wPkGozqptFdpUYtLYx4489pR8Y8PM996EVJ0NJPrud2Cbli3X/+X6v1x/g39Nmbho3qy33njl+JNOat0y276mYrPNt1p99e5ZzwoPMgQBAZGjp+VPIpPxUSbrM7lcrqIiE9XO+eLt11/qd/CxrVq03HXPvq1at33xmckUH7zzxv0OPe7XG23csrpyky22Xr/Hehtt3nPRoq/23vZ/9tp6vT5br/f0xLFb9NzOTj/yPpfNZXMVmVzORxEAEklI8TEAQSJdkASEAATESpfBB0FbN9RQVSmGioAzbATtJVJ4lcEvGWw8HfYKpEos64CIzDhGhCNCsTOAQIiQDFjN6JyTc0a2JoJGuUWLAJKpz/JeT3TI0Fuqqqpuv/WWHXfYYdCVV65ggPherd995x0XnH9efX39+f+8wPDiqquu7tyl8y1DBu+xx+6XXj6otrYWwJix40aPGXPSSSfeftutBx14QBx/Y3z53++//8To0cccfZRlZB991ID77hlmj2bLBAIYMXLkTjvu2HRfyh9UDQ0NNw8efNqppwy5+aYF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x+NjPo4eWXutL73xxhtrr712pxLd/BubfXv77U8/44yur02PRgDnnnf+wxMnpuPOe9XtuS/szvdIQ0PD0Ucd2fH61rj/gQduvuXW9va2NdYYdejBB0+YcM/MmTObmprOPOP0rlcWCoUTTzjhsnHjbr7llm99a5vTTjt1+29/5+MLrI9Pr169uo3oY7Lg2Hs0Tnn99fU33Cgdr7TS8AvPP/+vf/vbCiuskCxmdtzvftve1n7cCSd8Infp4w/zjjvvvPpPV55z7nmVSqX7uTp16vxXY1RmoRrdwUZD1REyFkwOOEhDniNKjSFpH1U9Rb5FaH4lBHjVPQoml6PsKgUW6SGwQDdobjVrKMrgGT2kPdWFzAC5KbkACSBCuQAgC3Ci4shMTOtuAjmy6LnnLMMCASit4CTVUodoMMJEF3P3IARCTq+tHk+Xp8wgAMHoSn7MpCURIU+KMYk6yUyEHLIAKklzASQpIOlEklFCbe4AWdOylKPirFQ9GIMxqWAhuT8lIwWR7sjS8NIkVMoC4RJgBFKdBIQAKIRK7jJTdJFRNKCWd1+bdgqluH/6XgCCtOdfeKG9vf3pp595vcM/NGrU6hecd+5VV16xzTbfTJZttvnmeeeec+UfLz/9tFPXXWedZPzaV7960YUXdouXnXPWmTvu8J2xJ57whwvO32LzzTvtPSL3arX63PPPv/LKKyutNHzAgAGrjhx5zXXXtbS0TLjnnrlz537pi19sbm4eOHDA7bff3t7e/v777995110AYozVajWJwjzPO49Tne3t7ePvvrtYLH7mM5/psc6ufehkYXWm464H6eJXXn2181YA6N+//9c32fiCP1z0zjvvtLe3P/LIo9OmTe88240QwudHj5783HNdjReef94eu+9+8kknnnnG6V/ZqKYPBg0adMxvfp3u/OcXGQbt8XGEEL6/5x6XXXLxFZePO+rII0IIIz73uXGXXRqsNitjzz123+fHe3devyBrr7XW9TfcuOIKK3RWu9222113/fXdXpsejehyV6vVqrsnY7fnvrA73yPrrTfm5VdeefSxx7saJ02aNGPGey0tLTNmvB9jTLJpk002njR58j333td52XLLfXbAgP433Hhjnuc33XRz/379FjER5bZbbznwpz+9/LJLr7v2ms43eeedv3fLzTc9eP9911x91Ve/8pVkzLLs5z878J67xz9w371nnH5aln1o7vWXvvSlO27784gRIwA0NzefftqpD95/38033bjZppsCGDlyldtuvWXPPXbfbLPNbrv1lttuvaVXr14Ahg0b9ocLzr//3nvuuXv8T/bZp2uFi8OCY+/RKKnSwRabb37PvfeWy+XOs4cfdli/vv2OOOqorl+3FmSzTb9+680333/vPd/aZhsAq6266r33TMhCSGd/duBPDz/s0IUNc8EbgkWOfdq0afPmtYxaffWuxjp16vwvQKCSxyiVqGiqinmUOiLNlDIi+QJdCGBGVaNXI9tzK5oXMkaZRBfaq+xdQt9iUpyqAn1KoWSxvRxN6NcQGkuhZIQQUsqS0ZhSxWVkQ2CvAntlLBGGkDsdVo5sqxLyzKhgAZ7y5c1q8zrzFPlOwgsIQCljMVMIABGltJIUiOSFpGr7udOSXxMEDQyQwQkP9GKGYEByQSL10D15JiFBpLkQXS45mEelmaACJEQpQMXMDKzmcgkAjWYMwYIh6WZCeaRHuAMkaXDRjASQxK8kgIxCHj2PgnsAYqw9HQcEwJji9LUCAgUIHnvKnR81atTPD/rlKiuvfNSRR9x5510xxsmTn7vvvvtbW1sHDRp08kknPv/CCy0tLQ8+9NCDDz10w3W1SGgnyy+3/OFHHjVs2LCTx5503/33L0JVJIYNHbrS8OEPPvjQsGHD8jyfPr0m4N6dNm3YsGGPPf74rFmzfvKTfSZMuOe1KVM61cwiyLJsk42/1tLS8uabbw0fPnzBOl986aUPl/goTLjn3m23+ebjTzyRPq64wgrlcrlTgS2aYcOGApgxY0Z3+9Chhx1x5IABA8447dTnnnvu/ZkzD/zpAVNem3Lc8Sess/bahx5y8D777pdmFCxIj49j5+/t9PnRow86+JC5c+euu846Zvbqa6+1zJv3+S98Ic18WG/MmLPPObdrka4MHjxoyJAhTz/zzGtTpqy91lr33ndfv379Bg8e9PwLL3S9rEfjv6XzuXc/sUgeeODBhx96eM899+xm32OPPb6x6dezLDtx7NhZs2YBuP32O8bfNf5nP/vZBxcJUppYrWQYNmzYc88//8EFH2b55Zb7/g/3am5uvvbqq5555plp06c/+eRTt912e0tLy7Bhw/447rJndvj73Llz9/nx3l9ed92dd91t9uzZX9loo+TfTXx+9OjfHXvMQQcf/OqrrwI46cQT3nzzzW9sseWQIUMuu+SS555//qWXXt5m2+2+v+eeyy332a5h9L332uull17eZ9/9GhsaVllllU77YtLD2BdiTGQhbLXllocedninZb/99lt/vTHf/d7O/9b7OHKVkbvtscfwFVc879xznnzqqRdefHHO7NnrrLvu448/DuDrm2zym2OOXdgwF7wh77zzzqLH/sY/3xgxYsQzf/97N3udOnX+uxHYkNHlJPIIUpZWqnQ3M5ecCqSJEKMJNEDV6L2LzAKjq3eREudX4ECQSoFlh5zFDEY3ogrmxkA3IQJVRwgk02SAWsZScgrGKAezQEWPgtw9WqEQCiHPc5TdiwEhZQJFmZl7bUprFLKAQOYuODKkHsOdIOCSGAyBSbBBgJGk5JCAWgYSYfCkHAEA7gogLGlYgilNCGndz+Qgje40kgDTxFCAhEA4aFkgmIL/BAUAUvIu19yroCCPMkNGVKMAFIyQ0h+96BIgEEAGOOEgOuYHQKmqzlEwKWKX0qPqzt13T2hvb//HpEmVSqW5eRkApWLx4IN+ccF55/7u2GN69e49dOjQ7mW68NDDD0t6++23Y54vM3Bg99NdOPqoo8Zddulpp/7+0ccee3jixFKp2FW2lsvlxsaGPM9/9evfZFl21JFHXHLRH7b55tZdKuiBP115xXXXXL39dtsdcdTRra2tPdbZ5fKPzrPPPjt4yJBBgwalj/379587b146PvP00y+75OJOj/KC9O7Vu62n2ZwPPPSgpJkzZ77yyqtrrbVW7969V19ttRtvvjnP88efeOL9mTPXWGNU9zKL5Ktf+eoVf7pq1qxZMcbHn3gi3YqJjzyy4frrA1h55ZVDCItQkOuus87Lr7xSLpcnT5689lprAejV1ASg26yDHo2Jvff+0eWXXZb+rbD88snY7bl/uMS/J/b0beT6668/6OBDb771zz/aa69SqZSM+YedeW/961+zZ8/Z4TvfKRaL391xx4bGxj59F5Xddfudd0h67733Jk9+bv311wfQ2NBw4vHH/fmWmy88/7zeffost9xyALbeauuzzjl3xowZeZ7f/8ADndJt9dVWO/usM4859rcvvfQygKFDh35+9OjTzzizUqm8+eabjz3+2IYbbNCltQ8RPQ4eMnjw4MGtbW1/f/bZ7qcXg25jX4QRwIYbbdjW1t61oY023KBvv36rrLxy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P/nJFVf+6cUXFyvf6Lbbb//GZps1NTUtWCeA084488tfXvfyyy7d9yf7XHzxxQsmD3Vy8kknpiUwf3fsMddefVVnCD4x4d57O+XdxZdcOvXdqaeMHXvh+efNnz///i4O3QWZMOGeBfXEq6++du7ZZx16yMEXXPiH5Eo886yzVlhxhXGXXvK9nXbq7DyAtra2K67804nHH3/VlVes2LHsDhZ4HFdfc+3k554//bRTL7/s0q9/fZPOP+oTH3n0M58ZlvzcC2Ottb70tyef7Czyl7/WlOjdE+4Zf/fd3V6bHo0A9t9v32uvvir9227bbTvq/uhsttmm11591ZZbbLHxxl+79uqrtth88zzGL6+77tlnnn7pxRd/7atfPWnsydOnvwdgu+22feyRid/dccdttvnmY49M/M63vw3gi2uuecN1115/7TWNjY2HHv5Bgk6PPP/8CzffeMPJY086/oQTp02f3traetLYsb8/eeydt982c+bMu++esPKIEQAu/MNFTz719DVXX3XvhLu33fZb3Tx89z/wwFNPP33EYYcBOOroXw0ZMuT2P986/s479vrhDzsdhA888MD81tbx4++aMP6ulFS+6qojx116yYP333fggT896uhfddaWhbDiiiv821Upehx7j0YA39x669vv6Dn6/8KLL153/fW/+fWvun0H68qzz/7j5htvOPvMM04+5fedcnbCPfeusMLy4+++u+uVCw6zxxuysLED2GrLLW+7/fZFBxzq1KnzX0kw0VSJ7vIsWNFQDMidIAsZDfJchWBZZoObvLmBxYzR2dQgI+dXTIAcEssRLVXLXfNa+V6rt+eUWSZR7mLuedlRpPUtojHE3o0sMIY0H1UkYEQpoEgWAkXl0So5q1GABFUdVUd7FfOrLEe4lNEbCmwIKppTgHkUcplLAZ7Rm4osZclhySQfCRGeNCgAggl35a5KrjwiunK5KIJS8mcSgGAuE+iEQxGouqKDIIHMlAUJgACANFKFjGaI0fPI6KxWlOdMg3XVnLAhAHASNLrVtGna815AdI+uSs5KJCTIHdHlSXMmFS8xxiiHICUZDgSm2wZ+a7vtP3jUdf6DnHD8cRdfckmnV/LC88877YwzX/ok8vr/LYVCYdyllxxy2OELesL+f6SlpaWpqanz47/+tWQbNPTIbbfecuTRv5o0aVL3E//XjBkzZoP1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y579xz8OPuTQPM+bm5uPOvKIL6655qzZs8877/x77r23W0/qLBEjRow49je/GTxk8J13frDXQI83ecFHPHLkKj2+dVttueUB++8/aNCym2+51fvvv5/qvPH66+68666NNtywubl53OV/vOHGGwHsvPP3dvrud/v36/futGnnn3/BQw8/vER1LuwFW7ChOnU+AmRaWYlmKhgDAFPVUYlqyALlcGRGyGnWWpEZSkENBVQiypG9MmSmsqsaAaAa2VCEEZngQmaCkDssA0DAKMFQiSpHAhJVIowMFExZYCAEGBk7/HzliAIlkURj5gCqEcUMgYhQISAKkowQEB0wGlUIMrDqKud0R8lSipIgUIDoQJYyh0B94EsUSQVCJNVaVXQ0Fs0gCWkqqQPRlfZaKYSURw9B0dkeIXpGGY0mSBABpEYFumAGCeXIDKmr7iIcjuSfRS66RBcAFz2CERmRpg8QhOAOI4wmelLGlvygEgQCoIAFlCiAYUOHHnbEkQMGDDjjtFOfe+65zn3DVx058ucH/vTEsWPTIjL77Lvft7fffujQIeeed35n2Z123HHKlNd/9ZtjGkql4cOHd9p7ZPiKww8+9NDlPvvZ3/z6V5MmT371tdda5s37/Be+8MwzzwBYb8yYs885d8qU13ts6OBfHjR16tQf7PWj5ubmk0444eVXXpk+ffpitr6wOidPfu6+++5vbW0dNGjQySed+PwLL6Q9jZZb7rP9+/fbd/8DSKZdtn+894/e/Oebvznm2I022vCA/fa76ZZb0FOXFtbQf5Ien+aCIzrwpwdMeW3KccefsM7aax96yMH77LvfEnV+weJJeHVrfYnqfPChhx586KEbrru2m3355ZY//Mijhg0bdvLYk+67//5qtee9wZYGxx7zmxdfePFnP//FRhtueMrJY7fZdrt58+Z1vwh46aWXt9l2u+/vuedyy332d8cd3/300mfvvfZ66aWX99l3v8aGhlVWWSUZF7PziZVWGr7MMgO33f7bZjZo0CAA+/x47y+vu+7Ou+42e/bsr2y0UVrq46QTT3jzzTe/scWWQ4YMueySS557/vn6IrUfGZInHn/czbfceuNNN+39ox81NjYme483ecFHvLC37s677rrzrrv+8vhjnZbE51b63A/2+tEKK6zwx8vH/fm22yqVypNPPnXbbbe3tLQMGzbsj+Mue2aH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hzxkHMfVLdc7nV/+8pfvePwd97r822CxsnLrW9/60Y961N9/6Uuf+exnr7766ov/5m8e+IAHHHbYYf/x535u27Ztn7joIuDd//3dv/yABxxwnpl55itfea973vP2t799tbTWFhvsrZiByy677C8/+clfuNe99m7cm977Jz/1qTv/wJ32bjz5pEded911b3rLW2pMTV/bQXHVVV/73Oc+d8KDH7SysrJYLO585x+41S1vue9FwI1zJXD+Bec/9IQHH3XUUa21n/yJn1gsFjfU/cfveteyS9fX13fv3r23DN2+ffuhhx7yN5/73GbLzMzMzMzMdxOjEJLbhhfYXUneSG19ZD21nlomY6IIE0t7PS0TZLNHu5sxF920MJaRUIMVeevgRWxsbCSaVHuyL82Y9DFb2rKDRbAiL0IrLUJILMSqCMtJIovWqNKeknrP9Y4dwkrJDuxkvbOns17y0RZElFkpp5aJ8Dg9O0K2e1LaL0TImNEVyAqu0gGyI1OY2umppCeohQRSjJJrTCFbJXXlFhokhLGho253m5gW0hPX2wS7LpIIAZJaqKYasqGXKVrztaHM2vpkoM5XJOvwuMc99oht2y699NIXnnEGB2LPnj2vevWrn/zEJwAf+OCHLrzwY//qmGM2c+1f/4Y3nnrKySc98hFveOMb33/eB76p5z/EW970xm984xuf+MRFv/t7z6yZvfjFLznttEe99jWvvuKrX33+6S+s8ND3n/eBww47fO957l3I6fN/+7fvfd/7Tj3l5Mc/4YnAKSefdMrJJ9WpN7/lrR//+Mc3rwTe80d/9JQnP/ntf/COG4oWPe+8D/zCve754Y98tD5u27btP/z7fw/87M/8TLU85WlPv/jiA6feH5AXvuiMh/36r5115itaa1/44hfPOutV+16xwY1x5Tnn/v5isfKiF54+tPbXF19cRQ8O2P22tz32xIc/bOvWrVdeddUZL37J3oP89N3u9uGPfORg0sJmZmZmZmZuDMpOUwSyUa1ji2wyVOym3bG9Z8SwCC9CY8/MrqYtinWy2Ym72yATkyspHE3C4Sp4TxiCtBu0Jpv1HoTSfWtoCEfDMI4WsjNxSFbtvcSWhaLCTqmQghgIO9enlWkOXdEgj4mt9fUcVokqklqaDStqZ3c3UVEFTVM51QYlI0Ob0bGlzVFIVvYsyywlgoDRyvSiWaoc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x3F87/vet2/rvxAOPfTQg3zMmZnvFAf8rVsul2//gz/Yp/HguTHGnJn5dhE2dq+QTSyNODNXzKBMyFRt7LnAkldayS6AMSuWEtupsjUtBKr2JCTGZMRNNANaWmBJkgMt0l0aM7ET7UqBu4XU7a1RqU4yZJYic5O3DjIwZUSRUu/RnA1aaMRLe8gYhMxyDDsHsRIOkwrhRXOTlgnWmCCaqdJINMsMnmzRJg3ItpSEwLKANN00k6UHrcQRamA5QdZC2EjI7iBcelSBmvH0/wCSkynhqYWwG2y8Z9cl2DXUhGEzGFeQYBCUF2pgv9z5s858xcf+x8d/4E53XN2y5R3veOf5F1yw99k73elOjzntUc989nMi9OQnPvGQQw6J1n7wzncGHvO4x+/evXvHjh2nnXrKMccc03s/7wMfPOfcc/fuvg//9t/85GNOO+3QQw95wxvf9KE/+ZPbfd/3Pf3pT3vYwx7eM4H//KsP3bJlywc++MED3uioo4466ZGPuOPxx3/92mvPOefcCz/2MeAg737b2x57wDHvfe9fuMfd777t8MO/euWV55xzbtWBP+6440582MMu/NjH7nH3n19dXT37ta+74MILt23b9ptPftJtjz32f33iE0ds2/bOd7/7E5+4aP8p3dCN9pnPjccBv80DPtGOHTtOPumRt/u+7/vqlVe+7nWv/+SnPvVtTX7/7hzo7t/WmD99t7ud8OAH3/zmN/v1h594zTXXVOPLXvLij55//o/d5S5HHXXUO9/17ve9//3f3OnG5eijj3760556x+OP/8rll59++gv//C/+AnjH29/2u7/3zP/9l38JnPe+95508inDYnjB85532GGHtWH48bveFfiVB59w3XXX7TPajcfRRx/9jP/6W7e73e167+9457teedZZ1Xgwk//bSy65853v/OQnPvH95533yw/4pa1btz7/Bae//7zzhmE49ZST73XPew7D8Jef/OQTnvikcRy3b9/+tKc+5Ud++IevvuaaV7zizA988IP7zGTm2+J2t7vdf/vt3/6eW37PH//xH282HvAl7/8VH3fcHQ74W3fPe9zj1FNO2bHjFj9/j3teddVVNeY73v62P37ve/+/n/qp7du3v/4Nb/yDd7wDeNCDfuWBv/zLRx5xxFcuv/zMM1/50fPP/7bGvKFfsP1vNDPzjyBzkjYReNowKQxjSookEiVZK8NQnimoso5K+GiZLOQWRFM6c/IrU7CQd2+sYjcB7gYQjnQqOigJQnKDnm4C0SClBJfAMnblFNlE2uvpVdjUZnvGXARDeHVB61UOFITCKwOZonaHDxt3K1CEB+QkTZpRXoihdvOsxHNR1URVx1LvOGmCIBMnPRiSChtoQQRMz4s3ZtdxWKMNRBAocjodTiBAks2Y7mC7CTWcMmhDjFY6FciYcqJlSoJKphzi6YWxvxIFjr7VrZ78lKceddRRZ7zw9L/6q7/a3Mb9+4877jGnPerZz33uF7/4ReARJ538i/e//61udcuXv+LMzb4PfMADLrnkC7/128/Ysrp67LHHbrYfkGP/9bFPeNKTvvc2t/nt//pbn/r0pz//t3+78xvf+MEf+qGLLroI+Mmf+ImXvuzll1zyhQPe6AmPf9xll132aw97+Pbt25/zrGf9zec+d8UVVxzk3W9ozE9/+q8+9KE/2bVr144dO573nGd/5rOfrU2evvd7b/P/s3fecXIU1xY+51bPbJBQQhkQGZHkRzY2YAwGbMAmODzAiByFMWAhcs4ZTBQChJDIGYzJOWdjcjZINkiAUGK1YabrnvdHza7FSoIVFoueme+3iJ7q21XdXb2zp2/dW9WjR/dhf9iX5MILLwxgzz12nzB+wjHHHrfeeuvuu88+t9x2G+Z0SnNrqDOZY2/OfkX7/XHff7z/jxNPOnnNNdY4+KARew3bZ55OfvbDk/Bq1/o81fnIo48+8uijN91wfbvyQYsNOvTwIwYOHHj6aac++NBDnbn403HHHvPWm2/tf8Cf1lt33TNOP+1XW271xRdftDcC3n77nV9tudXOO+202GKLnnDiSe13f/vssdtub7/9zl7D9qmrrV1uueVSYQdPPrHUUksuvHCvLbf+tZn17dsXwF577vHDtdbabvuh06ZN+8l666WldE895eQJEyZs8otN+/fvP2b06NffeOPjjz9uX1eVjkHylJNOvPW222++5ZY9dt+9rq4ulc/xJs/exXN76u66++677r772aefaitJLL3U0rvstvviiy8+buwVf7njjlKp9MILL95xx18bGhoGDhw47ooxL/327/NU59wesNkbmvWoKlU6ipLKgTsiUkynCESnSBoAGkkwEsk1GAgLiM7oMslhkrJAUKQU4UKBTqAMpjBTAwiEQFIkXIiOFOVZ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EAg20dwNzgAEU4ALyGG5WQyUwYyZGeRyByAXSQfLDidERYMCBdCRwmnTf4BlAo0pZlcULDgIAzOSlbcIFwUqpBDb+UdWyPYZttcN111z+603jxgxvP3ub8R++/7h6ivH/uW2Wy4eeeFP1l+vrbx374WvGnfFAfv/MX0kue8fhl05dsytN9945hmnLbfsMm2W7VhiySVvu+XmW2++aeyYy/f/4x+7desGYNCgQbfdcvPQodsnm2OOOnKzTTdN2yuttNJtt9z8v7/7Xfp45BGH33bLzbP+3Hj9dWnXAsgvN99s5513al/6/4QlFh909513/OLnm7Tf8R+h9gUdplu3bscefdSN11933rnnLrvccu13z8ahBx/cvmgBo+NX1K1792Q5+tJLBw9evv3uWejevfvJJ55wx+23jRo58j+xrKuvv+mG6/sP6P+1lt9D5qHjOt2yrq7u6ivH9evX72stvzF5njc2NTU0NEyfPn369OlfNDQ0NjaWy+Vv/rvdiWz6i1/ssMPQ9qWdRQdbX3zxxU85+aRrr77qogsvWHeddVLhHHuz45Zzo4On5IAEJLUJpWF3CP36DXjgoSeOOe7kCEbnUssM/vtr77/4ynsvvfrey6+997dX31v3JxsWzA4/6vj7H3zsmedevWTMdcsvPyQl0hAUKnk9ogSjYMKA/v0efvjJE084JRCZafCyy772+vuvvv7+a6+99/rr77/82vs/Xu9nIrOQFQtWk7EmGMEIGNG7Z++zLxzzwJOvjrv+7hVWXqUllxNlR+4V4UUChizw0COPu+v+xx9/5pWLx16/4pCVJSs75GjO4S4BDrojAsstO3jUFTfc/9TL193xwCabbp4ZLKBHr17njxzz5PNvXHPzvSv94H8suEFLLrPcqMuvf/ipv9/21/s333Tzknt09uy+8NkXjXnkmdevufneFVdapRzRIkRXkAfzFLEgsbLEEtwoA4wgQKTReJpgpCRzmCGwMsNUytwHoPRTkaTuyZGcbq1DijTPQvLPVjqSghxKbxLzkV132XmF5Vc4/Mgjd9xp53vuubf97m/Ew48+esCBI7bfYcdxV151yIgRaYHHurra4489puIyBgDQCOD4E07cZbc93njzraOOOnLWvbOz3fZDjzjqmNq62qOOPCJZuvsG668/e+7nmmus/sEHH6y55hrp4ymnnva7bbb93TbbNjc3H33Msb/bZtvfD93hy0csQNTX13/1fajScfbcffem5uadd93t/vvvP/Sgg2Z/VBIk0/oI3bp3I9n2cQGkg1cEYNieeybLu+6++6gjDv8Ky3323ruxqWnb7Yfec++9/4nlLzbZ5JVXX5s0cdLXWn4P6XjHdb7lRj/72Wuvvf7JJ598reU3o7GxqaWlxciampqFFuq20ELdamtqzKxUKjU2NqYlghdk6uq+y+/kDrZ+wH77vf7GG9vvsOOoUZccsP9+3bt3x1x6s+OWc6ODp8Q06GwgZQQJEPVdulw48jJWxqzhwLvvv7v6aiuusfpKP1x9pe222XLmzIbnn33aGADsv/+wLTbb8JWXXzrnvJFeCVAEkrMThCg5yPouXUaOvMxIUYEokB/84701V1tptdVWXHXVFX/32y1nzmx46tmnM5iRwRjMMrNCsCxD9xCGH3LUzMaZW2+6/l9vv/GU0y/MLEtSz4Hoclc5wiPSkoeHDt/7N1ts8OrfXzrrnIvdVDTUGWXWXGZTzpY86Twcc+JZf3vh+Q3WXe20E4869sQze/Tu7eSBBx3T2Dhzs43WvuO2608540ILBReOPfHMl154fqN1VzvrpKOOPfnMgb36ZMRBhx09s3Hm5hv86NZbrj/lzAtrCpkRESqABEDAJBBp9Fxp0F9KWh9p4lMA6W0gdQICRdEdAl3JmiDoTNMTAKKLkohUe+q1f/c0IUKQx/mqRC3YJhttdO7557333j+mz/jitddeb2/xjXj11dc++/SzL75omPzZ5BhjuiXrrPPjt95++7HHn2gz8+gXXDjy3ffenzZt2q233tZ74YV79uz571pmo1wq/etf/zz3vPMXHzRoheWXBxBjfOfdd9dac812lmusscYNN9605BJLJBEcYyyXy2mZuzzP27YXNJZeesmxY0b/7re/+clPfjJ2zOixY0bX19cBCFnYffddr736yhuvv/a4Y48OWQAwdszoXXfd5dxzzrp45IUb/HT99nV9R6R3qlmnrlxyySUuOO/c6669es89d28r7Ne/33HHHnPNVVf++ZxzfjBkSCoMIeyy805jx1x+9ZXjjpxNu6y00kqjL71k8SWWANCzZ88jDj/smquuHHnRhW3v9MsNHnzWGWdsteWWl466eNwVY9Zbd90sy374w7VuuvmW3Xfb7d777qurq11xxRVmrbONhRZa6Jijjjpg//369eu3x+67nXbKycssvXR7owWAjl9RlmU/+tHayfKOv95ZV1e78sortTcCAGRZ9uMf/+j6628Yttded9519ze2NLMtt9jilttu+1rL7yHz1HGdbGlmv/rl5n/561+/1vKbMX3GDAvWpUuX2traQqFgRjMWCoXa2touXboECw0NDfmCGl+75FJLXjrq4t/8eqt11lnn0lEXXzrq4rq6Oszly+rSURfvtOOOZ5x26nnnnvuT9f49GDg7iy+xxNlnnjlu7BW77bpLW+Hsh8+tdQADBwy8atzYjX72s8+AdugAACAASURBVLbDBw1a7JlnnnX3l195pVwu9x/Qf2692XHL2ZnbKfXtO4evdAKDBi3xxJMv/PY3/5sccoH4+SabvPbqy/fdc1fFXQpIXm5paW5pKbW0bLrZFvfec2djc1M5z0848di33nhtypTJ48Ze3q9f/969exMgkFfm+Ezj+gC08cY/f/mVv99zz10AohgFSHm5lJdayqXSL3/5q3vvubPU1CTJ6DXBCkQxWF0h65oV6rsU199go6vGXLLfgYfeffv1XbrUr77mGtGZBKXAckQpSkJ0P+OUY9566/Wpn0+5cuzovn379+3Tt2AoUYMWW/zRJ1/YcqvfUjICwhJLLfvAA/dF9789/3Sp1NJv4KII2XobbnTFZSOHH3TULTddU1dfv8qqawhaaullH3zgvnL0Z597ulRqWWzQYjU1hfU33PjK0SP/dOhRN954bX2X+lXWWMNAiSWgJCs5okhKLslKzpJQdsQUxJqiPyFIknIgVuQoYRAFKaS0ekKkA1Fw0gNlScpCpCq6M911gCAJE0ikaaHmF3379ikWi6ututoN110zZvRlG220YXuLb8quu+xyw3XXnHrKScefeOK0adMBPPDAQxdeNLK9XSvLLL3U1KlTp3zdCvIAmpubP/rooyWXXCJ9vPe++3++ycaz7Ee/fv0G9O//t5deeu/999dYffVZdy3gvP/+BzvtstuNN9382GOP7bTLbjvtsltjYxOAHbbfftX/+Z8//HH/bbcfet99D6Q3MwCLDhx4wPARRxx59LC99+rde+Ev1fUdMWXKVABpcXkAJA89+OAHH3pox513KZfy2traVD5i+J8mjJ+w4867XH/99YcecnCXLl0EbLfttj8YMuSA4QfuuPMuDz74UNtlAhg8ePDwA/Y/8eRTxn/4IYCDRhw4Y8aMnXbZ9fgTTtxrzz379u0LAMKgQYv16Nljr2H77LLb7m+/806fPn0KhcL48eNXX321Pn36TJw4aZGBi7TVmd4Y08aMGTOOPProN958c+FevWpqag474sg333qrzTLG6Okbr5XPJk9uam6etWR2JM2cObN9KZBehOZEXi7n7VJePps8OW00NjYCSFf05ltvrbbaqrNf0az069ev7dr79es7ceKkRRdZrL0RAKBvv36FQuGDDz9cc801+v4Hlj9ae+2ZM2e+9uqrX2v57dHc3Nw8yzJRAD799NOvyCLK8zjhn//8z+f8/1q++lGclc60TM/0D9daq6Fh5uuvvw6gT5++bZa1tbX//Oe/unfrPnkutP2afwXTZ8zoUl9fW1NZtXh2amtr6uvrG2fOXDDF6Af/+GCPvfa++ZbbnnzyyT322nuPvfZOa/Jtt922Pxjyg9m/rAYOGHDwoYcde9xxe+6x+8K95vydTHLE8D89/Mgju++xZ6lc+Vb88MPx5XJ5oa5df7XV1tvvsMNuu+4yderUu+66e931f3rxqEvuvPPOTTbdrK11ABZCTU1NsfjvvM/nn39hnR//OMuy1VdbrbGp6cMPPpy1N/v06dvW7x23nJ253ZD999u33Vc6ABDMsrq6+mJNrVDRjnfcfutJxx+d/HEBBGBACkQMwX75yy3vuP3WpCYlpXSi5ZZf6fPJn02Z/Gku5o4MMDKXys6MqA24+46bTzz+GAcolIUWTxnoCkAxhF/+aqvbb79VMAf+j73zDrPkKM/9+37V3SfMOZNnd3ZmNkorgQIXsDAi2CCwCDZWBBkMNshcw7WxCQZxib5glJGMiCaDQAKEQcKIaEmASJJWARRQ2F1tmrQTz8ycfLqrvvtHnTmanQ3SCiEkvL/nmefp6a7T3dVVXf3VlyqiiYSRkZQwJTDCoVWDUZQa3b716c96Tv/A4OjIrvXrDidhAaGqasPROhB08L6XMMrDn3j0zPTU7NSkU4UiFUSZTDaTyZBUB+vws+t/9IIX/HkYBMc/6zmlcmnrvZsHVq2OotT9Wzc/80+eu3Ll6pHhXevWbghFfnb9j57/ghdLED39mc8tlUt3b76nf9VgFKW2bNn8jD95Tm//4OjwrjVrDmuoChAQAbS5ypEoDKz6JFCASuJYc9pQdaAawpAgVYGmty4IghasAVZJCziFKA18RBcW3WmbMUzWS6lNtSsBKmQxKewjRjaTFWOGBgf/9sy/u/iSS974T/+0evUjs+7w16742j+/+S3fvPKq//O610eLUdL7C4dva8u+/nWv++RnPrP8wH6o1mrZbJvfvv322/tXrVrq8f3HTzvuvs2b6/X6nXfd9bTjmgb6xzXPf97zPv/FS2dnZ21if/HLX8aNpkL3muuuU9WZmZn77tv8GKlpsVgql8st+WlwcGDlyhXfvvrqRr3xjW9+w+/M53PHHH30N668MkmSG268cXpm1ivMTnjuc7902eWFQsFae8ONN8aLeuvDDzvsff/63ks+8tHt27cD6Ovre8KRR37+C1+M43h8fPy2X93Wmm+IMV/5yledc9baycnJdDqtqkmSCBlFUa1WzWSaovDekHz2s5517nnnb1i/3quiW8zPz3uZstGIK5VKpVIRkZGRkXK5UqlUK5XqPj+ilUp1Zl8zq+3bt88WCrOFwuzs7MjISHO7UJgtzE5OTY7vmfexUCgAUGBicrJUKvka7dq160FrlM4sqXsqqlYr2ey+S2bSqVbJVBRWKuUw3EeqOOecs8kD5wyDSqUcRWG5XJmbm5+YnDzllJOv+tZVvvDSc5aKCwe4+iNLuVKpVioAyuXK3Pz83Pz8QrE4v7Dgt/dOTxEEJgrDZc/8d8FD74qPfsmXvOQvrv7O1c2SmQcazhipVivL3oWltN7Q/VGpVFOpVPBguWzDIIiiVL1ef+yb6Vuc8Jznfumyy/YerH70kx+r6uzs7ObNW/7oj56654+arFo1sKKv73vf+16j0bjqquYrU61VAVz1X99S1cnJydtvv+NP//RPl/7Kz0VbjIwMv/yvX/m973+/tefzX7z0Gc84/htfv+Kst73145/4RL1eX9qaUSpstftDL/kQyeVyRx911N5DugJbtm457qn/67LLv2y1qacDYJ1t6tnEBdRAQIGAf3LC86rV6p2/vkUIC6hqrMzmcu94x7svvvADoZDQpouj0oKGiIwEIiStSwjo4vxKIQERGvzJ855XrVRvu/Vm71OaEjGgwAm9Qdul2zKq6qwVMorSlUop15ZJG4SEz/cJVQUc4RJWE9TqMNnc2//vez54wTn1RBuWzun9928+/un/6+tf+5IqLGFVz7/gvOed+IIbbr333As/eu773j1fraQzbaoax7GQ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X79+/fqRkZFWa1bK5Ve+8hW+1/lpiS+5cePGJz7xiaOjo40l7X76qadUKpX779/aaNQBFAqFtlzbUodUv3P10FDrgZRKpXvuvXfvIZ1EGIWZTDaVTifOAnAKGhNFYWDEiEmnUqEJBCDwkpNOv/P220ZHhwkKQPK97zu3VFz4yIcvClOpKJUSkoQhjj36mJtuvvP0l77cy7RCBMZk05Hx50ynUoEINbbuJSedduftt+0eGw6ohlB1oth45FHfuf7Wk047o2FtPdFyrX7DT3/0sr95bb1WO+n0V5RKxVtuvSWxBLDxyKN/9Ms7Tznt5aSK0ADvff85peLCJZdcZKIoSIUAhQwIislkslEqVbcAdWJirFGvv+Sk00huPOKoI448atv9W+q1+k9+fM0rX/P3tWrttL96ValUvOPWTWPjY41G/c9POp3CjUc+ceORR+3YtqXRqF//k2v+9szXV+r1M17+qlKx+KtbNwk1Zdh8NFRSod5ZwSUKn0zKKR2gClpSqaBCDUABlFaFTUkThF9flNBmBnuACjqFU3WumWIUBhAltZVMwCt9hL+ddT6xyczMTOtDoIrzzjv/nLPP/sYVX5udnb3gwgu9ab5ULufz7dVajWStVnPO1ep1gsZIGEbOumq1GhgDQFW9PbTeaLRls2EYJdY+7WlP++tXvDwMw507d33g7HOmp2cAvOiFL/jnN7zBX/fEE//sE5/81E9/+tMXnHgigBe98IV+/1veeta9SyJFlvHVyy8rFou33nrbv33g7GUD1g+vueb4458O4Ljj/mjTzTe3vig33nTTq17515/69HIP1GJxYWBgYPfEhJd9jTETk5MAUqmUt5SRTO/pKFOp7uGm87vjlzfc8PznP+/yy76szr32719XqVS/fPnlURR94uMfDYy5+557btx0ky+5efOWz376U0mSfOSjH/MPeW8qlUqSxEmSFEvFfC4fpVLzC/MAUqk9alcqlTo7OqxNSuVSkiS1Rb/4KJU6KP1oHCfVSqVaaf4cwHkXnP+ud77zzFe/+ns/+EErIu2DF1/8lje96Utf/ML0zOwFH7zIaxG+8rUrwij14Us+FBhzz7333nTzza2TAPjx9dc/81nPfN+//utb3vrWf3nbWeeeffZnPvVJMebuu+/evm17dc84lRaf+ezn3vLmN3350i/u3r37gxdf/DBEjUYjLpXL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" alt="avatar"><br> 查看规则我们可以分析得出</p><br>    外部数据首先在PREROUTING链进行规则匹配（此规则为docker建立的），，跳转到docker链（为iptables五链之外的docker自定义链），查阅iptables规则，当跳转到自定义链时会在自定义链条匹配完毕后移动到原始链的下一个规则。<br>                     外部请求端口为8080的数据转到docker链，根据docker链中已有的两条规则，匹配到第二条规则，转发到docker容器中。（docker0为docker容器的网卡）<br></li><li><p> 容器中的服务响应完毕后,会将数据再转发给宿主机,宿主机又在PREROUTING链中跳转到docker链，docker中的第一条规则被匹配到。规则为RETURN，数据进入INPUT链。此时查看filter表如下。  </p></li></ol><p><img src="data:image/png;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uBycmpt++x79PP/xEAwHdaDaeFCKWsaXq263i2ZVmW57UFmp7nuV1gjL9z+WV/eOkPP7jySh6y5x577rbrrh2biiOPOGLXXXc586yzHcfpiFCU0h5pynNd6vsYYQB46re//cjf/T0AqKr64MYH+CxwMXreEa+ffENbd/1c8OTbXPWfP73hxhvvuG3dPffe+5vfPDg9PWXZ9mHvP7zHkwgAMEZ7Vp3K5fI55645B9YcecQRl3370rXr1i28agkWPjroV/bh4SEA8H3/M5/9JwDYqiDb6YySiThfKhnbsmV0bOxvDz74qCOPPHHWiQQsKNFiZV+6mDut2umqq14fLwrLLLPMMn+lbItNQjcY48WMHN4kbG+J/rK0xayf/fxnXz7xxP3e8Q5d097z7nfzjS8Lyefzsizts88+hJDTTzvNdV1Vm1usHxsbO2D/A7qibyv8TIvuDx2KxeJzzz2/3zve0R3YTalUmpycPO7YY3VdP+g97xkcHHz6mf7uohaCMWaMcRvEg//fQXS+x+N//NSngsHg3nvttfdee23cuLFarT751FNfPOEEURSPPOKIbCbz+ONt08DJyclwKNSzsgAAo6OjBx5wYOfrrWtvPfvMMxKJhCAIRxx+uCRpWiioiXD72lv+5V++ZJrWc/P8fzHqzu6y8qx3H3Bgs9nce9937Ln3PnseeMSGBze99+BDAOA/f/qfJ5900v777adr2kHvec/uu79d1qT//e+ffunL3YG7A/MZo65jtRwkB6KxWETqJ3lvL9+88IJ6vX75d78ry7Isywih666/ftfd38b/1t9995U//NHJXznFtu271q//7Gc+IwjCPvvss9eeez7+xBMD0ejRR38gHo8nEomvf/3rxWKRmzrsscfbk8nk4ODgNy+84JVXXuWBi9HzjvL5vKLI++67LyHkzDPO6NTPBU++vfzh+365XF5z3vkXX3RRJBKZmck/88wzp592qqIosiy/613vHJk1LSoUirusXt3ZNQUAhx16KLdtsizLMIyOeJfJZK695prOPsjFWPjoYDvL3pdPfOLjgUBg77333m+//R7YuJEHrlu37ozTT7csq9vBXE+JFiv7YsUEgEwmEwwGnvnd7zohyyyzzDLLLPMG05bbrrv+hquvuebyyy97+KFNZ591pu/3ORACAAzDuODCC6/8/hX333dvqVS64447d+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vjOOedfwHfG9Thvg0bDjnkved+4xtnnHUWANx3330f/ehH1q69lfr+UUd/sNlsvv3tb1tz7jmapk3ncmed/dXuaxfy1FO/vfP220RRvPCbF03MrlrefsedX/vqV3/4ox91x7znnns++tGPbNr0IKP08COPajabp59x5r/969fvv+9eQRB+/+KL5567BgD22OPt5605V9f16Vzu9DPOZIzxBZTupDi2bd9zzz1HHXVkd5rnnX/+v//wSgC49rrrb7vt9t123fU3v3mw90oAADj/ggt/9MMrn3h88wMbN7744ot8iaz7ll586aVzzjmXR1548/PS+nPBelhlnqUPDOiABEWl5dHprvH+ueeev/uuO13XPeeb36n7vooAgGCMrKYxN8nAgUsvu/DUL5366MMP5Qulf/3GmqrBwrqAEH1w00OHHn7Upk13IUY//enPNG1XJsxxzEre1GI6QZIkQSornv+va8675Pz7H3mkUCied8GFvBdGwJ579vm777rNdd1vnHPu0888w3O7/s7fHHH4odf++le07wPBekT3S+01QXTpD3964dknf+WUr1xy6aW/vvY61/W5xo4ZM77vT+dy45Pl9Iq4MbmlaDEgSkAFs2ktXC5inmc7DoBj55C6U1rX5SKPRT3HcRg4to20QEbVJTDbZ2dTp/f04rO/uuayy8+/6Y77pnP5k75yymuvTa0cCl3z85+s+fYVmx/66M233DA+tsVyHLM+U9RWPfHU5kOO+NCme25GwI79wOElZ34xqWPzxJEPwDzbsuYm6sy3bR+IwgCYa1tW1/tkvmlRPaLjVrNrkkiCsYjklMenqw4AwOpVQ18/61Rd16dz+QsvubA4NW0wOPW00y/65jdvuOmumZn8WeddVMq3kqnAVf/x4yt+8P3HHnn4F//131u2bKGOZfoAVsX3/Yl8YyThz0xUHBIeHFYuv+hbJ5911i+vv1UUxedfeP7UL60rW9LFV1xx8mf/sacZzmGVJscBUCi7UqtN8FX4cBSAK/IXEUoFLRD06yWj263T4rGXAomyTGtlW1RsU1WdqheKSmi7pv8AIEfDyJjuvBokBQeiXt8aBgBCIDWY0txiqwb+n1T2C759yXlnf/WkU8644651RW55xdiZZ3z9vIu+se7eezERXnr51R/+4Pue7++92y5fO/UrmqYVisWLL7m0c3TC889uNl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t77baHIIrPv/D8//73YU3LTaaGzzzzpO2WLau3mhf98qzrb7t9tkYsAABQszLZ70DkyyyKGlOztFqIGs9kQtCYnu5KwahemirGs5nRYb1WrbQGuSZR4skINKb40TFSIolApzVDIzcSZqMVGhoehi7JxqIkMLtniIcQYkZ1VhfYrbY9Eg0So39yLQV8oqf3NTVBCIVUDCybjQCA0ypVNA8AKdEQ0aqemFZFjDGDfisRSaKN6ammxRBtmZGPbrvNd4/6diyRuGkg6EYymTzjxBO232brSq1+9tnnP/L8i4yx4eGhs35+6maLxmynu9bx1SYYChFCdvrIDgzwoV/evwPwmc9//lvHfC+dSuy73/61Wk2QQAO447blNy1fvvtuu6dSyUsv+/WVV10FAIcccvBBBx4YjUTyhfw5Z597591391awoCAKO95+F2Ww30Fft+vT++y525GHHpxMpXb++C6VSj2cG1Hq42Js6JSTT1q2zbJSpXzOqSfc8cBj0J2wy3ffbbdUKvWrSy+74sorEUJqPJeSAUuKxNI51bMMB9r5yaYtx4dz2YRenOyrSCvx4XSADFptY4yt+uREW0yNpWlhomLJibGshACk8JubR4wxhHivcBDEhV5vB/x+v9/v55ZVXAiqqqosy5TSvsoBACiKQgjhSgX8OteORQjZth0KhTRN4xZagiAQQrjirKIorGfOpSgKF6wCdEPXKoriui5n0gBg2zb3bIAx5lSYq+eaphkIBBzHURTF8zy/37+BGrfvAkTCYYRQq92emzAAyli53I02vzZghPyBQCQcbjabum6MjAxPTEyoqgoAwWBQNwwEwBizHYdSaprm8NBQvV4nhMTj8Xq97jiOpuuDQtRoJDLXd8QcWRhChmnm83lZlrnkljE2OTU1o2OwYcik047rVqtVgZBkMqnrOmOs1W7HolFKGSDotDvZXLbTbnueZ1qW3+cHBIwyQSC6rguCEIlGm42GZVnmgHU7jzPn2LZhmq7jJJJJx7Yppa12O5FIOLYtSVK1WqNzdX02DusisgAwNjp6wIEHJZPJ5Tfe8OSTT/KwVQCw/XbbnXHaqd/69rdfffVVANhz70/91ze+MTY2OuiS84jDD1+58qVDvn6oT1W32mqr/vUFsXSrpft9+cubve99v77s0kcfe+yFF19sNhof+ehHH3zwQQD49Kc+9f0f/HDlypd22+OTh33zm2Njoz/+yXH9e8895+zVq1d/9GMfz+VyV1955XPPPz85OXnkEUesXPnSVw4+xKeqS5eu1TPD2sp87LHHr7/+hna7PTQ0dN211zz1mad5dK4lSzZLJhN77LkXxjidTgPA8T897tVXXj3ka1//7Gf/7fRTT73k0kthdpWuueqqp55+em0PeodAdUrZ2NjYl/bbf/H7P3Ttb86/68HH88UiAGy2aPSlWGzPPfeC3hudcfppK1988RuHfn2P3Xc/9+xf7r73vitXTe77mU9+8avfHHvfFpf95mIzv4pHfSzVA2OxsFo2BgVLPz3ltOeeX/lf3zxsj913v/CC8z930Ddx828eZSMjI/vu96XhLbe/8Q8X333/oytXvvKFgw49fP9Ph2KZHw02iJoYTijAkCARlB4epuDUq7ffeeftV17z0NOPz2QDAIDNlyz55tHfGVHIb6/8033X//ZtkZwo8aGkD3M6ow5HEXIgOpRhABDJDMdFibYmJ6o2nHH6SStffPHQbxy17xc/cdKJJ+720MOsVXJcrzeDDerRjs1e/dtLu+31xe997/ChVOoX518k2Fog4CPtjutJkmhpdWfmHJpSZnePTtVUMG436w23aZm+ddivYymUGVbnC6wQEQXKCeORRxyxcuWLXzn4q3wiTE1NKomxs08/6q/PvnDwIV/bY/fdTz3l5N3vu3/WFsJrUYZCIYkvgUuWbJZ7+ZWvfukzEzUnnU4DoGOO/fYHly3b/xvfsidfWPbRT/kyQwHPPvsXP5+Ynv7sv39p7H3D5/38rL9NTo2/+lzDAAAkR7JDASbICGwQQtm01JiuzFNqRYIvkkhG/WB0LCmUGQ30GAvG2G7kiziazC2KaoWJAo+RitV4OiK0+0SHAZe3zccGtBIA9I4CulASYwmvMMUPuxeE16rr0VRUaVf49kYOBiSn3d/VITUWIY18RUgH2muKphrP5CKYadWWZ1liMCBhCScSMgO7XW4YDADcTqUEWA4l4rGQ4raO/c7R16244967bjto//18vj7lzuEAACAASURBVK6o9NxzzixUSv+2+8eleO7qq67676P/d7y06jtHHPbKa69/6+ADdKwuXbpMVshLK1/abY99jjr2qNFU+rzzTml6UZ+ugRq6dfnNNz/2/FN33ZzP5yuVmU/y5ks23/+AAxYvXnzdn67903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2LfXDlFZe/+vJL/N85Z53FL265xRZXXnH5008+8ec7bv/MPvsAAELoZ8f/9P5773nm6aeuuPyP71+2DACWLl366ssvcXetoij+3+9+e/qpp/L97hzwnK+8tPKRhx4847TTeFAxABgeHr78j3944bln/3zH7R//+Mf7+Q868MC7/vKX55995sbrr1+yZLO1PeiWFTf3K//8s8984fOfHxsd7f+86Ybrd/3EJ/plzsHQ0NCrL78UCoX4z+U33vDFL/4HAGy99dLL//D7Z55+6uEHHzjrl7/gqYMPevXllzbqQRuFf//iFw//nyM25OI/Ay48//y5l/7R+Ces0hzEYrHf/ebXLzz37K0rVnzgAx+YmzyAdz5nIBB48vHHRkaG15vzPYgNb5B3PuemjutD13XGWKvVcl1X13XTNA3D4JoGmqZx2SrGmPu94jGTdF3Xdd0wDNu2XdflvMFxHMuyOOWybbvT6TDGNE2zbRtjzPNzL1q8TMZYp9PxPK/T6bTbbV4s5w28AvxewzA6nU65XObOZbkYeO47vAeAMRYFQZIkXTcAoFav25YVDAYBgA34KEAITU1NeTNRJmegqD5AWFUU23FN04pEoq7neYx5jDFglDGPMdO06s3W5ORksVRyPZdSb2Jycg4546Ae5dcRQrQXYmkOmXFdNxgMiIIgCIJj27quT05O5fN5wzT4jYOZ3yIkSZIkyTQtGFDxdx1HlmSMsSzLjuMC6wo958B1HO4tQJIk13HmNDXfpM29BwAAPM8jwly/AoNYl0T2lttu+9Vll+m6vuOOO5xz1lmPP/4EF7V+95hj77n3XgDwPE8Uxanp6Y9+7ONcgyebzfz60ksffewxADjt1FMee/zxr3390O232+6Siy96/Ikn1qGggxD60Q9/MCeU61FHf+fue+6BnnAXAH5+5hn33X//QV/56od32unXl1362OOPcxeYR3zryHyh8I1DD73wwgt23W33fgkY41/+4ueGbvz4uOP6jT4f239oh2w2+52jj7rs0l99ab/9GWM/P/OMNeNrvnXktz+1997nn3vObnt8stn8/9k77zgpivThP53D5JmN7LJkBDGC4feaEPE8UU/FAJwSvDsxK4p3KqAnZhHFRMasKEEwHKB3gCAYyCwCggiSN8yGSZ1TvX/UbjM7O7usHiIe+/0sfGaqn+qqqe6Zfuqpp54nMW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z91puXXvK7RmAqlbrv3ntoIf90p51oIMuyv/vtb9564/V3ly2dPesull1t9LjDDju8+srLm2++OQCEw+FZd/31vXeWPf/cs3QWAgC23XbbJx9//JennPLKSy++/eYbBx144Dra/Pqw/sm//5gY42lTT7znvvu+Meb/IOtfIN9/zI0Vt25Ylj3n7OlPP7V48cIFf771llqtNmZM65OPP3b8ccfuvffeTzz26KMPPwQAhBC/33/nzNtfeuH5xQsXnHzSSfl8/kc/2uyxRx4+4fjj9tlnn6cWLVy8cAHHcbZt//znBy1c8OTLL74wd87sSbvuaprmuHGbP/Tg/F+cfNJee+31xGOPLlm8SJZlaoB44x//8OwzT99z97w9pkzBGKuqahhGrVZzHAdjrGmapmlUQtVUtb+/f/6DDwqC0OgQR+3jRmXihAmPPvZ4e1ub3+8HANu26/U6zdmyrMZx86l6vd7Is26aPT09M++4c0xr67jNNx/KdRRGJA+FQi0tgSVLlui6XigUnvnHP5rjwBpXH3GfFNprf7B8eS7Xv8mmg9Owa2LV66ZpAEDdsuhBLBoNh0PzH3xQ09RsNvvQw8N7740q91iWZZoG/TWe3TSNr79eddnlV2626abbfst5DOI4G0ooXAfNlxBEMRAINLozfyDgXvtOEKOyAW94XYLswoWLrr32uhGBr7zyz/3224/juN13262qKF988eXaAgHg4osueuuN1++5e96555+/Vpe8BMjqa9BSqRQAvPzyK/vvvz/HcZN3312p1T7/fHgsxTLMIQcfvGDBQgBIJpOCIHzx5ZeTJ++eSCS6uro33WSw/V0+Y8YrL7048/bbWltThUKhvwm6MZWmaf39/aIoJJPJJU8//dGKFRO23x4AgsFga2vq3dV3ehw18Btpb2vbYvz4r7/uGHniO4KQrSm1NVd5fTNLly477PAjJuyw45lnTb/+umub394fOAMDAydOm/be++/HolFJko474cT33n9/ZKTvF4TQn2+5ecHChVP22NM067Is0/A//uH3X37x5U932fWOO+68846ZdHbs/PPO3WXnnQ8+9LCf7rLrY489TjUElO232+7mm248c/r0L774AgBu+/OthUJh510nnXb6GVdecQV9EQBgs802DYdDe+69z6TdJ3+wfPk62vz6sP7Jv/+Ye++1V6VSfeedd74x5v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vi4NwBTKFH9geXXqobxodnz/n0ySdfd801x3/0oztS/3r5ZZfphnHUMR865dOfvv7Xv55z3HETnH3unNlr166dM2fODb+9EUtOP+1z537taxddfPHa11477LBDBUEcrxAAvn/pZQ88+CBu19+nTz3t9LVr1x504IHzb5m/du1r886/gOM4AFi29Nlzz5v34qpV0fvuzsJWjaV3kG28zsk33/E1P/uZzyxfvmLDho1brLkLMvkO2fE1owdXhzGGzle8a0KI67roY8N8BYjruqIoep7nuq5pmpicizFmWZYkSQCAskXGGGOsWq0SQtCrimfBZFuMMVEUq9WqLMue5/m+73ke/gCx4TQIGDoWBAEGjTHGKKWojMRr2DXzyE4S3/P6+yebLGeLuI4zrC4dQV0v26hV9Ty3XHYBoHFdsVKpVC6XW9vabMcxDAP1JFher1PHNM36AV3XwVCwOvbw+gsT4/t+PS06UqvV6pfkOs527J8tMlUeWUEQ5s6dc8stt37/e9+7+09/isXUww47tLnSlCEIwkc+ctzNN8+/7NJL77r7blVVJj77nNmzb/jtjfvsvXd9seOzv3r2b66//vmVKw3DeOqpp9euXTteIQD4vu8Mg0oUAAiDwHXdFc8///JLL+233771OvX67qhFQbYLZHhxoKGPHIefzzrrzEcXP7JyxfJFC+8/bu7cxjqThMZynRNmG5869tprrwX33vvc0mcv/f736oVdXV2//5/b8Y4+cOSRWMjz/Pe++52lf3/m+eXL5t98E0ZO1Jk1a9ZTTzy+1157AUA+n7/5phtXrli++JG/nfixj2GFgw8++L6//OUrX/7yE48tee7Zv3/i4x/fqrG0s1znaCbffMfXpJSe+aUv3v7732+x5i7I5Dtkx9eMHlwjgiBIkqRpmiRJoigqipLL5TiO8zxPURT0g1JKk8lkLBbjeV5VVU3TUBggy7KqqmEYysMrfuER0GBFSauiKLIsJxIJPBchJJ1Oh2GIklz04/I8z/N8Op1OJBKEEEqpLMsAgOU41yyKYi6XQ59u8z1EvIthjPX29OCiWbsaU2XIdnZ2SpL0xj/+8eEPf6ijo+PttzfsNnO35kpTBp799TfeOPbYD+PZ37f7kDZgNNOmdU2fPv3pZ555+ZVX5syeDQDZbHbatK7nh1fORMYs3CIzZ8zYZ++933prXfOOKY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JtY3TXHXboofffd+9Lq15cdP+CPffYAwvH7JBMJnP7bbe+8tLqhx544KCDDgKAffbZ543X1vIch03+5/bf/ewnPxk5h/Uvso33btv2vfctOPdr5zTviIh4j6IoCjpWMXGsLMvCsPg1kUioqqppWiwWE0VRkqRYLCZJkqqq+FEQhLrYURAETdMwxSwhRFEUjuMIITjfyPN8PB6Px+MdHR35fL69vb29vT2ZTLa2tiaTSU3TcKOtrS2fz6fT6XQ6nUwmc7lcMpmMx+P5fD4ej6fT6dbW1ng83nwPERHvSoaEEZ879bPnnH32ty+55LXXXz/00EN4fquTbnied+dddzWXTo6f/fQnG97e8PVvXHjC8cf/5rprZ889rrkGAADMO/8CFF4sW/rsuefNe3HVKnxFAIBTTzt97dq1Bx144Pz5N//jH//36po1I1oCAMC88y/IZDJBECxZ/Ag2J4TU32ZkWZZluVwu1730p532uYWLHtjcflthgWeXi/att90uyoosCdTxAwAAjo/n/bAUQkzSZGYXtvQ23RTlBXPnzF67du2cOXP+cPsttZLjBez00z73ta997aKLL1772muHHXaoIIgAcPppnzt3VCEAfP/Syx548EHcrvdGU39O0POjicVit8y/ebS1dOE3L3rs8ccBhsTjAHDJt791yMGH/MdXvtLT3fO+9w1Z24sefPDGm282TfOII2b95rrrli1bXiwWx6z5jhOLxUbf5rYwuusEQbj2mmtuuvnmu//0p89+9jM33vjb40/4KGNszA65/LLLdMM46pgPnfLpT1//61/POW7z94hS+qtfXmWZ1mWXXz7Bs5s8237vC+6/f+GC+375q6vr7oqIiPcwmBUrCALXdTFyC/Wp5XIZo5Dxi4n/mqaJoVqoasWZ32q1ikcwTROdsowxXKCLUmpZliiK6NLjOG5gYEAURQAghPjDc9mEENM08SMhpP5jh5fkOA7OdDuO4w9PQO/KyLIcMtYonMVH1lClGUqpIIiYY2ss/qV0VNsY/L+Nzf8ltthRW0UqlRpKTzYOQx7Zr3z5Kzf89rcrX3jBMIynn37mtddew/JZsw5/5K8PP7982ZlnfglLzjzzS399+KHlzy1dcN+9c+fMwcKTPvnJx5csWfPKy7lcDksA4KEHFp37tXPu+uMdSxY/cvppp9XLm8jn84cecsgNN95YqVT+fM89pVLpwx/6UHMlAADwfd9xHJxewe36T2AYBK7rrnj++dWrV++3374jmgEAAP45QBkQAKASxbbtYBj8SuNfBwDgef6DH/jAsuXLGw/yxGNLvnPJJff86e4HH1j0yU98Agu7urp+/z+3r1yxfNHC+z9w5JGN9Zv41EknPf3kk6+veTmuSpXqUEQXz/kXnnv+35966vmli6//6Xc9w9t/v/2eW/oszw09mu9+55Irr/jh5qNQSRVDx6pHecGc2bNv+O2Ne++5hyhrXsAA4Oyvnv2b669/fuVKwzCeeurptWvXjlcIDb3qDGdahlH9OUHPj+aEE45ftXr1Qw//tanc8z08CM4+cBz3mVNO+cEPL3/11TWDpdKK55/HaitWrOjp6alUKn29fRPXHJMxn9FZZ5356OJH8BkdN3cuFvI8/73vfmfp3595fvmy+Tff1Kh2B4BZs2Y99cTje+21FwDk8/mbb7px5Yrlix/524kf+xgA7LvvPk88tuScs7964oknPvHYkiceW4Lxm11dXXf8vz+sWPbc0r8/c+E3vtF4wMkwuutmzJieyaT/eOedvu/fddfd6VTqgP33H7NDBEH4yEeOu/nm+Zddeuldd9+tqsphh23WBV15xRXpVPrCiy6qv0WMyYkf+7clixcvf27pZ045BQCGh+JQWjociuPd++heggk7pLe3t1bTDzrwwMbCiIj3KqIoors0FosxxtDniv8qioJuV/TXonOUEFIvRPetLMtYn1IqyzLP8yiuRS+MIAiUUqymqmoqlUJvLnptKaXpdFoUxXg8jkpcTHeAWJZVKBRqtZqu64ZhmKaJ2833sIshiqLYkElXVdUteqkJpaI4rh8wnd5q7WU8HleVbcqntC0asH8RQv4F2VgqlaLjpEB1XHcCKxbQI5vJZKZN63rhxRebdwIcccQRJ5/ymQMPOODG397wxz/e6fv+smXL77tvQa1W6+zs/NNdd678xAuVSmXhokULFy16efWqpuZ77rHn57/wxd122+3uu+68b8ECtISamDlzpud5GzduxI9vb9iw2267jXkxW2TmjBn77rPPggX3N+8AUBQFswQDAH6xR+5vZubMGQDQ09PTXD5jxqmnnZ7P5x9ctHDFihW9fX0//9lP17y65qtnnzN3zpwbrv/NnOM+gu/No7l/4cL7Fy5c++orm4u8gXM+98UPHH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b5YIEx5o5eXrgrDEPuo6WUBkGAEOLaAF5hgQdyhWEoy7KqqrOcskfw2NHInvKoZmI5vfhFL37Xu999z5e+5LrunXfedf/99/P2pzzlu//54x/74hfufuELf5G3vPCFv/jxj330C5//3K23fPhpV1/NG5/z7Gd/+pOf/Nq/31co7PrQP/qR21/20l+5+cYbPnnHP1937bWz9gOJwvCBBx747d/53cdddtmVV1xRLBavvOKKd77rXaPR6P0f+MBwOPzhH/ohAHjJL7/knX/+51+85x7XdT/zmTu//vVdd+nvv+51uWzuN17xilnIDb9pOXQ6N0wJcV33xptuUlV1fX19tvkCoih+3/d+791f+MJ84zOf+Yyv3HvvRz/28fnGA/mu7/quWz70oRe/6EX/36c++c8f/9hP/sRPAECxWPyLd7/r3+7+/D99/GM//mM/xtf81Cfu+LN3vH1jff1Tn7jjU5+4I5PJHLbmk570pA9/8IMv+u///VOfuONz/3rXEfv82D9+5H+87KUfuPmmT3/yEz9/3XW8URTF17z6VZ+9684vfP5z//sv3i2K4mGbLy8vv+9v33v35z772bvu/PXrr+eNnHa7bdvjJ37nd843nnLKKaeccjRBEERRxF2kYRjyrAIAMPOtOo7juu54POZGqud53EHL7dcwDLmzlhDCI0m4YcoT0yZJ0uv1eO4C3/dt246iiG/LGHNdlx89iiK+yXg83nt2p5zyKEYEgKWlpZWV5S99+cuLCwGuuuqqn/7Zn3vid37nX7z7XTfeeFOSJHff/YVbbrl1PB7X6/UP3HzTPc/6kmVZt91++223337fvV9Z2Pxxlz3u51/wCxsbG++/+aZbbr2V35BH4HnemTNnnvCEyxHGcRxvb2/z9nNbWxsbG/l8fmVl+Yv33LN3IwCAV77ylU/94R/6iWc9+zieQkmSfvZnfno0Gn3jGw8sLpuyvr4GAAvvrLfccuvtt93+mte8Zr7xMC677NJisfC0H33G0tISf7d+21v/9OzZs9/3Az9Yq9Xef9NN9371q9vb2z/ytKdfddVTXvd7v/eTz3r2bNsD12SMXXrpJYVC/mk/+gyMcblcPmyfAHDZpZc979rrNjY2PvTBv//ghz4UhuH111//A9//fT/1Uz89GA6fdvXVgAQEEd/8B575M09cT//5u/+ab/7yl73sa1/7+i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" alt="avatar"></p><pre><code>从docker0中流出的数据没有被转发也没有被过滤，从而响应了出去。</code></pre><p>参考:<br>iptables是什么,简单易懂.<br><a href="http://www.zsythink.net/archives/1199/">http://www.zsythink.net/archives/1199/</a><br><a href="https://wiki.archlinux.org/index.php/Iptables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/Iptables_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker的安装和使用</title>
      <link href="/2019/07/15/archlinux-xia-docker-an-zhuang-he-chang-yong-ruan-jian/"/>
      <url>/2019/07/15/archlinux-xia-docker-an-zhuang-he-chang-yong-ruan-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><hr><h2 id="1-docker安装和启动"><a href="#1-docker安装和启动" class="headerlink" title="1 docker安装和启动"></a>1 docker安装和启动</h2><h3 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1 安装"></a>1.1 安装</h3><pre><code><pre class="line-numbers language-none"><code class="language-none">sudo pacman -S docker&#x2F;&#x2F;redhet系linuxsudo yum install docker-ce<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></code></pre><p>此时会安装docker和依赖</p><h3 id="1-2-设置ustc的镜像"><a href="#1-2-设置ustc的镜像" class="headerlink" title="1.2 设置ustc的镜像"></a>1.2 设置ustc的镜像</h3><pre class="line-numbers language-none"><code class="language-none">vi &#x2F;etc&#x2F;docker&#x2F;daemon.json  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在该文件中输入如下内容：</p><pre class="line-numbers language-none"><code class="language-none">&#123;&quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;]&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="1-3-Docker守护进程的启动与停止"><a href="#1-3-Docker守护进程的启动与停止" class="headerlink" title="1.3 Docker守护进程的启动与停止"></a>1.3 Docker守护进程的启动与停止</h3><p>启动docker：docker服务即docker守护进程的启动和停止</p><pre class="line-numbers language-none"><code class="language-none">systemctl start docker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>停止docker：</p><pre class="line-numbers language-none"><code class="language-none">systemctl stop docker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>重启docker：</p><pre class="line-numbers language-none"><code class="language-none">systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看docker状态：</p><pre class="line-numbers language-none"><code class="language-none">systemctl status docker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>开机启动：</p><pre class="line-numbers language-none"><code class="language-none">systemctl enable docker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看docker概要信息</p><pre class="line-numbers language-none"><code class="language-none">docker info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看docker帮助文档</p><pre class="line-numbers language-none"><code class="language-none">docker --help<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="2-镜像相关命令"><a href="#2-镜像相关命令" class="headerlink" title="2 镜像相关命令"></a>2 镜像相关命令</h2><h3 id="2-1-查看镜像"><a href="#2-1-查看镜像" class="headerlink" title="2.1 查看镜像"></a>2.1 查看镜像</h3><pre class="line-numbers language-none"><code class="language-none">docker images<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>REPOSITORY：镜像名称</p><p>TAG：镜像标签</p><p>IMAGE ID：镜像ID</p><p>CREATED：镜像的创建日期（不是获取该镜像的日期）</p><p>SIZE：镜像大小</p><p>镜像都是存储在Docker宿主机的/var/lib/docker目录下<br>此目录也是docker的容器的工作目录</p><h3 id="2-2-搜索镜像"><a href="#2-2-搜索镜像" class="headerlink" title="2.2 搜索镜像"></a>2.2 搜索镜像</h3><p>如果你需要从网络中查找需要的镜像，可以通过以下命令搜索</p><pre class="line-numbers language-none"><code class="language-none">docker search 镜像名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>NAME：仓库名称</p><p>DESCRIPTION：镜像描述</p><p>STARS：用户评价，反应一个镜像的受欢迎程度</p><p>OFFICIAL：是否官方</p><p>AUTOMATED：自动构建，表示该镜像由Docker Hub自动构建流程创建的</p><h3 id="2-3-拉取镜像"><a href="#2-3-拉取镜像" class="headerlink" title="2.3 拉取镜像"></a>2.3 拉取镜像</h3><p>拉取镜像就是从中央仓库中下载镜像到本地</p><pre class="line-numbers language-none"><code class="language-none">docker pull 镜像名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>例如，我要下载centos7镜像</p><pre class="line-numbers language-none"><code class="language-none">docker pull centos:7<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-4-删除镜像"><a href="#2-4-删除镜像" class="headerlink" title="2.4 删除镜像"></a>2.4 删除镜像</h3><p>按镜像ID删除镜像</p><pre class="line-numbers language-none"><code class="language-none">docker rmi 镜像ID<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除所有镜像</p><pre class="line-numbers language-none"><code class="language-none">docker rmi &#96;docker images -q&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3-容器相关命令"><a href="#3-容器相关命令" class="headerlink" title="3 容器相关命令"></a>3 容器相关命令</h2><h3 id="3-1-创建与启动容器"><a href="#3-1-创建与启动容器" class="headerlink" title="3.1 创建与启动容器"></a>3.1 创建与启动容器</h3><p>创建容器常用的参数说明：</p><p>创建容器命令：docker run</p><p> -i：表示运行容器</p><p> -t：表示容器启动后会进入其命令行。加入这两个参数后，容器创建就能登录进去。即分配一个伪终端。</p><p> –name :为创建的容器命名。</p><p> -v：表示目录映射关系（前者是宿主机目录，后者是映射到宿主机上的目录），可以使用多个－v做多个目录或文件映射。注意：最好做目录映射，在宿主机上做修改，然后共享到容器上。</p><p> -d：在run后面加上-d参数,则会创建一个守护式容器在后台运行（这样创建容器后不会自动登录容器，如果只加-i -t两个参数，创建后就会自动进去容器）。</p><p> -p：表示端口映射，前者是宿主机端口，后者是容器内的映射端口。可以使用多个-p做多个端口映射</p><p>（1）交互式方式创建容器 创建后会自动登陆进去</p><pre class="line-numbers language-none"><code class="language-none">docker run -it --name&#x3D;容器名称 镜像名称:标签 &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这时我们通过ps命令查看，发现可以看到启动的容器，状态为启动状态  </p><p>退出当前容器</p><pre class="line-numbers language-none"><code class="language-none">exit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>（2）守护式方式创建容器：创建后不会自动登陆进去</p><pre class="line-numbers language-none"><code class="language-none">docker run -di --name&#x3D;容器名称 镜像名称:标签<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>登录守护式容器方式：</p><pre class="line-numbers language-none"><code class="language-none">docker exec -it 容器名称 (或者容器ID)  &#x2F;bin&#x2F;bash<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-2-停止与启动容器"><a href="#3-2-停止与启动容器" class="headerlink" title="3.2 停止与启动容器"></a>3.2 停止与启动容器</h3><p>停止容器：</p><pre class="line-numbers language-none"><code class="language-none">docker stop 容器名称（或者容器ID）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>启动容器：</p><pre class="line-numbers language-none"><code class="language-none">docker start 容器名称（或者容器ID）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-3-查看容器"><a href="#3-3-查看容器" class="headerlink" title="3.3 查看容器"></a>3.3 查看容器</h3><p>查看正在运行的容器</p><pre class="line-numbers language-none"><code class="language-none">docker ps<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看所有容器</p><pre class="line-numbers language-none"><code class="language-none">docker ps –a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看最后一次运行的容器</p><pre class="line-numbers language-none"><code class="language-none">docker ps –l<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看停止的容器</p><pre class="line-numbers language-none"><code class="language-none">docker ps -f status&#x3D;exited<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-4-文件拷贝"><a href="#3-4-文件拷贝" class="headerlink" title="3.4 文件拷贝"></a>3.4 文件拷贝</h3><p>如果我们需要将文件拷贝到容器内可以使用cp命令：容器启动与否均可拷贝</p><pre class="line-numbers language-none"><code class="language-none">docker cp 需要拷贝的文件或目录 容器名称:容器目录<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>也可以将文件从容器内拷贝出来</p><pre class="line-numbers language-none"><code class="language-none">docker cp 容器名称:容器目录 需要拷贝的文件或目录<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-5-目录挂载"><a href="#3-5-目录挂载" class="headerlink" title="3.5 目录挂载"></a>3.5 目录挂载</h3><p>我们可以在创建容器的时候，将宿主机的目录与容器内的目录进行映射，这样我们就可以通过修改宿主机某个目录的文件从而去影响容器。<br>创建容器 添加-v参数 后边为   宿主机目录:容器目录，例如：</p><pre class="line-numbers language-none"><code class="language-none">docker run -di -v &#x2F;usr&#x2F;local&#x2F;myhtml:&#x2F;usr&#x2F;local&#x2F;myhtml --name&#x3D;mycentos3 centos:7<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果你共享的是多级的目录，可能会出现权限不足的提示。</p><p>这是因为CentOS7中的安全模块selinux把权限禁掉了，我们需要添加参数  –privileged=true  来解决挂载的目录没有权限的问题</p><h3 id="3-6-查看容器各种数据"><a href="#3-6-查看容器各种数据" class="headerlink" title="3.6 查看容器各种数据"></a>3.6 查看容器各种数据</h3><p>我们可以通过以下命令查看容器运行的各种数据</p><pre class="line-numbers language-none"><code class="language-none">docker inspect 容器名称（容器ID） <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>也可以直接执行下面的命令直接输出IP地址：注意NetworkSettings 前面的.不可省略</p><pre class="line-numbers language-none"><code class="language-none">docker inspect --format&#x3D;&#39;&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;&#39; 容器名称（容器ID）示例：docker inspect --format&#x3D;&#123;&#123;.NetworkSettings.Networks.bridge.Gateway&#125;&#125; mycentos3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-7-删除容器"><a href="#3-7-删除容器" class="headerlink" title="3.7 删除容器"></a>3.7 删除容器</h3><p>删除指定的容器：不能删除正在运行的容器</p><pre class="line-numbers language-none"><code class="language-none">docker rm 容器名称（容器ID）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="4-实际操作"><a href="#4-实际操作" class="headerlink" title="4 实际操作"></a>4 实际操作</h2><p>根据以上命令拉取一个原生的centos镜像,部署tomcat,jdk,nginx等.</p><h3 id="4-1-操作容器部署jdk和tomcat"><a href="#4-1-操作容器部署jdk和tomcat" class="headerlink" title="4.1 操作容器部署jdk和tomcat"></a>4.1 操作容器部署jdk和tomcat</h3><ol><li>拉取镜像<pre class="line-numbers language-none"><code class="language-none">docker pull centos<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>建立容器<pre class="line-numbers language-none"><code class="language-none">docker run  --name&#x3D;mytomcat -ti  -p 8080:8080 centos &#x2F;bin&#x2F;bash    ## --name:容器的名字  -di:运行且分配一个伪终端,且进入docker内.      ## -p 8080:8080 将docker内的8080端口映射到宿主机的8080端口docker run  --name&#x3D;mytomcat -di  -p 8080:8080 centos &#x2F;bin&#x2F;bash    ## --name:容器的名字  -di:后台运行且分配一个伪终端      ## -p 8080:8080 将docker内的8080端口映射到宿主机的8080端口docker exec -it mytomcat &#x2F;bin&#x2F;bash     ## 进入后台运行的cocker <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>复制tomcat和jdk到容器中的目录<pre class="line-numbers language-none"><code class="language-none">cp tomcat8 mytomcat:&#x2F;usr&#x2F;localcp jdk8 mytomcat:&#x2F;usr&#x2F;local<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li>docker添加环境变量</li></ol><p>docker推荐的环境变量添加方式有两种<br>一是通过dockerfile建立镜像的时候添加.<br>二是run镜像的时候添加参数</p><p>不过我想也可以修改运行中容器的环境变量,不过都不推荐这么做,docker应该是无状态的.</p><p>修改 /etc/profile 文件添加环境变量不管用.查阅资料可知 docker启动容器是非登录状态.<br>修改 /root/.bashrc文件,添加环境变量才起作用.</p><pre class="line-numbers language-none"><code class="language-none">vim &#x2F;root&#x2F;.bashrc <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>添加</p><pre class="line-numbers language-none"><code class="language-none">export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;jdk8export PATH&#x3D;$JAVA_HOME&#x2F;bin:$PATH export CLASSPATH&#x3D;.:$JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>(这么做是在不推荐,环境变量应该在建立镜像的时候添加,使用dockerfile)<br>5. 进入tomcat目录下,运行tomcat.</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;usr&#x2F;local&#x2F;tomcat8&#x2F;bin&#x2F;startup.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>宿主机启动浏览器访问 localhost:8080即可访问docker内的tomcat服务.</p><p>可挂载宿主机上线目录到容器中的tomcat工作目录,启动容器时即可访问上线的web应用.</p><h3 id="4-2-使用dockerfile和镜像-搭建tomcat-jdk8新镜像"><a href="#4-2-使用dockerfile和镜像-搭建tomcat-jdk8新镜像" class="headerlink" title="4.2 使用dockerfile和镜像 搭建tomcat+jdk8新镜像."></a>4.2 使用dockerfile和镜像 搭建tomcat+jdk8新镜像.</h3><p>(1). 编辑Dockerfile文件</p><pre class="line-numbers language-none"><code class="language-none">vim Dockerfile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">#依赖镜像名称和IDFROM centos:latest#指定镜像创建者信息MAINTAINER xiaobai#COPY 是相对路径jar,把java添加到容器中COPY jdk8 &#x2F;usr&#x2F;local&#x2F;tomcatCOPY tomcat &#x2F;usr&#x2F;local&#x2F;jdk8# 这里不知道为啥复制的时候全都复制的tomcat或者jdk8里面的子目录 还需要在docker中再添加目录(会主动创建)#配置java环境变量ENV JAVA_HOME &#x2F;usr&#x2F;java&#x2F;jdk8ENV JRE_HOME $JAVA_HOME&#x2F;jreENV CLASSPATH $JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar:$JRE_HOME&#x2F;lib:$CLASSPATHENV PATH $JAVA_HOME&#x2F;bin:$PATH# 设置容器run自启动tomcatENTRYPOINT [&quot;&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;bin&#x2F;catalina.sh&quot;,&quot;run&quot;]# 不使用 startup.sh 因为是后台进行,docker会直接退出.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>(2). 执行命令构建镜像</p><pre class="line-numbers language-none"><code class="language-none">docker build -t&#x3D;&#39;mytomcat:test&#39; .<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意后边的空格和点，不要省略</p><p>(3). 查看镜像是否建立完成</p><pre class="line-numbers language-none"><code class="language-none">docker images<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>(4).  运行新创建的容器</p><p>写一个html页面</p><pre class="line-numbers language-none"><code class="language-none">cd ~&#x2F;env&#x2F;tool&#x2F;tomcat&#x2F;tomcat01-docker&#x2F;webappsmkdir ROOTvim index.html输入一下内容&lt;html&gt;&lt;body&gt;&lt;h2&gt;Hello tomcat+docker!&lt;&#x2F;h2&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>运行容器</p><pre class="line-numbers language-none"><code class="language-none">docker run --name&#x3D;mytomcat -di -p 8080:8080 -v ~&#x2F;dev&#x2F;tool&#x2F;tomcat&#x2F;tomcat01-docker&#x2F;webapps:&#x2F;usr&#x2F;local&#x2F;tomcat&#x2F;webapps&#x2F; mytomcat:test &#x2F;bin&#x2F;bash# -di 后台运行# -v 将宿主机目录挂载到tomcat服务目录下  宿主机目录:docker中目录# -p 端口映射 宿主机端口:docker中端口# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>宿主机访问localhost:8080 访问成功.</p><h2 id="5-容器的备份"><a href="#5-容器的备份" class="headerlink" title="5 容器的备份"></a>5 容器的备份</h2><h3 id="5-1-容器保存为镜像"><a href="#5-1-容器保存为镜像" class="headerlink" title="5.1 容器保存为镜像"></a>5.1 容器保存为镜像</h3><p>我们可以通过以下命令将容器保存为镜像</p><pre class="line-numbers language-none"><code class="language-none">docker commit mytomcat mytomcat_i:test执行 docker images 查看当前的境像，发现mytomcat_i存在<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="5-2-镜像备份"><a href="#5-2-镜像备份" class="headerlink" title="5.2 镜像备份"></a>5.2 镜像备份</h3><p>我们可以通过以下命令将镜像保存为tar 文件</p><pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; -o表示输出docker  save -o mynginx.tar mynginx_i会将境像mynginx_i保存在本地，保存为mynginx.tar文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="5-3-镜像恢复与迁移"><a href="#5-3-镜像恢复与迁移" class="headerlink" title="5.3 镜像恢复与迁移"></a>5.3 镜像恢复与迁移</h3><p>先删除掉mynginx_i镜像  然后执行此命令进行恢复</p><pre class="line-numbers language-none"><code class="language-none">docker load -i mynginx.tar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>-i 输入的文件</p><p>执行后再次查看镜像，可以看到镜像已经恢复</p><hr><p>参考 ：<br><a href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></p><p>想了解docker镜像和容器存储原理的可以看几篇很不错的文章<br><a href="https://www.cnblogs.com/wdliu/p/10483252.html">https://www.cnblogs.com/wdliu/p/10483252.html</a><br><a href="https://sq.163yun.com/blog/article/172542620051890176">https://sq.163yun.com/blog/article/172542620051890176</a><br>这一篇比较老，浓重的翻译腔。<br><a href="http://dockone.io/article/783">http://dockone.io/article/783</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JS模块化工具requirejs</title>
      <link href="/2019/06/30/js-mo-kuai-hua-gong-ju-requirejs/"/>
      <url>/2019/06/30/js-mo-kuai-hua-gong-ju-requirejs/</url>
      
        <content type="html"><![CDATA[<h1 id="requirejs-amd的一种实现"><a href="#requirejs-amd的一种实现" class="headerlink" title="requirejs amd的一种实现"></a>requirejs amd的一种实现</h1><p>最近上手一个项目用到了requirejs，以前没有接触过，写一下学习的过程。</p><p>常规的js，如果想要引用另一个js的函数或者变量，需要在同一个页面引入。 </p><p>造成两个问题</p><ol><li><p> 页面引入过多 script 标签，很难看，难以维护。</p></li><li><p> js会阻塞浏览器渲染页面。 </p></li></ol><p>使用requeryjs可以做到模块化加载，可以不在页面引入，在js中使用另一个js的函数。</p><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><h4 id="1-常见api"><a href="#1-常见api" class="headerlink" title="1.常见api"></a>1.常见api</h4><p>require会定义三个变量：define,require,requirejs，其中require === requirejs，一般使用require更简短</p><h5 id="define-定义一个模块"><a href="#define-定义一个模块" class="headerlink" title="define :定义一个模块"></a>define :定义一个模块</h5><p>定义模块案例</p><p>a.js</p>  <pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"it works"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>  <span class="token comment">// fun1();</span>    <span class="token keyword">return</span><span class="token punctuation">&#123;</span>        fun1<span class="token operator">:</span>fun1    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="require-引入模块"><a href="#require-引入模块" class="headerlink" title="require:引入模块"></a>require:引入模块</h5><p>引入模块案例</p><p>b.js</p><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">aa</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        aa<span class="token punctuation">.</span><span class="token function">fun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token function">fun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>require()有两个参数，第一个是加载模块的数组，第二个是回调函数，在加载完后运行。函数的参数和前面数组引入的模块对应。 </p><p>在页面中引入b.js和require.js,不用引入a.js就能使用a.js的函数了如</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/require.js<span class="token punctuation">"</span></span> <span class="token attr-name">data-main</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/main.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/b.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-全局配置"><a href="#2-全局配置" class="headerlink" title="2.全局配置"></a>2.全局配置</h4><p>上面在页面中引入js文件，使用了data-main属性，是require提供的全局配置，”js/main.js”的文件内容如下： </p><p>使用path对象（数组）定义js文件的引入映射。</p><pre class="line-numbers language-js" data-language="js"><code class="language-js">require<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>    paths <span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token string">"jquery"</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"http://libs.baidu.com/jquery/2.0.3/jquery"</span><span class="token punctuation">,</span> <span class="token string">"js/jquery"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token string">"a"</span><span class="token operator">:</span><span class="token string">"js/a"</span><span class="token punctuation">,</span>        <span class="token string">"b"</span><span class="token operator">:</span><span class="token string">"js/b"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样原本需要在requeire语句中需要写的全路径，只需写对应的名字即可。</p><p>如果不使用这个这个属性，那么有两个选择</p><ol><li>在require语句所在文件上方 使用require.config(), 内容同上。 </li></ol><p>缺点：这样每个文件都写也不方便。</p><ol start="2"><li>直接在require的时候在数组中写全路径。这样不定义data-main属性. </li></ol><p>特点：比较常用。</p>]]></content>
      
      
      
        <tags>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
